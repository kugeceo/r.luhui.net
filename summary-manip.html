<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>26 数据整理 | R语言教程</title>
  <meta name="description" content="李东风在北京大学数学科学学院开设本科生《统计软件》教材。采用R的bookdown制作，输出格式为bookdown::gitbook." />
  <meta name="generator" content="bookdown 0.21 and GitBook 2.6.7" />

  <meta property="og:title" content="26 数据整理 | R语言教程" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="李东风在北京大学数学科学学院开设本科生《统计软件》教材。采用R的bookdown制作，输出格式为bookdown::gitbook." />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="26 数据整理 | R语言教程" />
  
  <meta name="twitter:description" content="李东风在北京大学数学科学学院开设本科生《统计软件》教材。采用R的bookdown制作，输出格式为bookdown::gitbook." />
  

<meta name="author" content="李东风" />


<meta name="date" content="2020-12-28" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="slides.html"/>
<link rel="next" href="summary-summ.html"/>
<script src="static/js/jquery.min.js"></script>
<link href="static/css/style.css" rel="stylesheet" />
<link href="static/css/plugin-table.css" rel="stylesheet" />
<link href="static/css/plugin-bookdown.css" rel="stylesheet" />
<link href="static/css/plugin-highlight.css" rel="stylesheet" />
<link href="static/css/plugin-search.css" rel="stylesheet" />
<link href="static/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="static/css/plugin-clipboard.css" rel="stylesheet" />






<div style="display:none">
    <script src="http://s11.cnzz.com/z_stat.php?id=610720&web_id=610720" language="JavaScript"></script>
</div>





<script src="static/js/empty-anchor.js"></script>
<script src="static/js/htmlwidgets.js"></script>
<link href="static/css/str_view.css" rel="stylesheet" />
<script src="static/js/str_view.js"></script>
<link href="static/css/wordcloud.css" rel="stylesheet" />
<script src="static/js/wordcloud2-all.js"></script>
<script src="static/js/hover.js"></script>
<script src="static/js/wordcloud2.js"></script>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  jax: ["input/TeX","output/SVG"],
  extensions: ["tex2jax.js","MathMenu.js","MathZoom.js"],
  TeX: {
    extensions: ["AMSmath.js","AMSsymbols.js","noErrors.js","noUndefined.js"]
  }
});
</script>
<script type="text/javascript"
   src="static/js/mathjax.js">
</script>


<style type="text/css">
code.sourceCode > span { display: inline-block; line-height: 1.25; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="http://www.math.pku.edu.cn/teachers/lidf/docs/Rbook/html/_Rbook/index.html">R语言教程</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>前言</a></li>
<li class="part"><span><b>I 介绍</b></span></li>
<li class="chapter" data-level="1" data-path="intro.html"><a href="intro.html"><i class="fa fa-check"></i><b>1</b> R语言介绍</a><ul>
<li class="chapter" data-level="1.1" data-path="intro.html"><a href="intro.html#intro-hist-char"><i class="fa fa-check"></i><b>1.1</b> R的历史和特点</a><ul>
<li class="chapter" data-level="1.1.1" data-path="intro.html"><a href="intro.html#intro-hc-hist"><i class="fa fa-check"></i><b>1.1.1</b> R的历史</a></li>
<li class="chapter" data-level="1.1.2" data-path="intro.html"><a href="intro.html#intro-hc-char"><i class="fa fa-check"></i><b>1.1.2</b> R的特点</a></li>
</ul></li>
<li class="chapter" data-level="1.2" data-path="intro.html"><a href="intro.html#intro-install"><i class="fa fa-check"></i><b>1.2</b> R的下载与安装</a><ul>
<li class="chapter" data-level="1.2.1" data-path="intro.html"><a href="intro.html#intro-ins-down"><i class="fa fa-check"></i><b>1.2.1</b> R的下载</a></li>
<li class="chapter" data-level="1.2.2" data-path="intro.html"><a href="intro.html#intro-ins-install"><i class="fa fa-check"></i><b>1.2.2</b> R软件安装</a></li>
<li class="chapter" data-level="1.2.3" data-path="intro.html"><a href="intro.html#intro-ins-other-soft"><i class="fa fa-check"></i><b>1.2.3</b> 辅助软件</a></li>
</ul></li>
<li class="chapter" data-level="1.3" data-path="intro.html"><a href="intro.html#intro-ins-packages"><i class="fa fa-check"></i><b>1.3</b> R扩展软件包的安装与管理</a><ul>
<li class="chapter" data-level="1.3.1" data-path="intro.html"><a href="intro.html#intro-ins-pack-ins"><i class="fa fa-check"></i><b>1.3.1</b> 安装</a></li>
<li class="chapter" data-level="1.3.2" data-path="intro.html"><a href="intro.html#intro-ins-pack-gitbioc"><i class="fa fa-check"></i><b>1.3.2</b> Github和BioConductor的扩展包</a></li>
<li class="chapter" data-level="1.3.3" data-path="intro.html"><a href="intro.html#intro-ins-pack-upd"><i class="fa fa-check"></i><b>1.3.3</b> 更新扩展包</a></li>
<li class="chapter" data-level="1.3.4" data-path="intro.html"><a href="intro.html#intro-ins-pack-verup"><i class="fa fa-check"></i><b>1.3.4</b> 迁移扩展包</a></li>
<li class="chapter" data-level="1.3.5" data-path="intro.html"><a href="intro.html#intro-ins-pack-renv"><i class="fa fa-check"></i><b>1.3.5</b> 项目私有扩展包目录</a></li>
</ul></li>
<li class="chapter" data-level="1.4" data-path="intro.html"><a href="intro.html#intro-ruse"><i class="fa fa-check"></i><b>1.4</b> 基本R软件的用法</a><ul>
<li class="chapter" data-level="1.4.1" data-path="intro.html"><a href="intro.html#intro-ruse-run"><i class="fa fa-check"></i><b>1.4.1</b> 基本运行</a></li>
<li class="chapter" data-level="1.4.2" data-path="intro.html"><a href="intro.html#intro-ruse-proj"><i class="fa fa-check"></i><b>1.4.2</b> 项目目录</a></li>
</ul></li>
<li class="chapter" data-level="1.5" data-path="intro.html"><a href="intro.html#intro-rstudio"><i class="fa fa-check"></i><b>1.5</b> RStudio软件</a><ul>
<li class="chapter" data-level="1.5.1" data-path="intro.html"><a href="intro.html#intro-rstudio-intro"><i class="fa fa-check"></i><b>1.5.1</b> 介绍</a></li>
<li class="chapter" data-level="1.5.2" data-path="intro.html"><a href="intro.html#intro-rstudio-proj"><i class="fa fa-check"></i><b>1.5.2</b> 项目</a></li>
<li class="chapter" data-level="1.5.3" data-path="intro.html"><a href="intro.html#intro-rstudio-help"><i class="fa fa-check"></i><b>1.5.3</b> 帮助</a></li>
<li class="chapter" data-level="1.5.4" data-path="intro.html"><a href="intro.html#intro-rstudio-shortcuts"><i class="fa fa-check"></i><b>1.5.4</b> 使用技巧</a></li>
<li class="chapter" data-level="1.5.5" data-path="intro.html"><a href="intro.html#intro-rstudio-rmd"><i class="fa fa-check"></i><b>1.5.5</b> Rmd文件</a></li>
</ul></li>
<li class="chapter" data-level="1.6" data-path="intro.html"><a href="intro.html#intro-ins-ex"><i class="fa fa-check"></i><b>1.6</b> 练习</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="intro-example.html"><a href="intro-example.html"><i class="fa fa-check"></i><b>2</b> R语言入门运行样例</a><ul>
<li class="chapter" data-level="2.1" data-path="intro-example.html"><a href="intro-example.html#i-e-command-line"><i class="fa fa-check"></i><b>2.1</b> 命令行界面</a></li>
<li class="chapter" data-level="2.2" data-path="intro-example.html"><a href="intro-example.html#i-e-arith-op"><i class="fa fa-check"></i><b>2.2</b> 四则运算</a><ul>
<li class="chapter" data-level="2.2.1" data-path="intro-example.html"><a href="intro-example.html#i-e-arith-op-poker"><i class="fa fa-check"></i><b>2.2.1</b> 计算例子</a></li>
<li class="chapter" data-level="2.2.2" data-path="intro-example.html"><a href="intro-example.html#i-e-a-o-ex"><i class="fa fa-check"></i><b>2.2.2</b> 练习</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="intro-example.html"><a href="intro-example.html#i-e-math-func"><i class="fa fa-check"></i><b>2.3</b> 数学函数</a><ul>
<li class="chapter" data-level="2.3.1" data-path="intro-example.html"><a href="intro-example.html#i-e-m-f-sqrt"><i class="fa fa-check"></i><b>2.3.1</b> 数学函数——平方根、指数、对数</a></li>
<li class="chapter" data-level="2.3.2" data-path="intro-example.html"><a href="intro-example.html#i-e-m-f-round"><i class="fa fa-check"></i><b>2.3.2</b> 数学函数——取整</a></li>
<li class="chapter" data-level="2.3.3" data-path="intro-example.html"><a href="intro-example.html#i-e-m-f-sin"><i class="fa fa-check"></i><b>2.3.3</b> 数学函数——三角函数</a></li>
<li class="chapter" data-level="2.3.4" data-path="intro-example.html"><a href="intro-example.html#i-e-m-f-asin"><i class="fa fa-check"></i><b>2.3.4</b> 数学函数——反三角函数</a></li>
<li class="chapter" data-level="2.3.5" data-path="intro-example.html"><a href="intro-example.html#i-e-m-f-dist"><i class="fa fa-check"></i><b>2.3.5</b> 分布函数和分位数函数</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="intro-example.html"><a href="intro-example.html#i-e-output"><i class="fa fa-check"></i><b>2.4</b> 输出</a><ul>
<li class="chapter" data-level="2.4.1" data-path="intro-example.html"><a href="intro-example.html#i-e-o-simple"><i class="fa fa-check"></i><b>2.4.1</b> 简单输出</a></li>
<li class="chapter" data-level="2.4.2" data-path="intro-example.html"><a href="intro-example.html#i-e-o-sink"><i class="fa fa-check"></i><b>2.4.2</b> 用<code>sink()</code>函数作运行记录</a></li>
<li class="chapter" data-level="2.4.3" data-path="intro-example.html"><a href="intro-example.html#i-e-o-ex"><i class="fa fa-check"></i><b>2.4.3</b> 练习</a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="intro-example.html"><a href="intro-example.html#i-e-vector"><i class="fa fa-check"></i><b>2.5</b> 向量计算与变量赋值</a></li>
<li class="chapter" data-level="2.6" data-path="intro-example.html"><a href="intro-example.html#i-e-workspace"><i class="fa fa-check"></i><b>2.6</b> 工作空间介绍</a><ul>
<li class="chapter" data-level="2.6.1" data-path="intro-example.html"><a href="intro-example.html#i-e-w-ex"><i class="fa fa-check"></i><b>2.6.1</b> 练习</a></li>
</ul></li>
<li class="chapter" data-level="2.7" data-path="intro-example.html"><a href="intro-example.html#i-e-graph"><i class="fa fa-check"></i><b>2.7</b> 绘图示例</a><ul>
<li class="chapter" data-level="2.7.1" data-path="intro-example.html"><a href="intro-example.html#i-e-g-curve"><i class="fa fa-check"></i><b>2.7.1</b> 函数曲线示例</a></li>
<li class="chapter" data-level="2.7.2" data-path="intro-example.html"><a href="intro-example.html#i-e-g-barplot"><i class="fa fa-check"></i><b>2.7.2</b> 条形图示例</a></li>
<li class="chapter" data-level="2.7.3" data-path="intro-example.html"><a href="intro-example.html#i-e-g-scatter"><i class="fa fa-check"></i><b>2.7.3</b> 散点图示例</a></li>
<li class="chapter" data-level="2.7.4" data-path="intro-example.html"><a href="intro-example.html#i-e-g-demo"><i class="fa fa-check"></i><b>2.7.4</b> R软件自带的图形示例</a></li>
<li class="chapter" data-level="2.7.5" data-path="intro-example.html"><a href="intro-example.html#i-e-g-ex"><i class="fa fa-check"></i><b>2.7.5</b> 练习</a></li>
</ul></li>
<li class="chapter" data-level="2.8" data-path="intro-example.html"><a href="intro-example.html#i-e-summary"><i class="fa fa-check"></i><b>2.8</b> 汇总统计示例</a><ul>
<li class="chapter" data-level="2.8.1" data-path="intro-example.html"><a href="intro-example.html#i-e-s-table"><i class="fa fa-check"></i><b>2.8.1</b> 表格数据</a></li>
<li class="chapter" data-level="2.8.2" data-path="intro-example.html"><a href="intro-example.html#i-e-s-t-read-table"><i class="fa fa-check"></i><b>2.8.2</b> 读入表格数据</a></li>
<li class="chapter" data-level="2.8.3" data-path="intro-example.html"><a href="intro-example.html#i-e-s-ex"><i class="fa fa-check"></i><b>2.8.3</b> 练习</a></li>
<li class="chapter" data-level="2.8.4" data-path="intro-example.html"><a href="intro-example.html#i-e-s-qual-freq"><i class="fa fa-check"></i><b>2.8.4</b> 分类变量频数统计</a></li>
<li class="chapter" data-level="2.8.5" data-path="intro-example.html"><a href="intro-example.html#i-e-s-num-summ"><i class="fa fa-check"></i><b>2.8.5</b> 数值型变量的统计</a></li>
<li class="chapter" data-level="2.8.6" data-path="intro-example.html"><a href="intro-example.html#i-e-s-ex2"><i class="fa fa-check"></i><b>2.8.6</b> 练习</a></li>
</ul></li>
<li class="chapter" data-level="2.9" data-path="intro-example.html"><a href="intro-example.html#i-e-source"><i class="fa fa-check"></i><b>2.9</b> 运行源程序文件</a><ul>
<li class="chapter" data-level="2.9.1" data-path="intro-example.html"><a href="intro-example.html#i-e-source-enc"><i class="fa fa-check"></i><b>2.9.1</b> 源文件编码</a></li>
<li class="chapter" data-level="2.9.2" data-path="intro-example.html"><a href="intro-example.html#i-e-cwd"><i class="fa fa-check"></i><b>2.9.2</b> 当前工作目录</a></li>
<li class="chapter" data-level="2.9.3" data-path="intro-example.html"><a href="intro-example.html#i-e-source-ex"><i class="fa fa-check"></i><b>2.9.3</b> 练习</a></li>
</ul></li>
<li class="chapter" data-level="2.10" data-path="intro-example.html"><a href="intro-example.html#i-e-appendix-data"><i class="fa fa-check"></i><b>2.10</b> 附录：数据</a><ul>
<li class="chapter" data-level="2.10.1" data-path="intro-example.html"><a href="intro-example.html#i-e-appendix-data-tax"><i class="fa fa-check"></i><b>2.10.1</b> 公司纳税数据样例</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>II 数据类型与相应的运算</b></span></li>
<li class="chapter" data-level="3" data-path="prog-type-intro.html"><a href="prog-type-intro.html"><i class="fa fa-check"></i><b>3</b> 常量与变量</a><ul>
<li class="chapter" data-level="3.1" data-path="prog-type-intro.html"><a href="prog-type-intro.html#p-t-const"><i class="fa fa-check"></i><b>3.1</b> 常量</a></li>
<li class="chapter" data-level="3.2" data-path="prog-type-intro.html"><a href="prog-type-intro.html#p-t-cv-var"><i class="fa fa-check"></i><b>3.2</b> 变量</a></li>
<li class="chapter" data-level="3.3" data-path="prog-type-intro.html"><a href="prog-type-intro.html#p-t-type"><i class="fa fa-check"></i><b>3.3</b> R数据类型</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="prog-type-num.html"><a href="prog-type-num.html"><i class="fa fa-check"></i><b>4</b> 数值型向量及其运算</a><ul>
<li class="chapter" data-level="4.1" data-path="prog-type-num.html"><a href="prog-type-num.html#p-t-num"><i class="fa fa-check"></i><b>4.1</b> 数值型向量</a></li>
<li class="chapter" data-level="4.2" data-path="prog-type-num.html"><a href="prog-type-num.html#p-t-arith"><i class="fa fa-check"></i><b>4.2</b> 向量运算</a><ul>
<li class="chapter" data-level="4.2.1" data-path="prog-type-num.html"><a href="prog-type-num.html#p-t-arith-scalar"><i class="fa fa-check"></i><b>4.2.1</b> 标量和标量运算</a></li>
<li class="chapter" data-level="4.2.2" data-path="prog-type-num.html"><a href="prog-type-num.html#p-t-arith-vec-with-scalar"><i class="fa fa-check"></i><b>4.2.2</b> 向量与标量运算</a></li>
<li class="chapter" data-level="4.2.3" data-path="prog-type-num.html"><a href="prog-type-num.html#p-t-arith-vec-eq-len"><i class="fa fa-check"></i><b>4.2.3</b> 等长向量运算</a></li>
<li class="chapter" data-level="4.2.4" data-path="prog-type-num.html"><a href="prog-type-num.html#p-t-arith-vec-uneq-len"><i class="fa fa-check"></i><b>4.2.4</b> 不等长向量的运算</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="prog-type-num.html"><a href="prog-type-num.html#p-t-vfunc"><i class="fa fa-check"></i><b>4.3</b> 向量函数</a><ul>
<li class="chapter" data-level="4.3.1" data-path="prog-type-num.html"><a href="prog-type-num.html#p-t-vfunc-vector-func"><i class="fa fa-check"></i><b>4.3.1</b> 向量化的函数</a></li>
<li class="chapter" data-level="4.3.2" data-path="prog-type-num.html"><a href="prog-type-num.html#p-t-vfunc-sort"><i class="fa fa-check"></i><b>4.3.2</b> 排序函数</a></li>
<li class="chapter" data-level="4.3.3" data-path="prog-type-num.html"><a href="prog-type-num.html#p-t-vfunc-stat"><i class="fa fa-check"></i><b>4.3.3</b> 统计函数</a></li>
<li class="chapter" data-level="4.3.4" data-path="prog-type-num.html"><a href="prog-type-num.html#p-t-vfunc-seq"><i class="fa fa-check"></i><b>4.3.4</b> 生成规则序列的函数</a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="prog-type-num.html"><a href="prog-type-num.html#p-t-complex"><i class="fa fa-check"></i><b>4.4</b> 复数向量</a></li>
<li class="chapter" data-level="4.5" data-path="prog-type-num.html"><a href="prog-type-num.html#p-t-vfunc-ex"><i class="fa fa-check"></i><b>4.5</b> 练习</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="prog-type-logi.html"><a href="prog-type-logi.html"><i class="fa fa-check"></i><b>5</b> 逻辑型向量及其运算</a><ul>
<li class="chapter" data-level="5.1" data-path="prog-type-logi.html"><a href="prog-type-logi.html#p-t-logical-vec"><i class="fa fa-check"></i><b>5.1</b> 逻辑型向量与比较运算</a></li>
<li class="chapter" data-level="5.2" data-path="prog-type-logi.html"><a href="prog-type-logi.html#p-t-lvec-logic-op"><i class="fa fa-check"></i><b>5.2</b> 逻辑运算</a></li>
<li class="chapter" data-level="5.3" data-path="prog-type-logi.html"><a href="prog-type-logi.html#p-t-lvec-logic-op-vec"><i class="fa fa-check"></i><b>5.3</b> 逻辑运算函数</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="prog-type-char.html"><a href="prog-type-char.html"><i class="fa fa-check"></i><b>6</b> 字符型数据及其处理</a><ul>
<li class="chapter" data-level="6.1" data-path="prog-type-char.html"><a href="prog-type-char.html#p-t-char"><i class="fa fa-check"></i><b>6.1</b> 字符型向量</a></li>
<li class="chapter" data-level="6.2" data-path="prog-type-char.html"><a href="prog-type-char.html#p-t-char-paste"><i class="fa fa-check"></i><b>6.2</b> <code>paste()</code>函数</a></li>
<li class="chapter" data-level="6.3" data-path="prog-type-char.html"><a href="prog-type-char.html#p-t-char-toupper"><i class="fa fa-check"></i><b>6.3</b> 转换大小写</a></li>
<li class="chapter" data-level="6.4" data-path="prog-type-char.html"><a href="prog-type-char.html#p-t-char-nchar"><i class="fa fa-check"></i><b>6.4</b> 字符串长度</a></li>
<li class="chapter" data-level="6.5" data-path="prog-type-char.html"><a href="prog-type-char.html#p-t-char-substr"><i class="fa fa-check"></i><b>6.5</b> 取子串</a></li>
<li class="chapter" data-level="6.6" data-path="prog-type-char.html"><a href="prog-type-char.html#p-t-char-asnum"><i class="fa fa-check"></i><b>6.6</b> 类型转换</a></li>
<li class="chapter" data-level="6.7" data-path="prog-type-char.html"><a href="prog-type-char.html#p-t-char-strsplit"><i class="fa fa-check"></i><b>6.7</b> 字符串拆分</a></li>
<li class="chapter" data-level="6.8" data-path="prog-type-char.html"><a href="prog-type-char.html#p-t-char-gsub"><i class="fa fa-check"></i><b>6.8</b> 字符串替换功能</a></li>
<li class="chapter" data-level="6.9" data-path="prog-type-char.html"><a href="prog-type-char.html#p-t-char-regexp"><i class="fa fa-check"></i><b>6.9</b> 正则表达式</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="prog-type-index.html"><a href="prog-type-index.html"><i class="fa fa-check"></i><b>7</b> R向量下标和子集</a><ul>
<li class="chapter" data-level="7.1" data-path="prog-type-index.html"><a href="prog-type-index.html#p-t-subset-int"><i class="fa fa-check"></i><b>7.1</b> 正整数下标</a></li>
<li class="chapter" data-level="7.2" data-path="prog-type-index.html"><a href="prog-type-index.html#p-t-subset-negint"><i class="fa fa-check"></i><b>7.2</b> 负整数下标</a></li>
<li class="chapter" data-level="7.3" data-path="prog-type-index.html"><a href="prog-type-index.html#p-t-subset-all"><i class="fa fa-check"></i><b>7.3</b> 空下标与零下标</a></li>
<li class="chapter" data-level="7.4" data-path="prog-type-index.html"><a href="prog-type-index.html#p-t-subset-over"><i class="fa fa-check"></i><b>7.4</b> 下标超界</a></li>
<li class="chapter" data-level="7.5" data-path="prog-type-index.html"><a href="prog-type-index.html#p-t-subset-logic"><i class="fa fa-check"></i><b>7.5</b> 逻辑下标</a></li>
<li class="chapter" data-level="7.6" data-path="prog-type-index.html"><a href="prog-type-index.html#p-t-subset-which"><i class="fa fa-check"></i><b>7.6</b> <code>which()</code>、<code>which.min()</code>、<code>which.max()</code>函数</a></li>
<li class="chapter" data-level="7.7" data-path="prog-type-index.html"><a href="prog-type-index.html#p-t-subset-names"><i class="fa fa-check"></i><b>7.7</b> 元素名</a></li>
<li class="chapter" data-level="7.8" data-path="prog-type-index.html"><a href="prog-type-index.html#p-t-subset-mapping"><i class="fa fa-check"></i><b>7.8</b> 用R向量下标作映射</a></li>
<li class="chapter" data-level="7.9" data-path="prog-type-index.html"><a href="prog-type-index.html#p-t-subset-set"><i class="fa fa-check"></i><b>7.9</b> 集合运算</a></li>
<li class="chapter" data-level="7.10" data-path="prog-type-index.html"><a href="prog-type-index.html#p-t-set-ex"><i class="fa fa-check"></i><b>7.10</b> 练习</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="prog-type-attr.html"><a href="prog-type-attr.html"><i class="fa fa-check"></i><b>8</b> R数据类型的性质</a><ul>
<li class="chapter" data-level="8.1" data-path="prog-type-attr.html"><a href="prog-type-attr.html#p-t-modes-typeof"><i class="fa fa-check"></i><b>8.1</b> 存储模式与基本类型</a></li>
<li class="chapter" data-level="8.2" data-path="prog-type-attr.html"><a href="prog-type-attr.html#p-t-modes-as"><i class="fa fa-check"></i><b>8.2</b> 类型转换与类型升档</a></li>
<li class="chapter" data-level="8.3" data-path="prog-type-attr.html"><a href="prog-type-attr.html#p-t-modes-attr"><i class="fa fa-check"></i><b>8.3</b> 属性</a><ul>
<li class="chapter" data-level="8.3.1" data-path="prog-type-attr.html"><a href="prog-type-attr.html#p-t-modes-attr-asfun"><i class="fa fa-check"></i><b>8.3.1</b> <code>attributes</code>函数</a></li>
<li class="chapter" data-level="8.3.2" data-path="prog-type-attr.html"><a href="prog-type-attr.html#p-t-modes-attr-attrfun"><i class="fa fa-check"></i><b>8.3.2</b> <code>attr</code>函数</a></li>
<li class="chapter" data-level="8.3.3" data-path="prog-type-attr.html"><a href="prog-type-attr.html#p-t-modes-attr-names"><i class="fa fa-check"></i><b>8.3.3</b> <code>names</code>属性</a></li>
<li class="chapter" data-level="8.3.4" data-path="prog-type-attr.html"><a href="prog-type-attr.html#p-t-modes-attr-dim"><i class="fa fa-check"></i><b>8.3.4</b> <code>dim</code>属性</a></li>
</ul></li>
<li class="chapter" data-level="8.4" data-path="prog-type-attr.html"><a href="prog-type-attr.html#p-t-modes-class"><i class="fa fa-check"></i><b>8.4</b> 类属</a></li>
<li class="chapter" data-level="8.5" data-path="prog-type-attr.html"><a href="prog-type-attr.html#p-t-modes-str"><i class="fa fa-check"></i><b>8.5</b> <code>str()</code>函数</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="prog-type-date.html"><a href="prog-type-date.html"><i class="fa fa-check"></i><b>9</b> R日期时间</a><ul>
<li class="chapter" data-level="9.1" data-path="prog-type-date.html"><a href="prog-type-date.html#prog-type-dt-intro"><i class="fa fa-check"></i><b>9.1</b> R日期和日期时间类型</a></li>
<li class="chapter" data-level="9.2" data-path="prog-type-date.html"><a href="prog-type-date.html#prog-type-dt-fromchr"><i class="fa fa-check"></i><b>9.2</b> 从字符串生成日期数据</a></li>
<li class="chapter" data-level="9.3" data-path="prog-type-date.html"><a href="prog-type-date.html#p-t-date-format"><i class="fa fa-check"></i><b>9.3</b> 日期显示格式</a></li>
<li class="chapter" data-level="9.4" data-path="prog-type-date.html"><a href="prog-type-date.html#p-t-date-comp"><i class="fa fa-check"></i><b>9.4</b> 访问日期时间的组成值</a></li>
<li class="chapter" data-level="9.5" data-path="prog-type-date.html"><a href="prog-type-date.html#p-t-date-round"><i class="fa fa-check"></i><b>9.5</b> 日期舍入计算</a></li>
<li class="chapter" data-level="9.6" data-path="prog-type-date.html"><a href="prog-type-date.html#p-t-date-calc"><i class="fa fa-check"></i><b>9.6</b> 日期计算</a><ul>
<li class="chapter" data-level="9.6.1" data-path="prog-type-date.html"><a href="prog-type-date.html#p-t-date-calc-dur"><i class="fa fa-check"></i><b>9.6.1</b> 时间长度</a></li>
<li class="chapter" data-level="9.6.2" data-path="prog-type-date.html"><a href="prog-type-date.html#p-t-date-calc-per"><i class="fa fa-check"></i><b>9.6.2</b> 时间周期</a></li>
<li class="chapter" data-level="9.6.3" data-path="prog-type-date.html"><a href="prog-type-date.html#p-t-date-calc-int"><i class="fa fa-check"></i><b>9.6.3</b> 时间区间</a></li>
</ul></li>
<li class="chapter" data-level="9.7" data-path="prog-type-date.html"><a href="prog-type-date.html#prog-type-dt-baser"><i class="fa fa-check"></i><b>9.7</b> 基本R软件的日期功能</a><ul>
<li class="chapter" data-level="9.7.1" data-path="prog-type-date.html"><a href="prog-type-date.html#p-t-date-baser-gen"><i class="fa fa-check"></i><b>9.7.1</b> 生成日期和日期时间型数据</a></li>
<li class="chapter" data-level="9.7.2" data-path="prog-type-date.html"><a href="prog-type-date.html#p-t-date-baser-comp"><i class="fa fa-check"></i><b>9.7.2</b> 取出日期时间的组成值</a></li>
<li class="chapter" data-level="9.7.3" data-path="prog-type-date.html"><a href="prog-type-date.html#p-t-date-baser-calc"><i class="fa fa-check"></i><b>9.7.3</b> 日期计算</a></li>
</ul></li>
<li class="chapter" data-level="9.8" data-path="prog-type-date.html"><a href="prog-type-date.html#p-t-date-ex"><i class="fa fa-check"></i><b>9.8</b> 练习</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="prog-type-fact.html"><a href="prog-type-fact.html"><i class="fa fa-check"></i><b>10</b> R因子类型</a><ul>
<li class="chapter" data-level="10.1" data-path="prog-type-fact.html"><a href="prog-type-fact.html#p-t-fact"><i class="fa fa-check"></i><b>10.1</b> 因子</a></li>
<li class="chapter" data-level="10.2" data-path="prog-type-fact.html"><a href="prog-type-fact.html#p-t-factor-table"><i class="fa fa-check"></i><b>10.2</b> <code>table()</code>函数</a></li>
<li class="chapter" data-level="10.3" data-path="prog-type-fact.html"><a href="prog-type-fact.html#p-t-factor-tapply"><i class="fa fa-check"></i><b>10.3</b> <code>tapply()</code>函数</a></li>
<li class="chapter" data-level="10.4" data-path="prog-type-fact.html"><a href="prog-type-fact.html#summ-by-forcats"><i class="fa fa-check"></i><b>10.4</b> forcats包的因子函数</a></li>
<li class="chapter" data-level="10.5" data-path="prog-type-fact.html"><a href="prog-type-fact.html#p-t-factor-ex"><i class="fa fa-check"></i><b>10.5</b> 练习</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="prog-type-list.html"><a href="prog-type-list.html"><i class="fa fa-check"></i><b>11</b> 列表类型</a><ul>
<li class="chapter" data-level="11.1" data-path="prog-type-list.html"><a href="prog-type-list.html#p-t-list"><i class="fa fa-check"></i><b>11.1</b> 列表</a></li>
<li class="chapter" data-level="11.2" data-path="prog-type-list.html"><a href="prog-type-list.html#p-t-list-access"><i class="fa fa-check"></i><b>11.2</b> 列表元素访问</a></li>
<li class="chapter" data-level="11.3" data-path="prog-type-list.html"><a href="prog-type-list.html#p-t-list-as"><i class="fa fa-check"></i><b>11.3</b> 列表类型转换</a></li>
<li class="chapter" data-level="11.4" data-path="prog-type-list.html"><a href="prog-type-list.html#p-t-list-ex-strsplit"><i class="fa fa-check"></i><b>11.4</b> 返回列表的函数示例–<code>strsplit()</code></a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="prog-type-matrix.html"><a href="prog-type-matrix.html"><i class="fa fa-check"></i><b>12</b> R矩阵和数组</a><ul>
<li class="chapter" data-level="12.1" data-path="prog-type-matrix.html"><a href="prog-type-matrix.html#p-t-array-matrix"><i class="fa fa-check"></i><b>12.1</b> R矩阵</a></li>
<li class="chapter" data-level="12.2" data-path="prog-type-matrix.html"><a href="prog-type-matrix.html#p-t-array-subset"><i class="fa fa-check"></i><b>12.2</b> 矩阵子集</a></li>
<li class="chapter" data-level="12.3" data-path="prog-type-matrix.html"><a href="prog-type-matrix.html#p-t-array-cbind"><i class="fa fa-check"></i><b>12.3</b> <code>cbind()</code>和<code>rbind()</code>函数</a></li>
<li class="chapter" data-level="12.4" data-path="prog-type-matrix.html"><a href="prog-type-matrix.html#p-t-array-matop"><i class="fa fa-check"></i><b>12.4</b> 矩阵运算</a><ul>
<li class="chapter" data-level="12.4.1" data-path="prog-type-matrix.html"><a href="prog-type-matrix.html#p-t-array-matop-arith"><i class="fa fa-check"></i><b>12.4.1</b> 四则运算</a></li>
<li class="chapter" data-level="12.4.2" data-path="prog-type-matrix.html"><a href="prog-type-matrix.html#p-t-array-matop-mult"><i class="fa fa-check"></i><b>12.4.2</b> 矩阵乘法</a></li>
<li class="chapter" data-level="12.4.3" data-path="prog-type-matrix.html"><a href="prog-type-matrix.html#p-t-array-matop-vecmat"><i class="fa fa-check"></i><b>12.4.3</b> 向量与矩阵相乘</a></li>
<li class="chapter" data-level="12.4.4" data-path="prog-type-matrix.html"><a href="prog-type-matrix.html#p-t-array-matop-inprod"><i class="fa fa-check"></i><b>12.4.4</b> 内积</a></li>
<li class="chapter" data-level="12.4.5" data-path="prog-type-matrix.html"><a href="prog-type-matrix.html#p-t-array-matop-outer"><i class="fa fa-check"></i><b>12.4.5</b> 外积</a></li>
</ul></li>
<li class="chapter" data-level="12.5" data-path="prog-type-matrix.html"><a href="prog-type-matrix.html#p-t-array-solve"><i class="fa fa-check"></i><b>12.5</b> 逆矩阵与线性方程组求解</a></li>
<li class="chapter" data-level="12.6" data-path="prog-type-matrix.html"><a href="prog-type-matrix.html#p-t-array-apply"><i class="fa fa-check"></i><b>12.6</b> <code>apply()</code>函数</a></li>
<li class="chapter" data-level="12.7" data-path="prog-type-matrix.html"><a href="prog-type-matrix.html#p-t-array-array"><i class="fa fa-check"></i><b>12.7</b> 多维数组</a></li>
</ul></li>
<li class="chapter" data-level="13" data-path="prog-type-df.html"><a href="prog-type-df.html"><i class="fa fa-check"></i><b>13</b> 数据框</a><ul>
<li class="chapter" data-level="13.1" data-path="prog-type-df.html"><a href="prog-type-df.html#p-t-dataframe"><i class="fa fa-check"></i><b>13.1</b> 数据框</a></li>
<li class="chapter" data-level="13.2" data-path="prog-type-df.html"><a href="prog-type-df.html#p-t-df-access"><i class="fa fa-check"></i><b>13.2</b> 数据框内容访问</a></li>
<li class="chapter" data-level="13.3" data-path="prog-type-df.html"><a href="prog-type-df.html#p-t-df-rownames"><i class="fa fa-check"></i><b>13.3</b> 数据框的行名</a></li>
<li class="chapter" data-level="13.4" data-path="prog-type-df.html"><a href="prog-type-df.html#p-t-df-notmatrix"><i class="fa fa-check"></i><b>13.4</b> 数据框与矩阵的区别</a></li>
<li class="chapter" data-level="13.5" data-path="prog-type-df.html"><a href="prog-type-df.html#p-t-df-gl-func"><i class="fa fa-check"></i><b>13.5</b> <code>tidyr::expand_grid()</code>函数</a></li>
<li class="chapter" data-level="13.6" data-path="prog-type-df.html"><a href="prog-type-df.html#p-t-tibble"><i class="fa fa-check"></i><b>13.6</b> <code>tibble</code>类型</a></li>
<li class="chapter" data-level="13.7" data-path="prog-type-df.html"><a href="prog-type-df.html#p-t-df-ex"><i class="fa fa-check"></i><b>13.7</b> 练习</a></li>
</ul></li>
<li class="chapter" data-level="14" data-path="prog-type-ws.html"><a href="prog-type-ws.html"><i class="fa fa-check"></i><b>14</b> 工作空间和变量赋值</a><ul>
<li class="chapter" data-level="14.1" data-path="prog-type-ws.html"><a href="prog-type-ws.html#p-t-ws"><i class="fa fa-check"></i><b>14.1</b> 工作空间</a></li>
<li class="chapter" data-level="14.2" data-path="prog-type-ws.html"><a href="prog-type-ws.html#p-t-nlvname"><i class="fa fa-check"></i><b>14.2</b> 非法变量名</a></li>
<li class="chapter" data-level="14.3" data-path="prog-type-ws.html"><a href="prog-type-ws.html#p-t-ws-asign"><i class="fa fa-check"></i><b>14.3</b> 变量赋值与绑定</a></li>
<li class="chapter" data-level="14.4" data-path="prog-type-ws.html"><a href="prog-type-ws.html#p-t-ws-env"><i class="fa fa-check"></i><b>14.4</b> 环境</a></li>
</ul></li>
<li class="part"><span><b>III 编程</b></span></li>
<li class="chapter" data-level="15" data-path="prog-io.html"><a href="prog-io.html"><i class="fa fa-check"></i><b>15</b> R输入输出</a><ul>
<li class="chapter" data-level="15.1" data-path="prog-io.html"><a href="prog-io.html#p-io-simple"><i class="fa fa-check"></i><b>15.1</b> 输入输出的简单方法</a><ul>
<li class="chapter" data-level="15.1.1" data-path="prog-io.html"><a href="prog-io.html#p-io-simple-out"><i class="fa fa-check"></i><b>15.1.1</b> 简单的输出</a></li>
<li class="chapter" data-level="15.1.2" data-path="prog-io.html"><a href="prog-io.html#p-io-simple-input"><i class="fa fa-check"></i><b>15.1.2</b> 简单的输入</a></li>
</ul></li>
<li class="chapter" data-level="15.2" data-path="prog-io.html"><a href="prog-io.html#p-io-read-csv"><i class="fa fa-check"></i><b>15.2</b> 读取CSV文件</a><ul>
<li class="chapter" data-level="15.2.1" data-path="prog-io.html"><a href="prog-io.html#p-io-read-csv-format"><i class="fa fa-check"></i><b>15.2.1</b> CSV格式</a></li>
<li class="chapter" data-level="15.2.2" data-path="prog-io.html"><a href="prog-io.html#p-io-read-csv-fromstr"><i class="fa fa-check"></i><b>15.2.2</b> 从字符串读入</a></li>
<li class="chapter" data-level="15.2.3" data-path="prog-io.html"><a href="prog-io.html#p-io-read-csv-opt"><i class="fa fa-check"></i><b>15.2.3</b> <code>read_csv</code>选项</a></li>
<li class="chapter" data-level="15.2.4" data-path="prog-io.html"><a href="prog-io.html#p-io-read-csv-enc"><i class="fa fa-check"></i><b>15.2.4</b> 编码设置</a></li>
<li class="chapter" data-level="15.2.5" data-path="prog-io.html"><a href="prog-io.html#p-io-read-csv-na"><i class="fa fa-check"></i><b>15.2.5</b> 缺失值设置</a></li>
<li class="chapter" data-level="15.2.6" data-path="prog-io.html"><a href="prog-io.html#p-io-read-csv-colt"><i class="fa fa-check"></i><b>15.2.6</b> 各列类型设置</a></li>
<li class="chapter" data-level="15.2.7" data-path="prog-io.html"><a href="prog-io.html#p-io-read-csv-fact"><i class="fa fa-check"></i><b>15.2.7</b> 因子类型设置</a></li>
<li class="chapter" data-level="15.2.8" data-path="prog-io.html"><a href="prog-io.html#p-io-read-csv-date"><i class="fa fa-check"></i><b>15.2.8</b> 读入日期</a></li>
<li class="chapter" data-level="15.2.9" data-path="prog-io.html"><a href="prog-io.html#p-io-read-csv-funcs"><i class="fa fa-check"></i><b>15.2.9</b> 其它函数</a></li>
</ul></li>
<li class="chapter" data-level="15.3" data-path="prog-io.html"><a href="prog-io.html#p-io-excel"><i class="fa fa-check"></i><b>15.3</b> Excel表访问</a><ul>
<li class="chapter" data-level="15.3.1" data-path="prog-io.html"><a href="prog-io.html#p-io-excel-csv"><i class="fa fa-check"></i><b>15.3.1</b> 借助于文本格式</a></li>
<li class="chapter" data-level="15.3.2" data-path="prog-io.html"><a href="prog-io.html#p-io-excel-clip"><i class="fa fa-check"></i><b>15.3.2</b> 使用剪贴板</a></li>
<li class="chapter" data-level="15.3.3" data-path="prog-io.html"><a href="prog-io.html#p-io-excel-readxl"><i class="fa fa-check"></i><b>15.3.3</b> 利用readxl扩展包</a></li>
</ul></li>
<li class="chapter" data-level="15.4" data-path="prog-io.html"><a href="prog-io.html#p-io-file"><i class="fa fa-check"></i><b>15.4</b> 文件访问</a><ul>
<li class="chapter" data-level="15.4.1" data-path="prog-io.html"><a href="prog-io.html#p-io-file-conn"><i class="fa fa-check"></i><b>15.4.1</b> 连接</a></li>
<li class="chapter" data-level="15.4.2" data-path="prog-io.html"><a href="prog-io.html#p-io-file-text"><i class="fa fa-check"></i><b>15.4.2</b> 文本文件访问</a></li>
<li class="chapter" data-level="15.4.3" data-path="prog-io.html"><a href="prog-io.html#p-io-enc-batch"><i class="fa fa-check"></i><b>15.4.3</b> 文本文件分批读写</a></li>
<li class="chapter" data-level="15.4.4" data-path="prog-io.html"><a href="prog-io.html#p-io-file-bin"><i class="fa fa-check"></i><b>15.4.4</b> 二进制文件访问</a></li>
<li class="chapter" data-level="15.4.5" data-path="prog-io.html"><a href="prog-io.html#p-io-file-textcon"><i class="fa fa-check"></i><b>15.4.5</b> 字符型连接</a></li>
</ul></li>
<li class="chapter" data-level="15.5" data-path="prog-io.html"><a href="prog-io.html#p-io-enc"><i class="fa fa-check"></i><b>15.5</b> 中文编码问题</a><ul>
<li class="chapter" data-level="15.5.1" data-path="prog-io.html"><a href="prog-io.html#p-io-enc-base"><i class="fa fa-check"></i><b>15.5.1</b> 用基本R的读取函数读取</a></li>
<li class="chapter" data-level="15.5.2" data-path="prog-io.html"><a href="prog-io.html#p-io-enc-readr"><i class="fa fa-check"></i><b>15.5.2</b> 用readr包读取</a></li>
<li class="chapter" data-level="15.5.3" data-path="prog-io.html"><a href="prog-io.html#p-io-enc-write"><i class="fa fa-check"></i><b>15.5.3</b> 输出文件的编码</a></li>
</ul></li>
<li class="chapter" data-level="15.6" data-path="prog-io.html"><a href="prog-io.html#p-io-dir"><i class="fa fa-check"></i><b>15.6</b> 目录和文件管理</a></li>
<li class="chapter" data-level="15.7" data-path="prog-io.html"><a href="prog-io.html#p-io-db"><i class="fa fa-check"></i><b>15.7</b> SQL数据库访问</a><ul>
<li class="chapter" data-level="15.7.1" data-path="prog-io.html"><a href="prog-io.html#p-io-db-intro"><i class="fa fa-check"></i><b>15.7.1</b> 介绍</a></li>
<li class="chapter" data-level="15.7.2" data-path="prog-io.html"><a href="prog-io.html#p-io-db-sqlite"><i class="fa fa-check"></i><b>15.7.2</b> SQLite数据库访问</a></li>
<li class="chapter" data-level="15.7.3" data-path="prog-io.html"><a href="prog-io.html#p-io-db-sql"><i class="fa fa-check"></i><b>15.7.3</b> SQL命令简介</a></li>
<li class="chapter" data-level="15.7.4" data-path="prog-io.html"><a href="prog-io.html#p-io-db-oracle"><i class="fa fa-check"></i><b>15.7.4</b> 访问Oracle数据库</a></li>
<li class="chapter" data-level="15.7.5" data-path="prog-io.html"><a href="prog-io.html#p-io-db-mysql"><i class="fa fa-check"></i><b>15.7.5</b> MySQL数据库访问</a></li>
<li class="chapter" data-level="15.7.6" data-path="prog-io.html"><a href="prog-io.html#p-io-excel-rodbc"><i class="fa fa-check"></i><b>15.7.6</b> 利用RODBC访问Access数据库</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="16" data-path="prog-control.html"><a href="prog-control.html"><i class="fa fa-check"></i><b>16</b> 程序控制结构</a><ul>
<li class="chapter" data-level="16.1" data-path="prog-control.html"><a href="prog-control.html#p-con-exp"><i class="fa fa-check"></i><b>16.1</b> 表达式</a></li>
<li class="chapter" data-level="16.2" data-path="prog-control.html"><a href="prog-control.html#p-con-if"><i class="fa fa-check"></i><b>16.2</b> 分支结构</a><ul>
<li class="chapter" data-level="16.2.1" data-path="prog-control.html"><a href="prog-control.html#p-con-logic-index"><i class="fa fa-check"></i><b>16.2.1</b> 用逻辑下标代替分支结构</a></li>
<li class="chapter" data-level="16.2.2" data-path="prog-control.html"><a href="prog-control.html#p-con-ifelsef"><i class="fa fa-check"></i><b>16.2.2</b> <code>ifelse</code>函数</a></li>
<li class="chapter" data-level="16.2.3" data-path="prog-control.html"><a href="prog-control.html#p-con-switch"><i class="fa fa-check"></i><b>16.2.3</b> <code>switch</code>函数</a></li>
</ul></li>
<li class="chapter" data-level="16.3" data-path="prog-control.html"><a href="prog-control.html#p-con-loop"><i class="fa fa-check"></i><b>16.3</b> 循环结构</a><ul>
<li class="chapter" data-level="16.3.1" data-path="prog-control.html"><a href="prog-control.html#p-con-for"><i class="fa fa-check"></i><b>16.3.1</b> 计数循环</a></li>
<li class="chapter" data-level="16.3.2" data-path="prog-control.html"><a href="prog-control.html#p-con-while"><i class="fa fa-check"></i><b>16.3.2</b> <code>while</code>循环和<code>repeat</code>循环</a></li>
</ul></li>
<li class="chapter" data-level="16.4" data-path="prog-control.html"><a href="prog-control.html#p-con-cond"><i class="fa fa-check"></i><b>16.4</b> R中判断条件</a></li>
<li class="chapter" data-level="16.5" data-path="prog-control.html"><a href="prog-control.html#p-pipe"><i class="fa fa-check"></i><b>16.5</b> 管道控制</a></li>
</ul></li>
<li class="chapter" data-level="17" data-path="prog-func.html"><a href="prog-func.html"><i class="fa fa-check"></i><b>17</b> 函数</a><ul>
<li class="chapter" data-level="17.1" data-path="prog-func.html"><a href="prog-func.html#p-func"><i class="fa fa-check"></i><b>17.1</b> 函数基础</a><ul>
<li class="chapter" data-level="17.1.1" data-path="prog-func.html"><a href="prog-func.html#p-func-intro"><i class="fa fa-check"></i><b>17.1.1</b> 介绍</a></li>
<li class="chapter" data-level="17.1.2" data-path="prog-func.html"><a href="prog-func.html#p-func-def"><i class="fa fa-check"></i><b>17.1.2</b> 函数定义</a></li>
<li class="chapter" data-level="17.1.3" data-path="prog-func.html"><a href="prog-func.html#p-func-call"><i class="fa fa-check"></i><b>17.1.3</b> 函数调用</a></li>
<li class="chapter" data-level="17.1.4" data-path="prog-func.html"><a href="prog-func.html#p-func-recursive"><i class="fa fa-check"></i><b>17.1.4</b> 递归调用</a></li>
<li class="chapter" data-level="17.1.5" data-path="prog-func.html"><a href="prog-func.html#p-func-vr"><i class="fa fa-check"></i><b>17.1.5</b> 向量化</a></li>
<li class="chapter" data-level="17.1.6" data-path="prog-func.html"><a href="prog-func.html#p-func-anonymf"><i class="fa fa-check"></i><b>17.1.6</b> 无名函数</a></li>
</ul></li>
<li class="chapter" data-level="17.2" data-path="prog-func.html"><a href="prog-func.html#p-func-space"><i class="fa fa-check"></i><b>17.2</b> 变量作用域</a><ul>
<li class="chapter" data-level="17.2.1" data-path="prog-func.html"><a href="prog-func.html#p-func-global"><i class="fa fa-check"></i><b>17.2.1</b> 全局变量和工作空间</a></li>
<li class="chapter" data-level="17.2.2" data-path="prog-func.html"><a href="prog-func.html#p-func-local"><i class="fa fa-check"></i><b>17.2.2</b> 局部变量</a></li>
<li class="chapter" data-level="17.2.3" data-path="prog-func.html"><a href="prog-func.html#p-func-global-access"><i class="fa fa-check"></i><b>17.2.3</b> 在函数内访问全局变量</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="18" data-path="prog-prof.html"><a href="prog-prof.html"><i class="fa fa-check"></i><b>18</b> R程序效率</a><ul>
<li class="chapter" data-level="18.1" data-path="prog-prof.html"><a href="prog-prof.html#p-prof-effic"><i class="fa fa-check"></i><b>18.1</b> R的运行效率</a></li>
<li class="chapter" data-level="18.2" data-path="prog-prof.html"><a href="prog-prof.html#p-prof-vect"><i class="fa fa-check"></i><b>18.2</b> 向量化编程</a><ul>
<li class="chapter" data-level="18.2.1" data-path="prog-prof.html"><a href="prog-prof.html#p-prof-vect-ex1"><i class="fa fa-check"></i><b>18.2.1</b> 示例1</a></li>
<li class="chapter" data-level="18.2.2" data-path="prog-prof.html"><a href="prog-prof.html#p-prof-vect-ex2"><i class="fa fa-check"></i><b>18.2.2</b> 示例2</a></li>
<li class="chapter" data-level="18.2.3" data-path="prog-prof.html"><a href="prog-prof.html#p-prof-vect-ex3"><i class="fa fa-check"></i><b>18.2.3</b> 示例3</a></li>
</ul></li>
<li class="chapter" data-level="18.3" data-path="prog-prof.html"><a href="prog-prof.html#p-prof-loop"><i class="fa fa-check"></i><b>18.3</b> 减少显式循环</a><ul>
<li class="chapter" data-level="18.3.1" data-path="prog-prof.html"><a href="prog-prof.html#p-prof-replicate"><i class="fa fa-check"></i><b>18.3.1</b> <code>replicate()</code>函数</a></li>
</ul></li>
<li class="chapter" data-level="18.4" data-path="prog-prof.html"><a href="prog-prof.html#p-prof-copy"><i class="fa fa-check"></i><b>18.4</b> 避免制作副本</a></li>
<li class="chapter" data-level="18.5" data-path="prog-prof.html"><a href="prog-prof.html#p-prof-mathfun"><i class="fa fa-check"></i><b>18.5</b> R的计算函数</a><ul>
<li class="chapter" data-level="18.5.1" data-path="prog-prof.html"><a href="prog-prof.html#p-prof-mathfun-math"><i class="fa fa-check"></i><b>18.5.1</b> 数学函数</a></li>
<li class="chapter" data-level="18.5.2" data-path="prog-prof.html"><a href="prog-prof.html#p-prof-mathfun-sum"><i class="fa fa-check"></i><b>18.5.2</b> 概括函数</a></li>
<li class="chapter" data-level="18.5.3" data-path="prog-prof.html"><a href="prog-prof.html#p-prof-mathfun-max"><i class="fa fa-check"></i><b>18.5.3</b> 最值</a></li>
<li class="chapter" data-level="18.5.4" data-path="prog-prof.html"><a href="prog-prof.html#p-prof-mathfun-sort"><i class="fa fa-check"></i><b>18.5.4</b> 排序</a></li>
<li class="chapter" data-level="18.5.5" data-path="prog-prof.html"><a href="prog-prof.html#p-prof-mathfun-integrate"><i class="fa fa-check"></i><b>18.5.5</b> 一元定积分<code>integrate</code></a></li>
<li class="chapter" data-level="18.5.6" data-path="prog-prof.html"><a href="prog-prof.html#p-prof-mathfun-uniroot"><i class="fa fa-check"></i><b>18.5.6</b> 一元函数求根<code>uniroot</code></a></li>
<li class="chapter" data-level="18.5.7" data-path="prog-prof.html"><a href="prog-prof.html#p-prof-mathfun-fft"><i class="fa fa-check"></i><b>18.5.7</b> 离散傅立叶变换<code>fft</code></a></li>
<li class="chapter" data-level="18.5.8" data-path="prog-prof.html"><a href="prog-prof.html#p-prof-mathfun-filter"><i class="fa fa-check"></i><b>18.5.8</b> 用<code>filter</code>函数作迭代</a></li>
</ul></li>
<li class="chapter" data-level="18.6" data-path="prog-prof.html"><a href="prog-prof.html#p-prof-mcpu"><i class="fa fa-check"></i><b>18.6</b> 并行计算</a><ul>
<li class="chapter" data-level="18.6.1" data-path="prog-prof.html"><a href="prog-prof.html#p-prof-mcpu-ex1"><i class="fa fa-check"></i><b>18.6.1</b> 例1：完全不互相依赖的并行运算</a></li>
<li class="chapter" data-level="18.6.2" data-path="prog-prof.html"><a href="prog-prof.html#p-prof-mcpu-ex2"><i class="fa fa-check"></i><b>18.6.2</b> 例2：使用相同随机数序列的并行计算</a></li>
<li class="chapter" data-level="18.6.3" data-path="prog-prof.html"><a href="prog-prof.html#p-prof-mcpu-ex3"><i class="fa fa-check"></i><b>18.6.3</b> 例3：使用独立随机数序列的并行计算</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="19" data-path="p-advfunc.html"><a href="p-advfunc.html"><i class="fa fa-check"></i><b>19</b> 函数进阶</a><ul>
<li class="chapter" data-level="19.1" data-path="p-advfunc.html"><a href="p-advfunc.html#p-advfunc-callspe"><i class="fa fa-check"></i><b>19.1</b> 函数调用的各种形式</a></li>
<li class="chapter" data-level="19.2" data-path="p-advfunc.html"><a href="p-advfunc.html#p-advfunc-lex"><i class="fa fa-check"></i><b>19.2</b> 嵌套定义与句法作用域(lexical scoping)</a></li>
<li class="chapter" data-level="19.3" data-path="p-advfunc.html"><a href="p-advfunc.html#p-advfunc-inner"><i class="fa fa-check"></i><b>19.3</b> 辅助嵌套函数</a></li>
<li class="chapter" data-level="19.4" data-path="p-advfunc.html"><a href="p-advfunc.html#p-advfunc-lazy"><i class="fa fa-check"></i><b>19.4</b> 懒惰求值</a></li>
<li class="chapter" data-level="19.5" data-path="p-advfunc.html"><a href="p-advfunc.html#p-advfunc-debug"><i class="fa fa-check"></i><b>19.5</b> 程序调试</a><ul>
<li class="chapter" data-level="19.5.1" data-path="p-advfunc.html"><a href="p-advfunc.html#p-advfunc-debug-intro"><i class="fa fa-check"></i><b>19.5.1</b> 基本调试策略</a></li>
<li class="chapter" data-level="19.5.2" data-path="p-advfunc.html"><a href="p-advfunc.html#p-advfunc-debug-findfunc"><i class="fa fa-check"></i><b>19.5.2</b> 找到出错的函数</a></li>
<li class="chapter" data-level="19.5.3" data-path="p-advfunc.html"><a href="p-advfunc.html#p-advfunc-debug-browser"><i class="fa fa-check"></i><b>19.5.3</b> 跟踪调试</a></li>
<li class="chapter" data-level="19.5.4" data-path="p-advfunc.html"><a href="p-advfunc.html#p-advfunc-debug-cond"><i class="fa fa-check"></i><b>19.5.4</b> 条件断点</a></li>
<li class="chapter" data-level="19.5.5" data-path="p-advfunc.html"><a href="p-advfunc.html#p-advfunc-debug-debugf"><i class="fa fa-check"></i><b>19.5.5</b> 开启对一个函数的调试</a></li>
<li class="chapter" data-level="19.5.6" data-path="p-advfunc.html"><a href="p-advfunc.html#p-advfunc-debug-opt"><i class="fa fa-check"></i><b>19.5.6</b> 出错调试选项</a></li>
<li class="chapter" data-level="19.5.7" data-path="p-advfunc.html"><a href="p-advfunc.html#p-advfunc-debug-stop"><i class="fa fa-check"></i><b>19.5.7</b> <code>stop()</code>、<code>warning()</code>、<code>message()</code></a></li>
<li class="chapter" data-level="19.5.8" data-path="p-advfunc.html"><a href="p-advfunc.html#p-advfunc-debug-preventive"><i class="fa fa-check"></i><b>19.5.8</b> 预防性设计</a></li>
<li class="chapter" data-level="19.5.9" data-path="p-advfunc.html"><a href="p-advfunc.html#p-advfunc-debug-try"><i class="fa fa-check"></i><b>19.5.9</b> 出错处理机制</a></li>
</ul></li>
<li class="chapter" data-level="19.6" data-path="p-advfunc.html"><a href="p-advfunc.html#p-advfunc-funcprog"><i class="fa fa-check"></i><b>19.6</b> 函数式编程介绍</a><ul>
<li class="chapter" data-level="19.6.1" data-path="p-advfunc.html"><a href="p-advfunc.html#p-advfunc-pure"><i class="fa fa-check"></i><b>19.6.1</b> 纯函数</a></li>
<li class="chapter" data-level="19.6.2" data-path="p-advfunc.html"><a href="p-advfunc.html#p-advfunc-rec"><i class="fa fa-check"></i><b>19.6.2</b> 副作用和运行环境恢复</a></li>
<li class="chapter" data-level="19.6.3" data-path="p-advfunc.html"><a href="p-advfunc.html#p-advfunc-rsupp"><i class="fa fa-check"></i><b>19.6.3</b> R的函数式编程功能</a></li>
</ul></li>
<li class="chapter" data-level="19.7" data-path="p-advfunc.html"><a href="p-advfunc.html#p-advfunc-functional"><i class="fa fa-check"></i><b>19.7</b> 泛函</a><ul>
<li class="chapter" data-level="19.7.1" data-path="p-advfunc.html"><a href="p-advfunc.html#p-advfunc-fnctnl-map"><i class="fa fa-check"></i><b>19.7.1</b> <code>purrr::map</code>函数</a></li>
<li class="chapter" data-level="19.7.2" data-path="p-advfunc.html"><a href="p-advfunc.html#p-advfunc-fnctnl-mapv"><i class="fa fa-check"></i><b>19.7.2</b> purrr包中<code>map</code>函数的变种</a></li>
<li class="chapter" data-level="19.7.3" data-path="p-advfunc.html"><a href="p-advfunc.html#p-advfunc-fnctnl-reduce"><i class="fa fa-check"></i><b>19.7.3</b> purrr包中<code>reduce</code>类函数</a></li>
<li class="chapter" data-level="19.7.4" data-path="p-advfunc.html"><a href="p-advfunc.html#p-advfunc-fnctnl-pred"><i class="fa fa-check"></i><b>19.7.4</b> purrr包中使用示性函数的泛函</a></li>
<li class="chapter" data-level="19.7.5" data-path="p-advfunc.html"><a href="p-advfunc.html#p-advfunc-fnctnl-lapp"><i class="fa fa-check"></i><b>19.7.5</b> 基本R的函数式编程支持</a></li>
<li class="chapter" data-level="19.7.6" data-path="p-advfunc.html"><a href="p-advfunc.html#p-advfunc-fnctnl-udef"><i class="fa fa-check"></i><b>19.7.6</b> 自定义泛函</a></li>
</ul></li>
<li class="chapter" data-level="19.8" data-path="p-advfunc.html"><a href="p-advfunc.html#p-advfunc-factory"><i class="fa fa-check"></i><b>19.8</b> 函数工厂</a><ul>
<li class="chapter" data-level="19.8.1" data-path="p-advfunc.html"><a href="p-advfunc.html#p-advfunc-factory-clex"><i class="fa fa-check"></i><b>19.8.1</b> 闭包例子</a></li>
<li class="chapter" data-level="19.8.2" data-path="p-advfunc.html"><a href="p-advfunc.html#p-advfunc-factory-lazy"><i class="fa fa-check"></i><b>19.8.2</b> 动态查找和懒惰求值引起的问题</a></li>
<li class="chapter" data-level="19.8.3" data-path="p-advfunc.html"><a href="p-advfunc.html#p-advfunc-factory-mem"><i class="fa fa-check"></i><b>19.8.3</b> 函数工厂的内存负担</a></li>
<li class="chapter" data-level="19.8.4" data-path="p-advfunc.html"><a href="p-advfunc.html#p-advfunc-operator"><i class="fa fa-check"></i><b>19.8.4</b> 函数算子</a></li>
</ul></li>
<li class="chapter" data-level="19.9" data-path="p-advfunc.html"><a href="p-advfunc.html#p-advfunc-env"><i class="fa fa-check"></i><b>19.9</b> 环境</a><ul>
<li class="chapter" data-level="19.9.1" data-path="p-advfunc.html"><a href="p-advfunc.html#p-advfunc-env-def"><i class="fa fa-check"></i><b>19.9.1</b> 基本概念</a></li>
<li class="chapter" data-level="19.9.2" data-path="p-advfunc.html"><a href="p-advfunc.html#p-advfunc-env-recurs"><i class="fa fa-check"></i><b>19.9.2</b> 逐层向上访问环境</a></li>
<li class="chapter" data-level="19.9.3" data-path="p-advfunc.html"><a href="p-advfunc.html#p-advfunc-env-spec"><i class="fa fa-check"></i><b>19.9.3</b> 特殊环境</a></li>
<li class="chapter" data-level="19.9.4" data-path="p-advfunc.html"><a href="p-advfunc.html#p-advfunc-env-callst"><i class="fa fa-check"></i><b>19.9.4</b> 调用栈</a></li>
<li class="chapter" data-level="19.9.5" data-path="p-advfunc.html"><a href="p-advfunc.html#p-advfunc-env-usedt"><i class="fa fa-check"></i><b>19.9.5</b> 将环境用作一般数据结构</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>IV 制作研究报告和图书</b></span></li>
<li class="chapter" data-level="20" data-path="knitr.html"><a href="knitr.html"><i class="fa fa-check"></i><b>20</b> 用R制作研究报告</a></li>
<li class="chapter" data-level="21" data-path="markdown.html"><a href="markdown.html"><i class="fa fa-check"></i><b>21</b> Markdown格式</a><ul>
<li class="chapter" data-level="21.1" data-path="markdown.html"><a href="markdown.html#markdown-intro"><i class="fa fa-check"></i><b>21.1</b> 介绍</a></li>
<li class="chapter" data-level="21.2" data-path="markdown.html"><a href="markdown.html#markdown-app"><i class="fa fa-check"></i><b>21.2</b> Markdown格式文件的应用</a></li>
<li class="chapter" data-level="21.3" data-path="markdown.html"><a href="markdown.html#markdown-format"><i class="fa fa-check"></i><b>21.3</b> markdown格式说明</a><ul>
<li class="chapter" data-level="21.3.1" data-path="markdown.html"><a href="markdown.html#markdown-format-intro"><i class="fa fa-check"></i><b>21.3.1</b> 概述</a></li>
<li class="chapter" data-level="21.3.2" data-path="markdown.html"><a href="markdown.html#markdown-format-paragraph"><i class="fa fa-check"></i><b>21.3.2</b> 段落</a></li>
<li class="chapter" data-level="21.3.3" data-path="markdown.html"><a href="markdown.html#markdown-format-inline"><i class="fa fa-check"></i><b>21.3.3</b> 段内文字格式</a></li>
<li class="chapter" data-level="21.3.4" data-path="markdown.html"><a href="markdown.html#markdown-format-header"><i class="fa fa-check"></i><b>21.3.4</b> 标题和分隔线</a></li>
<li class="chapter" data-level="21.3.5" data-path="markdown.html"><a href="markdown.html#markdown-format-cite"><i class="fa fa-check"></i><b>21.3.5</b> 引用段落</a></li>
<li class="chapter" data-level="21.3.6" data-path="markdown.html"><a href="markdown.html#markdown-format-list"><i class="fa fa-check"></i><b>21.3.6</b> 列表</a></li>
<li class="chapter" data-level="21.3.7" data-path="markdown.html"><a href="markdown.html#markdown-format-code"><i class="fa fa-check"></i><b>21.3.7</b> 源程序</a></li>
<li class="chapter" data-level="21.3.8" data-path="markdown.html"><a href="markdown.html#markdown-format-link"><i class="fa fa-check"></i><b>21.3.8</b> 链接</a></li>
<li class="chapter" data-level="21.3.9" data-path="markdown.html"><a href="markdown.html#markdown-format-fig"><i class="fa fa-check"></i><b>21.3.9</b> 插入图形</a></li>
<li class="chapter" data-level="21.3.10" data-path="markdown.html"><a href="markdown.html#markdown-format-table"><i class="fa fa-check"></i><b>21.3.10</b> 表格</a></li>
</ul></li>
<li class="chapter" data-level="21.4" data-path="markdown.html"><a href="markdown.html#markdown-pandoc"><i class="fa fa-check"></i><b>21.4</b> 附录：pandoc软件介绍</a></li>
</ul></li>
<li class="chapter" data-level="22" data-path="rmarkdown.html"><a href="rmarkdown.html"><i class="fa fa-check"></i><b>22</b> R Markdown文件格式</a><ul>
<li class="chapter" data-level="22.1" data-path="rmarkdown.html"><a href="rmarkdown.html#rmd-intro"><i class="fa fa-check"></i><b>22.1</b> R Markdown文件</a></li>
<li class="chapter" data-level="22.2" data-path="rmarkdown.html"><a href="rmarkdown.html#rmd-compile"><i class="fa fa-check"></i><b>22.2</b> R Markdown文件的编译</a><ul>
<li class="chapter" data-level="22.2.1" data-path="rmarkdown.html"><a href="rmarkdown.html#rmd-compile-proc"><i class="fa fa-check"></i><b>22.2.1</b> 编译的实际过程</a></li>
</ul></li>
<li class="chapter" data-level="22.3" data-path="rmarkdown.html"><a href="rmarkdown.html#rmd-rcode"><i class="fa fa-check"></i><b>22.3</b> 在R Markdown文件中插入R代码</a></li>
<li class="chapter" data-level="22.4" data-path="rmarkdown.html"><a href="rmarkdown.html#rmd-kable"><i class="fa fa-check"></i><b>22.4</b> 输出表格</a></li>
<li class="chapter" data-level="22.5" data-path="rmarkdown.html"><a href="rmarkdown.html#rmd-graph"><i class="fa fa-check"></i><b>22.5</b> 利用R程序插图</a></li>
<li class="chapter" data-level="22.6" data-path="rmarkdown.html"><a href="rmarkdown.html#rmd-rcode-opt"><i class="fa fa-check"></i><b>22.6</b> 代码段选项</a><ul>
<li class="chapter" data-level="22.6.1" data-path="rmarkdown.html"><a href="rmarkdown.html#rmd-rcode-outformat"><i class="fa fa-check"></i><b>22.6.1</b> 代码和文本输出结果格式</a></li>
<li class="chapter" data-level="22.6.2" data-path="rmarkdown.html"><a href="rmarkdown.html#rmd-rcode-figopt"><i class="fa fa-check"></i><b>22.6.2</b> 图形选项</a></li>
<li class="chapter" data-level="22.6.3" data-path="rmarkdown.html"><a href="rmarkdown.html#rmd-rcode-cache"><i class="fa fa-check"></i><b>22.6.3</b> 缓存(cache)选项</a></li>
</ul></li>
<li class="chapter" data-level="22.7" data-path="rmarkdown.html"><a href="rmarkdown.html#rmd--sectionlink"><i class="fa fa-check"></i><b>22.7</b> 章节目录链接问题</a></li>
<li class="chapter" data-level="22.8" data-path="rmarkdown.html"><a href="rmarkdown.html#markdown-formula"><i class="fa fa-check"></i><b>22.8</b> 数学公式</a><ul>
<li class="chapter" data-level="22.8.1" data-path="rmarkdown.html"><a href="rmarkdown.html#markdown-formula-intro"><i class="fa fa-check"></i><b>22.8.1</b> 在Markdown中输入数学公式</a></li>
<li class="chapter" data-level="22.8.2" data-path="rmarkdown.html"><a href="rmarkdown.html#markdown-formula-type"><i class="fa fa-check"></i><b>22.8.2</b> 数学公式类别</a></li>
<li class="chapter" data-level="22.8.3" data-path="rmarkdown.html"><a href="rmarkdown.html#markdown-formula-basic"><i class="fa fa-check"></i><b>22.8.3</b> 基本功能</a></li>
<li class="chapter" data-level="22.8.4" data-path="rmarkdown.html"><a href="rmarkdown.html#markdown-formula-accent"><i class="fa fa-check"></i><b>22.8.4</b> 修饰符</a></li>
<li class="chapter" data-level="22.8.5" data-path="rmarkdown.html"><a href="rmarkdown.html#markdown-formula-align"><i class="fa fa-check"></i><b>22.8.5</b> 对齐与矩阵</a></li>
<li class="chapter" data-level="22.8.6" data-path="rmarkdown.html"><a href="rmarkdown.html#markdown-formula-fonts"><i class="fa fa-check"></i><b>22.8.6</b> 特殊字体</a></li>
</ul></li>
<li class="chapter" data-level="22.9" data-path="rmarkdown.html"><a href="rmarkdown.html#rmd-engines"><i class="fa fa-check"></i><b>22.9</b> 其它编程语言引擎</a></li>
<li class="chapter" data-level="22.10" data-path="rmarkdown.html"><a href="rmarkdown.html#rmd-interact"><i class="fa fa-check"></i><b>22.10</b> 交互内容</a></li>
<li class="chapter" data-level="22.11" data-path="rmarkdown.html"><a href="rmarkdown.html#rmarkdown-attryaml"><i class="fa fa-check"></i><b>22.11</b> 属性设置</a><ul>
<li class="chapter" data-level="22.11.1" data-path="rmarkdown.html"><a href="rmarkdown.html#rmarkdown-yaml"><i class="fa fa-check"></i><b>22.11.1</b> YAML元数据</a></li>
<li class="chapter" data-level="22.11.2" data-path="rmarkdown.html"><a href="rmarkdown.html#rmd-output-types"><i class="fa fa-check"></i><b>22.11.2</b> 输出格式</a></li>
<li class="chapter" data-level="22.11.3" data-path="rmarkdown.html"><a href="rmarkdown.html#rmd-output-attr"><i class="fa fa-check"></i><b>22.11.3</b> 输出格式设置</a></li>
<li class="chapter" data-level="22.11.4" data-path="rmarkdown.html"><a href="rmarkdown.html#rmd-output-attr-toc"><i class="fa fa-check"></i><b>22.11.4</b> 目录设置</a></li>
<li class="chapter" data-level="22.11.5" data-path="rmarkdown.html"><a href="rmarkdown.html#rmd-output-attr-numsec"><i class="fa fa-check"></i><b>22.11.5</b> 章节自动编号</a></li>
<li class="chapter" data-level="22.11.6" data-path="rmarkdown.html"><a href="rmarkdown.html#rmd-output-attr-wordnumsec"><i class="fa fa-check"></i><b>22.11.6</b> Word输出章节自动编号及模板功能</a></li>
<li class="chapter" data-level="22.11.7" data-path="rmarkdown.html"><a href="rmarkdown.html#rmd-output-htmlspecific"><i class="fa fa-check"></i><b>22.11.7</b> HTML特有输出格式设置</a></li>
<li class="chapter" data-level="22.11.8" data-path="rmarkdown.html"><a href="rmarkdown.html#rmd-mathjax"><i class="fa fa-check"></i><b>22.11.8</b> 关于数学公式支持的设置</a></li>
<li class="chapter" data-level="22.11.9" data-path="rmarkdown.html"><a href="rmarkdown.html#rmd-output-yml"><i class="fa fa-check"></i><b>22.11.9</b> 输出设置文件</a></li>
</ul></li>
<li class="chapter" data-level="22.12" data-path="rmarkdown.html"><a href="rmarkdown.html#rmd-latex"><i class="fa fa-check"></i><b>22.12</b> LaTeX和PDF输出</a><ul>
<li class="chapter" data-level="22.12.1" data-path="rmarkdown.html"><a href="rmarkdown.html#rmd-latex-tinytex"><i class="fa fa-check"></i><b>22.12.1</b> TinyTex的安装使用</a></li>
<li class="chapter" data-level="22.12.2" data-path="rmarkdown.html"><a href="rmarkdown.html#rmd-latex-yaml"><i class="fa fa-check"></i><b>22.12.2</b> Rmd中Latex设置</a></li>
</ul></li>
<li class="chapter" data-level="22.13" data-path="rmarkdown.html"><a href="rmarkdown.html#rmarkdown-rticles"><i class="fa fa-check"></i><b>22.13</b> 生成期刊文章</a></li>
<li class="chapter" data-level="22.14" data-path="rmarkdown.html"><a href="rmarkdown.html#rmarkdown-app1"><i class="fa fa-check"></i><b>22.14</b> 附录：经验与问题</a><ul>
<li class="chapter" data-level="22.14.1" data-path="rmarkdown.html"><a href="rmarkdown.html#rmarkdown-app1-wordtemplate"><i class="fa fa-check"></i><b>22.14.1</b> Word模板制作</a></li>
<li class="chapter" data-level="22.14.2" data-path="rmarkdown.html"><a href="rmarkdown.html#rmarkdown-app1-math"><i class="fa fa-check"></i><b>22.14.2</b> 数学公式设置补充</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="23" data-path="bookdown.html"><a href="bookdown.html"><i class="fa fa-check"></i><b>23</b> 用bookdown制作图书</a><ul>
<li class="chapter" data-level="23.1" data-path="bookdown.html"><a href="bookdown.html#bookdown-intro"><i class="fa fa-check"></i><b>23.1</b> 介绍</a></li>
<li class="chapter" data-level="23.2" data-path="bookdown.html"><a href="bookdown.html#bookdown-settings"><i class="fa fa-check"></i><b>23.2</b> 一本书的设置</a></li>
<li class="chapter" data-level="23.3" data-path="bookdown.html"><a href="bookdown.html#bookdown-sectioning"><i class="fa fa-check"></i><b>23.3</b> 章节结构</a></li>
<li class="chapter" data-level="23.4" data-path="bookdown.html"><a href="bookdown.html#bookdown-compile"><i class="fa fa-check"></i><b>23.4</b> 书的编译</a></li>
<li class="chapter" data-level="23.5" data-path="bookdown.html"><a href="bookdown.html#bookdown-cref"><i class="fa fa-check"></i><b>23.5</b> 交叉引用</a></li>
<li class="chapter" data-level="23.6" data-path="bookdown.html"><a href="bookdown.html#bookdown-formula"><i class="fa fa-check"></i><b>23.6</b> 数学公式和公式编号</a></li>
<li class="chapter" data-level="23.7" data-path="bookdown.html"><a href="bookdown.html#bookdown-theorem"><i class="fa fa-check"></i><b>23.7</b> 定理类编号</a></li>
<li class="chapter" data-level="23.8" data-path="bookdown.html"><a href="bookdown.html#bookdown-bib"><i class="fa fa-check"></i><b>23.8</b> 文献引用</a></li>
<li class="chapter" data-level="23.9" data-path="bookdown.html"><a href="bookdown.html#bookdown-graph"><i class="fa fa-check"></i><b>23.9</b> 插图</a></li>
<li class="chapter" data-level="23.10" data-path="bookdown.html"><a href="bookdown.html#bookdown-table"><i class="fa fa-check"></i><b>23.10</b> 表格</a><ul>
<li class="chapter" data-level="23.10.1" data-path="bookdown.html"><a href="bookdown.html#bookdown-table-md"><i class="fa fa-check"></i><b>23.10.1</b> Markdown表格</a></li>
<li class="chapter" data-level="23.10.2" data-path="bookdown.html"><a href="bookdown.html#bookdown-table-kable"><i class="fa fa-check"></i><b>23.10.2</b> 用<code>kable()</code>函数制作表格</a></li>
<li class="chapter" data-level="23.10.3" data-path="bookdown.html"><a href="bookdown.html#bookdown-table-kable"><i class="fa fa-check"></i><b>23.10.3</b> R中其它制作表格的包</a></li>
</ul></li>
<li class="chapter" data-level="23.11" data-path="bookdown.html"><a href="bookdown.html#bookdown-mathjax"><i class="fa fa-check"></i><b>23.11</b> 数学公式的设置</a></li>
<li class="chapter" data-level="23.12" data-path="bookdown.html"><a href="bookdown.html#bookdown-exp"><i class="fa fa-check"></i><b>23.12</b> 使用经验</a></li>
<li class="chapter" data-level="23.13" data-path="bookdown.html"><a href="bookdown.html#bookdown-bugs"><i class="fa fa-check"></i><b>23.13</b> bookdown的一些使用问题</a></li>
</ul></li>
<li class="chapter" data-level="24" data-path="rmdsite.html"><a href="rmdsite.html"><i class="fa fa-check"></i><b>24</b> 用R Markdown制作简易网站</a><ul>
<li class="chapter" data-level="24.1" data-path="rmdsite.html"><a href="rmdsite.html#rmdsite-intro"><i class="fa fa-check"></i><b>24.1</b> 介绍</a></li>
<li class="chapter" data-level="24.2" data-path="rmdsite.html"><a href="rmdsite.html#rmdsite-rmarkdown"><i class="fa fa-check"></i><b>24.2</b> 简易网站制作</a><ul>
<li class="chapter" data-level="24.2.1" data-path="rmdsite.html"><a href="rmdsite.html#rmdsite-rmarkdown-struct"><i class="fa fa-check"></i><b>24.2.1</b> 网站结构</a></li>
<li class="chapter" data-level="24.2.2" data-path="rmdsite.html"><a href="rmdsite.html#rmdsite-rmarkdown-build"><i class="fa fa-check"></i><b>24.2.2</b> 编译</a></li>
<li class="chapter" data-level="24.2.3" data-path="rmdsite.html"><a href="rmdsite.html#rmdsite-rmarkdown-pages"><i class="fa fa-check"></i><b>24.2.3</b> 内容文件</a></li>
<li class="chapter" data-level="24.2.4" data-path="rmdsite.html"><a href="rmdsite.html#rmdsite-rmarkdown-config"><i class="fa fa-check"></i><b>24.2.4</b> 网站设置</a></li>
</ul></li>
<li class="chapter" data-level="24.3" data-path="rmdsite.html"><a href="rmdsite.html#blogdown"><i class="fa fa-check"></i><b>24.3</b> 用blogdown制作网站</a><ul>
<li class="chapter" data-level="24.3.1" data-path="rmdsite.html"><a href="rmdsite.html#blogd-new"><i class="fa fa-check"></i><b>24.3.1</b> 生成新网站的框架</a></li>
<li class="chapter" data-level="24.3.2" data-path="rmdsite.html"><a href="rmdsite.html#blogd-page"><i class="fa fa-check"></i><b>24.3.2</b> 网页内容文件及其设置</a></li>
<li class="chapter" data-level="24.3.3" data-path="rmdsite.html"><a href="rmdsite.html#blogd-workflow"><i class="fa fa-check"></i><b>24.3.3</b> 初学者的工作流程</a></li>
<li class="chapter" data-level="24.3.4" data-path="rmdsite.html"><a href="rmdsite.html#blogd-config"><i class="fa fa-check"></i><b>24.3.4</b> 网站设置文件</a></li>
<li class="chapter" data-level="24.3.5" data-path="rmdsite.html"><a href="rmdsite.html#blogd-static"><i class="fa fa-check"></i><b>24.3.5</b> 静态文件</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="25" data-path="slides.html"><a href="slides.html"><i class="fa fa-check"></i><b>25</b> 制作幻灯片</a><ul>
<li class="chapter" data-level="25.1" data-path="slides.html"><a href="slides.html#rmd-slides-intro"><i class="fa fa-check"></i><b>25.1</b> 介绍</a></li>
<li class="chapter" data-level="25.2" data-path="slides.html"><a href="slides.html#rmd-slidy"><i class="fa fa-check"></i><b>25.2</b> Slidy幻灯片</a><ul>
<li class="chapter" data-level="25.2.1" data-path="slides.html"><a href="slides.html#rmd-slidy-format"><i class="fa fa-check"></i><b>25.2.1</b> 文件格式</a></li>
<li class="chapter" data-level="25.2.2" data-path="slides.html"><a href="slides.html#rmd-slidy-compile"><i class="fa fa-check"></i><b>25.2.2</b> 幻灯片编译</a></li>
<li class="chapter" data-level="25.2.3" data-path="slides.html"><a href="slides.html#rmd-slidy-play"><i class="fa fa-check"></i><b>25.2.3</b> 播放控制</a></li>
<li class="chapter" data-level="25.2.4" data-path="slides.html"><a href="slides.html#rmd-slidy-handout"><i class="fa fa-check"></i><b>25.2.4</b> 生成单页HTML</a></li>
<li class="chapter" data-level="25.2.5" data-path="slides.html"><a href="slides.html#rmd-slidy-mathjax"><i class="fa fa-check"></i><b>25.2.5</b> 数学公式处理与输出设置文件</a></li>
<li class="chapter" data-level="25.2.6" data-path="slides.html"><a href="slides.html#rmd-slidy-options"><i class="fa fa-check"></i><b>25.2.6</b> 其它选项</a></li>
<li class="chapter" data-level="25.2.7" data-path="slides.html"><a href="slides.html#rmd-slidy-laser"><i class="fa fa-check"></i><b>25.2.7</b> slidy幻灯片激光笔失效问题的修改</a></li>
</ul></li>
<li class="chapter" data-level="25.3" data-path="slides.html"><a href="slides.html#rmdslides-pp"><i class="fa fa-check"></i><b>25.3</b> MS PowerPoint幻灯片</a></li>
<li class="chapter" data-level="25.4" data-path="slides.html"><a href="slides.html#rmdslides-beamer"><i class="fa fa-check"></i><b>25.4</b> Bearmer幻灯片格式</a></li>
<li class="chapter" data-level="25.5" data-path="slides.html"><a href="slides.html#rmdslides-rpres"><i class="fa fa-check"></i><b>25.5</b> R Presentation格式</a></li>
</ul></li>
<li class="part"><span><b>V 数据整理与汇总</b></span></li>
<li class="chapter" data-level="26" data-path="summary-manip.html"><a href="summary-manip.html"><i class="fa fa-check"></i><b>26</b> 数据整理</a><ul>
<li class="chapter" data-level="26.1" data-path="summary-manip.html"><a href="summary-manip.html#summm-tidyv"><i class="fa fa-check"></i><b>26.1</b> tidyverse系统</a></li>
<li class="chapter" data-level="26.2" data-path="summary-manip.html"><a href="summary-manip.html#dplyr-filter"><i class="fa fa-check"></i><b>26.2</b> 用<code>filter()</code>选择行子集</a></li>
<li class="chapter" data-level="26.3" data-path="summary-manip.html"><a href="summary-manip.html#dplyr-head"><i class="fa fa-check"></i><b>26.3</b> 按行序号选择行子集</a></li>
<li class="chapter" data-level="26.4" data-path="summary-manip.html"><a href="summary-manip.html#dplyr-samplen"><i class="fa fa-check"></i><b>26.4</b> 用<code>sample_n()</code>对观测随机抽样</a></li>
<li class="chapter" data-level="26.5" data-path="summary-manip.html"><a href="summary-manip.html#dplyr-distinct"><i class="fa fa-check"></i><b>26.5</b> 用<code>distinct()</code>去除重复行</a></li>
<li class="chapter" data-level="26.6" data-path="summary-manip.html"><a href="summary-manip.html#tidyr-dropna"><i class="fa fa-check"></i><b>26.6</b> 用<code>drop_na()</code>去除指定的变量有缺失值的行</a></li>
<li class="chapter" data-level="26.7" data-path="summary-manip.html"><a href="summary-manip.html#dplyr-select"><i class="fa fa-check"></i><b>26.7</b> 用<code>select()</code>选择列子集</a></li>
<li class="chapter" data-level="26.8" data-path="summary-manip.html"><a href="summary-manip.html#dplyr-pull"><i class="fa fa-check"></i><b>26.8</b> 取出单个变量为向量</a></li>
<li class="chapter" data-level="26.9" data-path="summary-manip.html"><a href="summary-manip.html#dplyr-arrange"><i class="fa fa-check"></i><b>26.9</b> 用<code>arrange()</code>排序</a></li>
<li class="chapter" data-level="26.10" data-path="summary-manip.html"><a href="summary-manip.html#dplyr-rename"><i class="fa fa-check"></i><b>26.10</b> 用<code>rename()</code>修改变量名</a></li>
<li class="chapter" data-level="26.11" data-path="summary-manip.html"><a href="summary-manip.html#dplyr-mutate"><i class="fa fa-check"></i><b>26.11</b> 用<code>mutate()</code>计算新变量</a></li>
<li class="chapter" data-level="26.12" data-path="summary-manip.html"><a href="summary-manip.html#dplyr-transmute"><i class="fa fa-check"></i><b>26.12</b> 用<code>tranmute()</code>生成新变量的数据框</a></li>
<li class="chapter" data-level="26.13" data-path="summary-manip.html"><a href="summary-manip.html#dplyr-pipe"><i class="fa fa-check"></i><b>26.13</b> 用管道连接多次操作</a></li>
<li class="chapter" data-level="26.14" data-path="summary-manip.html"><a href="summary-manip.html#tidyr-longer"><i class="fa fa-check"></i><b>26.14</b> 宽表转换为长表</a><ul>
<li class="chapter" data-level="26.14.1" data-path="summary-manip.html"><a href="summary-manip.html#tidyr-longer-pl"><i class="fa fa-check"></i><b>26.14.1</b> <code>pivot_longer</code>函数</a></li>
<li class="chapter" data-level="26.14.2" data-path="summary-manip.html"><a href="summary-manip.html#tidyr-longer-prefixvalue"><i class="fa fa-check"></i><b>26.14.2</b> 从列名中提取数值</a></li>
<li class="chapter" data-level="26.14.3" data-path="summary-manip.html"><a href="summary-manip.html#tidyr-longer-colnamemultclassv"><i class="fa fa-check"></i><b>26.14.3</b> 从列名中提取多个分类变量值</a></li>
<li class="chapter" data-level="26.14.4" data-path="summary-manip.html"><a href="summary-manip.html#tidyr-longer-multvarsmultclassv"><i class="fa fa-check"></i><b>26.14.4</b> 一行中有多个属性的多次观测的情形</a></li>
</ul></li>
<li class="chapter" data-level="26.15" data-path="summary-manip.html"><a href="summary-manip.html#dplyr-wider"><i class="fa fa-check"></i><b>26.15</b> 长表转换为宽表</a><ul>
<li class="chapter" data-level="26.15.1" data-path="summary-manip.html"><a href="summary-manip.html#dplyr-wider-sepvars"><i class="fa fa-check"></i><b>26.15.1</b> 将多个混在一起的变量拆开</a></li>
<li class="chapter" data-level="26.15.2" data-path="summary-manip.html"><a href="summary-manip.html#dplyr-wider-combtimes"><i class="fa fa-check"></i><b>26.15.2</b> 将多个类别合并到一个观测</a></li>
<li class="chapter" data-level="26.15.3" data-path="summary-manip.html"><a href="summary-manip.html#dplyr-wider-combcross"><i class="fa fa-check"></i><b>26.15.3</b> 将交叉类别合并到一个观测</a></li>
<li class="chapter" data-level="26.15.4" data-path="summary-manip.html"><a href="summary-manip.html#dplyr-wider-mvmest"><i class="fa fa-check"></i><b>26.15.4</b> 多个变量的多种值</a></li>
<li class="chapter" data-level="26.15.5" data-path="summary-manip.html"><a href="summary-manip.html#dplyr-wider-mixed"><i class="fa fa-check"></i><b>26.15.5</b> 长宽转换混合使用</a></li>
</ul></li>
<li class="chapter" data-level="26.16" data-path="summary-manip.html"><a href="summary-manip.html#dplyr-spearate"><i class="fa fa-check"></i><b>26.16</b> 拆分数据列</a></li>
<li class="chapter" data-level="26.17" data-path="summary-manip.html"><a href="summary-manip.html#dplyr-unite"><i class="fa fa-check"></i><b>26.17</b> 合并数据列</a></li>
<li class="chapter" data-level="26.18" data-path="summary-manip.html"><a href="summary-manip.html#summ-trans-combv"><i class="fa fa-check"></i><b>26.18</b> 数据框纵向合并</a></li>
<li class="chapter" data-level="26.19" data-path="summary-manip.html"><a href="summary-manip.html#dplyr-join"><i class="fa fa-check"></i><b>26.19</b> 横向合并</a></li>
<li class="chapter" data-level="26.20" data-path="summary-manip.html"><a href="summary-manip.html#dplyr-semi"><i class="fa fa-check"></i><b>26.20</b> 利用第二个数据集筛选</a></li>
<li class="chapter" data-level="26.21" data-path="summary-manip.html"><a href="summary-manip.html#dplyr-set"><i class="fa fa-check"></i><b>26.21</b> 数据集的集合操作</a></li>
<li class="chapter" data-level="26.22" data-path="summary-manip.html"><a href="summary-manip.html#summ-trans-standard"><i class="fa fa-check"></i><b>26.22</b> 标准化</a></li>
</ul></li>
<li class="chapter" data-level="27" data-path="summary-summ.html"><a href="summary-summ.html"><i class="fa fa-check"></i><b>27</b> 数据汇总</a><ul>
<li class="chapter" data-level="27.1" data-path="summary-summ.html"><a href="summary-summ.html#dplyr-summ"><i class="fa fa-check"></i><b>27.1</b> 用dplyr作数据汇总</a></li>
<li class="chapter" data-level="27.2" data-path="summary-summ.html"><a href="summary-summ.html#dplyr-summat"><i class="fa fa-check"></i><b>27.2</b> 多个变量的汇总</a></li>
<li class="chapter" data-level="27.3" data-path="summary-summ.html"><a href="summary-summ.html#dplyr-groupby"><i class="fa fa-check"></i><b>27.3</b> 用dplyr作数据分组汇总</a></li>
<li class="chapter" data-level="27.4" data-path="summary-summ.html"><a href="summary-summ.html#dplyr-crossgroup"><i class="fa fa-check"></i><b>27.4</b> 交叉分类的汇总</a></li>
<li class="chapter" data-level="27.5" data-path="summary-summ.html"><a href="summary-summ.html#summ-nest"><i class="fa fa-check"></i><b>27.5</b> tibble中的列表列</a><ul>
<li class="chapter" data-level="27.5.1" data-path="summary-summ.html"><a href="summary-summ.html#summ-nest-intro"><i class="fa fa-check"></i><b>27.5.1</b> <code>nest</code>和<code>unnest</code></a></li>
<li class="chapter" data-level="27.5.2" data-path="summary-summ.html"><a href="summary-summ.html#summ-nest-groupby"><i class="fa fa-check"></i><b>27.5.2</b> <code>group_by</code>与<code>nest</code>配合</a></li>
<li class="chapter" data-level="27.5.3" data-path="summary-summ.html"><a href="summary-summ.html#summ-nest-summarise"><i class="fa fa-check"></i><b>27.5.3</b> <code>summarise</code>统计量用列表表示</a></li>
<li class="chapter" data-level="27.5.4" data-path="summary-summ.html"><a href="summary-summ.html#summ-nest-unnest-grammar"><i class="fa fa-check"></i><b>27.5.4</b> <code>unnest</code>的语法格式</a></li>
<li class="chapter" data-level="27.5.5" data-path="summary-summ.html"><a href="summary-summ.html#summ-nest-direct"><i class="fa fa-check"></i><b>27.5.5</b> 直接生成列表类型的列</a></li>
</ul></li>
<li class="chapter" data-level="27.6" data-path="summary-summ.html"><a href="summary-summ.html#summ-base"><i class="fa fa-check"></i><b>27.6</b> 基本R的汇总功能</a><ul>
<li class="chapter" data-level="27.6.1" data-path="summary-summ.html"><a href="summary-summ.html#summ-base-summary"><i class="fa fa-check"></i><b>27.6.1</b> <code>summary()</code>函数</a></li>
<li class="chapter" data-level="27.6.2" data-path="summary-summ.html"><a href="summary-summ.html#summ-cont"><i class="fa fa-check"></i><b>27.6.2</b> 连续型变量概括函数</a></li>
<li class="chapter" data-level="27.6.3" data-path="summary-summ.html"><a href="summary-summ.html#summ-fact"><i class="fa fa-check"></i><b>27.6.3</b> 分类变量概括</a></li>
<li class="chapter" data-level="27.6.4" data-path="summary-summ.html"><a href="summary-summ.html#summ-df"><i class="fa fa-check"></i><b>27.6.4</b> 数据框概括</a></li>
</ul></li>
<li class="chapter" data-level="27.7" data-path="summary-summ.html"><a href="summary-summ.html#summ-by"><i class="fa fa-check"></i><b>27.7</b> 用基本R作分类概括</a><ul>
<li class="chapter" data-level="27.7.1" data-path="summary-summ.html"><a href="summary-summ.html#summ-by-tapply"><i class="fa fa-check"></i><b>27.7.1</b> 用<code>tapply()</code>分组概括向量</a></li>
<li class="chapter" data-level="27.7.2" data-path="summary-summ.html"><a href="summary-summ.html#summ-by-aggregate"><i class="fa fa-check"></i><b>27.7.2</b> 用<code>aggregate()</code>分组概括数据框</a></li>
<li class="chapter" data-level="27.7.3" data-path="summary-summ.html"><a href="summary-summ.html#summ-by-split"><i class="fa fa-check"></i><b>27.7.3</b> 用<code>split()</code>函数分组后概括</a></li>
</ul></li>
<li class="chapter" data-level="27.8" data-path="summary-summ.html"><a href="summary-summ.html#summ-by-plyr"><i class="fa fa-check"></i><b>27.8</b> 用plyr包进行分类概括</a></li>
<li class="chapter" data-level="27.9" data-path="summary-summ.html"><a href="summary-summ.html#summ-by-exer"><i class="fa fa-check"></i><b>27.9</b> 练习</a></li>
</ul></li>
<li class="part"><span><b>VI 绘图</b></span></li>
<li class="chapter" data-level="28" data-path="graph.html"><a href="graph.html"><i class="fa fa-check"></i><b>28</b> 基本R绘图</a><ul>
<li class="chapter" data-level="28.1" data-path="graph.html"><a href="graph.html#graph-ph"><i class="fa fa-check"></i><b>28.1</b> 常用高级图形</a><ul>
<li class="chapter" data-level="28.1.1" data-path="graph.html"><a href="graph.html#graph-ph-barplot"><i class="fa fa-check"></i><b>28.1.1</b> 条形图</a></li>
<li class="chapter" data-level="28.1.2" data-path="graph.html"><a href="graph.html#graph-ph-hist"><i class="fa fa-check"></i><b>28.1.2</b> 直方图和密度估计图</a></li>
<li class="chapter" data-level="28.1.3" data-path="graph.html"><a href="graph.html#graph-ph-boxplot"><i class="fa fa-check"></i><b>28.1.3</b> 盒形图</a></li>
<li class="chapter" data-level="28.1.4" data-path="graph.html"><a href="graph.html#graph-pr-qq"><i class="fa fa-check"></i><b>28.1.4</b> 正态QQ图</a></li>
<li class="chapter" data-level="28.1.5" data-path="graph.html"><a href="graph.html#graph-ph-plot"><i class="fa fa-check"></i><b>28.1.5</b> 散点图</a></li>
<li class="chapter" data-level="28.1.6" data-path="graph.html"><a href="graph.html#graph-ph-curve"><i class="fa fa-check"></i><b>28.1.6</b> 曲线图</a></li>
<li class="chapter" data-level="28.1.7" data-path="graph.html"><a href="graph.html#graph-ph-3d"><i class="fa fa-check"></i><b>28.1.7</b> 三维图</a></li>
<li class="chapter" data-level="28.1.8" data-path="graph.html"><a href="graph.html#graph-ph-rgl"><i class="fa fa-check"></i><b>28.1.8</b> 动态三维图</a></li>
</ul></li>
<li class="chapter" data-level="28.2" data-path="graph.html"><a href="graph.html#graph-pl"><i class="fa fa-check"></i><b>28.2</b> 低级图形函数</a><ul>
<li class="chapter" data-level="28.2.1" data-path="graph.html"><a href="graph.html#graph-pl-abline"><i class="fa fa-check"></i><b>28.2.1</b> <code>abline()</code></a></li>
<li class="chapter" data-level="28.2.2" data-path="graph.html"><a href="graph.html#graph-pl-points"><i class="fa fa-check"></i><b>28.2.2</b> <code>points()</code></a></li>
<li class="chapter" data-level="28.2.3" data-path="graph.html"><a href="graph.html#graph-pl-lines"><i class="fa fa-check"></i><b>28.2.3</b> <code>lines()</code></a></li>
<li class="chapter" data-level="28.2.4" data-path="graph.html"><a href="graph.html#graph-pl-legend"><i class="fa fa-check"></i><b>28.2.4</b> 图例</a></li>
<li class="chapter" data-level="28.2.5" data-path="graph.html"><a href="graph.html#graph-pl-axis"><i class="fa fa-check"></i><b>28.2.5</b> <code>axis()</code></a></li>
<li class="chapter" data-level="28.2.6" data-path="graph.html"><a href="graph.html#graph-pl-text"><i class="fa fa-check"></i><b>28.2.6</b> <code>text()</code></a></li>
<li class="chapter" data-level="28.2.7" data-path="graph.html"><a href="graph.html#graph-pl-locator"><i class="fa fa-check"></i><b>28.2.7</b> <code>locator()</code>和<code>identify()</code></a></li>
</ul></li>
<li class="chapter" data-level="28.3" data-path="graph.html"><a href="graph.html#graph-par"><i class="fa fa-check"></i><b>28.3</b> 图形参数</a><ul>
<li class="chapter" data-level="28.3.1" data-path="graph.html"><a href="graph.html#graph-par-ex1"><i class="fa fa-check"></i><b>28.3.1</b> 例子：用图形参数解决barplot图形横坐标值过宽</a></li>
<li class="chapter" data-level="28.3.2" data-path="graph.html"><a href="graph.html#graph-par-elem"><i class="fa fa-check"></i><b>28.3.2</b> 图形元素控制</a></li>
<li class="chapter" data-level="28.3.3" data-path="graph.html"><a href="graph.html#graph-par-axis"><i class="fa fa-check"></i><b>28.3.3</b> 坐标轴与坐标刻度</a></li>
<li class="chapter" data-level="28.3.4" data-path="graph.html"><a href="graph.html#graph-par-mar"><i class="fa fa-check"></i><b>28.3.4</b> 图形边空</a></li>
<li class="chapter" data-level="28.3.5" data-path="graph.html"><a href="graph.html#graph-par-mfrow"><i class="fa fa-check"></i><b>28.3.5</b> 一页多图</a></li>
</ul></li>
<li class="chapter" data-level="28.4" data-path="graph.html"><a href="graph.html#graph-pout"><i class="fa fa-check"></i><b>28.4</b> 图形输出</a><ul>
<li class="chapter" data-level="28.4.1" data-path="graph.html"><a href="graph.html#graph-pout-pdf"><i class="fa fa-check"></i><b>28.4.1</b> PDF 输出</a></li>
<li class="chapter" data-level="28.4.2" data-path="graph.html"><a href="graph.html#graph-pout-png"><i class="fa fa-check"></i><b>28.4.2</b> PNG输出</a></li>
</ul></li>
<li class="chapter" data-level="28.5" data-path="graph.html"><a href="graph.html#graph-pzhn"><i class="fa fa-check"></i><b>28.5</b> 包含多种中文字体的图形</a></li>
<li class="chapter" data-level="28.6" data-path="graph.html"><a href="graph.html#graph-other"><i class="fa fa-check"></i><b>28.6</b> 其它图形</a><ul>
<li class="chapter" data-level="28.6.1" data-path="graph.html"><a href="graph.html#graph-other-corr"><i class="fa fa-check"></i><b>28.6.1</b> 相关系数图</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="29" data-path="ggplot2.html"><a href="ggplot2.html"><i class="fa fa-check"></i><b>29</b> ggplot作图入门</a><ul>
<li class="chapter" data-level="29.1" data-path="ggplot2.html"><a href="ggplot2.html#ggplot2-intro"><i class="fa fa-check"></i><b>29.1</b> 介绍</a></li>
<li class="chapter" data-level="29.2" data-path="ggplot2.html"><a href="ggplot2.html#ggplot2-principles"><i class="fa fa-check"></i><b>29.2</b> 作图的一般原则</a></li>
<li class="chapter" data-level="29.3" data-path="ggplot2.html"><a href="ggplot2.html#ggplot2-point"><i class="fa fa-check"></i><b>29.3</b> 散点图：ggplot入门</a><ul>
<li class="chapter" data-level="29.3.1" data-path="ggplot2.html"><a href="ggplot2.html#ggplot2-point-base"><i class="fa fa-check"></i><b>29.3.1</b> 基本的散点图</a></li>
<li class="chapter" data-level="29.3.2" data-path="ggplot2.html"><a href="ggplot2.html#ggplot2-point-layers"><i class="fa fa-check"></i><b>29.3.2</b> 逐步改善</a></li>
<li class="chapter" data-level="29.3.3" data-path="ggplot2.html"><a href="ggplot2.html#ggplot2-point-otheraes"><i class="fa fa-check"></i><b>29.3.3</b> 颜色、符号、线型等映射</a></li>
<li class="chapter" data-level="29.3.4" data-path="ggplot2.html"><a href="ggplot2.html#ggplot2-point-geomaes"><i class="fa fa-check"></i><b>29.3.4</b> 在geom函数中映射变量</a></li>
<li class="chapter" data-level="29.3.5" data-path="ggplot2.html"><a href="ggplot2.html#ggplot2-point-contcolor"><i class="fa fa-check"></i><b>29.3.5</b> 连续变量的颜色映射</a></li>
<li class="chapter" data-level="29.3.6" data-path="ggplot2.html"><a href="ggplot2.html#ggplot2-point-save"><i class="fa fa-check"></i><b>29.3.6</b> 保存图像</a></li>
</ul></li>
<li class="chapter" data-level="29.4" data-path="ggplot2.html"><a href="ggplot2.html#ggplot2-right"><i class="fa fa-check"></i><b>29.4</b> 折线图、分组、小图</a><ul>
<li class="chapter" data-level="29.4.1" data-path="ggplot2.html"><a href="ggplot2.html#ggplot2-right-group"><i class="fa fa-check"></i><b>29.4.1</b> 图形中的分组和折线图</a></li>
<li class="chapter" data-level="29.4.2" data-path="ggplot2.html"><a href="ggplot2.html#ggplot2-right-facet"><i class="fa fa-check"></i><b>29.4.2</b> 小图(facet)</a></li>
</ul></li>
<li class="chapter" data-level="29.5" data-path="ggplot2.html"><a href="ggplot2.html#ggplot2-bar-trans"><i class="fa fa-check"></i><b>29.5</b> 数据变换与条形图</a><ul>
<li class="chapter" data-level="29.5.1" data-path="ggplot2.html"><a href="ggplot2.html#ggplot2-right-morebar"><i class="fa fa-check"></i><b>29.5.1</b> 分段与并列条形图</a></li>
<li class="chapter" data-level="29.5.2" data-path="ggplot2.html"><a href="ggplot2.html#ggplot2-bar-morebar"><i class="fa fa-check"></i><b>29.5.2</b> 条形图的其它应用</a></li>
</ul></li>
<li class="chapter" data-level="29.6" data-path="ggplot2.html"><a href="ggplot2.html#ggplot2-hist"><i class="fa fa-check"></i><b>29.6</b> 直方图与密度估计</a></li>
<li class="chapter" data-level="29.7" data-path="ggplot2.html"><a href="ggplot2.html#ggplot2-gramm"><i class="fa fa-check"></i><b>29.7</b> 绘图语法介绍</a><ul>
<li class="chapter" data-level="29.7.1" data-path="ggplot2.html"><a href="ggplot2.html#ggplot2-gramm-gramm"><i class="fa fa-check"></i><b>29.7.1</b> 绘图语法</a></li>
<li class="chapter" data-level="29.7.2" data-path="ggplot2.html"><a href="ggplot2.html#ggplot2-gramm-geoms"><i class="fa fa-check"></i><b>29.7.2</b> 图形种类</a></li>
</ul></li>
<li class="chapter" data-level="29.8" data-path="ggplot2.html"><a href="ggplot2.html#ggplot2-moregeom"><i class="fa fa-check"></i><b>29.8</b> 更多图形种类</a><ul>
<li class="chapter" data-level="29.8.1" data-path="ggplot2.html"><a href="ggplot2.html#ggplot2-moregeom-continuousvar"><i class="fa fa-check"></i><b>29.8.1</b> 连续变量的分组图形</a></li>
<li class="chapter" data-level="29.8.2" data-path="ggplot2.html"><a href="ggplot2.html#ggplot2-moregeom-text"><i class="fa fa-check"></i><b>29.8.2</b> 坐标系中的文字</a></li>
<li class="chapter" data-level="29.8.3" data-path="ggplot2.html"><a href="ggplot2.html#ggplot2-moregeom-textops"><i class="fa fa-check"></i><b>29.8.3</b> 文字选项</a></li>
<li class="chapter" data-level="29.8.4" data-path="ggplot2.html"><a href="ggplot2.html#ggplot2-moregeom-outliers"><i class="fa fa-check"></i><b>29.8.4</b> 标出特殊点</a></li>
</ul></li>
<li class="chapter" data-level="29.9" data-path="ggplot2.html"><a href="ggplot2.html#ggplot2-auxfuncs-scale"><i class="fa fa-check"></i><b>29.9</b> 刻度(scale)</a></li>
<li class="chapter" data-level="29.10" data-path="ggplot2.html"><a href="ggplot2.html#ggplot2-refine-color"><i class="fa fa-check"></i><b>29.10</b> 如何使用颜色</a><ul>
<li class="chapter" data-level="29.10.1" data-path="ggplot2.html"><a href="ggplot2.html#ggplot2-refine-qual"><i class="fa fa-check"></i><b>29.10.1</b> 名义型变量的颜色</a></li>
<li class="chapter" data-level="29.10.2" data-path="ggplot2.html"><a href="ggplot2.html#ggplot2-refine-tile"><i class="fa fa-check"></i><b>29.10.2</b> 色块图</a></li>
<li class="chapter" data-level="29.10.3" data-path="ggplot2.html"><a href="ggplot2.html#ggplot2-refine-seq"><i class="fa fa-check"></i><b>29.10.3</b> 有序型变量的颜色</a></li>
<li class="chapter" data-level="29.10.4" data-path="ggplot2.html"><a href="ggplot2.html#ggplot2-refine-div"><i class="fa fa-check"></i><b>29.10.4</b> 相异型变量的颜色</a></li>
<li class="chapter" data-level="29.10.5" data-path="ggplot2.html"><a href="ggplot2.html#ggplot2-refine-num"><i class="fa fa-check"></i><b>29.10.5</b> 连续数值变量的颜色</a></li>
</ul></li>
<li class="chapter" data-level="29.11" data-path="ggplot2.html"><a href="ggplot2.html#ggplot2-auxfuncs"><i class="fa fa-check"></i><b>29.11</b> 标题、标注、指南、拼接</a><ul>
<li class="chapter" data-level="29.11.1" data-path="ggplot2.html"><a href="ggplot2.html#ggplot2-auxfuncs-labs"><i class="fa fa-check"></i><b>29.11.1</b> 标题</a></li>
<li class="chapter" data-level="29.11.2" data-path="ggplot2.html"><a href="ggplot2.html#ggplot2-auxfuncs-anno"><i class="fa fa-check"></i><b>29.11.2</b> 标注功能</a></li>
<li class="chapter" data-level="29.11.3" data-path="ggplot2.html"><a href="ggplot2.html#ggplot2-auxfuncs-guides"><i class="fa fa-check"></i><b>29.11.3</b> 指南(guides)</a></li>
<li class="chapter" data-level="29.11.4" data-path="ggplot2.html"><a href="ggplot2.html#ggplot2-auxfuncs-compfig"><i class="fa fa-check"></i><b>29.11.4</b> 拼接图形</a></li>
</ul></li>
<li class="chapter" data-level="29.12" data-path="ggplot2.html"><a href="ggplot2.html#ggplot2-refine"><i class="fa fa-check"></i><b>29.12</b> 图形定制调整</a><ul>
<li class="chapter" data-level="29.12.1" data-path="ggplot2.html"><a href="ggplot2.html#ggplot2-refine-asasec"><i class="fa fa-check"></i><b>29.12.1</b> 图形逐步调整例子</a></li>
</ul></li>
<li class="chapter" data-level="29.13" data-path="ggplot2.html"><a href="ggplot2.html#ggplot2-theme"><i class="fa fa-check"></i><b>29.13</b> 主题</a></li>
<li class="chapter" data-level="29.14" data-path="ggplot2.html"><a href="ggplot2.html#ggplot2-ref"><i class="fa fa-check"></i><b>29.14</b> 参考文献</a></li>
</ul></li>
<li class="chapter" data-level="30" data-path="ggplotvis.html"><a href="ggplotvis.html"><i class="fa fa-check"></i><b>30</b> ggplot的各种图形</a><ul>
<li class="chapter" data-level="30.1" data-path="ggplotvis.html"><a href="ggplotvis.html#ggplotvis-intro"><i class="fa fa-check"></i><b>30.1</b> 介绍</a></li>
<li class="chapter" data-level="30.2" data-path="ggplotvis.html"><a href="ggplotvis.html#ggplotvis-amount"><i class="fa fa-check"></i><b>30.2</b> 表现数量</a><ul>
<li class="chapter" data-level="30.2.1" data-path="ggplotvis.html"><a href="ggplotvis.html#ggplotvis-amount-bar"><i class="fa fa-check"></i><b>30.2.1</b> 条形图</a></li>
<li class="chapter" data-level="30.2.2" data-path="ggplotvis.html"><a href="ggplotvis.html#ggplotvis-amount-point"><i class="fa fa-check"></i><b>30.2.2</b> 点图</a></li>
<li class="chapter" data-level="30.2.3" data-path="ggplotvis.html"><a href="ggplotvis.html#ggplotvis-amount-heatmap"><i class="fa fa-check"></i><b>30.2.3</b> 热力图</a></li>
</ul></li>
<li class="chapter" data-level="30.3" data-path="ggplotvis.html"><a href="ggplotvis.html#ggplotvis-dist"><i class="fa fa-check"></i><b>30.3</b> 表现分布</a><ul>
<li class="chapter" data-level="30.3.1" data-path="ggplotvis.html"><a href="ggplotvis.html#ggplotvis-dist-suni-hist"><i class="fa fa-check"></i><b>30.3.1</b> 单个一元分布的直方图与密度估计图</a></li>
<li class="chapter" data-level="30.3.2" data-path="ggplotvis.html"><a href="ggplotvis.html#ggplotvis-dist-muni"><i class="fa fa-check"></i><b>30.3.2</b> 多个一元分布的直方图和密度图形</a></li>
<li class="chapter" data-level="30.3.3" data-path="ggplotvis.html"><a href="ggplotvis.html#ggplotvis-dist-cdf"><i class="fa fa-check"></i><b>30.3.3</b> 经验分布函数图</a></li>
<li class="chapter" data-level="30.3.4" data-path="ggplotvis.html"><a href="ggplotvis.html#ggplotvis-dist-qqplot"><i class="fa fa-check"></i><b>30.3.4</b> QQ图</a></li>
<li class="chapter" data-level="30.3.5" data-path="ggplotvis.html"><a href="ggplotvis.html#ggplotvis-dist-boxplot"><i class="fa fa-check"></i><b>30.3.5</b> 盒形图</a></li>
<li class="chapter" data-level="30.3.6" data-path="ggplotvis.html"><a href="ggplotvis.html#ggplotvis-dist-violin"><i class="fa fa-check"></i><b>30.3.6</b> 小提琴图</a></li>
<li class="chapter" data-level="30.3.7" data-path="ggplotvis.html"><a href="ggplotvis.html#ggplotvis-dist-mdens"><i class="fa fa-check"></i><b>30.3.7</b> 多个密度的其它画法</a></li>
<li class="chapter" data-level="30.3.8" data-path="ggplotvis.html"><a href="ggplotvis.html#ggplotvis-dist-2d"><i class="fa fa-check"></i><b>30.3.8</b> 二元分布直方图和等值线图</a></li>
</ul></li>
<li class="chapter" data-level="30.4" data-path="ggplotvis.html"><a href="ggplotvis.html#ggplotvis-prop"><i class="fa fa-check"></i><b>30.4</b> 表现比例</a><ul>
<li class="chapter" data-level="30.4.1" data-path="ggplotvis.html"><a href="ggplotvis.html#ggplotvis-prop-uni"><i class="fa fa-check"></i><b>30.4.1</b> 单个分布</a></li>
<li class="chapter" data-level="30.4.2" data-path="ggplotvis.html"><a href="ggplotvis.html#ggplotvis-prop-mult"><i class="fa fa-check"></i><b>30.4.2</b> 组间的比例分布的比较</a></li>
<li class="chapter" data-level="30.4.3" data-path="ggplotvis.html"><a href="ggplotvis.html#ggplotvis-prop-nest"><i class="fa fa-check"></i><b>30.4.3</b> 嵌套比例分布的比较</a></li>
</ul></li>
<li class="chapter" data-level="30.5" data-path="ggplotvis.html"><a href="ggplotvis.html#ggplotvis-mulvar"><i class="fa fa-check"></i><b>30.5</b> 表现多个变量间的关系</a><ul>
<li class="chapter" data-level="30.5.1" data-path="ggplotvis.html"><a href="ggplotvis.html#ggplotvis-mulvar-scatter"><i class="fa fa-check"></i><b>30.5.1</b> 散点图</a></li>
<li class="chapter" data-level="30.5.2" data-path="ggplotvis.html"><a href="ggplotvis.html#ggplotvis-mulvar-scatmat"><i class="fa fa-check"></i><b>30.5.2</b> 散点图矩阵</a></li>
<li class="chapter" data-level="30.5.3" data-path="ggplotvis.html"><a href="ggplotvis.html#ggplotvis-mulvar-corrgram"><i class="fa fa-check"></i><b>30.5.3</b> 相关系数矩阵图</a></li>
<li class="chapter" data-level="30.5.4" data-path="ggplotvis.html"><a href="ggplotvis.html#ggplotvis-mulvar-dimreduct"><i class="fa fa-check"></i><b>30.5.4</b> 数据降维</a></li>
<li class="chapter" data-level="30.5.5" data-path="ggplotvis.html"><a href="ggplotvis.html#ggplotvis-mulvar-paird"><i class="fa fa-check"></i><b>30.5.5</b> 成对数据</a></li>
</ul></li>
<li class="chapter" data-level="30.6" data-path="ggplotvis.html"><a href="ggplotvis.html#ggplotvis-ts"><i class="fa fa-check"></i><b>30.6</b> 时间序列图</a><ul>
<li class="chapter" data-level="30.6.1" data-path="ggplotvis.html"><a href="ggplotvis.html#ggplotvis-ts-uni"><i class="fa fa-check"></i><b>30.6.1</b> 一元时间序列</a></li>
<li class="chapter" data-level="30.6.2" data-path="ggplotvis.html"><a href="ggplotvis.html#ggplotvis-ts-mul"><i class="fa fa-check"></i><b>30.6.2</b> 多元时间序列</a></li>
<li class="chapter" data-level="30.6.3" data-path="ggplotvis.html"><a href="ggplotvis.html#ggplotvis-ts-het"><i class="fa fa-check"></i><b>30.6.3</b> 多个不同类型指标的时间序列</a></li>
</ul></li>
<li class="chapter" data-level="30.7" data-path="ggplotvis.html"><a href="ggplotvis.html#ggplotvis-fit"><i class="fa fa-check"></i><b>30.7</b> 拟合曲线图</a><ul>
<li class="chapter" data-level="30.7.1" data-path="ggplotvis.html"><a href="ggplotvis.html#ggplotvis-fit-smooth"><i class="fa fa-check"></i><b>30.7.1</b> 平滑方法</a></li>
<li class="chapter" data-level="30.7.2" data-path="ggplotvis.html"><a href="ggplotvis.html#ggplotvis-fit-param"><i class="fa fa-check"></i><b>30.7.2</b> 参数模型方法</a></li>
</ul></li>
<li class="chapter" data-level="30.8" data-path="ggplotvis.html"><a href="ggplotvis.html#ggplotvis-uncert"><i class="fa fa-check"></i><b>30.8</b> 表现不确定性</a><ul>
<li class="chapter" data-level="30.8.1" data-path="ggplotvis.html"><a href="ggplotvis.html#ggplotvis-uncert-prob"><i class="fa fa-check"></i><b>30.8.1</b> 表现概率</a></li>
<li class="chapter" data-level="30.8.2" data-path="ggplotvis.html"><a href="ggplotvis.html#ggplotvis-uncert-se"><i class="fa fa-check"></i><b>30.8.2</b> 表现点估计精度</a></li>
<li class="chapter" data-level="30.8.3" data-path="ggplotvis.html"><a href="ggplotvis.html#ggplotvis-uncert-cband"><i class="fa fa-check"></i><b>30.8.3</b> 拟合曲线的置信带</a></li>
<li class="chapter" data-level="30.8.4" data-path="ggplotvis.html"><a href="ggplotvis.html#ggplotvis-uncert-dyn"><i class="fa fa-check"></i><b>30.8.4</b> 随机结果动态演示</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>VII 统计模型</b></span></li>
<li class="chapter" data-level="31" data-path="stat-basics.html"><a href="stat-basics.html"><i class="fa fa-check"></i><b>31</b> R初等统计分析</a><ul>
<li class="chapter" data-level="31.1" data-path="stat-basics.html"><a href="stat-basics.html#stat-base-distr"><i class="fa fa-check"></i><b>31.1</b> 概率分布</a></li>
<li class="chapter" data-level="31.2" data-path="stat-basics.html"><a href="stat-basics.html#stat-base-mle"><i class="fa fa-check"></i><b>31.2</b> 最大似然估计</a><ul>
<li class="chapter" data-level="31.2.1" data-path="stat-basics.html"><a href="stat-basics.html#stat-base-mle-norm1"><i class="fa fa-check"></i><b>31.2.1</b> 一元正态分布参数最大似然估计</a></li>
</ul></li>
<li class="chapter" data-level="31.3" data-path="stat-basics.html"><a href="stat-basics.html#stat-base-hyptest"><i class="fa fa-check"></i><b>31.3</b> 假设检验和置信区间</a><ul>
<li class="chapter" data-level="31.3.1" data-path="stat-basics.html"><a href="stat-basics.html#stat-base-hyptest-mu"><i class="fa fa-check"></i><b>31.3.1</b> 均值的假设检验和置信区间</a></li>
<li class="chapter" data-level="31.3.2" data-path="stat-basics.html"><a href="stat-basics.html#stat-base-hyptest-prop"><i class="fa fa-check"></i><b>31.3.2</b> 比例的假设检验和置信区间</a></li>
<li class="chapter" data-level="31.3.3" data-path="stat-basics.html"><a href="stat-basics.html#stat-base-hyptest-sigma"><i class="fa fa-check"></i><b>31.3.3</b> 方差的假设检验和置信区间</a></li>
<li class="chapter" data-level="31.3.4" data-path="stat-basics.html"><a href="stat-basics.html#stat-base-hyptest-gof"><i class="fa fa-check"></i><b>31.3.4</b> 拟合优度检验</a></li>
<li class="chapter" data-level="31.3.5" data-path="stat-basics.html"><a href="stat-basics.html#stat-base-hyptest-gof-vcd"><i class="fa fa-check"></i><b>31.3.5</b> 检验分布类型</a></li>
<li class="chapter" data-level="31.3.6" data-path="stat-basics.html"><a href="stat-basics.html#stat-base-hyptest-indepcont"><i class="fa fa-check"></i><b>31.3.6</b> 列联表独立性卡方检验</a></li>
<li class="chapter" data-level="31.3.7" data-path="stat-basics.html"><a href="stat-basics.html#stat-base-hyptest-npar"><i class="fa fa-check"></i><b>31.3.7</b> 非参数检验</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="32" data-path="stat-reg.html"><a href="stat-reg.html"><i class="fa fa-check"></i><b>32</b> R相关与回归</a><ul>
<li class="chapter" data-level="32.1" data-path="stat-reg.html"><a href="stat-reg.html#stat-base-reg-cor"><i class="fa fa-check"></i><b>32.1</b> 相关分析</a><ul>
<li class="chapter" data-level="32.1.1" data-path="stat-reg.html"><a href="stat-reg.html#stat-base-reg-cor-prop"><i class="fa fa-check"></i><b>32.1.1</b> 相关系数的性质</a></li>
<li class="chapter" data-level="32.1.2" data-path="stat-reg.html"><a href="stat-reg.html#stat-base-reg-cor-caus"><i class="fa fa-check"></i><b>32.1.2</b> 相关与因果</a></li>
<li class="chapter" data-level="32.1.3" data-path="stat-reg.html"><a href="stat-reg.html#stat-base-reg-cor-magn"><i class="fa fa-check"></i><b>32.1.3</b> 相关系数大小</a></li>
<li class="chapter" data-level="32.1.4" data-path="stat-reg.html"><a href="stat-reg.html#stat-base-reg-cor-test"><i class="fa fa-check"></i><b>32.1.4</b> 相关系数的检验</a></li>
<li class="chapter" data-level="32.1.5" data-path="stat-reg.html"><a href="stat-reg.html#stat-base-reg-cor-vcorr"><i class="fa fa-check"></i><b>32.1.5</b> 相关阵</a></li>
</ul></li>
<li class="chapter" data-level="32.2" data-path="stat-reg.html"><a href="stat-reg.html#stat-base-reg-regsimp"><i class="fa fa-check"></i><b>32.2</b> 一元回归分析</a><ul>
<li class="chapter" data-level="32.2.1" data-path="stat-reg.html"><a href="stat-reg.html#stat-base-reg-regsimp-model"><i class="fa fa-check"></i><b>32.2.1</b> 模型</a></li>
<li class="chapter" data-level="32.2.2" data-path="stat-reg.html"><a href="stat-reg.html#stat-base-reg-regsimp-ls"><i class="fa fa-check"></i><b>32.2.2</b> 最小二乘法</a></li>
<li class="chapter" data-level="32.2.3" data-path="stat-reg.html"><a href="stat-reg.html#stat-base-reg-regsimp-test"><i class="fa fa-check"></i><b>32.2.3</b> 回归有效性</a></li>
<li class="chapter" data-level="32.2.4" data-path="stat-reg.html"><a href="stat-reg.html#stat-base-reg-regsimp-prog"><i class="fa fa-check"></i><b>32.2.4</b> R程序</a></li>
<li class="chapter" data-level="32.2.5" data-path="stat-reg.html"><a href="stat-reg.html#stat-base-reg-regsimp-diag"><i class="fa fa-check"></i><b>32.2.5</b> 回归诊断</a></li>
<li class="chapter" data-level="32.2.6" data-path="stat-reg.html"><a href="stat-reg.html#stat-base-reg-regsimp-ci"><i class="fa fa-check"></i><b>32.2.6</b> 预测区间</a></li>
<li class="chapter" data-level="32.2.7" data-path="stat-reg.html"><a href="stat-reg.html#stat-base-reg-regsimp-control"><i class="fa fa-check"></i><b>32.2.7</b> 控制</a></li>
</ul></li>
<li class="chapter" data-level="32.3" data-path="stat-reg.html"><a href="stat-reg.html#stat-base-reg-regmu"><i class="fa fa-check"></i><b>32.3</b> 多元线性回归</a><ul>
<li class="chapter" data-level="32.3.1" data-path="stat-reg.html"><a href="stat-reg.html#stat-base-reg-regmu-mod"><i class="fa fa-check"></i><b>32.3.1</b> 模型</a></li>
<li class="chapter" data-level="32.3.2" data-path="stat-reg.html"><a href="stat-reg.html#stat-base-reg-regmu-est"><i class="fa fa-check"></i><b>32.3.2</b> 参数估计</a></li>
<li class="chapter" data-level="32.3.3" data-path="stat-reg.html"><a href="stat-reg.html#stat-base-reg-regmu-rcode"><i class="fa fa-check"></i><b>32.3.3</b> R的多元回归程序</a></li>
<li class="chapter" data-level="32.3.4" data-path="stat-reg.html"><a href="stat-reg.html#stat-base-reg-regmu-test"><i class="fa fa-check"></i><b>32.3.4</b> 模型的检验</a></li>
<li class="chapter" data-level="32.3.5" data-path="stat-reg.html"><a href="stat-reg.html#stat-base-reg-regmu-subset"><i class="fa fa-check"></i><b>32.3.5</b> 回归自变量筛选</a></li>
<li class="chapter" data-level="32.3.6" data-path="stat-reg.html"><a href="stat-reg.html#stat-base-reg-regmu-dum"><i class="fa fa-check"></i><b>32.3.6</b> 哑变量与变截距项的模型</a></li>
<li class="chapter" data-level="32.3.7" data-path="stat-reg.html"><a href="stat-reg.html#stat-base-reg-regmu-resid"><i class="fa fa-check"></i><b>32.3.7</b> 残差诊断</a></li>
<li class="chapter" data-level="32.3.8" data-path="stat-reg.html"><a href="stat-reg.html#stat-base-reg-regmu-colin"><i class="fa fa-check"></i><b>32.3.8</b> 多重共线性</a></li>
<li class="chapter" data-level="32.3.9" data-path="stat-reg.html"><a href="stat-reg.html#stat-base-reg-regmu-lev"><i class="fa fa-check"></i><b>32.3.9</b> 强影响点分析</a></li>
<li class="chapter" data-level="32.3.10" data-path="stat-reg.html"><a href="stat-reg.html#stat-base-reg-regmu-overfit"><i class="fa fa-check"></i><b>32.3.10</b> 过度拟合示例</a></li>
<li class="chapter" data-level="32.3.11" data-path="stat-reg.html"><a href="stat-reg.html#stat-base-reg-regmu-comp-inset"><i class="fa fa-check"></i><b>32.3.11</b> 嵌套模型的比较</a></li>
<li class="chapter" data-level="32.3.12" data-path="stat-reg.html"><a href="stat-reg.html#stat-base-reg-regmu-pred"><i class="fa fa-check"></i><b>32.3.12</b> 拟合与预测</a></li>
<li class="chapter" data-level="32.3.13" data-path="stat-reg.html"><a href="stat-reg.html#stat-base-reg-regmu-curve"><i class="fa fa-check"></i><b>32.3.13</b> 利用线性回归模型做曲线拟合</a></li>
<li class="chapter" data-level="32.3.14" data-path="stat-reg.html"><a href="stat-reg.html#stat-base-reg-regmu-group"><i class="fa fa-check"></i><b>32.3.14</b> 分组建立多个模型</a></li>
</ul></li>
<li class="chapter" data-level="32.4" data-path="stat-reg.html"><a href="stat-reg.html#stat-base-reg-npar"><i class="fa fa-check"></i><b>32.4</b> 非参数回归</a><ul>
<li class="chapter" data-level="32.4.1" data-path="stat-reg.html"><a href="stat-reg.html#stat-base-reg-npar-mod"><i class="fa fa-check"></i><b>32.4.1</b> 模型</a></li>
<li class="chapter" data-level="32.4.2" data-path="stat-reg.html"><a href="stat-reg.html#stat-base-reg-cfit-spl1d"><i class="fa fa-check"></i><b>32.4.2</b> 样条平滑</a></li>
<li class="chapter" data-level="32.4.3" data-path="stat-reg.html"><a href="stat-reg.html#stat-base-reg-cfit-loess"><i class="fa fa-check"></i><b>32.4.3</b> 局部多项式曲线平滑</a></li>
<li class="chapter" data-level="32.4.4" data-path="stat-reg.html"><a href="stat-reg.html#stat-base-reg-cfit-bs"><i class="fa fa-check"></i><b>32.4.4</b> 样条函数变换</a></li>
<li class="chapter" data-level="32.4.5" data-path="stat-reg.html"><a href="stat-reg.html#stat-base-reg-cfit-gam"><i class="fa fa-check"></i><b>32.4.5</b> 线性可加模型</a></li>
</ul></li>
<li class="chapter" data-level="32.5" data-path="stat-reg.html"><a href="stat-reg.html#stat-base-reg-reglog"><i class="fa fa-check"></i><b>32.5</b> Logistic回归</a><ul>
<li class="chapter" data-level="32.5.1" data-path="stat-reg.html"><a href="stat-reg.html#stat-base-reg-reglog-mod"><i class="fa fa-check"></i><b>32.5.1</b> 模型</a></li>
<li class="chapter" data-level="32.5.2" data-path="stat-reg.html"><a href="stat-reg.html#stat-base-reg-reglog-rcode"><i class="fa fa-check"></i><b>32.5.2</b> R程序</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="33" data-path="stat-tsa.html"><a href="stat-tsa.html"><i class="fa fa-check"></i><b>33</b> R时间序列分析</a><ul>
<li class="chapter" data-level="33.1" data-path="stat-tsa.html"><a href="stat-tsa.html#stat-tsa-defs"><i class="fa fa-check"></i><b>33.1</b> 基本概念</a></li>
<li class="chapter" data-level="33.2" data-path="stat-tsa.html"><a href="stat-tsa.html#stat-tsa-dtype"><i class="fa fa-check"></i><b>33.2</b> 时间序列数据类型</a><ul>
<li class="chapter" data-level="33.2.1" data-path="stat-tsa.html"><a href="stat-tsa.html#stat-tsa-dtype-ts"><i class="fa fa-check"></i><b>33.2.1</b> ts类型</a></li>
<li class="chapter" data-level="33.2.2" data-path="stat-tsa.html"><a href="stat-tsa.html#stat-tsa-dtype-xts"><i class="fa fa-check"></i><b>33.2.2</b> xts类型与常用函数</a></li>
</ul></li>
<li class="chapter" data-level="33.3" data-path="stat-tsa.html"><a href="stat-tsa.html#stat-tsa-basicstat"><i class="fa fa-check"></i><b>33.3</b> 基本分析与作图</a></li>
<li class="chapter" data-level="33.4" data-path="stat-tsa.html"><a href="stat-tsa.html#stat-tsa-arima"><i class="fa fa-check"></i><b>33.4</b> ARIMA建模和模拟</a><ul>
<li class="chapter" data-level="33.4.1" data-path="stat-tsa.html"><a href="stat-tsa.html#stat-tsa-arima-def"><i class="fa fa-check"></i><b>33.4.1</b> 模型公式</a></li>
<li class="chapter" data-level="33.4.2" data-path="stat-tsa.html"><a href="stat-tsa.html#stat-tsa-arima-sim"><i class="fa fa-check"></i><b>33.4.2</b> 模拟</a></li>
<li class="chapter" data-level="33.4.3" data-path="stat-tsa.html"><a href="stat-tsa.html#stat-tsa-arima-armod"><i class="fa fa-check"></i><b>33.4.3</b> AR建模</a></li>
<li class="chapter" data-level="33.4.4" data-path="stat-tsa.html"><a href="stat-tsa.html#stat-tsa-arima-armamod"><i class="fa fa-check"></i><b>33.4.4</b> ARMA建模</a></li>
<li class="chapter" data-level="33.4.5" data-path="stat-tsa.html"><a href="stat-tsa.html#stat-tsa-arima-diag"><i class="fa fa-check"></i><b>33.4.5</b> 模型诊断</a></li>
<li class="chapter" data-level="33.4.6" data-path="stat-tsa.html"><a href="stat-tsa.html#stat-tsa-arima-lbtest"><i class="fa fa-check"></i><b>33.4.6</b> 白噪声检验</a></li>
<li class="chapter" data-level="33.4.7" data-path="stat-tsa.html"><a href="stat-tsa.html#stat-tsa-arima-sparse"><i class="fa fa-check"></i><b>33.4.7</b> 稀疏系数估计</a></li>
<li class="chapter" data-level="33.4.8" data-path="stat-tsa.html"><a href="stat-tsa.html#stat-tsa-arima-adftest"><i class="fa fa-check"></i><b>33.4.8</b> 单位根检验</a></li>
<li class="chapter" data-level="33.4.9" data-path="stat-tsa.html"><a href="stat-tsa.html#stat-tsa-arima-cfuncs"><i class="fa fa-check"></i><b>33.4.9</b> ARMA模型的一些自定义函数</a></li>
</ul></li>
<li class="chapter" data-level="33.5" data-path="stat-tsa.html"><a href="stat-tsa.html#stat-tsa-spectra"><i class="fa fa-check"></i><b>33.5</b> 谱密度估计</a></li>
<li class="chapter" data-level="33.6" data-path="stat-tsa.html"><a href="stat-tsa.html#stat-tsa-garch"><i class="fa fa-check"></i><b>33.6</b> GARCH类模型</a></li>
<li class="chapter" data-level="33.7" data-path="stat-tsa.html"><a href="stat-tsa.html#stat-tsa-mtsa"><i class="fa fa-check"></i><b>33.7</b> 多元时间序列基础统计</a></li>
<li class="chapter" data-level="33.8" data-path="stat-tsa.html"><a href="stat-tsa.html#stat-tsa-var"><i class="fa fa-check"></i><b>33.8</b> VAR模型</a></li>
<li class="chapter" data-level="33.9" data-path="stat-tsa.html"><a href="stat-tsa.html#stat-tsa-coint"><i class="fa fa-check"></i><b>33.9</b> 协整分析</a></li>
<li class="chapter" data-level="33.10" data-path="stat-tsa.html"><a href="stat-tsa.html#stat-tsa-causal"><i class="fa fa-check"></i><b>33.10</b> 因果性检验</a></li>
</ul></li>
<li class="chapter" data-level="34" data-path="stat-learning.html"><a href="stat-learning.html"><i class="fa fa-check"></i><b>34</b> 统计学习介绍</a><ul>
<li class="chapter" data-level="34.1" data-path="stat-learning.html"><a href="stat-learning.html#statl-intro"><i class="fa fa-check"></i><b>34.1</b> 统计学习的基本概念和一般步骤</a><ul>
<li class="chapter" data-level="34.1.1" data-path="stat-learning.html"><a href="stat-learning.html#statl-intro-basic"><i class="fa fa-check"></i><b>34.1.1</b> 统计学习的基本概念和方法</a></li>
<li class="chapter" data-level="34.1.2" data-path="stat-learning.html"><a href="stat-learning.html#statl-intro-biasvar"><i class="fa fa-check"></i><b>34.1.2</b> 偏差与方差折衷</a></li>
<li class="chapter" data-level="34.1.3" data-path="stat-learning.html"><a href="stat-learning.html#statl-cv"><i class="fa fa-check"></i><b>34.1.3</b> 交叉验证</a></li>
<li class="chapter" data-level="34.1.4" data-path="stat-learning.html"><a href="stat-learning.html#statl-steps"><i class="fa fa-check"></i><b>34.1.4</b> 一般步骤</a></li>
</ul></li>
<li class="chapter" data-level="34.2" data-path="stat-learning.html"><a href="stat-learning.html#statl-hitters"><i class="fa fa-check"></i><b>34.2</b> Hitters数据分析</a><ul>
<li class="chapter" data-level="34.2.1" data-path="stat-learning.html"><a href="stat-learning.html#statl-hitters-subset"><i class="fa fa-check"></i><b>34.2.1</b> 回归自变量选择</a></li>
<li class="chapter" data-level="34.2.2" data-path="stat-learning.html"><a href="stat-learning.html#statl-hitters-ridge"><i class="fa fa-check"></i><b>34.2.2</b> 岭回归</a></li>
<li class="chapter" data-level="34.2.3" data-path="stat-learning.html"><a href="stat-learning.html#statl-hitters-lasso"><i class="fa fa-check"></i><b>34.2.3</b> Lasso回归</a></li>
<li class="chapter" data-level="34.2.4" data-path="stat-learning.html"><a href="stat-learning.html#statl-hitters-simpt"><i class="fa fa-check"></i><b>34.2.4</b> 树回归的简单演示</a></li>
<li class="chapter" data-level="34.2.5" data-path="stat-learning.html"><a href="stat-learning.html#statl-hitters-tree"><i class="fa fa-check"></i><b>34.2.5</b> 树回归</a></li>
<li class="chapter" data-level="34.2.6" data-path="stat-learning.html"><a href="stat-learning.html#statl-hitters-bag"><i class="fa fa-check"></i><b>34.2.6</b> 装袋法</a></li>
<li class="chapter" data-level="34.2.7" data-path="stat-learning.html"><a href="stat-learning.html#statl-hitters-rf"><i class="fa fa-check"></i><b>34.2.7</b> 随机森林</a></li>
</ul></li>
<li class="chapter" data-level="34.3" data-path="stat-learning.html"><a href="stat-learning.html#statl-heart"><i class="fa fa-check"></i><b>34.3</b> Heart数据分析</a><ul>
<li class="chapter" data-level="34.3.1" data-path="stat-learning.html"><a href="stat-learning.html#statl-heart-tree"><i class="fa fa-check"></i><b>34.3.1</b> 树回归</a></li>
<li class="chapter" data-level="34.3.2" data-path="stat-learning.html"><a href="stat-learning.html#statl-heart-bag"><i class="fa fa-check"></i><b>34.3.2</b> 用装袋法</a></li>
<li class="chapter" data-level="34.3.3" data-path="stat-learning.html"><a href="stat-learning.html#statl-heart-rf"><i class="fa fa-check"></i><b>34.3.3</b> 用随机森林</a></li>
</ul></li>
<li class="chapter" data-level="34.4" data-path="stat-learning.html"><a href="stat-learning.html#statl-car"><i class="fa fa-check"></i><b>34.4</b> 汽车销量数据分析</a><ul>
<li class="chapter" data-level="34.4.1" data-path="stat-learning.html"><a href="stat-learning.html#statl-car-tree"><i class="fa fa-check"></i><b>34.4.1</b> 判别树</a></li>
<li class="chapter" data-level="34.4.2" data-path="stat-learning.html"><a href="stat-learning.html#statl-car-rf"><i class="fa fa-check"></i><b>34.4.2</b> 随机森林</a></li>
</ul></li>
<li class="chapter" data-level="34.5" data-path="stat-learning.html"><a href="stat-learning.html#statl-boston"><i class="fa fa-check"></i><b>34.5</b> 波士顿郊区房价数据</a><ul>
<li class="chapter" data-level="34.5.1" data-path="stat-learning.html"><a href="stat-learning.html#statl-boston-tree"><i class="fa fa-check"></i><b>34.5.1</b> 回归树</a></li>
<li class="chapter" data-level="34.5.2" data-path="stat-learning.html"><a href="stat-learning.html#statl-boston-bag"><i class="fa fa-check"></i><b>34.5.2</b> 装袋法</a></li>
<li class="chapter" data-level="34.5.3" data-path="stat-learning.html"><a href="stat-learning.html#statl-boston-rf"><i class="fa fa-check"></i><b>34.5.3</b> 随机森林</a></li>
<li class="chapter" data-level="34.5.4" data-path="stat-learning.html"><a href="stat-learning.html#statl-boston-boost"><i class="fa fa-check"></i><b>34.5.4</b> 提升法</a></li>
</ul></li>
<li class="chapter" data-level="34.6" data-path="stat-learning.html"><a href="stat-learning.html#statl-svm"><i class="fa fa-check"></i><b>34.6</b> 支持向量机方法</a><ul>
<li class="chapter" data-level="34.6.1" data-path="stat-learning.html"><a href="stat-learning.html#statl-svm-heart"><i class="fa fa-check"></i><b>34.6.1</b> 支持向量机用于Heart数据</a></li>
</ul></li>
<li class="chapter" data-level="34.7" data-path="stat-learning.html"><a href="stat-learning.html#statl-app"><i class="fa fa-check"></i><b>34.7</b> 附录</a><ul>
<li class="chapter" data-level="34.7.1" data-path="stat-learning.html"><a href="stat-learning.html#statl-app-hitters"><i class="fa fa-check"></i><b>34.7.1</b> Hitters数据</a></li>
<li class="chapter" data-level="34.7.2" data-path="stat-learning.html"><a href="stat-learning.html#statl-app-heart"><i class="fa fa-check"></i><b>34.7.2</b> Heart数据</a></li>
<li class="chapter" data-level="34.7.3" data-path="stat-learning.html"><a href="stat-learning.html#statl-app-car"><i class="fa fa-check"></i><b>34.7.3</b> CarSeats数据</a></li>
<li class="chapter" data-level="34.7.4" data-path="stat-learning.html"><a href="stat-learning.html#statl-app-boston"><i class="fa fa-check"></i><b>34.7.4</b> Boston数据</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="35" data-path="simulation.html"><a href="simulation.html"><i class="fa fa-check"></i><b>35</b> 随机模拟</a><ul>
<li class="chapter" data-level="35.1" data-path="simulation.html"><a href="simulation.html#simint"><i class="fa fa-check"></i><b>35.1</b> 随机数</a></li>
<li class="chapter" data-level="35.2" data-path="simulation.html"><a href="simulation.html#simsamp"><i class="fa fa-check"></i><b>35.2</b> <code>sample()</code>函数</a></li>
<li class="chapter" data-level="35.3" data-path="simulation.html"><a href="simulation.html#simexamp"><i class="fa fa-check"></i><b>35.3</b> 随机模拟示例</a><ul>
<li class="chapter" data-level="35.3.1" data-path="simulation.html"><a href="simulation.html#simexamp-expect"><i class="fa fa-check"></i><b>35.3.1</b> 估计期望值</a></li>
<li class="chapter" data-level="35.3.2" data-path="simulation.html"><a href="simulation.html#simexamp-lm"><i class="fa fa-check"></i><b>35.3.2</b> 线性回归模拟</a></li>
<li class="chapter" data-level="35.3.3" data-path="simulation.html"><a href="simulation.html#simexamp-kde"><i class="fa fa-check"></i><b>35.3.3</b> 核密度的bootstrap置信区间</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>VIII 特殊应用</b></span></li>
<li class="chapter" data-level="36" data-path="text.html"><a href="text.html"><i class="fa fa-check"></i><b>36</b> R语言的文本处理</a><ul>
<li class="chapter" data-level="36.1" data-path="text.html"><a href="text.html#text-simple"><i class="fa fa-check"></i><b>36.1</b> 简单的文本处理</a><ul>
<li class="chapter" data-level="36.1.1" data-path="text.html"><a href="text.html#text-simple-const"><i class="fa fa-check"></i><b>36.1.1</b> 字符型常量与字符型向量</a></li>
<li class="chapter" data-level="36.1.2" data-path="text.html"><a href="text.html#text-paste"><i class="fa fa-check"></i><b>36.1.2</b> 字符串连接、重复</a></li>
<li class="chapter" data-level="36.1.3" data-path="text.html"><a href="text.html#text-formatout"><i class="fa fa-check"></i><b>36.1.3</b> 格式化输出</a></li>
<li class="chapter" data-level="36.1.4" data-path="text.html"><a href="text.html#text-length"><i class="fa fa-check"></i><b>36.1.4</b> 字符串长度</a></li>
<li class="chapter" data-level="36.1.5" data-path="text.html"><a href="text.html#text-substring"><i class="fa fa-check"></i><b>36.1.5</b> 取子串</a></li>
<li class="chapter" data-level="36.1.6" data-path="text.html"><a href="text.html#text-convert"><i class="fa fa-check"></i><b>36.1.6</b> 字符串变换</a></li>
<li class="chapter" data-level="36.1.7" data-path="text.html"><a href="text.html#text-simp-find"><i class="fa fa-check"></i><b>36.1.7</b> 简单匹配与查找</a></li>
<li class="chapter" data-level="36.1.8" data-path="text.html"><a href="text.html#text-simple-gsub"><i class="fa fa-check"></i><b>36.1.8</b> 字符串替换</a></li>
<li class="chapter" data-level="36.1.9" data-path="text.html"><a href="text.html#text-simple-strsplit"><i class="fa fa-check"></i><b>36.1.9</b> 字符串拆分</a></li>
</ul></li>
<li class="chapter" data-level="36.2" data-path="text.html"><a href="text.html#text-file"><i class="fa fa-check"></i><b>36.2</b> 文本文件读写</a></li>
<li class="chapter" data-level="36.3" data-path="text.html"><a href="text.html#text-regex"><i class="fa fa-check"></i><b>36.3</b> 正则表达式</a><ul>
<li class="chapter" data-level="36.3.1" data-path="text.html"><a href="text.html#text-regex-strview"><i class="fa fa-check"></i><b>36.3.1</b> 字面匹配与匹配显示</a></li>
<li class="chapter" data-level="36.3.2" data-path="text.html"><a href="text.html#text-regex-ignore"><i class="fa fa-check"></i><b>36.3.2</b> 不区分大小写匹配和<code>regex</code>函数</a></li>
<li class="chapter" data-level="36.3.3" data-path="text.html"><a href="text.html#text-regex-dot"><i class="fa fa-check"></i><b>36.3.3</b> 用句点匹配单个字符</a></li>
<li class="chapter" data-level="36.3.4" data-path="text.html"><a href="text.html#text-regex-set"><i class="fa fa-check"></i><b>36.3.4</b> 匹配一组字符中的某一个</a></li>
<li class="chapter" data-level="36.3.5" data-path="text.html"><a href="text.html#text-regex-metalit"><i class="fa fa-check"></i><b>36.3.5</b> 原样匹配元字符</a></li>
<li class="chapter" data-level="36.3.6" data-path="text.html"><a href="text.html#text-regex-space"><i class="fa fa-check"></i><b>36.3.6</b> 匹配空白</a></li>
<li class="chapter" data-level="36.3.7" data-path="text.html"><a href="text.html#text-regex-digit"><i class="fa fa-check"></i><b>36.3.7</b> 匹配数字</a></li>
<li class="chapter" data-level="36.3.8" data-path="text.html"><a href="text.html#text-regex-alnum"><i class="fa fa-check"></i><b>36.3.8</b> 匹配字母、数字、下划线</a></li>
<li class="chapter" data-level="36.3.9" data-path="text.html"><a href="text.html#text-regex-hex"><i class="fa fa-check"></i><b>36.3.9</b> 十六进制和八进制数</a></li>
<li class="chapter" data-level="36.3.10" data-path="text.html"><a href="text.html#text-regex-posix"><i class="fa fa-check"></i><b>36.3.10</b> POSIX字符类</a></li>
<li class="chapter" data-level="36.3.11" data-path="text.html"><a href="text.html#text-regex-start"><i class="fa fa-check"></i><b>36.3.11</b> 匹配开头和末尾</a></li>
<li class="chapter" data-level="36.3.12" data-path="text.html"><a href="text.html#text-regex-wordb"><i class="fa fa-check"></i><b>36.3.12</b> 单词边界</a></li>
<li class="chapter" data-level="36.3.13" data-path="text.html"><a href="text.html#text-regex-repeat"><i class="fa fa-check"></i><b>36.3.13</b> 重复匹配</a></li>
<li class="chapter" data-level="36.3.14" data-path="text.html"><a href="text.html#text-regex-lazy"><i class="fa fa-check"></i><b>36.3.14</b> 贪婪匹配和懒惰匹配</a></li>
<li class="chapter" data-level="36.3.15" data-path="text.html"><a href="text.html#text-regex-smlines"><i class="fa fa-check"></i><b>36.3.15</b> 句点全匹配与多行模式</a></li>
<li class="chapter" data-level="36.3.16" data-path="text.html"><a href="text.html#text-regex-alt"><i class="fa fa-check"></i><b>36.3.16</b> 备择模式</a></li>
<li class="chapter" data-level="36.3.17" data-path="text.html"><a href="text.html#text-regex-group"><i class="fa fa-check"></i><b>36.3.17</b> 分组与捕获</a></li>
</ul></li>
<li class="chapter" data-level="36.4" data-path="text.html"><a href="text.html#text-stringr-funcs"><i class="fa fa-check"></i><b>36.4</b> stringr包的正则表达式函数</a><ul>
<li class="chapter" data-level="36.4.1" data-path="text.html"><a href="text.html#text-stringr-funcs-strview"><i class="fa fa-check"></i><b>36.4.1</b> <code>str_view()</code>函数</a></li>
<li class="chapter" data-level="36.4.2" data-path="text.html"><a href="text.html#text-stringr-funcs-regex"><i class="fa fa-check"></i><b>36.4.2</b> <code>regex()</code>函数</a></li>
<li class="chapter" data-level="36.4.3" data-path="text.html"><a href="text.html#text-stringr-funcs-detect"><i class="fa fa-check"></i><b>36.4.3</b> 检查那些元素能够匹配</a></li>
<li class="chapter" data-level="36.4.4" data-path="text.html"><a href="text.html#text-stringr-funcs-replace"><i class="fa fa-check"></i><b>36.4.4</b> 替换</a></li>
<li class="chapter" data-level="36.4.5" data-path="text.html"><a href="text.html#text-stringr-funcs-subset"><i class="fa fa-check"></i><b>36.4.5</b> 返回匹配的元素</a></li>
<li class="chapter" data-level="36.4.6" data-path="text.html"><a href="text.html#text-stringr-funcs-extract"><i class="fa fa-check"></i><b>36.4.6</b> 提取匹配内容</a></li>
<li class="chapter" data-level="36.4.7" data-path="text.html"><a href="text.html#text-stringr-funcs-match"><i class="fa fa-check"></i><b>36.4.7</b> 提取分组捕获内容</a></li>
<li class="chapter" data-level="36.4.8" data-path="text.html"><a href="text.html#text-stringr-funcs-locate"><i class="fa fa-check"></i><b>36.4.8</b> 定位匹配位置</a></li>
</ul></li>
<li class="chapter" data-level="36.5" data-path="text.html"><a href="text.html#text-regex-bfuncs"><i class="fa fa-check"></i><b>36.5</b> 利用基本R函数进行正则表达式处理</a><ul>
<li class="chapter" data-level="36.5.1" data-path="text.html"><a href="text.html#text-regex-bfuncs-igcase"><i class="fa fa-check"></i><b>36.5.1</b> 不区分大小写匹配</a></li>
<li class="chapter" data-level="36.5.2" data-path="text.html"><a href="text.html#text-regex-bfuncs-dotp"><i class="fa fa-check"></i><b>36.5.2</b> 匹配单个字符</a></li>
<li class="chapter" data-level="36.5.3" data-path="text.html"><a href="text.html#text-regex-bfuncs-setp"><i class="fa fa-check"></i><b>36.5.3</b> 匹配一组字符中的某一个</a></li>
<li class="chapter" data-level="36.5.4" data-path="text.html"><a href="text.html#text-regex-bfuncs-metalit"><i class="fa fa-check"></i><b>36.5.4</b> 原样匹配元字符</a></li>
<li class="chapter" data-level="36.5.5" data-path="text.html"><a href="text.html#text-regex-bfuncs-digit"><i class="fa fa-check"></i><b>36.5.5</b> 匹配数字</a></li>
<li class="chapter" data-level="36.5.6" data-path="text.html"><a href="text.html#text-regex-bfuncs-start"><i class="fa fa-check"></i><b>36.5.6</b> 匹配开头和末尾</a></li>
<li class="chapter" data-level="36.5.7" data-path="text.html"><a href="text.html#text-regex-bfuncs-alnum"><i class="fa fa-check"></i><b>36.5.7</b> 匹配字母、数字、下划线</a></li>
<li class="chapter" data-level="36.5.8" data-path="text.html"><a href="text.html#text-regex-bfuncs-hex"><i class="fa fa-check"></i><b>36.5.8</b> 十六进制和八进制数</a></li>
<li class="chapter" data-level="36.5.9" data-path="text.html"><a href="text.html#text-regex-bfuncs-posix"><i class="fa fa-check"></i><b>36.5.9</b> POSIX字符类</a></li>
<li class="chapter" data-level="36.5.10" data-path="text.html"><a href="text.html#text-regex-bfuncs-plus"><i class="fa fa-check"></i><b>36.5.10</b> 加号重复匹配</a></li>
<li class="chapter" data-level="36.5.11" data-path="text.html"><a href="text.html#text-regex-bfuncs-ast"><i class="fa fa-check"></i><b>36.5.11</b> 星号和问号重复匹配</a></li>
<li class="chapter" data-level="36.5.12" data-path="text.html"><a href="text.html#text-regex-bfuncs-repnum"><i class="fa fa-check"></i><b>36.5.12</b> 计数重复</a></li>
<li class="chapter" data-level="36.5.13" data-path="text.html"><a href="text.html#text-regex-bfuncs-lazy"><i class="fa fa-check"></i><b>36.5.13</b> 贪婪匹配和懒惰匹配</a></li>
<li class="chapter" data-level="36.5.14" data-path="text.html"><a href="text.html#text-regex-bfuncs-wordb"><i class="fa fa-check"></i><b>36.5.14</b> 单词边界</a></li>
<li class="chapter" data-level="36.5.15" data-path="text.html"><a href="text.html#text-regex-bfuncs-sm"><i class="fa fa-check"></i><b>36.5.15</b> 句点全匹配与多行模式</a></li>
<li class="chapter" data-level="36.5.16" data-path="text.html"><a href="text.html#text-regex-bfuncs-alt"><i class="fa fa-check"></i><b>36.5.16</b> 备择模式</a></li>
<li class="chapter" data-level="36.5.17" data-path="text.html"><a href="text.html#text-regex-bfuncs-group"><i class="fa fa-check"></i><b>36.5.17</b> 分组与捕获</a></li>
</ul></li>
<li class="chapter" data-level="36.6" data-path="text.html"><a href="text.html#text-regexex"><i class="fa fa-check"></i><b>36.6</b> 正则表达式应用例子</a><ul>
<li class="chapter" data-level="36.6.1" data-path="text.html"><a href="text.html#text-regexex-pre"><i class="fa fa-check"></i><b>36.6.1</b> 数据预处理</a></li>
<li class="chapter" data-level="36.6.2" data-path="text.html"><a href="text.html#text-regexex-excelmore"><i class="fa fa-check"></i><b>36.6.2</b> 不规则Excel文件处理</a></li>
<li class="chapter" data-level="36.6.3" data-path="text.html"><a href="text.html#text-regexex-wordfreq"><i class="fa fa-check"></i><b>36.6.3</b> 字频统计</a></li>
<li class="chapter" data-level="36.6.4" data-path="text.html"><a href="text.html#text-regexex-digits"><i class="fa fa-check"></i><b>36.6.4</b> 数字验证</a></li>
<li class="chapter" data-level="36.6.5" data-path="text.html"><a href="text.html#text-regexex-digfn"><i class="fa fa-check"></i><b>36.6.5</b> 文件名中的数字提取</a></li>
</ul></li>
<li class="chapter" data-level="36.7" data-path="text.html"><a href="text.html#text-webscape"><i class="fa fa-check"></i><b>36.7</b> 网站数据获取</a></li>
<li class="chapter" data-level="36.8" data-path="text.html"><a href="text.html#text-jiebaR"><i class="fa fa-check"></i><b>36.8</b> 中文分词与词频</a></li>
</ul></li>
<li class="part"><span><b>IX 用Rcpp访问C++代码</b></span></li>
<li class="chapter" data-level="37" data-path="rcpp.html"><a href="rcpp.html"><i class="fa fa-check"></i><b>37</b> Rcpp介绍</a><ul>
<li class="chapter" data-level="37.1" data-path="rcpp.html"><a href="rcpp.html#rcpp-intro-use"><i class="fa fa-check"></i><b>37.1</b> Rcpp的用途</a></li>
<li class="chapter" data-level="37.2" data-path="rcpp.html"><a href="rcpp.html#rcpp-intro-examp"><i class="fa fa-check"></i><b>37.2</b> Rcpp入门样例</a><ul>
<li class="chapter" data-level="37.2.1" data-path="rcpp.html"><a href="rcpp.html#rcpp-intro-examp-ex1"><i class="fa fa-check"></i><b>37.2.1</b> 用<code>cppFunction()</code>转换简单的C++函数—Fibnacci例子</a></li>
<li class="chapter" data-level="37.2.2" data-path="rcpp.html"><a href="rcpp.html#rcpp-intro-examp-ex2"><i class="fa fa-check"></i><b>37.2.2</b> 用<code>sourceCpp()</code>转换C++程序—正负交替迭代例子</a></li>
<li class="chapter" data-level="37.2.3" data-path="rcpp.html"><a href="rcpp.html#rcpp-intro-examp-ex3"><i class="fa fa-check"></i><b>37.2.3</b> 用<code>sourceCpp()</code>转换C++源文件中的程序—正负交替迭代例子</a></li>
<li class="chapter" data-level="37.2.4" data-path="rcpp.html"><a href="rcpp.html#rcpp-intro-examp-ex4"><i class="fa fa-check"></i><b>37.2.4</b> 用<code>sourceCpp()</code>转换C++源程序文件—卷积例子</a></li>
<li class="chapter" data-level="37.2.5" data-path="rcpp.html"><a href="rcpp.html#rcpp-intro-examp-rmdconv"><i class="fa fa-check"></i><b>37.2.5</b> 在Rmd文件中使用C++源程序文件</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="38" data-path="rcpp-typeconv.html"><a href="rcpp-typeconv.html"><i class="fa fa-check"></i><b>38</b> R与C++的类型转换</a><ul>
<li class="chapter" data-level="38.1" data-path="rcpp-typeconv.html"><a href="rcpp-typeconv.html#rcpp-typeconv-wrap"><i class="fa fa-check"></i><b>38.1</b> 用<code>wrap()</code>把C++变量返回到R中</a></li>
<li class="chapter" data-level="38.2" data-path="rcpp-typeconv.html"><a href="rcpp-typeconv.html#rcpp-typeconv-as"><i class="fa fa-check"></i><b>38.2</b> 用<code>as()</code>函数把R变量转换为C++类型</a></li>
<li class="chapter" data-level="38.3" data-path="rcpp-typeconv.html"><a href="rcpp-typeconv.html#rcpp-typeconv-implicit"><i class="fa fa-check"></i><b>38.3</b> <code>as()</code>和<code>wrap()</code>的隐含调用</a></li>
</ul></li>
<li class="chapter" data-level="39" data-path="rcpp-attr.html"><a href="rcpp-attr.html"><i class="fa fa-check"></i><b>39</b> Rcpp 属性</a><ul>
<li class="chapter" data-level="39.1" data-path="rcpp-attr.html"><a href="rcpp-attr.html#rcpp-attr-intro"><i class="fa fa-check"></i><b>39.1</b> Rcpp属性介绍</a></li>
<li class="chapter" data-level="39.2" data-path="rcpp-attr.html"><a href="rcpp-attr.html#rcpp-attr-export"><i class="fa fa-check"></i><b>39.2</b> 在C++源程序中指定要导出的C++函数</a></li>
<li class="chapter" data-level="39.3" data-path="rcpp-attr.html"><a href="rcpp-attr.html#rcpp-attr-sourcecpp"><i class="fa fa-check"></i><b>39.3</b> 在R中编译链接C++代码</a></li>
<li class="chapter" data-level="39.4" data-path="rcpp-attr.html"><a href="rcpp-attr.html#rcpp-attr-misc"><i class="fa fa-check"></i><b>39.4</b> Rcpp属性的其它功能</a><ul>
<li class="chapter" data-level="39.4.1" data-path="rcpp-attr.html"><a href="rcpp-attr.html#rcpp-attr-misc-default"><i class="fa fa-check"></i><b>39.4.1</b> 自变量有缺省值的函数</a></li>
<li class="chapter" data-level="39.4.2" data-path="rcpp-attr.html"><a href="rcpp-attr.html#rcpp-attr-misc-interrupt"><i class="fa fa-check"></i><b>39.4.2</b> 允许用户中断</a></li>
<li class="chapter" data-level="39.4.3" data-path="rcpp-attr.html"><a href="rcpp-attr.html#rcpp-attr-misc-rinclude"><i class="fa fa-check"></i><b>39.4.3</b> 把R代码写在C++源文件中</a></li>
<li class="chapter" data-level="39.4.4" data-path="rcpp-attr.html"><a href="rcpp-attr.html#rcpp-attr-misc-rand"><i class="fa fa-check"></i><b>39.4.4</b> 在C++中调用R的随机数发生器</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="40" data-path="rcpp-vectype.html"><a href="rcpp-vectype.html"><i class="fa fa-check"></i><b>40</b> Rcpp提供的C++数据类型</a><ul>
<li class="chapter" data-level="40.1" data-path="rcpp-vectype.html"><a href="rcpp-vectype.html#rcpp-vectype-robject"><i class="fa fa-check"></i><b>40.1</b> RObject类</a></li>
<li class="chapter" data-level="40.2" data-path="rcpp-vectype.html"><a href="rcpp-vectype.html#rcpp-vectype-ivec"><i class="fa fa-check"></i><b>40.2</b> IntegerVector类</a><ul>
<li class="chapter" data-level="40.2.1" data-path="rcpp-vectype.html"><a href="rcpp-vectype.html#rcpp-vectype-ivec-ex1"><i class="fa fa-check"></i><b>40.2.1</b> IntegerVector示例1：返回完全数</a></li>
<li class="chapter" data-level="40.2.2" data-path="rcpp-vectype.html"><a href="rcpp-vectype.html#rcpp-vectype-ivec-ex2"><i class="fa fa-check"></i><b>40.2.2</b> IntegerVector示例2：输入整数向量</a></li>
</ul></li>
<li class="chapter" data-level="40.3" data-path="rcpp-vectype.html"><a href="rcpp-vectype.html#rcpp-vectype-num"><i class="fa fa-check"></i><b>40.3</b> NumericVector类</a><ul>
<li class="chapter" data-level="40.3.1" data-path="rcpp-vectype.html"><a href="rcpp-vectype.html#rcpp-vectype-num-ex1"><i class="fa fa-check"></i><b>40.3.1</b> 示例1：计算元素<span class="math inline">\(p\)</span>次方的和</a></li>
<li class="chapter" data-level="40.3.2" data-path="rcpp-vectype.html"><a href="rcpp-vectype.html#rcpp-vectype-num-ex2"><i class="fa fa-check"></i><b>40.3.2</b> 示例2：<code>clone</code>函数</a></li>
<li class="chapter" data-level="40.3.3" data-path="rcpp-vectype.html"><a href="rcpp-vectype.html#rcpp-vectype-num-ex3"><i class="fa fa-check"></i><b>40.3.3</b> 示例3：向量子集</a></li>
</ul></li>
<li class="chapter" data-level="40.4" data-path="rcpp-vectype.html"><a href="rcpp-vectype.html#rcpp-vectype-mat"><i class="fa fa-check"></i><b>40.4</b> NumericMatrix类</a><ul>
<li class="chapter" data-level="40.4.1" data-path="rcpp-vectype.html"><a href="rcpp-vectype.html#rcpp-vectype-mat-ex1"><i class="fa fa-check"></i><b>40.4.1</b> 示例1：计算矩阵各列模的最大值</a></li>
<li class="chapter" data-level="40.4.2" data-path="rcpp-vectype.html"><a href="rcpp-vectype.html#rcpp-vectype-mat-ex2"><i class="fa fa-check"></i><b>40.4.2</b> 示例2：把输入矩阵制作副本计算元素平方根</a></li>
<li class="chapter" data-level="40.4.3" data-path="rcpp-vectype.html"><a href="rcpp-vectype.html#rcpp-vectype-mat-ex3"><i class="fa fa-check"></i><b>40.4.3</b> 示例3：访问列子集</a></li>
</ul></li>
<li class="chapter" data-level="40.5" data-path="rcpp-vectype.html"><a href="rcpp-vectype.html#rcpp-vectype-other"><i class="fa fa-check"></i><b>40.5</b> Rcpp的其它向量类</a><ul>
<li class="chapter" data-level="40.5.1" data-path="rcpp-vectype.html"><a href="rcpp-vectype.html#rcpp-vectype-logic"><i class="fa fa-check"></i><b>40.5.1</b> Rcpp的LogicalVector类</a></li>
<li class="chapter" data-level="40.5.2" data-path="rcpp-vectype.html"><a href="rcpp-vectype.html#rcpp-vectype-char"><i class="fa fa-check"></i><b>40.5.2</b> Rcpp的CharacterVector类型</a></li>
</ul></li>
<li class="chapter" data-level="40.6" data-path="rcpp-vectype.html"><a href="rcpp-vectype.html#rcpp-types"><i class="fa fa-check"></i><b>40.6</b> Rcpp提供的其它数据类型</a><ul>
<li class="chapter" data-level="40.6.1" data-path="rcpp-vectype.html"><a href="rcpp-vectype.html#rcpp-types-named"><i class="fa fa-check"></i><b>40.6.1</b> Named类型</a></li>
<li class="chapter" data-level="40.6.2" data-path="rcpp-vectype.html"><a href="rcpp-vectype.html#rcpp-types-list"><i class="fa fa-check"></i><b>40.6.2</b> List类型</a></li>
<li class="chapter" data-level="40.6.3" data-path="rcpp-vectype.html"><a href="rcpp-vectype.html#rcpp-types-df"><i class="fa fa-check"></i><b>40.6.3</b> Rcpp的DataFrame类</a></li>
<li class="chapter" data-level="40.6.4" data-path="rcpp-vectype.html"><a href="rcpp-vectype.html#rcpp-types-func"><i class="fa fa-check"></i><b>40.6.4</b> Rcpp的Function类</a></li>
<li class="chapter" data-level="40.6.5" data-path="rcpp-vectype.html"><a href="rcpp-vectype.html#rcpp-types-environ"><i class="fa fa-check"></i><b>40.6.5</b> Rcpp的Environment类</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="41" data-path="rcpp-sugar.html"><a href="rcpp-sugar.html"><i class="fa fa-check"></i><b>41</b> Rcpp糖</a><ul>
<li class="chapter" data-level="41.1" data-path="rcpp-sugar.html"><a href="rcpp-sugar.html#rcpp-sugar-examp"><i class="fa fa-check"></i><b>41.1</b> 简单示例</a></li>
<li class="chapter" data-level="41.2" data-path="rcpp-sugar.html"><a href="rcpp-sugar.html#rcpp-sugar-vecop"><i class="fa fa-check"></i><b>41.2</b> 向量化的运算符</a><ul>
<li class="chapter" data-level="41.2.1" data-path="rcpp-sugar.html"><a href="rcpp-sugar.html#rcpp-sugar-vecop-arith"><i class="fa fa-check"></i><b>41.2.1</b> 向量化的四则运算</a></li>
<li class="chapter" data-level="41.2.2" data-path="rcpp-sugar.html"><a href="rcpp-sugar.html#rcpp-sugar-vecop-binop"><i class="fa fa-check"></i><b>41.2.2</b> 向量化的二元逻辑运算</a></li>
<li class="chapter" data-level="41.2.3" data-path="rcpp-sugar.html"><a href="rcpp-sugar.html#rcpp-sugar-vecop-uop"><i class="fa fa-check"></i><b>41.2.3</b> 向量化的一元运算符</a></li>
</ul></li>
<li class="chapter" data-level="41.3" data-path="rcpp-sugar.html"><a href="rcpp-sugar.html#rcpp-sugar-mathfunc"><i class="fa fa-check"></i><b>41.3</b> 用Rcpp访问数学函数</a></li>
<li class="chapter" data-level="41.4" data-path="rcpp-sugar.html"><a href="rcpp-sugar.html#rcpp-sugar-any"><i class="fa fa-check"></i><b>41.4</b> 返回单一逻辑值的函数</a></li>
<li class="chapter" data-level="41.5" data-path="rcpp-sugar.html"><a href="rcpp-sugar.html#rcpp-sugar-expfunc"><i class="fa fa-check"></i><b>41.5</b> 返回糖表达式的函数</a></li>
<li class="chapter" data-level="41.6" data-path="rcpp-sugar.html"><a href="rcpp-sugar.html#rcpp-sugar-diff"><i class="fa fa-check"></i><b>41.6</b> R与Rcpp不同语法示例</a></li>
</ul></li>
<li class="chapter" data-level="42" data-path="rcpp-package.html"><a href="rcpp-package.html"><i class="fa fa-check"></i><b>42</b> 用Rcpp帮助制作R扩展包</a><ul>
<li class="chapter" data-level="42.1" data-path="rcpp-package.html"><a href="rcpp-package.html#rcpp-package-wo"><i class="fa fa-check"></i><b>42.1</b> 不用扩展包共享C++代码的方法</a></li>
<li class="chapter" data-level="42.2" data-path="rcpp-package.html"><a href="rcpp-package.html#rcpp-package-gen"><i class="fa fa-check"></i><b>42.2</b> 生成扩展包</a><ul>
<li class="chapter" data-level="42.2.1" data-path="rcpp-package.html"><a href="rcpp-package.html#rcpp-package-gen-exist"><i class="fa fa-check"></i><b>42.2.1</b> 利用已有基于Rcpp属性的源程序制作扩展包</a></li>
<li class="chapter" data-level="42.2.2" data-path="rcpp-package.html"><a href="rcpp-package.html#rcpp-package-gen-desc"><i class="fa fa-check"></i><b>42.2.2</b> DESCRIPTION文件</a></li>
<li class="chapter" data-level="42.2.3" data-path="rcpp-package.html"><a href="rcpp-package.html#rcpp-package-gen-namespace"><i class="fa fa-check"></i><b>42.2.3</b> NAMESPACE文件</a></li>
</ul></li>
<li class="chapter" data-level="42.3" data-path="rcpp-package.html"><a href="rcpp-package.html#rcpp-package-recomp"><i class="fa fa-check"></i><b>42.3</b> 重新编译</a></li>
<li class="chapter" data-level="42.4" data-path="rcpp-package.html"><a href="rcpp-package.html#rcpp-package-interface"><i class="fa fa-check"></i><b>42.4</b> 建立C++用的接口界面</a></li>
</ul></li>
<li class="part"><span><b>X 编程例子</b></span></li>
<li class="chapter" data-level="43" data-path="examples.html"><a href="examples.html"><i class="fa fa-check"></i><b>43</b> R编程例子</a><ul>
<li class="chapter" data-level="43.1" data-path="examples.html"><a href="examples.html#examples-rlang"><i class="fa fa-check"></i><b>43.1</b> R语言</a><ul>
<li class="chapter" data-level="43.1.1" data-path="examples.html"><a href="examples.html#examples-rlang-inverse"><i class="fa fa-check"></i><b>43.1.1</b> 用向量作逆变换</a></li>
<li class="chapter" data-level="43.1.2" data-path="examples.html"><a href="examples.html#examples-rlang-fibonacci"><i class="fa fa-check"></i><b>43.1.2</b> 斐波那契数列计算</a></li>
<li class="chapter" data-level="43.1.3" data-path="examples.html"><a href="examples.html#examples-rlang-permutation"><i class="fa fa-check"></i><b>43.1.3</b> 穷举所有排列</a></li>
<li class="chapter" data-level="43.1.4" data-path="examples.html"><a href="examples.html#examples-rlang-repgroup"><i class="fa fa-check"></i><b>43.1.4</b> 可重复分组方式穷举</a></li>
<li class="chapter" data-level="43.1.5" data-path="examples.html"><a href="examples.html#examples-rlang-runs"><i class="fa fa-check"></i><b>43.1.5</b> 升降连计数</a></li>
</ul></li>
<li class="chapter" data-level="43.2" data-path="examples.html"><a href="examples.html#examples-prob"><i class="fa fa-check"></i><b>43.2</b> 概率</a><ul>
<li class="chapter" data-level="43.2.1" data-path="examples.html"><a href="examples.html#examples-prob-thsage"><i class="fa fa-check"></i><b>43.2.1</b> 智者千虑必有一失</a></li>
<li class="chapter" data-level="43.2.2" data-path="examples.html"><a href="examples.html#examples-prob-coupleseats"><i class="fa fa-check"></i><b>43.2.2</b> 圆桌夫妇座位问题</a></li>
</ul></li>
<li class="chapter" data-level="43.3" data-path="examples.html"><a href="examples.html#examples-scicomp"><i class="fa fa-check"></i><b>43.3</b> 科学计算</a><ul>
<li class="chapter" data-level="43.3.1" data-path="examples.html"><a href="examples.html#examples-scicomp-citylink"><i class="fa fa-check"></i><b>43.3.1</b> 城市间最短路径</a></li>
<li class="chapter" data-level="43.3.2" data-path="examples.html"><a href="examples.html#examples-scicomp-daub"><i class="fa fa-check"></i><b>43.3.2</b> Daubechies小波函数计算</a></li>
<li class="chapter" data-level="43.3.3" data-path="examples.html"><a href="examples.html#examples-scicomp-heating"><i class="fa fa-check"></i><b>43.3.3</b> 房间加热温度变化</a></li>
</ul></li>
<li class="chapter" data-level="43.4" data-path="examples.html"><a href="examples.html#examples-statcomp"><i class="fa fa-check"></i><b>43.4</b> 统计计算</a><ul>
<li class="chapter" data-level="43.4.1" data-path="examples.html"><a href="examples.html#examples-statcomp-kernden"><i class="fa fa-check"></i><b>43.4.1</b> 核回归与核密度估计</a></li>
<li class="chapter" data-level="43.4.2" data-path="examples.html"><a href="examples.html#examples-statcomp-mcquad2d"><i class="fa fa-check"></i><b>43.4.2</b> 二维随机模拟积分</a></li>
<li class="chapter" data-level="43.4.3" data-path="examples.html"><a href="examples.html#examples-statcomp-hidfreq"><i class="fa fa-check"></i><b>43.4.3</b> 潜周期估计</a></li>
<li class="chapter" data-level="43.4.4" data-path="examples.html"><a href="examples.html#examples-statcomp-armaest"><i class="fa fa-check"></i><b>43.4.4</b> ARMA(1,1)模型估计</a></li>
<li class="chapter" data-level="43.4.5" data-path="examples.html"><a href="examples.html#examples-statcomp-varprop"><i class="fa fa-check"></i><b>43.4.5</b> VAR模型平稳性</a></li>
<li class="chapter" data-level="43.4.6" data-path="examples.html"><a href="examples.html#examples-statcomp-storereliab"><i class="fa fa-check"></i><b>43.4.6</b> 贮存可靠性评估</a></li>
</ul></li>
<li class="chapter" data-level="43.5" data-path="examples.html"><a href="examples.html#examples-datatreat"><i class="fa fa-check"></i><b>43.5</b> 数据处理</a><ul>
<li class="chapter" data-level="43.5.1" data-path="examples.html"><a href="examples.html#examples-datatreat-subscore"><i class="fa fa-check"></i><b>43.5.1</b> 小题分题型分数汇总</a></li>
<li class="chapter" data-level="43.5.2" data-path="examples.html"><a href="examples.html#examples-datatreat-cluslab"><i class="fa fa-check"></i><b>43.5.2</b> 类别编号重排</a></li>
</ul></li>
<li class="chapter" data-level="43.6" data-path="examples.html"><a href="examples.html#examples-texttr"><i class="fa fa-check"></i><b>43.6</b> 文本处理</a><ul>
<li class="chapter" data-level="43.6.1" data-path="examples.html"><a href="examples.html#examples-texttr-hongloument"><i class="fa fa-check"></i><b>43.6.1</b> 用R语言下载处理《红楼梦》htm文件</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li><a href="http://www.math.pku.edu.cn/teachers/lidf/" target="blank">编著：李东风</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">R语言教程</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="summary-manip" class="section level1">
<h1><span class="header-section-number">26</span> 数据整理</h1>
<div id="summm-tidyv" class="section level2">
<h2><span class="header-section-number">26.1</span> tidyverse系统</h2>
<p>假设数据以tibble格式保存。
数据集如果用于统计与绘图，
需要满足一定的格式要求，
<span class="citation">(Wickham <a href="#ref-Wickham2014:tidy" role="doc-biblioref">2014</a>)</span>称之为整洁数据(tidy data)，
基本要求是每行一个观测，
每列一个变量，
每个单元格恰好有一个数据值。
这些变量应该是真正的属性，
而不是同一属性在不同年、月等时间的值分别放到单独的列。</p>
<p>数据集经常需要选行子集、选列子集、排序、定义新变量、横向合并、长宽转换等操作，
而且经常会用若干个连续的操作分步处理，
magrittr包的管道运算符<code>%&gt;%</code>特别适用于这种分步处理。</p>
<p>dplyr包和tidyr包定义了一系列“动词”，
可以用比较自然的方式进行数据整理。
较复杂的分组操作还可以利用purrr包的<code>map</code>类函数。</p>
<p>为了使用这些功能，可以载入<code>tidyverse</code>包，
则magrittr包，readr包，dplyr包和tidyr包都会被自动载入:</p>
<div class="sourceCode" id="cb1451"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1451-1"><a href="summary-manip.html#cb1451-1"></a><span class="kw">library</span>(tidyverse)</span></code></pre></div>
<p>下面的例子中用如下的一个班的学生数据作为例子，
保存在如下<a href="class.csv"><code>class.csv</code></a>文件中：</p>
<pre><code>name,sex,age,height,weight
Alice,F,13,56.5,84
Becka,F,13,65.3,98
Gail,F,14,64.3,90
Karen,F,12,56.3,77
Kathy,F,12,59.8,84.5
Mary,F,15,66.5,112
Sandy,F,11,51.3,50.5
Sharon,F,15,62.5,112.5
Tammy,F,14,62.8,102.5
Alfred,M,14,69,112.5
Duke,M,14,63.5,102.5
Guido,M,15,67,133
James,M,12,57.3,83
Jeffrey,M,13,62.5,84
John,M,12,59,99.5
Philip,M,16,72,150
Robert,M,12,64.8,128
Thomas,M,11,57.5,85
William,M,15,66.5,112</code></pre>
<p>读入为tibble:</p>
<div class="sourceCode" id="cb1453"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1453-1"><a href="summary-manip.html#cb1453-1"></a>d.class &lt;-<span class="st"> </span><span class="kw">read_csv</span>(</span>
<span id="cb1453-2"><a href="summary-manip.html#cb1453-2"></a>  <span class="st">&quot;class.csv&quot;</span>, </span>
<span id="cb1453-3"><a href="summary-manip.html#cb1453-3"></a>  <span class="dt">col_types=</span><span class="kw">cols</span>(</span>
<span id="cb1453-4"><a href="summary-manip.html#cb1453-4"></a>  <span class="dt">.default =</span> <span class="kw">col_double</span>(),</span>
<span id="cb1453-5"><a href="summary-manip.html#cb1453-5"></a>  <span class="dt">name=</span><span class="kw">col_character</span>(),</span>
<span id="cb1453-6"><a href="summary-manip.html#cb1453-6"></a>  <span class="dt">sex=</span><span class="kw">col_factor</span>(<span class="dt">levels=</span><span class="kw">c</span>(<span class="st">&quot;M&quot;</span>, <span class="st">&quot;F&quot;</span>))</span>
<span id="cb1453-7"><a href="summary-manip.html#cb1453-7"></a>))</span></code></pre></div>
<p>这个数据框有19个观测，
有如下5个变量：</p>
<ul>
<li>name</li>
<li>sex</li>
<li>age</li>
<li>height</li>
<li>weight</li>
</ul>
<p>R的NHANES扩展包提供了一个规模更大的示例数据框NHANES，
可以看作是美国扣除住院病人以外的人群的一个随机样本，
有10000个观测，有76个变量，
主题是个人的健康与营养方面的信息。
仅作为教学使用而不足以作为严谨的科研用数据。
原始数据的情况详见<a href="http://www.cdc.gov/nchs/nhanes.htm" class="uri">http://www.cdc.gov/nchs/nhanes.htm</a>。
载入NHANES数据框：</p>
<div class="sourceCode" id="cb1454"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1454-1"><a href="summary-manip.html#cb1454-1"></a><span class="kw">library</span>(NHANES)</span>
<span id="cb1454-2"><a href="summary-manip.html#cb1454-2"></a><span class="kw">data</span>(NHANES)</span></code></pre></div>
<div class="sourceCode" id="cb1455"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1455-1"><a href="summary-manip.html#cb1455-1"></a><span class="kw">print</span>(<span class="kw">dim</span>(NHANES))</span></code></pre></div>
<pre><code>## [1] 10000    76</code></pre>
<div class="sourceCode" id="cb1457"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1457-1"><a href="summary-manip.html#cb1457-1"></a><span class="kw">print</span>(<span class="kw">names</span>(NHANES))</span></code></pre></div>
<pre><code>##  [1] &quot;ID&quot;               &quot;SurveyYr&quot;         &quot;Gender&quot;           &quot;Age&quot;             
##  [5] &quot;AgeDecade&quot;        &quot;AgeMonths&quot;        &quot;Race1&quot;            &quot;Race3&quot;           
##  [9] &quot;Education&quot;        &quot;MaritalStatus&quot;    &quot;HHIncome&quot;         &quot;HHIncomeMid&quot;     
## [13] &quot;Poverty&quot;          &quot;HomeRooms&quot;        &quot;HomeOwn&quot;          &quot;Work&quot;            
## [17] &quot;Weight&quot;           &quot;Length&quot;           &quot;HeadCirc&quot;         &quot;Height&quot;          
## [21] &quot;BMI&quot;              &quot;BMICatUnder20yrs&quot; &quot;BMI_WHO&quot;          &quot;Pulse&quot;           
## [25] &quot;BPSysAve&quot;         &quot;BPDiaAve&quot;         &quot;BPSys1&quot;           &quot;BPDia1&quot;          
## [29] &quot;BPSys2&quot;           &quot;BPDia2&quot;           &quot;BPSys3&quot;           &quot;BPDia3&quot;          
## [33] &quot;Testosterone&quot;     &quot;DirectChol&quot;       &quot;TotChol&quot;          &quot;UrineVol1&quot;       
## [37] &quot;UrineFlow1&quot;       &quot;UrineVol2&quot;        &quot;UrineFlow2&quot;       &quot;Diabetes&quot;        
## [41] &quot;DiabetesAge&quot;      &quot;HealthGen&quot;        &quot;DaysPhysHlthBad&quot;  &quot;DaysMentHlthBad&quot; 
## [45] &quot;LittleInterest&quot;   &quot;Depressed&quot;        &quot;nPregnancies&quot;     &quot;nBabies&quot;         
## [49] &quot;Age1stBaby&quot;       &quot;SleepHrsNight&quot;    &quot;SleepTrouble&quot;     &quot;PhysActive&quot;      
## [53] &quot;PhysActiveDays&quot;   &quot;TVHrsDay&quot;         &quot;CompHrsDay&quot;       &quot;TVHrsDayChild&quot;   
## [57] &quot;CompHrsDayChild&quot;  &quot;Alcohol12PlusYr&quot;  &quot;AlcoholDay&quot;       &quot;AlcoholYear&quot;     
## [61] &quot;SmokeNow&quot;         &quot;Smoke100&quot;         &quot;Smoke100n&quot;        &quot;SmokeAge&quot;        
## [65] &quot;Marijuana&quot;        &quot;AgeFirstMarij&quot;    &quot;RegularMarij&quot;     &quot;AgeRegMarij&quot;     
## [69] &quot;HardDrugs&quot;        &quot;SexEver&quot;          &quot;SexAge&quot;           &quot;SexNumPartnLife&quot; 
## [73] &quot;SexNumPartYear&quot;   &quot;SameSex&quot;          &quot;SexOrientation&quot;   &quot;PregnantNow&quot;</code></pre>
<p>变量ID是受试者编号，
SurveyYr是调查年份，
同一受试者可能在多个调查年份中有数据。
变量中包括性别、年龄、种族、收入等人口学数据，
包括体重、身高、脉搏、血压等基本体检数据，
以及是否糖尿病、是否抑郁、是否怀孕、已生产子女数等更详细的健康数据，
运动习惯、饮酒、性生活等行为方面的数据。
这个教学用数据集最初的使用者是Cashmere高中的Michelle Dalrymple
和新西兰奥克兰大学的Chris Wild。</p>
</div>
<div id="dplyr-filter" class="section level2">
<h2><span class="header-section-number">26.2</span> 用<code>filter()</code>选择行子集</h2>
<p>数据框的任何行子集仍为数据框，即使只有一行而且都是数值也是如此。
行子集可以用行下标选取，
如<code>d.class[8:12,]</code>。
函数<code>head()</code>取出数据框的前面若干行，
<code>tail()</code>取出数据框的最后若干行。</p>
<p>dplyr包的<code>filter()</code>函数可以按条件选出符合条件的行组成的子集。
下例从<code>d.class</code>中选出年龄在13岁和13岁以下的女生：</p>
<div class="sourceCode" id="cb1459"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1459-1"><a href="summary-manip.html#cb1459-1"></a>d.class <span class="op">%&gt;%</span></span>
<span id="cb1459-2"><a href="summary-manip.html#cb1459-2"></a><span class="st">  </span><span class="kw">filter</span>(sex<span class="op">==</span><span class="st">&quot;F&quot;</span>, age<span class="op">&lt;=</span><span class="dv">13</span>) <span class="op">%&gt;%</span></span>
<span id="cb1459-3"><a href="summary-manip.html#cb1459-3"></a><span class="st">  </span>knitr<span class="op">::</span><span class="kw">kable</span>()</span></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="left">name</th>
<th align="left">sex</th>
<th align="right">age</th>
<th align="right">height</th>
<th align="right">weight</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Alice</td>
<td align="left">F</td>
<td align="right">13</td>
<td align="right">56.5</td>
<td align="right">84.0</td>
</tr>
<tr class="even">
<td align="left">Becka</td>
<td align="left">F</td>
<td align="right">13</td>
<td align="right">65.3</td>
<td align="right">98.0</td>
</tr>
<tr class="odd">
<td align="left">Karen</td>
<td align="left">F</td>
<td align="right">12</td>
<td align="right">56.3</td>
<td align="right">77.0</td>
</tr>
<tr class="even">
<td align="left">Kathy</td>
<td align="left">F</td>
<td align="right">12</td>
<td align="right">59.8</td>
<td align="right">84.5</td>
</tr>
<tr class="odd">
<td align="left">Sandy</td>
<td align="left">F</td>
<td align="right">11</td>
<td align="right">51.3</td>
<td align="right">50.5</td>
</tr>
</tbody>
</table>
<p><code>filter()</code>函数第一个参数是要选择的数据框，
后续的参数是条件，
这些条件是需要同时满足的，
另外，
条件中取缺失值的观测自动放弃，
这一点与直接在数据框的行下标中用逻辑下标有所不同，
逻辑下标中有缺失值会在结果中产生缺失值。</p>
<p><code>filter()</code>会自动舍弃行名，
如果需要行名只能将其转换成数据框的一列。</p>
<p><code>filter()</code>的结果为行子集数据框。
用在管道操作当中的时候第一自变量省略（是管道传递下来的）。</p>
</div>
<div id="dplyr-head" class="section level2">
<h2><span class="header-section-number">26.3</span> 按行序号选择行子集</h2>
<p>基本R的utils包的函数<code>head(x, n)</code>可以用来选择数据框<code>x</code>前面<code>n</code>行，
<code>tail(x, n)</code>可以用来选择数据框<code>x</code>后面<code>n</code>行，如：</p>
<div class="sourceCode" id="cb1460"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1460-1"><a href="summary-manip.html#cb1460-1"></a>d.class <span class="op">%&gt;%</span></span>
<span id="cb1460-2"><a href="summary-manip.html#cb1460-2"></a><span class="st">  </span><span class="kw">head</span>(<span class="dt">n=</span><span class="dv">5</span>) <span class="op">%&gt;%</span></span>
<span id="cb1460-3"><a href="summary-manip.html#cb1460-3"></a><span class="st">  </span>knitr<span class="op">::</span><span class="kw">kable</span>()</span></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="left">name</th>
<th align="left">sex</th>
<th align="right">age</th>
<th align="right">height</th>
<th align="right">weight</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Alice</td>
<td align="left">F</td>
<td align="right">13</td>
<td align="right">56.5</td>
<td align="right">84.0</td>
</tr>
<tr class="even">
<td align="left">Becka</td>
<td align="left">F</td>
<td align="right">13</td>
<td align="right">65.3</td>
<td align="right">98.0</td>
</tr>
<tr class="odd">
<td align="left">Gail</td>
<td align="left">F</td>
<td align="right">14</td>
<td align="right">64.3</td>
<td align="right">90.0</td>
</tr>
<tr class="even">
<td align="left">Karen</td>
<td align="left">F</td>
<td align="right">12</td>
<td align="right">56.3</td>
<td align="right">77.0</td>
</tr>
<tr class="odd">
<td align="left">Kathy</td>
<td align="left">F</td>
<td align="right">12</td>
<td align="right">59.8</td>
<td align="right">84.5</td>
</tr>
</tbody>
</table>
<p>dplyr包的函数<code>slice(.data, ...)</code>可以用来选择指定序号的行子集，
正的序号表示保留，负的序号表示排除。如：</p>
<div class="sourceCode" id="cb1461"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1461-1"><a href="summary-manip.html#cb1461-1"></a>d.class <span class="op">%&gt;%</span></span>
<span id="cb1461-2"><a href="summary-manip.html#cb1461-2"></a><span class="st">  </span><span class="kw">slice</span>(<span class="dv">3</span><span class="op">:</span><span class="dv">5</span>) <span class="op">%&gt;%</span></span>
<span id="cb1461-3"><a href="summary-manip.html#cb1461-3"></a><span class="st">  </span>knitr<span class="op">::</span><span class="kw">kable</span>()</span></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="left">name</th>
<th align="left">sex</th>
<th align="right">age</th>
<th align="right">height</th>
<th align="right">weight</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Gail</td>
<td align="left">F</td>
<td align="right">14</td>
<td align="right">64.3</td>
<td align="right">90.0</td>
</tr>
<tr class="even">
<td align="left">Karen</td>
<td align="left">F</td>
<td align="right">12</td>
<td align="right">56.3</td>
<td align="right">77.0</td>
</tr>
<tr class="odd">
<td align="left">Kathy</td>
<td align="left">F</td>
<td align="right">12</td>
<td align="right">59.8</td>
<td align="right">84.5</td>
</tr>
</tbody>
</table>
</div>
<div id="dplyr-samplen" class="section level2">
<h2><span class="header-section-number">26.4</span> 用<code>sample_n()</code>对观测随机抽样</h2>
<p>dplyr包的<code>sample_n(tbl, size)</code>函数可以从数据集<code>tbl</code>中随机无放回抽取<code>size</code>行，如：</p>
<div class="sourceCode" id="cb1462"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1462-1"><a href="summary-manip.html#cb1462-1"></a>d.class <span class="op">%&gt;%</span></span>
<span id="cb1462-2"><a href="summary-manip.html#cb1462-2"></a><span class="st">  </span><span class="kw">sample_n</span>(<span class="dt">size =</span> <span class="dv">3</span>) <span class="op">%&gt;%</span></span>
<span id="cb1462-3"><a href="summary-manip.html#cb1462-3"></a><span class="st">  </span>knitr<span class="op">::</span><span class="kw">kable</span>()</span></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="left">name</th>
<th align="left">sex</th>
<th align="right">age</th>
<th align="right">height</th>
<th align="right">weight</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Alfred</td>
<td align="left">M</td>
<td align="right">14</td>
<td align="right">69.0</td>
<td align="right">112.5</td>
</tr>
<tr class="even">
<td align="left">Gail</td>
<td align="left">F</td>
<td align="right">14</td>
<td align="right">64.3</td>
<td align="right">90.0</td>
</tr>
<tr class="odd">
<td align="left">Karen</td>
<td align="left">F</td>
<td align="right">12</td>
<td align="right">56.3</td>
<td align="right">77.0</td>
</tr>
</tbody>
</table>
<p><code>sample_n()</code>中加选项<code>replace=TRUE</code>可以变成有放回抽样。
可以用<code>weight</code>选项指定数据框中的一列作为抽样权重，
进行不等概抽样。</p>
</div>
<div id="dplyr-distinct" class="section level2">
<h2><span class="header-section-number">26.5</span> 用<code>distinct()</code>去除重复行</h2>
<p>有时我们希望得到一个或若干个变量组合的所有不同值。
dplyr包的<code>distinct()</code>函数可以对数据框指定若干变量，
然后筛选出所有不同值，
每组不同值仅保留一行。
指定变量名时不是写成字符串形式而是直接写变量名，
这是dplyr和tidyr包的特点。
例如，筛选出性别与年龄的所有不同组合：</p>
<div class="sourceCode" id="cb1463"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1463-1"><a href="summary-manip.html#cb1463-1"></a>d.class <span class="op">%&gt;%</span></span>
<span id="cb1463-2"><a href="summary-manip.html#cb1463-2"></a><span class="st">  </span><span class="kw">distinct</span>(sex, age) <span class="op">%&gt;%</span></span>
<span id="cb1463-3"><a href="summary-manip.html#cb1463-3"></a><span class="st">  </span>knitr<span class="op">::</span><span class="kw">kable</span>()</span></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="left">sex</th>
<th align="right">age</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">F</td>
<td align="right">13</td>
</tr>
<tr class="even">
<td align="left">F</td>
<td align="right">14</td>
</tr>
<tr class="odd">
<td align="left">F</td>
<td align="right">12</td>
</tr>
<tr class="even">
<td align="left">F</td>
<td align="right">15</td>
</tr>
<tr class="odd">
<td align="left">F</td>
<td align="right">11</td>
</tr>
<tr class="even">
<td align="left">M</td>
<td align="right">14</td>
</tr>
<tr class="odd">
<td align="left">M</td>
<td align="right">15</td>
</tr>
<tr class="even">
<td align="left">M</td>
<td align="right">12</td>
</tr>
<tr class="odd">
<td align="left">M</td>
<td align="right">13</td>
</tr>
<tr class="even">
<td align="left">M</td>
<td align="right">16</td>
</tr>
<tr class="odd">
<td align="left">M</td>
<td align="right">11</td>
</tr>
</tbody>
</table>
<p>如果希望保留数据框中其它变量，
可以加选项<code>.keep_all=TRUE</code>。</p>
<p>下面的程序查看NHANES数据框中ID与SurveyYr的组合的不同值的个数：</p>
<div class="sourceCode" id="cb1464"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1464-1"><a href="summary-manip.html#cb1464-1"></a>NHANES <span class="op">%&gt;%</span></span>
<span id="cb1464-2"><a href="summary-manip.html#cb1464-2"></a><span class="st">  </span><span class="kw">distinct</span>(ID, SurveyYr) <span class="op">%&gt;%</span></span>
<span id="cb1464-3"><a href="summary-manip.html#cb1464-3"></a><span class="st">  </span><span class="kw">nrow</span>()</span></code></pre></div>
<pre><code>## [1] 6779</code></pre>
<p>这个结果提示有些人在某一调查年中有多个观测。</p>
</div>
<div id="tidyr-dropna" class="section level2">
<h2><span class="header-section-number">26.6</span> 用<code>drop_na()</code>去除指定的变量有缺失值的行</h2>
<p>在进行统计建模时，
通常需要用到的因变量和自变量都不包含缺失值。
tidyr包的<code>drop_na()</code>函数可以对数据框指定一到多个变量，
删去指定的变量有缺失值的行。
不指定变量时有任何变量缺失的行都会被删去。</p>
<p>例如，将NHANES中所有存在缺失值的行删去后数出保留的行数，
原来有10000行：</p>
<div class="sourceCode" id="cb1466"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1466-1"><a href="summary-manip.html#cb1466-1"></a>NHANES <span class="op">%&gt;%</span></span>
<span id="cb1466-2"><a href="summary-manip.html#cb1466-2"></a><span class="st">  </span><span class="kw">drop_na</span>() <span class="op">%&gt;%</span></span>
<span id="cb1466-3"><a href="summary-manip.html#cb1466-3"></a><span class="st">  </span><span class="kw">nrow</span>()</span></code></pre></div>
<pre><code>## [1] 0</code></pre>
<p>可见所有行都有缺失值。下面仅剔除AlcoholDay缺失的观测并计数：</p>
<div class="sourceCode" id="cb1468"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1468-1"><a href="summary-manip.html#cb1468-1"></a>NHANES <span class="op">%&gt;%</span></span>
<span id="cb1468-2"><a href="summary-manip.html#cb1468-2"></a><span class="st">  </span><span class="kw">drop_na</span>(AlcoholDay) <span class="op">%&gt;%</span></span>
<span id="cb1468-3"><a href="summary-manip.html#cb1468-3"></a><span class="st">  </span><span class="kw">nrow</span>()</span></code></pre></div>
<pre><code>## [1] 4914</code></pre>
<p>基本stats包的<code>complete.cases</code>函数返回是否无缺失值的逻辑向量，
<code>na.omit</code>函数则返回无缺失值的观测的子集。</p>
</div>
<div id="dplyr-select" class="section level2">
<h2><span class="header-section-number">26.7</span> 用<code>select()</code>选择列子集</h2>
<p>dplyr包的<code>select()</code>选择列子集，并返回列子集结果。</p>
<p>可以指定变量名，如</p>
<div class="sourceCode" id="cb1470"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1470-1"><a href="summary-manip.html#cb1470-1"></a>d.class <span class="op">%&gt;%</span></span>
<span id="cb1470-2"><a href="summary-manip.html#cb1470-2"></a><span class="st">  </span><span class="kw">select</span>(name, age) <span class="op">%&gt;%</span></span>
<span id="cb1470-3"><a href="summary-manip.html#cb1470-3"></a><span class="st">  </span><span class="kw">head</span>(<span class="dt">n=</span><span class="dv">3</span>) <span class="op">%&gt;%</span></span>
<span id="cb1470-4"><a href="summary-manip.html#cb1470-4"></a><span class="st">  </span>knitr<span class="op">::</span><span class="kw">kable</span>()</span></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="left">name</th>
<th align="right">age</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Alice</td>
<td align="right">13</td>
</tr>
<tr class="even">
<td align="left">Becka</td>
<td align="right">13</td>
</tr>
<tr class="odd">
<td align="left">Gail</td>
<td align="right">14</td>
</tr>
</tbody>
</table>
<p>可以用冒号表示列范围，如</p>
<div class="sourceCode" id="cb1471"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1471-1"><a href="summary-manip.html#cb1471-1"></a>d.class <span class="op">%&gt;%</span></span>
<span id="cb1471-2"><a href="summary-manip.html#cb1471-2"></a><span class="st">  </span><span class="kw">select</span>(age<span class="op">:</span>weight) <span class="op">%&gt;%</span></span>
<span id="cb1471-3"><a href="summary-manip.html#cb1471-3"></a><span class="st">  </span><span class="kw">head</span>(<span class="dt">n=</span><span class="dv">3</span>) <span class="op">%&gt;%</span></span>
<span id="cb1471-4"><a href="summary-manip.html#cb1471-4"></a><span class="st">  </span>knitr<span class="op">::</span><span class="kw">kable</span>()</span></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="right">age</th>
<th align="right">height</th>
<th align="right">weight</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">13</td>
<td align="right">56.5</td>
<td align="right">84</td>
</tr>
<tr class="even">
<td align="right">13</td>
<td align="right">65.3</td>
<td align="right">98</td>
</tr>
<tr class="odd">
<td align="right">14</td>
<td align="right">64.3</td>
<td align="right">90</td>
</tr>
</tbody>
</table>
<p>可以用数字序号表示列范围，如</p>
<div class="sourceCode" id="cb1472"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1472-1"><a href="summary-manip.html#cb1472-1"></a>d.class <span class="op">%&gt;%</span></span>
<span id="cb1472-2"><a href="summary-manip.html#cb1472-2"></a><span class="st">  </span><span class="kw">select</span>(<span class="dv">3</span><span class="op">:</span><span class="dv">5</span>) <span class="op">%&gt;%</span></span>
<span id="cb1472-3"><a href="summary-manip.html#cb1472-3"></a><span class="st">  </span><span class="kw">head</span>(<span class="dt">n=</span><span class="dv">3</span>) <span class="op">%&gt;%</span></span>
<span id="cb1472-4"><a href="summary-manip.html#cb1472-4"></a><span class="st">  </span>knitr<span class="op">::</span><span class="kw">kable</span>()</span></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="right">age</th>
<th align="right">height</th>
<th align="right">weight</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">13</td>
<td align="right">56.5</td>
<td align="right">84</td>
</tr>
<tr class="even">
<td align="right">13</td>
<td align="right">65.3</td>
<td align="right">98</td>
</tr>
<tr class="odd">
<td align="right">14</td>
<td align="right">64.3</td>
<td align="right">90</td>
</tr>
</tbody>
</table>
<p>参数中前面写负号表示扣除，如</p>
<div class="sourceCode" id="cb1473"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1473-1"><a href="summary-manip.html#cb1473-1"></a>d.class <span class="op">%&gt;%</span></span>
<span id="cb1473-2"><a href="summary-manip.html#cb1473-2"></a><span class="st">  </span><span class="kw">select</span>(<span class="op">-</span>name, <span class="op">-</span>age) <span class="op">%&gt;%</span></span>
<span id="cb1473-3"><a href="summary-manip.html#cb1473-3"></a><span class="st">  </span><span class="kw">head</span>(<span class="dt">n=</span><span class="dv">3</span>) <span class="op">%&gt;%</span></span>
<span id="cb1473-4"><a href="summary-manip.html#cb1473-4"></a><span class="st">  </span>knitr<span class="op">::</span><span class="kw">kable</span>()</span></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="left">sex</th>
<th align="right">height</th>
<th align="right">weight</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">F</td>
<td align="right">56.5</td>
<td align="right">84</td>
</tr>
<tr class="even">
<td align="left">F</td>
<td align="right">65.3</td>
<td align="right">98</td>
</tr>
<tr class="odd">
<td align="left">F</td>
<td align="right">64.3</td>
<td align="right">90</td>
</tr>
</tbody>
</table>
<p>如果要选择的变量名已经保存为一个字符型向量，
可以用<code>one_of()</code>函数引入，如</p>
<div class="sourceCode" id="cb1474"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1474-1"><a href="summary-manip.html#cb1474-1"></a>vars &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;name&quot;</span>, <span class="st">&quot;sex&quot;</span>)</span>
<span id="cb1474-2"><a href="summary-manip.html#cb1474-2"></a>d.class <span class="op">%&gt;%</span></span>
<span id="cb1474-3"><a href="summary-manip.html#cb1474-3"></a><span class="st">  </span><span class="kw">select</span>(<span class="kw">one_of</span>(vars)) <span class="op">%&gt;%</span></span>
<span id="cb1474-4"><a href="summary-manip.html#cb1474-4"></a><span class="st">  </span><span class="kw">head</span>(<span class="dt">n=</span><span class="dv">3</span>) <span class="op">%&gt;%</span></span>
<span id="cb1474-5"><a href="summary-manip.html#cb1474-5"></a><span class="st">  </span>knitr<span class="op">::</span><span class="kw">kable</span>()</span></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="left">name</th>
<th align="left">sex</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Alice</td>
<td align="left">F</td>
</tr>
<tr class="even">
<td align="left">Becka</td>
<td align="left">F</td>
</tr>
<tr class="odd">
<td align="left">Gail</td>
<td align="left">F</td>
</tr>
</tbody>
</table>
<p>R的字符串函数（如<code>paste()</code>）和正则表达式函数可以用来生成变量名子集，
然后在<code>select</code>中配合<code>one_of</code>使用。</p>
<p><code>select()</code>有若干个配套函数可以按名字的模式选择变量列，
如</p>
<ul>
<li><code>starts_with("se"): 选择名字以</code>“se”`开头的变量列；</li>
<li><code>ends_with("ght"): 选择名字以</code>“ght”`结尾的变量列；</li>
<li><code>contains("no"): 选择名字中含有子串</code>“no”`的变量列；</li>
<li><code>matches("^[[:alpha:]]+[[:digit:]]+$")</code>，
选择列名匹配某个正则表达式模式的变量列，
这里匹配前一部分是字母，后一部分是数字的变量名，如<code>abc12</code>。</li>
<li><code>num_range("x", 1:3)</code>，选择<code>x1</code>, <code>x2</code>, <code>x3</code>。</li>
<li><code>everything()</code>: 代指所有选中的变量，
这可以用来将指定的变量次序提前，
其它变量排在后面。</li>
</ul>
<p>R函数subset也能对数据框选取列子集和行子集。</p>
</div>
<div id="dplyr-pull" class="section level2">
<h2><span class="header-section-number">26.8</span> 取出单个变量为向量</h2>
<p>如果需要选择单个变量并使得结果为普通向量，
可以用dplyr包的<code>pull()</code>函数，如：</p>
<div class="sourceCode" id="cb1475"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1475-1"><a href="summary-manip.html#cb1475-1"></a>d.class <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb1475-2"><a href="summary-manip.html#cb1475-2"></a><span class="st">  </span><span class="kw">head</span>(<span class="dt">n=</span><span class="dv">3</span>) <span class="op">%&gt;%</span></span>
<span id="cb1475-3"><a href="summary-manip.html#cb1475-3"></a><span class="st">  </span><span class="kw">pull</span>(name) <span class="op">%&gt;%</span></span>
<span id="cb1475-4"><a href="summary-manip.html#cb1475-4"></a><span class="st">  </span><span class="kw">paste</span>(<span class="dt">collapse=</span><span class="st">&quot;:&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;Alice:Becka:Gail&quot;</code></pre>
<p><code>pull()</code>可以指定单个变量名，
也可以指定变量序号，
负的变量序号从最后一个变量数起。
缺省变量名和序号时取出最后一个变量。</p>
<p>如果要取出的变量名保存在一个字符型变量<code>varname</code>中，
可以用<code>pull(.data, !!sym(varname))</code>这种格式；
如果<code>varname</code>是函数的自变量，
可以用<code>pull(.data, {{ varname }})</code>这种格式。
或者，
先选择仅有一个变量的子数据框再用<code>pull()</code>，如：</p>
<div class="sourceCode" id="cb1477"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1477-1"><a href="summary-manip.html#cb1477-1"></a>varname &lt;-<span class="st"> &quot;name&quot;</span></span>
<span id="cb1477-2"><a href="summary-manip.html#cb1477-2"></a>d.class <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb1477-3"><a href="summary-manip.html#cb1477-3"></a><span class="st">  </span><span class="kw">head</span>(<span class="dt">n=</span><span class="dv">3</span>) <span class="op">%&gt;%</span></span>
<span id="cb1477-4"><a href="summary-manip.html#cb1477-4"></a><span class="st">  </span><span class="kw">select</span>(<span class="kw">one_of</span>(varname)) <span class="op">%&gt;%</span></span>
<span id="cb1477-5"><a href="summary-manip.html#cb1477-5"></a><span class="st">  </span><span class="kw">pull</span>() <span class="op">%&gt;%</span></span>
<span id="cb1477-6"><a href="summary-manip.html#cb1477-6"></a><span class="st">  </span><span class="kw">paste</span>(<span class="dt">collapse=</span><span class="st">&quot;:&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;Alice:Becka:Gail&quot;</code></pre>
<p>基于基本R，
也可以用<code>d.class[["name"]]</code>这种格式取出一列为普通变量，
如果<code>varname</code>保存了变量名，
可以用<code>d.class[[varname]]</code>这种格式。</p>
<p>不能用<code>d.class[,"name"]</code>这种方法，
对于tibble类型，
其结果仍是一个子数据框；
用<code>d.class["name"]</code>这种格式，
结果也是一个子数据框。</p>
</div>
<div id="dplyr-arrange" class="section level2">
<h2><span class="header-section-number">26.9</span> 用<code>arrange()</code>排序</h2>
<p>dplyr包的<code>arrange()</code>按照数据框的某一列或某几列排序，
返回排序后的结果，如</p>
<div class="sourceCode" id="cb1479"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1479-1"><a href="summary-manip.html#cb1479-1"></a>d.class <span class="op">%&gt;%</span></span>
<span id="cb1479-2"><a href="summary-manip.html#cb1479-2"></a><span class="st">  </span><span class="kw">arrange</span>(sex, age) <span class="op">%&gt;%</span></span>
<span id="cb1479-3"><a href="summary-manip.html#cb1479-3"></a><span class="st">  </span>knitr<span class="op">::</span><span class="kw">kable</span>()</span></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="left">name</th>
<th align="left">sex</th>
<th align="right">age</th>
<th align="right">height</th>
<th align="right">weight</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Thomas</td>
<td align="left">M</td>
<td align="right">11</td>
<td align="right">57.5</td>
<td align="right">85.0</td>
</tr>
<tr class="even">
<td align="left">James</td>
<td align="left">M</td>
<td align="right">12</td>
<td align="right">57.3</td>
<td align="right">83.0</td>
</tr>
<tr class="odd">
<td align="left">John</td>
<td align="left">M</td>
<td align="right">12</td>
<td align="right">59.0</td>
<td align="right">99.5</td>
</tr>
<tr class="even">
<td align="left">Robert</td>
<td align="left">M</td>
<td align="right">12</td>
<td align="right">64.8</td>
<td align="right">128.0</td>
</tr>
<tr class="odd">
<td align="left">Jeffrey</td>
<td align="left">M</td>
<td align="right">13</td>
<td align="right">62.5</td>
<td align="right">84.0</td>
</tr>
<tr class="even">
<td align="left">Alfred</td>
<td align="left">M</td>
<td align="right">14</td>
<td align="right">69.0</td>
<td align="right">112.5</td>
</tr>
<tr class="odd">
<td align="left">Duke</td>
<td align="left">M</td>
<td align="right">14</td>
<td align="right">63.5</td>
<td align="right">102.5</td>
</tr>
<tr class="even">
<td align="left">Guido</td>
<td align="left">M</td>
<td align="right">15</td>
<td align="right">67.0</td>
<td align="right">133.0</td>
</tr>
<tr class="odd">
<td align="left">William</td>
<td align="left">M</td>
<td align="right">15</td>
<td align="right">66.5</td>
<td align="right">112.0</td>
</tr>
<tr class="even">
<td align="left">Philip</td>
<td align="left">M</td>
<td align="right">16</td>
<td align="right">72.0</td>
<td align="right">150.0</td>
</tr>
<tr class="odd">
<td align="left">Sandy</td>
<td align="left">F</td>
<td align="right">11</td>
<td align="right">51.3</td>
<td align="right">50.5</td>
</tr>
<tr class="even">
<td align="left">Karen</td>
<td align="left">F</td>
<td align="right">12</td>
<td align="right">56.3</td>
<td align="right">77.0</td>
</tr>
<tr class="odd">
<td align="left">Kathy</td>
<td align="left">F</td>
<td align="right">12</td>
<td align="right">59.8</td>
<td align="right">84.5</td>
</tr>
<tr class="even">
<td align="left">Alice</td>
<td align="left">F</td>
<td align="right">13</td>
<td align="right">56.5</td>
<td align="right">84.0</td>
</tr>
<tr class="odd">
<td align="left">Becka</td>
<td align="left">F</td>
<td align="right">13</td>
<td align="right">65.3</td>
<td align="right">98.0</td>
</tr>
<tr class="even">
<td align="left">Gail</td>
<td align="left">F</td>
<td align="right">14</td>
<td align="right">64.3</td>
<td align="right">90.0</td>
</tr>
<tr class="odd">
<td align="left">Tammy</td>
<td align="left">F</td>
<td align="right">14</td>
<td align="right">62.8</td>
<td align="right">102.5</td>
</tr>
<tr class="even">
<td align="left">Mary</td>
<td align="left">F</td>
<td align="right">15</td>
<td align="right">66.5</td>
<td align="right">112.0</td>
</tr>
<tr class="odd">
<td align="left">Sharon</td>
<td align="left">F</td>
<td align="right">15</td>
<td align="right">62.5</td>
<td align="right">112.5</td>
</tr>
</tbody>
</table>
<p>用<code>desc()</code>包裹想要降序排列的变量，如</p>
<div class="sourceCode" id="cb1480"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1480-1"><a href="summary-manip.html#cb1480-1"></a>d.class <span class="op">%&gt;%</span></span>
<span id="cb1480-2"><a href="summary-manip.html#cb1480-2"></a><span class="st">  </span><span class="kw">arrange</span>(sex, <span class="kw">desc</span>(age)) <span class="op">%&gt;%</span></span>
<span id="cb1480-3"><a href="summary-manip.html#cb1480-3"></a><span class="st">  </span>knitr<span class="op">::</span><span class="kw">kable</span>()</span></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="left">name</th>
<th align="left">sex</th>
<th align="right">age</th>
<th align="right">height</th>
<th align="right">weight</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Philip</td>
<td align="left">M</td>
<td align="right">16</td>
<td align="right">72.0</td>
<td align="right">150.0</td>
</tr>
<tr class="even">
<td align="left">Guido</td>
<td align="left">M</td>
<td align="right">15</td>
<td align="right">67.0</td>
<td align="right">133.0</td>
</tr>
<tr class="odd">
<td align="left">William</td>
<td align="left">M</td>
<td align="right">15</td>
<td align="right">66.5</td>
<td align="right">112.0</td>
</tr>
<tr class="even">
<td align="left">Alfred</td>
<td align="left">M</td>
<td align="right">14</td>
<td align="right">69.0</td>
<td align="right">112.5</td>
</tr>
<tr class="odd">
<td align="left">Duke</td>
<td align="left">M</td>
<td align="right">14</td>
<td align="right">63.5</td>
<td align="right">102.5</td>
</tr>
<tr class="even">
<td align="left">Jeffrey</td>
<td align="left">M</td>
<td align="right">13</td>
<td align="right">62.5</td>
<td align="right">84.0</td>
</tr>
<tr class="odd">
<td align="left">James</td>
<td align="left">M</td>
<td align="right">12</td>
<td align="right">57.3</td>
<td align="right">83.0</td>
</tr>
<tr class="even">
<td align="left">John</td>
<td align="left">M</td>
<td align="right">12</td>
<td align="right">59.0</td>
<td align="right">99.5</td>
</tr>
<tr class="odd">
<td align="left">Robert</td>
<td align="left">M</td>
<td align="right">12</td>
<td align="right">64.8</td>
<td align="right">128.0</td>
</tr>
<tr class="even">
<td align="left">Thomas</td>
<td align="left">M</td>
<td align="right">11</td>
<td align="right">57.5</td>
<td align="right">85.0</td>
</tr>
<tr class="odd">
<td align="left">Mary</td>
<td align="left">F</td>
<td align="right">15</td>
<td align="right">66.5</td>
<td align="right">112.0</td>
</tr>
<tr class="even">
<td align="left">Sharon</td>
<td align="left">F</td>
<td align="right">15</td>
<td align="right">62.5</td>
<td align="right">112.5</td>
</tr>
<tr class="odd">
<td align="left">Gail</td>
<td align="left">F</td>
<td align="right">14</td>
<td align="right">64.3</td>
<td align="right">90.0</td>
</tr>
<tr class="even">
<td align="left">Tammy</td>
<td align="left">F</td>
<td align="right">14</td>
<td align="right">62.8</td>
<td align="right">102.5</td>
</tr>
<tr class="odd">
<td align="left">Alice</td>
<td align="left">F</td>
<td align="right">13</td>
<td align="right">56.5</td>
<td align="right">84.0</td>
</tr>
<tr class="even">
<td align="left">Becka</td>
<td align="left">F</td>
<td align="right">13</td>
<td align="right">65.3</td>
<td align="right">98.0</td>
</tr>
<tr class="odd">
<td align="left">Karen</td>
<td align="left">F</td>
<td align="right">12</td>
<td align="right">56.3</td>
<td align="right">77.0</td>
</tr>
<tr class="even">
<td align="left">Kathy</td>
<td align="left">F</td>
<td align="right">12</td>
<td align="right">59.8</td>
<td align="right">84.5</td>
</tr>
<tr class="odd">
<td align="left">Sandy</td>
<td align="left">F</td>
<td align="right">11</td>
<td align="right">51.3</td>
<td align="right">50.5</td>
</tr>
</tbody>
</table>
<p>排序时不论升序还是降序，
所有的缺失值都自动排到末尾。</p>
<p>R函数<code>order()</code>可以用来给出数据框的排序次序，
然后以其输出为数据框行下标，
可以将数据框排序。</p>
</div>
<div id="dplyr-rename" class="section level2">
<h2><span class="header-section-number">26.10</span> 用<code>rename()</code>修改变量名</h2>
<p>在dplyr包的<code>rename()</code>中用“新名字=旧名字”格式修改变量名，
如</p>
<div class="sourceCode" id="cb1481"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1481-1"><a href="summary-manip.html#cb1481-1"></a>d2.class &lt;-<span class="st"> </span>d.class <span class="op">%&gt;%</span></span>
<span id="cb1481-2"><a href="summary-manip.html#cb1481-2"></a><span class="st">  </span>dplyr<span class="op">::</span><span class="kw">rename</span>(<span class="dt">h=</span>height, <span class="dt">w=</span>weight)</span></code></pre></div>
<p>注意这样改名字不是对原始数据框修改而是返回改了名字后的新数据框。</p>
<p><code>rename()</code>这个函数可能出现在其它包中，
保险起见写成<code>dplyr::rename()</code>。</p>
</div>
<div id="dplyr-mutate" class="section level2">
<h2><span class="header-section-number">26.11</span> 用<code>mutate()</code>计算新变量</h2>
<p>dplyr包的<code>mutate()</code>可以为数据框计算新变量，
返回含有新变量以及原变量的新数据框。
如</p>
<div class="sourceCode" id="cb1482"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1482-1"><a href="summary-manip.html#cb1482-1"></a>d.class <span class="op">%&gt;%</span></span>
<span id="cb1482-2"><a href="summary-manip.html#cb1482-2"></a><span class="st">  </span><span class="kw">mutate</span>(</span>
<span id="cb1482-3"><a href="summary-manip.html#cb1482-3"></a>    <span class="dt">rwh=</span>weight<span class="op">/</span>height, </span>
<span id="cb1482-4"><a href="summary-manip.html#cb1482-4"></a>    <span class="dt">sexc=</span><span class="kw">ifelse</span>(sex<span class="op">==</span><span class="st">&quot;F&quot;</span>, <span class="st">&quot;女&quot;</span>, <span class="st">&quot;男&quot;</span>)) <span class="op">%&gt;%</span></span>
<span id="cb1482-5"><a href="summary-manip.html#cb1482-5"></a><span class="st">  </span><span class="kw">head</span>(<span class="dt">n=</span><span class="dv">3</span>) <span class="op">%&gt;%</span></span>
<span id="cb1482-6"><a href="summary-manip.html#cb1482-6"></a><span class="st">  </span>knitr<span class="op">::</span><span class="kw">kable</span>()</span></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="left">name</th>
<th align="left">sex</th>
<th align="right">age</th>
<th align="right">height</th>
<th align="right">weight</th>
<th align="right">rwh</th>
<th align="left">sexc</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Alice</td>
<td align="left">F</td>
<td align="right">13</td>
<td align="right">56.5</td>
<td align="right">84</td>
<td align="right">1.486726</td>
<td align="left">女</td>
</tr>
<tr class="even">
<td align="left">Becka</td>
<td align="left">F</td>
<td align="right">13</td>
<td align="right">65.3</td>
<td align="right">98</td>
<td align="right">1.500766</td>
<td align="left">女</td>
</tr>
<tr class="odd">
<td align="left">Gail</td>
<td align="left">F</td>
<td align="right">14</td>
<td align="right">64.3</td>
<td align="right">90</td>
<td align="right">1.399689</td>
<td align="left">女</td>
</tr>
</tbody>
</table>
<p>用<code>mutate()</code>计算新变量时如果计算比较复杂，
也可以用多个语句组成复合语句，如：</p>
<div class="sourceCode" id="cb1483"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1483-1"><a href="summary-manip.html#cb1483-1"></a>d.class <span class="op">%&gt;%</span></span>
<span id="cb1483-2"><a href="summary-manip.html#cb1483-2"></a><span class="st">  </span><span class="kw">mutate</span>(</span>
<span id="cb1483-3"><a href="summary-manip.html#cb1483-3"></a>    <span class="dt">sexc =</span> {</span>
<span id="cb1483-4"><a href="summary-manip.html#cb1483-4"></a>      x &lt;-<span class="st"> </span><span class="kw">rep</span>(<span class="st">&quot;男&quot;</span>, <span class="kw">length</span>(sex))</span>
<span id="cb1483-5"><a href="summary-manip.html#cb1483-5"></a>      x[sex <span class="op">==</span><span class="st"> &quot;F&quot;</span>] &lt;-<span class="st"> &quot;女&quot;</span></span>
<span id="cb1483-6"><a href="summary-manip.html#cb1483-6"></a>      x</span>
<span id="cb1483-7"><a href="summary-manip.html#cb1483-7"></a>    }  ) <span class="op">%&gt;%</span></span>
<span id="cb1483-8"><a href="summary-manip.html#cb1483-8"></a><span class="st">  </span><span class="kw">head</span>(<span class="dt">n=</span><span class="dv">3</span>) <span class="op">%&gt;%</span></span>
<span id="cb1483-9"><a href="summary-manip.html#cb1483-9"></a><span class="st">  </span>knitr<span class="op">::</span><span class="kw">kable</span>()</span></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="left">name</th>
<th align="left">sex</th>
<th align="right">age</th>
<th align="right">height</th>
<th align="right">weight</th>
<th align="left">sexc</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Alice</td>
<td align="left">F</td>
<td align="right">13</td>
<td align="right">56.5</td>
<td align="right">84</td>
<td align="left">女</td>
</tr>
<tr class="even">
<td align="left">Becka</td>
<td align="left">F</td>
<td align="right">13</td>
<td align="right">65.3</td>
<td align="right">98</td>
<td align="left">女</td>
</tr>
<tr class="odd">
<td align="left">Gail</td>
<td align="left">F</td>
<td align="right">14</td>
<td align="right">64.3</td>
<td align="right">90</td>
<td align="left">女</td>
</tr>
</tbody>
</table>
<p>注意这样生成新变量不是在原来的数据框中添加，
原来的数据框没有被修改，
而是返回添加了新变量的新数据框。
R软件的巧妙设计保证了这样虽然是生成了新数据框，
但是与原来数据框重复的列并不会重复保存。</p>
<p>计算公式中可以包含对数据框中变量的统计函数结果，如</p>
<div class="sourceCode" id="cb1484"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1484-1"><a href="summary-manip.html#cb1484-1"></a>d.class <span class="op">%&gt;%</span></span>
<span id="cb1484-2"><a href="summary-manip.html#cb1484-2"></a><span class="st">  </span><span class="kw">mutate</span>(</span>
<span id="cb1484-3"><a href="summary-manip.html#cb1484-3"></a>    <span class="dt">cheight =</span> height <span class="op">-</span><span class="st"> </span><span class="kw">mean</span>(height)) <span class="op">%&gt;%</span></span>
<span id="cb1484-4"><a href="summary-manip.html#cb1484-4"></a><span class="st">  </span>knitr<span class="op">::</span><span class="kw">kable</span>()</span></code></pre></div>
<p>新变量可以与老变量名相同，
这样就在输出中修改了老变量。</p>
</div>
<div id="dplyr-transmute" class="section level2">
<h2><span class="header-section-number">26.12</span> 用<code>tranmute()</code>生成新变量的数据框</h2>
<p>函数<code>transmute()</code>用法与<code>mutate()</code>类似，
但是仅保留新定义的变量，
不保留原来的所有变量。
如：</p>
<div class="sourceCode" id="cb1485"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1485-1"><a href="summary-manip.html#cb1485-1"></a>d.class <span class="op">%&gt;%</span></span>
<span id="cb1485-2"><a href="summary-manip.html#cb1485-2"></a><span class="st">  </span><span class="kw">transmute</span>(</span>
<span id="cb1485-3"><a href="summary-manip.html#cb1485-3"></a>    <span class="dt">height_cm =</span> <span class="kw">round</span>(height<span class="op">*</span><span class="fl">2.54</span>),</span>
<span id="cb1485-4"><a href="summary-manip.html#cb1485-4"></a>    <span class="dt">weight_kg =</span> <span class="kw">round</span>(weight<span class="op">*</span><span class="fl">0.4535924</span>),</span>
<span id="cb1485-5"><a href="summary-manip.html#cb1485-5"></a>    <span class="dt">bmi =</span>  weight_kg <span class="op">/</span><span class="st"> </span>(height_cm <span class="op">/</span><span class="st"> </span><span class="dv">100</span>)<span class="op">^</span><span class="dv">2</span>) <span class="op">%&gt;%</span></span>
<span id="cb1485-6"><a href="summary-manip.html#cb1485-6"></a><span class="st">  </span><span class="kw">head</span>(<span class="dt">n=</span><span class="dv">3</span>) <span class="op">%&gt;%</span></span>
<span id="cb1485-7"><a href="summary-manip.html#cb1485-7"></a><span class="st">  </span>knitr<span class="op">::</span><span class="kw">kable</span>()</span></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="right">height_cm</th>
<th align="right">weight_kg</th>
<th align="right">bmi</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">144</td>
<td align="right">38</td>
<td align="right">18.32562</td>
</tr>
<tr class="even">
<td align="right">166</td>
<td align="right">44</td>
<td align="right">15.96748</td>
</tr>
<tr class="odd">
<td align="right">163</td>
<td align="right">41</td>
<td align="right">15.43152</td>
</tr>
</tbody>
</table>
<p>可见结果中仅保留了新定义的变量。</p>
<p>定义新变量也可以直接为数据框的新变量赋值：</p>
<div class="sourceCode" id="cb1486"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1486-1"><a href="summary-manip.html#cb1486-1"></a>d.class[[<span class="st">&quot;rwh&quot;</span>]] &lt;-<span class="st"> </span>d.class[[<span class="st">&quot;weight&quot;</span>]] <span class="op">/</span><span class="st"> </span>d.class[[<span class="st">&quot;height&quot;</span>]]</span></code></pre></div>
<p>这样的做法与<code>mutate()</code>的区别是这样不会生成新数据框，
新变量是在原数据框中增加的。</p>
<p>给数据框中某个变量赋值为<code>NULL</code>可以修改数据框，
从数据框中删去该变量。</p>
</div>
<div id="dplyr-pipe" class="section level2">
<h2><span class="header-section-number">26.13</span> 用管道连接多次操作</h2>
<p>管道运算符特别适用于对同一数据集进行多次操作。
例如，对<code>d.class</code>数据，先选出所有女生，
再去掉性别和age变量：</p>
<div class="sourceCode" id="cb1487"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1487-1"><a href="summary-manip.html#cb1487-1"></a>d.class <span class="op">%&gt;%</span></span>
<span id="cb1487-2"><a href="summary-manip.html#cb1487-2"></a><span class="st">  </span><span class="kw">filter</span>(sex<span class="op">==</span><span class="st">&quot;F&quot;</span>) <span class="op">%&gt;%</span></span>
<span id="cb1487-3"><a href="summary-manip.html#cb1487-3"></a><span class="st">  </span><span class="kw">select</span>(<span class="op">-</span>sex, <span class="op">-</span>age) <span class="op">%&gt;%</span></span>
<span id="cb1487-4"><a href="summary-manip.html#cb1487-4"></a><span class="st">  </span>knitr<span class="op">::</span><span class="kw">kable</span>()</span></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="left">name</th>
<th align="right">height</th>
<th align="right">weight</th>
<th align="right">rwh</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Alice</td>
<td align="right">56.5</td>
<td align="right">84.0</td>
<td align="right">1.4867257</td>
</tr>
<tr class="even">
<td align="left">Becka</td>
<td align="right">65.3</td>
<td align="right">98.0</td>
<td align="right">1.5007657</td>
</tr>
<tr class="odd">
<td align="left">Gail</td>
<td align="right">64.3</td>
<td align="right">90.0</td>
<td align="right">1.3996890</td>
</tr>
<tr class="even">
<td align="left">Karen</td>
<td align="right">56.3</td>
<td align="right">77.0</td>
<td align="right">1.3676732</td>
</tr>
<tr class="odd">
<td align="left">Kathy</td>
<td align="right">59.8</td>
<td align="right">84.5</td>
<td align="right">1.4130435</td>
</tr>
<tr class="even">
<td align="left">Mary</td>
<td align="right">66.5</td>
<td align="right">112.0</td>
<td align="right">1.6842105</td>
</tr>
<tr class="odd">
<td align="left">Sandy</td>
<td align="right">51.3</td>
<td align="right">50.5</td>
<td align="right">0.9844055</td>
</tr>
<tr class="even">
<td align="left">Sharon</td>
<td align="right">62.5</td>
<td align="right">112.5</td>
<td align="right">1.8000000</td>
</tr>
<tr class="odd">
<td align="left">Tammy</td>
<td align="right">62.8</td>
<td align="right">102.5</td>
<td align="right">1.6321656</td>
</tr>
</tbody>
</table>
<p>管道操作的结果可以保存为新的tibble，如:</p>
<div class="sourceCode" id="cb1488"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1488-1"><a href="summary-manip.html#cb1488-1"></a>class_F &lt;-<span class="st"> </span>d.class <span class="op">%&gt;%</span></span>
<span id="cb1488-2"><a href="summary-manip.html#cb1488-2"></a><span class="st">  </span><span class="kw">filter</span>(sex<span class="op">==</span><span class="st">&quot;F&quot;</span>) <span class="op">%&gt;%</span></span>
<span id="cb1488-3"><a href="summary-manip.html#cb1488-3"></a><span class="st">  </span><span class="kw">select</span>(<span class="op">-</span>sex, <span class="op">-</span>age)</span></code></pre></div>
<p>也可以将赋值用<code>-&gt;</code>写在最后，如：</p>
<div class="sourceCode" id="cb1489"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1489-1"><a href="summary-manip.html#cb1489-1"></a>d.class <span class="op">%&gt;%</span></span>
<span id="cb1489-2"><a href="summary-manip.html#cb1489-2"></a><span class="st">  </span><span class="kw">filter</span>(sex<span class="op">==</span><span class="st">&quot;F&quot;</span>) <span class="op">%&gt;%</span></span>
<span id="cb1489-3"><a href="summary-manip.html#cb1489-3"></a><span class="st">  </span><span class="kw">select</span>(<span class="op">-</span>sex, <span class="op">-</span>age) -&gt;<span class="st"> </span>class_F</span></code></pre></div>
<p>如果管道传递的变量在下一层调用中不是第一自变量，
可以用<code>.</code>代表，如：</p>
<div class="sourceCode" id="cb1490"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1490-1"><a href="summary-manip.html#cb1490-1"></a>d.class <span class="op">%&gt;%</span></span>
<span id="cb1490-2"><a href="summary-manip.html#cb1490-2"></a><span class="st">  </span><span class="kw">lm</span>(weight <span class="op">~</span><span class="st"> </span>height, <span class="dt">data=</span>.) <span class="op">%&gt;%</span></span>
<span id="cb1490-3"><a href="summary-manip.html#cb1490-3"></a><span class="st">  </span><span class="kw">coef</span>()</span></code></pre></div>
<pre><code>## (Intercept)      height 
##  -143.02692     3.89903</code></pre>
<p>为了明确表示不使用管道输入作为第一自变量，
可以将管道操作的那一层加上大括号，如：</p>
<div class="sourceCode" id="cb1492"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1492-1"><a href="summary-manip.html#cb1492-1"></a>d.class <span class="op">%&gt;%</span><span class="st"> </span>{</span>
<span id="cb1492-2"><a href="summary-manip.html#cb1492-2"></a>  <span class="kw">lm</span>(weight <span class="op">~</span><span class="st"> </span>height, <span class="dt">data=</span>.) } <span class="op">%&gt;%</span></span>
<span id="cb1492-3"><a href="summary-manip.html#cb1492-3"></a><span class="st">  </span><span class="kw">coef</span>()</span></code></pre></div>
<pre><code>## (Intercept)      height 
##  -143.02692     3.89903</code></pre>
</div>
<div id="tidyr-longer" class="section level2">
<h2><span class="header-section-number">26.14</span> 宽表转换为长表</h2>
<div id="tidyr-longer-pl" class="section level3">
<h3><span class="header-section-number">26.14.1</span> <code>pivot_longer</code>函数</h3>
<p>tidyr的<code>pivot_longer()</code>函数可以将横向的多次观测堆叠在一列中。
例如，
下面的数据：</p>
<div class="sourceCode" id="cb1494"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1494-1"><a href="summary-manip.html#cb1494-1"></a>knitr<span class="op">::</span><span class="kw">kable</span>(dwide1)</span></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="right">subject</th>
<th align="right">1</th>
<th align="right">2</th>
<th align="right">3</th>
<th align="right">4</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">1</td>
<td align="right">1</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
</tr>
<tr class="even">
<td align="right">2</td>
<td align="right">NA</td>
<td align="right">7</td>
<td align="right">NA</td>
<td align="right">4</td>
</tr>
<tr class="odd">
<td align="right">3</td>
<td align="right">5</td>
<td align="right">10</td>
<td align="right">NA</td>
<td align="right">NA</td>
</tr>
<tr class="even">
<td align="right">4</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">9</td>
<td align="right">NA</td>
</tr>
</tbody>
</table>
<p>subject是受试者编号，
每个受试者有4次随访，
NA表示缺失。
数据分析和绘图用的函数一般不能直接使用这样的数据，
一般需要将测量值作为变量名，
将4次测量合并在一列中，
将随访序号单独放在另外一列中。
用<code>pivot_longer()</code>函数实现：</p>
<div class="sourceCode" id="cb1495"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1495-1"><a href="summary-manip.html#cb1495-1"></a>dwide1 <span class="op">%&gt;%</span></span>
<span id="cb1495-2"><a href="summary-manip.html#cb1495-2"></a><span class="st">  </span><span class="kw">pivot_longer</span>(<span class="st">`</span><span class="dt">1</span><span class="st">`</span><span class="op">:</span><span class="st">`</span><span class="dt">4</span><span class="st">`</span>, </span>
<span id="cb1495-3"><a href="summary-manip.html#cb1495-3"></a>     <span class="dt">names_to =</span> <span class="st">&quot;time&quot;</span>, </span>
<span id="cb1495-4"><a href="summary-manip.html#cb1495-4"></a>     <span class="dt">values_to =</span> <span class="st">&quot;response&quot;</span>) <span class="op">%&gt;%</span></span>
<span id="cb1495-5"><a href="summary-manip.html#cb1495-5"></a><span class="st">  </span>knitr<span class="op">::</span><span class="kw">kable</span>()</span></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="right">subject</th>
<th align="left">time</th>
<th align="right">response</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">1</td>
<td align="left">1</td>
<td align="right">1</td>
</tr>
<tr class="even">
<td align="right">1</td>
<td align="left">2</td>
<td align="right">NA</td>
</tr>
<tr class="odd">
<td align="right">1</td>
<td align="left">3</td>
<td align="right">NA</td>
</tr>
<tr class="even">
<td align="right">1</td>
<td align="left">4</td>
<td align="right">NA</td>
</tr>
<tr class="odd">
<td align="right">2</td>
<td align="left">1</td>
<td align="right">NA</td>
</tr>
<tr class="even">
<td align="right">2</td>
<td align="left">2</td>
<td align="right">7</td>
</tr>
<tr class="odd">
<td align="right">2</td>
<td align="left">3</td>
<td align="right">NA</td>
</tr>
<tr class="even">
<td align="right">2</td>
<td align="left">4</td>
<td align="right">4</td>
</tr>
<tr class="odd">
<td align="right">3</td>
<td align="left">1</td>
<td align="right">5</td>
</tr>
<tr class="even">
<td align="right">3</td>
<td align="left">2</td>
<td align="right">10</td>
</tr>
<tr class="odd">
<td align="right">3</td>
<td align="left">3</td>
<td align="right">NA</td>
</tr>
<tr class="even">
<td align="right">3</td>
<td align="left">4</td>
<td align="right">NA</td>
</tr>
<tr class="odd">
<td align="right">4</td>
<td align="left">1</td>
<td align="right">NA</td>
</tr>
<tr class="even">
<td align="right">4</td>
<td align="left">2</td>
<td align="right">NA</td>
</tr>
<tr class="odd">
<td align="right">4</td>
<td align="left">3</td>
<td align="right">9</td>
</tr>
<tr class="even">
<td align="right">4</td>
<td align="left">4</td>
<td align="right">NA</td>
</tr>
</tbody>
</table>
<p>选项<code>names_to</code>指定一个新变量名，
将原来的列标题转换为该变量的值；
选项<code>values_to</code>指定一个新变量名，
将原来的各个列对应的测量值保存在该变量名的列中。</p>
<p>注意原来的变量名不是合法R变量名，
所以在<code>pivot_longer()</code>中用反单撇号保护，
并用了冒号来表示变量范围，
也可以仿照<code>select</code>函数中指定变量名的方法将<code>`1`:`4`</code>写成:</p>
<ul>
<li><code>c("1", "2", "3", "4")</code></li>
<li><code>-subject</code></li>
<li><code>cols = one_of(vars)</code>, 其中<code>vars</code>是保存了1到4的字符串的字符型向量。</li>
</ul>
<p>如果转换结果中不希望保留那些NA，
可以加<code>values_drop_na=TRUE</code>:</p>
<div class="sourceCode" id="cb1496"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1496-1"><a href="summary-manip.html#cb1496-1"></a>dwide1 <span class="op">%&gt;%</span></span>
<span id="cb1496-2"><a href="summary-manip.html#cb1496-2"></a><span class="st">  </span><span class="kw">pivot_longer</span>(<span class="st">`</span><span class="dt">1</span><span class="st">`</span><span class="op">:</span><span class="st">`</span><span class="dt">4</span><span class="st">`</span>, </span>
<span id="cb1496-3"><a href="summary-manip.html#cb1496-3"></a>     <span class="dt">names_to =</span> <span class="st">&quot;time&quot;</span>, </span>
<span id="cb1496-4"><a href="summary-manip.html#cb1496-4"></a>     <span class="dt">values_to =</span> <span class="st">&quot;response&quot;</span>,</span>
<span id="cb1496-5"><a href="summary-manip.html#cb1496-5"></a>     <span class="dt">values_drop_na =</span> <span class="ot">TRUE</span>) <span class="op">%&gt;%</span></span>
<span id="cb1496-6"><a href="summary-manip.html#cb1496-6"></a><span class="st">  </span>knitr<span class="op">::</span><span class="kw">kable</span>()</span></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="right">subject</th>
<th align="left">time</th>
<th align="right">response</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">1</td>
<td align="left">1</td>
<td align="right">1</td>
</tr>
<tr class="even">
<td align="right">2</td>
<td align="left">2</td>
<td align="right">7</td>
</tr>
<tr class="odd">
<td align="right">2</td>
<td align="left">4</td>
<td align="right">4</td>
</tr>
<tr class="even">
<td align="right">3</td>
<td align="left">1</td>
<td align="right">5</td>
</tr>
<tr class="odd">
<td align="right">3</td>
<td align="left">2</td>
<td align="right">10</td>
</tr>
<tr class="even">
<td align="right">4</td>
<td align="left">3</td>
<td align="right">9</td>
</tr>
</tbody>
</table>
</div>
<div id="tidyr-longer-prefixvalue" class="section level3">
<h3><span class="header-section-number">26.14.2</span> 从列名中提取数值</h3>
<p>有时要合并的列名中带有数值，
需要将这些数值部分提取出来，
这时可以用<code>names_prefix</code>指定要去掉的非数值前缀，
用<code>names_transform</code>指定将列名转换为值时，
转换的类型，
<code>names_transform</code>是一个列表，
实现列表元素名到转换函数的映射。
例如，上述的dwide1数据框变成这样：</p>
<table>
<thead>
<tr class="header">
<th align="right">subject</th>
<th align="right">FU1</th>
<th align="right">FU2</th>
<th align="right">FU3</th>
<th align="right">FU4</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">1</td>
<td align="right">1</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
</tr>
<tr class="even">
<td align="right">2</td>
<td align="right">NA</td>
<td align="right">7</td>
<td align="right">NA</td>
<td align="right">4</td>
</tr>
<tr class="odd">
<td align="right">3</td>
<td align="right">5</td>
<td align="right">10</td>
<td align="right">NA</td>
<td align="right">NA</td>
</tr>
<tr class="even">
<td align="right">4</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">9</td>
<td align="right">NA</td>
</tr>
</tbody>
</table>
<p>可以用如下程序将随访编号变成整数值存入一列：</p>
<div class="sourceCode" id="cb1497"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1497-1"><a href="summary-manip.html#cb1497-1"></a>dwide2 <span class="op">%&gt;%</span></span>
<span id="cb1497-2"><a href="summary-manip.html#cb1497-2"></a><span class="st">  </span><span class="kw">pivot_longer</span>(<span class="dt">cols =</span> <span class="kw">paste0</span>(<span class="st">&quot;FU&quot;</span>, <span class="dv">1</span><span class="op">:</span><span class="dv">4</span>), </span>
<span id="cb1497-3"><a href="summary-manip.html#cb1497-3"></a>     <span class="dt">names_to =</span> <span class="st">&quot;time&quot;</span>, </span>
<span id="cb1497-4"><a href="summary-manip.html#cb1497-4"></a>     <span class="dt">values_to =</span> <span class="st">&quot;response&quot;</span>,</span>
<span id="cb1497-5"><a href="summary-manip.html#cb1497-5"></a>     <span class="dt">names_prefix =</span> <span class="st">&quot;FU&quot;</span>,</span>
<span id="cb1497-6"><a href="summary-manip.html#cb1497-6"></a>     <span class="dt">names_transform =</span> <span class="kw">list</span>(<span class="dt">time =</span> as.integer),</span>
<span id="cb1497-7"><a href="summary-manip.html#cb1497-7"></a>     <span class="dt">values_drop_na =</span> <span class="ot">TRUE</span>) <span class="op">%&gt;%</span></span>
<span id="cb1497-8"><a href="summary-manip.html#cb1497-8"></a><span class="st">  </span>knitr<span class="op">::</span><span class="kw">kable</span>()</span></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="right">subject</th>
<th align="right">time</th>
<th align="right">response</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">1</td>
<td align="right">1</td>
<td align="right">1</td>
</tr>
<tr class="even">
<td align="right">2</td>
<td align="right">2</td>
<td align="right">7</td>
</tr>
<tr class="odd">
<td align="right">2</td>
<td align="right">4</td>
<td align="right">4</td>
</tr>
<tr class="even">
<td align="right">3</td>
<td align="right">1</td>
<td align="right">5</td>
</tr>
<tr class="odd">
<td align="right">3</td>
<td align="right">2</td>
<td align="right">10</td>
</tr>
<tr class="even">
<td align="right">4</td>
<td align="right">3</td>
<td align="right">9</td>
</tr>
</tbody>
</table>
<p>其中的<code>cols = paste0("FU", 1:4)</code>也可以写成<code>cols = starts_with("FU")</code>。</p>
</div>
<div id="tidyr-longer-colnamemultclassv" class="section level3">
<h3><span class="header-section-number">26.14.3</span> 从列名中提取多个分类变量值</h3>
<p>上面的dwide2数据集的FU1到FU4变量中包含了随访次数这一个变量的值。
有些数据集在列名中用编码形式保存了不止一个变量的信息，
假设那些列保存的数值仍属于同一属性。
例如，下面的数据：</p>
<table>
<thead>
<tr class="header">
<th align="right">unit</th>
<th align="right">F_1</th>
<th align="right">F_2</th>
<th align="right">M_1</th>
<th align="right">M_2</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">1</td>
<td align="right">55</td>
<td align="right">52</td>
<td align="right">64</td>
<td align="right">60</td>
</tr>
<tr class="even">
<td align="right">2</td>
<td align="right">98</td>
<td align="right">93</td>
<td align="right">120</td>
<td align="right">116</td>
</tr>
<tr class="odd">
<td align="right">3</td>
<td align="right">40</td>
<td align="right">38</td>
<td align="right">44</td>
<td align="right">40</td>
</tr>
</tbody>
</table>
<p>假设这是对某个问题的赞成或反对意见的某个抽样调查的频数表，
unit是不同的抽样子集，
其它四列都是频数，
<code>F_1</code>代表女性中赞成人数，
<code>F_2</code>代表女性中反对人数，
<code>M_1</code>代表男性中赞成人数，
<code>M_2</code>代表男性中反对人数。</p>
<p>为了利用这样的数据，
需要将不同性别和两种意见的人数都合并到一列中，
增加性别和意见列。
对于这种用一定规则将多个变量值编码进入列名的情形，
需要使用正则表达式的方式将有变量值的部分用正则表达式的捕获子集标记出来，
关于正则表达式详见<a href="text.html#text-regex">36.3</a>。
程序为：</p>
<div class="sourceCode" id="cb1498"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1498-1"><a href="summary-manip.html#cb1498-1"></a>dwide3 <span class="op">%&gt;%</span></span>
<span id="cb1498-2"><a href="summary-manip.html#cb1498-2"></a><span class="st">  </span><span class="kw">pivot_longer</span>(</span>
<span id="cb1498-3"><a href="summary-manip.html#cb1498-3"></a>    <span class="dt">cols =</span> F_<span class="dv">1</span><span class="op">:</span>M_<span class="dv">2</span>,</span>
<span id="cb1498-4"><a href="summary-manip.html#cb1498-4"></a>    <span class="dt">names_to =</span> <span class="kw">c</span>(<span class="st">&quot;gender&quot;</span>, <span class="st">&quot;response&quot;</span>),</span>
<span id="cb1498-5"><a href="summary-manip.html#cb1498-5"></a>    <span class="dt">values_to =</span> <span class="st">&quot;freq&quot;</span>,</span>
<span id="cb1498-6"><a href="summary-manip.html#cb1498-6"></a>    <span class="dt">names_pattern =</span> <span class="st">&quot;(F|M)_(1|2)&quot;</span>,</span>
<span id="cb1498-7"><a href="summary-manip.html#cb1498-7"></a>    <span class="dt">names_ptypes =</span> <span class="kw">list</span>(</span>
<span id="cb1498-8"><a href="summary-manip.html#cb1498-8"></a>      <span class="dt">gender =</span> <span class="kw">factor</span>(</span>
<span id="cb1498-9"><a href="summary-manip.html#cb1498-9"></a>        <span class="dt">levels =</span> <span class="kw">c</span>(<span class="st">&quot;F&quot;</span>, <span class="st">&quot;M&quot;</span>)),</span>
<span id="cb1498-10"><a href="summary-manip.html#cb1498-10"></a>      <span class="dt">response =</span> <span class="kw">factor</span>(</span>
<span id="cb1498-11"><a href="summary-manip.html#cb1498-11"></a>        <span class="dt">levels =</span> <span class="kw">c</span>(<span class="st">&quot;1&quot;</span>, <span class="st">&quot;2&quot;</span>))</span>
<span id="cb1498-12"><a href="summary-manip.html#cb1498-12"></a>    )</span>
<span id="cb1498-13"><a href="summary-manip.html#cb1498-13"></a>  ) <span class="op">%&gt;%</span></span>
<span id="cb1498-14"><a href="summary-manip.html#cb1498-14"></a><span class="st">  </span>knitr<span class="op">::</span><span class="kw">kable</span>()</span></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="right">unit</th>
<th align="left">gender</th>
<th align="left">response</th>
<th align="right">freq</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">1</td>
<td align="left">F</td>
<td align="left">1</td>
<td align="right">55</td>
</tr>
<tr class="even">
<td align="right">1</td>
<td align="left">F</td>
<td align="left">2</td>
<td align="right">52</td>
</tr>
<tr class="odd">
<td align="right">1</td>
<td align="left">M</td>
<td align="left">1</td>
<td align="right">64</td>
</tr>
<tr class="even">
<td align="right">1</td>
<td align="left">M</td>
<td align="left">2</td>
<td align="right">60</td>
</tr>
<tr class="odd">
<td align="right">2</td>
<td align="left">F</td>
<td align="left">1</td>
<td align="right">98</td>
</tr>
<tr class="even">
<td align="right">2</td>
<td align="left">F</td>
<td align="left">2</td>
<td align="right">93</td>
</tr>
<tr class="odd">
<td align="right">2</td>
<td align="left">M</td>
<td align="left">1</td>
<td align="right">120</td>
</tr>
<tr class="even">
<td align="right">2</td>
<td align="left">M</td>
<td align="left">2</td>
<td align="right">116</td>
</tr>
<tr class="odd">
<td align="right">3</td>
<td align="left">F</td>
<td align="left">1</td>
<td align="right">40</td>
</tr>
<tr class="even">
<td align="right">3</td>
<td align="left">F</td>
<td align="left">2</td>
<td align="right">38</td>
</tr>
<tr class="odd">
<td align="right">3</td>
<td align="left">M</td>
<td align="left">1</td>
<td align="right">44</td>
</tr>
<tr class="even">
<td align="right">3</td>
<td align="left">M</td>
<td align="left">2</td>
<td align="right">40</td>
</tr>
</tbody>
</table>
<p>在列名的各个部分之间有分隔符如<code>_</code>时，
可以用<code>names_sep</code>选项代替<code>names_pattern</code>选项，如：</p>
<div class="sourceCode" id="cb1499"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1499-1"><a href="summary-manip.html#cb1499-1"></a>dwide3 <span class="op">%&gt;%</span></span>
<span id="cb1499-2"><a href="summary-manip.html#cb1499-2"></a><span class="st">  </span><span class="kw">pivot_longer</span>(</span>
<span id="cb1499-3"><a href="summary-manip.html#cb1499-3"></a>    <span class="dt">cols =</span> F_<span class="dv">1</span><span class="op">:</span>M_<span class="dv">2</span>,</span>
<span id="cb1499-4"><a href="summary-manip.html#cb1499-4"></a>    <span class="dt">names_to =</span> <span class="kw">c</span>(<span class="st">&quot;gender&quot;</span>, <span class="st">&quot;response&quot;</span>),</span>
<span id="cb1499-5"><a href="summary-manip.html#cb1499-5"></a>    <span class="dt">values_to =</span> <span class="st">&quot;freq&quot;</span>,</span>
<span id="cb1499-6"><a href="summary-manip.html#cb1499-6"></a>    <span class="dt">names_sep =</span> <span class="st">&quot;_&quot;</span>,</span>
<span id="cb1499-7"><a href="summary-manip.html#cb1499-7"></a>    <span class="dt">names_ptypes =</span> <span class="kw">list</span>(</span>
<span id="cb1499-8"><a href="summary-manip.html#cb1499-8"></a>      <span class="dt">gender =</span> <span class="kw">factor</span>(</span>
<span id="cb1499-9"><a href="summary-manip.html#cb1499-9"></a>        <span class="dt">levels =</span> <span class="kw">c</span>(<span class="st">&quot;F&quot;</span>, <span class="st">&quot;M&quot;</span>)),</span>
<span id="cb1499-10"><a href="summary-manip.html#cb1499-10"></a>      <span class="dt">response =</span> <span class="kw">factor</span>(</span>
<span id="cb1499-11"><a href="summary-manip.html#cb1499-11"></a>        <span class="dt">levels =</span> <span class="kw">c</span>(<span class="st">&quot;1&quot;</span>, <span class="st">&quot;2&quot;</span>))</span>
<span id="cb1499-12"><a href="summary-manip.html#cb1499-12"></a>    )</span>
<span id="cb1499-13"><a href="summary-manip.html#cb1499-13"></a>  ) <span class="op">%&gt;%</span></span>
<span id="cb1499-14"><a href="summary-manip.html#cb1499-14"></a><span class="st">  </span>knitr<span class="op">::</span><span class="kw">kable</span>()</span></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="right">unit</th>
<th align="left">gender</th>
<th align="left">response</th>
<th align="right">freq</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">1</td>
<td align="left">F</td>
<td align="left">1</td>
<td align="right">55</td>
</tr>
<tr class="even">
<td align="right">1</td>
<td align="left">F</td>
<td align="left">2</td>
<td align="right">52</td>
</tr>
<tr class="odd">
<td align="right">1</td>
<td align="left">M</td>
<td align="left">1</td>
<td align="right">64</td>
</tr>
<tr class="even">
<td align="right">1</td>
<td align="left">M</td>
<td align="left">2</td>
<td align="right">60</td>
</tr>
<tr class="odd">
<td align="right">2</td>
<td align="left">F</td>
<td align="left">1</td>
<td align="right">98</td>
</tr>
<tr class="even">
<td align="right">2</td>
<td align="left">F</td>
<td align="left">2</td>
<td align="right">93</td>
</tr>
<tr class="odd">
<td align="right">2</td>
<td align="left">M</td>
<td align="left">1</td>
<td align="right">120</td>
</tr>
<tr class="even">
<td align="right">2</td>
<td align="left">M</td>
<td align="left">2</td>
<td align="right">116</td>
</tr>
<tr class="odd">
<td align="right">3</td>
<td align="left">F</td>
<td align="left">1</td>
<td align="right">40</td>
</tr>
<tr class="even">
<td align="right">3</td>
<td align="left">F</td>
<td align="left">2</td>
<td align="right">38</td>
</tr>
<tr class="odd">
<td align="right">3</td>
<td align="left">M</td>
<td align="left">1</td>
<td align="right">44</td>
</tr>
<tr class="even">
<td align="right">3</td>
<td align="left">M</td>
<td align="left">2</td>
<td align="right">40</td>
</tr>
</tbody>
</table>
</div>
<div id="tidyr-longer-multvarsmultclassv" class="section level3">
<h3><span class="header-section-number">26.14.4</span> 一行中有多个属性的多次观测的情形</h3>
<p>设有多个属性的多次测量用编号的列名保存在了同一观测中，
例如，
基本R软件中的anscombe数据集的一部分行：</p>
<div class="sourceCode" id="cb1500"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1500-1"><a href="summary-manip.html#cb1500-1"></a>dwide4 &lt;-<span class="st"> </span>anscombe[<span class="dv">1</span><span class="op">:</span><span class="dv">3</span>,]</span>
<span id="cb1500-2"><a href="summary-manip.html#cb1500-2"></a>dwide4[[<span class="st">&quot;id&quot;</span>]] &lt;-<span class="st"> </span><span class="kw">seq</span>(<span class="dv">3</span>)</span>
<span id="cb1500-3"><a href="summary-manip.html#cb1500-3"></a>dwide4 &lt;-<span class="st"> </span>dwide4 <span class="op">%&gt;%</span></span>
<span id="cb1500-4"><a href="summary-manip.html#cb1500-4"></a><span class="st">  </span><span class="kw">select</span>(id, <span class="kw">everything</span>())</span>
<span id="cb1500-5"><a href="summary-manip.html#cb1500-5"></a>knitr<span class="op">::</span><span class="kw">kable</span>(dwide4)</span></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="right">id</th>
<th align="right">x1</th>
<th align="right">x2</th>
<th align="right">x3</th>
<th align="right">x4</th>
<th align="right">y1</th>
<th align="right">y2</th>
<th align="right">y3</th>
<th align="right">y4</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">1</td>
<td align="right">10</td>
<td align="right">10</td>
<td align="right">10</td>
<td align="right">8</td>
<td align="right">8.04</td>
<td align="right">9.14</td>
<td align="right">7.46</td>
<td align="right">6.58</td>
</tr>
<tr class="even">
<td align="right">2</td>
<td align="right">8</td>
<td align="right">8</td>
<td align="right">8</td>
<td align="right">8</td>
<td align="right">6.95</td>
<td align="right">8.14</td>
<td align="right">6.77</td>
<td align="right">5.76</td>
</tr>
<tr class="odd">
<td align="right">3</td>
<td align="right">13</td>
<td align="right">13</td>
<td align="right">13</td>
<td align="right">8</td>
<td align="right">7.58</td>
<td align="right">8.74</td>
<td align="right">12.74</td>
<td align="right">7.71</td>
</tr>
</tbody>
</table>
<p>这可以看成是每个受试者的x, y两个变量的4次随访的值保存在了一个观测中。
用<code>names_pattern</code>指定切分变量名和随访号的模式，
在对应的<code>names_to</code>中用特殊的<code>".value"</code>名字表示切分出来的那一部分实际是变量名，
这时不需要<code>values_to</code>选项。
程序如下：</p>
<div class="sourceCode" id="cb1501"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1501-1"><a href="summary-manip.html#cb1501-1"></a>dwide4 <span class="op">%&gt;%</span></span>
<span id="cb1501-2"><a href="summary-manip.html#cb1501-2"></a><span class="st">  </span><span class="kw">pivot_longer</span>(</span>
<span id="cb1501-3"><a href="summary-manip.html#cb1501-3"></a>    <span class="op">-</span>id,</span>
<span id="cb1501-4"><a href="summary-manip.html#cb1501-4"></a>    <span class="dt">names_pattern =</span> <span class="st">&quot;(x|y)([[:digit:]])&quot;</span>,</span>
<span id="cb1501-5"><a href="summary-manip.html#cb1501-5"></a>    <span class="dt">names_to =</span> <span class="kw">c</span>(<span class="st">&quot;.value&quot;</span>, <span class="st">&quot;time&quot;</span>)</span>
<span id="cb1501-6"><a href="summary-manip.html#cb1501-6"></a>  ) <span class="op">%&gt;%</span></span>
<span id="cb1501-7"><a href="summary-manip.html#cb1501-7"></a><span class="st">  </span>knitr<span class="op">::</span><span class="kw">kable</span>()</span></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="right">id</th>
<th align="left">time</th>
<th align="right">x</th>
<th align="right">y</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">1</td>
<td align="left">1</td>
<td align="right">10</td>
<td align="right">8.04</td>
</tr>
<tr class="even">
<td align="right">1</td>
<td align="left">2</td>
<td align="right">10</td>
<td align="right">9.14</td>
</tr>
<tr class="odd">
<td align="right">1</td>
<td align="left">3</td>
<td align="right">10</td>
<td align="right">7.46</td>
</tr>
<tr class="even">
<td align="right">1</td>
<td align="left">4</td>
<td align="right">8</td>
<td align="right">6.58</td>
</tr>
<tr class="odd">
<td align="right">2</td>
<td align="left">1</td>
<td align="right">8</td>
<td align="right">6.95</td>
</tr>
<tr class="even">
<td align="right">2</td>
<td align="left">2</td>
<td align="right">8</td>
<td align="right">8.14</td>
</tr>
<tr class="odd">
<td align="right">2</td>
<td align="left">3</td>
<td align="right">8</td>
<td align="right">6.77</td>
</tr>
<tr class="even">
<td align="right">2</td>
<td align="left">4</td>
<td align="right">8</td>
<td align="right">5.76</td>
</tr>
<tr class="odd">
<td align="right">3</td>
<td align="left">1</td>
<td align="right">13</td>
<td align="right">7.58</td>
</tr>
<tr class="even">
<td align="right">3</td>
<td align="left">2</td>
<td align="right">13</td>
<td align="right">8.74</td>
</tr>
<tr class="odd">
<td align="right">3</td>
<td align="left">3</td>
<td align="right">13</td>
<td align="right">12.74</td>
</tr>
<tr class="even">
<td align="right">3</td>
<td align="left">4</td>
<td align="right">8</td>
<td align="right">7.71</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="dplyr-wider" class="section level2">
<h2><span class="header-section-number">26.15</span> 长表转换为宽表</h2>
<div id="dplyr-wider-sepvars" class="section level3">
<h3><span class="header-section-number">26.15.1</span> 将多个混在一起的变量拆开</h3>
<p>tidyr包的<code>pivot_wider</code>函数可以将长表变成宽表。
这适用于将多个变量保存到了一列的情况。
例如，下面的长表将变量x和y放在了同一列中：</p>
<table>
<thead>
<tr class="header">
<th align="right">id</th>
<th align="left">variable</th>
<th align="right">value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">1</td>
<td align="left">x</td>
<td align="right">11</td>
</tr>
<tr class="even">
<td align="right">1</td>
<td align="left">y</td>
<td align="right">23</td>
</tr>
<tr class="odd">
<td align="right">2</td>
<td align="left">x</td>
<td align="right">10</td>
</tr>
<tr class="even">
<td align="right">2</td>
<td align="left">y</td>
<td align="right">20</td>
</tr>
<tr class="odd">
<td align="right">3</td>
<td align="left">x</td>
<td align="right">15</td>
</tr>
<tr class="even">
<td align="right">3</td>
<td align="left">y</td>
<td align="right">28</td>
</tr>
</tbody>
</table>
<p>这样的数据也不利于进行统计分析，
我们用<code>pivot_wider</code>函数将两个变量放到各自的列中，
用<code>names_from</code>选项指定区分不同变量的列，
用<code>values_from</code>指定保存实际变量值的列：</p>
<div class="sourceCode" id="cb1502"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1502-1"><a href="summary-manip.html#cb1502-1"></a>dlong1 <span class="op">%&gt;%</span></span>
<span id="cb1502-2"><a href="summary-manip.html#cb1502-2"></a><span class="st">  </span><span class="kw">pivot_wider</span>(</span>
<span id="cb1502-3"><a href="summary-manip.html#cb1502-3"></a>    <span class="dt">names_from =</span> <span class="st">&quot;variable&quot;</span>,</span>
<span id="cb1502-4"><a href="summary-manip.html#cb1502-4"></a>    <span class="dt">values_from =</span> <span class="st">&quot;value&quot;</span>  ) <span class="op">%&gt;%</span></span>
<span id="cb1502-5"><a href="summary-manip.html#cb1502-5"></a><span class="st">  </span>knitr<span class="op">::</span><span class="kw">kable</span>()</span></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="right">id</th>
<th align="right">x</th>
<th align="right">y</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">1</td>
<td align="right">11</td>
<td align="right">23</td>
</tr>
<tr class="even">
<td align="right">2</td>
<td align="right">10</td>
<td align="right">20</td>
</tr>
<tr class="odd">
<td align="right">3</td>
<td align="right">15</td>
<td align="right">28</td>
</tr>
</tbody>
</table>
<p>其中的变量名也可以不用双撇号保护。</p>
<p>在这样拆分列时，
有可能某些变量值不存在，例如：</p>
<table>
<thead>
<tr class="header">
<th align="right">id</th>
<th align="left">variable</th>
<th align="right">value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">1</td>
<td align="left">x</td>
<td align="right">11</td>
</tr>
<tr class="even">
<td align="right">1</td>
<td align="left">y</td>
<td align="right">23</td>
</tr>
<tr class="odd">
<td align="right">2</td>
<td align="left">x</td>
<td align="right">10</td>
</tr>
<tr class="even">
<td align="right">3</td>
<td align="left">y</td>
<td align="right">28</td>
</tr>
</tbody>
</table>
<p>这里2号id缺少y，3号id缺少x。
直接转换为宽表：</p>
<div class="sourceCode" id="cb1503"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1503-1"><a href="summary-manip.html#cb1503-1"></a>dlong2 <span class="op">%&gt;%</span></span>
<span id="cb1503-2"><a href="summary-manip.html#cb1503-2"></a><span class="st">  </span><span class="kw">pivot_wider</span>(</span>
<span id="cb1503-3"><a href="summary-manip.html#cb1503-3"></a>    <span class="dt">names_from =</span> variable,</span>
<span id="cb1503-4"><a href="summary-manip.html#cb1503-4"></a>    <span class="dt">values_from =</span> value  ) <span class="op">%&gt;%</span></span>
<span id="cb1503-5"><a href="summary-manip.html#cb1503-5"></a><span class="st">  </span>knitr<span class="op">::</span><span class="kw">kable</span>()</span></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="right">id</th>
<th align="right">x</th>
<th align="right">y</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">1</td>
<td align="right">11</td>
<td align="right">23</td>
</tr>
<tr class="even">
<td align="right">2</td>
<td align="right">10</td>
<td align="right">NA</td>
</tr>
<tr class="odd">
<td align="right">3</td>
<td align="right">NA</td>
<td align="right">28</td>
</tr>
</tbody>
</table>
<p>产生了缺失值。
如果知道缺失值实际等于0，
可以用选项<code>values_fill=</code>选项指定，如：</p>
<div class="sourceCode" id="cb1504"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1504-1"><a href="summary-manip.html#cb1504-1"></a>dlong2 <span class="op">%&gt;%</span></span>
<span id="cb1504-2"><a href="summary-manip.html#cb1504-2"></a><span class="st">  </span><span class="kw">pivot_wider</span>(</span>
<span id="cb1504-3"><a href="summary-manip.html#cb1504-3"></a>    <span class="dt">names_from =</span> variable,</span>
<span id="cb1504-4"><a href="summary-manip.html#cb1504-4"></a>    <span class="dt">values_from =</span> value,</span>
<span id="cb1504-5"><a href="summary-manip.html#cb1504-5"></a>    <span class="dt">values_fill =</span> <span class="kw">list</span>(</span>
<span id="cb1504-6"><a href="summary-manip.html#cb1504-6"></a>      <span class="dt">value =</span> <span class="dv">0</span>)  ) <span class="op">%&gt;%</span></span>
<span id="cb1504-7"><a href="summary-manip.html#cb1504-7"></a><span class="st">  </span>knitr<span class="op">::</span><span class="kw">kable</span>()</span></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="right">id</th>
<th align="right">x</th>
<th align="right">y</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">1</td>
<td align="right">11</td>
<td align="right">23</td>
</tr>
<tr class="even">
<td align="right">2</td>
<td align="right">10</td>
<td align="right">0</td>
</tr>
<tr class="odd">
<td align="right">3</td>
<td align="right">0</td>
<td align="right">28</td>
</tr>
</tbody>
</table>
</div>
<div id="dplyr-wider-combtimes" class="section level3">
<h3><span class="header-section-number">26.15.2</span> 将多个类别合并到一个观测</h3>
<p>设3个受试者的2次测量值放在变量x中，
用<code>time</code>区分2次测量值：</p>
<table>
<thead>
<tr class="header">
<th align="right">id</th>
<th align="right">time</th>
<th align="right">x</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">1</td>
<td align="right">1</td>
<td align="right">11</td>
</tr>
<tr class="even">
<td align="right">1</td>
<td align="right">2</td>
<td align="right">10</td>
</tr>
<tr class="odd">
<td align="right">2</td>
<td align="right">1</td>
<td align="right">15</td>
</tr>
<tr class="even">
<td align="right">2</td>
<td align="right">2</td>
<td align="right">13</td>
</tr>
<tr class="odd">
<td align="right">3</td>
<td align="right">1</td>
<td align="right">18</td>
</tr>
<tr class="even">
<td align="right">3</td>
<td align="right">2</td>
<td align="right">16</td>
</tr>
</tbody>
</table>
<p>下面的程序将x的两次测量变成变量x1和x2：</p>
<div class="sourceCode" id="cb1505"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1505-1"><a href="summary-manip.html#cb1505-1"></a>dlong3 <span class="op">%&gt;%</span></span>
<span id="cb1505-2"><a href="summary-manip.html#cb1505-2"></a><span class="st">  </span><span class="kw">pivot_wider</span>(</span>
<span id="cb1505-3"><a href="summary-manip.html#cb1505-3"></a>    <span class="dt">names_from =</span> time,</span>
<span id="cb1505-4"><a href="summary-manip.html#cb1505-4"></a>    <span class="dt">values_from =</span> x,</span>
<span id="cb1505-5"><a href="summary-manip.html#cb1505-5"></a>    <span class="dt">names_prefix =</span> <span class="st">&quot;x&quot;</span>) <span class="op">%&gt;%</span></span>
<span id="cb1505-6"><a href="summary-manip.html#cb1505-6"></a><span class="st">  </span>knitr<span class="op">::</span><span class="kw">kable</span>()</span></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="right">id</th>
<th align="right">x1</th>
<th align="right">x2</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">1</td>
<td align="right">11</td>
<td align="right">10</td>
</tr>
<tr class="even">
<td align="right">2</td>
<td align="right">15</td>
<td align="right">13</td>
</tr>
<tr class="odd">
<td align="right">3</td>
<td align="right">18</td>
<td align="right">16</td>
</tr>
</tbody>
</table>
</div>
<div id="dplyr-wider-combcross" class="section level3">
<h3><span class="header-section-number">26.15.3</span> 将交叉类别合并到一个观测</h3>
<p>考虑如下的频数表数据：</p>
<table>
<thead>
<tr class="header">
<th align="right">year</th>
<th align="left">sex</th>
<th align="left">type</th>
<th align="right">count</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">2018</td>
<td align="left">F</td>
<td align="left">Benign</td>
<td align="right">4</td>
</tr>
<tr class="even">
<td align="right">2018</td>
<td align="left">F</td>
<td align="left">Malignant</td>
<td align="right">9</td>
</tr>
<tr class="odd">
<td align="right">2018</td>
<td align="left">M</td>
<td align="left">Benign</td>
<td align="right">18</td>
</tr>
<tr class="even">
<td align="right">2018</td>
<td align="left">M</td>
<td align="left">Malignant</td>
<td align="right">3</td>
</tr>
<tr class="odd">
<td align="right">2019</td>
<td align="left">F</td>
<td align="left">Benign</td>
<td align="right">6</td>
</tr>
<tr class="even">
<td align="right">2019</td>
<td align="left">F</td>
<td align="left">Malignant</td>
<td align="right">10</td>
</tr>
<tr class="odd">
<td align="right">2019</td>
<td align="left">M</td>
<td align="left">Benign</td>
<td align="right">20</td>
</tr>
<tr class="even">
<td align="right">2019</td>
<td align="left">M</td>
<td align="left">Malignant</td>
<td align="right">5</td>
</tr>
</tbody>
</table>
<p>下面的程序将每年的数据合并到一行中：</p>
<div class="sourceCode" id="cb1506"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1506-1"><a href="summary-manip.html#cb1506-1"></a>dlong4 <span class="op">%&gt;%</span></span>
<span id="cb1506-2"><a href="summary-manip.html#cb1506-2"></a><span class="st">  </span><span class="kw">pivot_wider</span>(</span>
<span id="cb1506-3"><a href="summary-manip.html#cb1506-3"></a>    <span class="dt">names_from =</span> <span class="kw">c</span>(<span class="st">&quot;sex&quot;</span>, <span class="st">&quot;type&quot;</span>),</span>
<span id="cb1506-4"><a href="summary-manip.html#cb1506-4"></a>    <span class="dt">values_from =</span> <span class="st">&quot;count&quot;</span></span>
<span id="cb1506-5"><a href="summary-manip.html#cb1506-5"></a>  ) <span class="op">%&gt;%</span></span>
<span id="cb1506-6"><a href="summary-manip.html#cb1506-6"></a><span class="st">  </span>knitr<span class="op">::</span><span class="kw">kable</span>()</span></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="right">year</th>
<th align="right">F_Benign</th>
<th align="right">F_Malignant</th>
<th align="right">M_Benign</th>
<th align="right">M_Malignant</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">2018</td>
<td align="right">4</td>
<td align="right">9</td>
<td align="right">18</td>
<td align="right">3</td>
</tr>
<tr class="even">
<td align="right">2019</td>
<td align="right">6</td>
<td align="right">10</td>
<td align="right">20</td>
<td align="right">5</td>
</tr>
</tbody>
</table>
</div>
<div id="dplyr-wider-mvmest" class="section level3">
<h3><span class="header-section-number">26.15.4</span> 多个变量的多种值</h3>
<p>设有如下的x变量和y变量的分组汇总统计数据：</p>
<table>
<thead>
<tr class="header">
<th align="right">group</th>
<th align="left">variable</th>
<th align="right">avg</th>
<th align="right">sd</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">1</td>
<td align="left">x</td>
<td align="right">1.2</td>
<td align="right">0.5</td>
</tr>
<tr class="even">
<td align="right">1</td>
<td align="left">y</td>
<td align="right">-5.1</td>
<td align="right">0.4</td>
</tr>
<tr class="odd">
<td align="right">2</td>
<td align="left">x</td>
<td align="right">1.4</td>
<td align="right">0.5</td>
</tr>
<tr class="even">
<td align="right">2</td>
<td align="left">y</td>
<td align="right">-4.9</td>
<td align="right">0.8</td>
</tr>
<tr class="odd">
<td align="right">3</td>
<td align="left">x</td>
<td align="right">1.3</td>
<td align="right">0.7</td>
</tr>
<tr class="even">
<td align="right">3</td>
<td align="left">y</td>
<td align="right">-4.3</td>
<td align="right">0.9</td>
</tr>
</tbody>
</table>
<p>下面将x和y的两种统计量都放到同一行中：</p>
<div class="sourceCode" id="cb1507"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1507-1"><a href="summary-manip.html#cb1507-1"></a>dlong5 <span class="op">%&gt;%</span></span>
<span id="cb1507-2"><a href="summary-manip.html#cb1507-2"></a><span class="st">  </span><span class="kw">pivot_wider</span>(</span>
<span id="cb1507-3"><a href="summary-manip.html#cb1507-3"></a>    <span class="dt">names_from =</span> <span class="st">&quot;variable&quot;</span>,</span>
<span id="cb1507-4"><a href="summary-manip.html#cb1507-4"></a>    <span class="dt">values_from =</span> <span class="kw">c</span>(<span class="st">&quot;avg&quot;</span>, <span class="st">&quot;sd&quot;</span>)</span>
<span id="cb1507-5"><a href="summary-manip.html#cb1507-5"></a>  ) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb1507-6"><a href="summary-manip.html#cb1507-6"></a><span class="st">  </span>knitr<span class="op">::</span><span class="kw">kable</span>()</span></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="right">group</th>
<th align="right">avg_x</th>
<th align="right">avg_y</th>
<th align="right">sd_x</th>
<th align="right">sd_y</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">1</td>
<td align="right">1.2</td>
<td align="right">-5.1</td>
<td align="right">0.5</td>
<td align="right">0.4</td>
</tr>
<tr class="even">
<td align="right">2</td>
<td align="right">1.4</td>
<td align="right">-4.9</td>
<td align="right">0.5</td>
<td align="right">0.8</td>
</tr>
<tr class="odd">
<td align="right">3</td>
<td align="right">1.3</td>
<td align="right">-4.3</td>
<td align="right">0.7</td>
<td align="right">0.9</td>
</tr>
</tbody>
</table>
</div>
<div id="dplyr-wider-mixed" class="section level3">
<h3><span class="header-section-number">26.15.5</span> 长宽转换混合使用</h3>
<p>有时数据需要使用两个方向的转换才能达到可用的程度，
比如下面的数据：</p>
<div class="sourceCode" id="cb1508"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1508-1"><a href="summary-manip.html#cb1508-1"></a>knitr<span class="op">::</span><span class="kw">kable</span>(dlong6)</span></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="right">id</th>
<th align="left">variable</th>
<th align="right">2018</th>
<th align="right">2019</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">1</td>
<td align="left">x</td>
<td align="right">1.2</td>
<td align="right">1.3</td>
</tr>
<tr class="even">
<td align="right">1</td>
<td align="left">y</td>
<td align="right">-5.1</td>
<td align="right">-5.4</td>
</tr>
<tr class="odd">
<td align="right">2</td>
<td align="left">x</td>
<td align="right">1.4</td>
<td align="right">1.6</td>
</tr>
<tr class="even">
<td align="right">2</td>
<td align="left">y</td>
<td align="right">-4.9</td>
<td align="right">-4.2</td>
</tr>
<tr class="odd">
<td align="right">3</td>
<td align="left">x</td>
<td align="right">1.3</td>
<td align="right">1.5</td>
</tr>
<tr class="even">
<td align="right">3</td>
<td align="left">y</td>
<td align="right">-4.3</td>
<td align="right">-4.1</td>
</tr>
</tbody>
</table>
<p>这个数据的问题是x, y应该放在两列中却合并成一个了，
2018和2019应该放在一列中却分成了两列。
先合并2018和2019这两列，
然后再拆分x和y：</p>
<div class="sourceCode" id="cb1509"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1509-1"><a href="summary-manip.html#cb1509-1"></a>dlong6 <span class="op">%&gt;%</span></span>
<span id="cb1509-2"><a href="summary-manip.html#cb1509-2"></a><span class="st">  </span><span class="kw">pivot_longer</span>(</span>
<span id="cb1509-3"><a href="summary-manip.html#cb1509-3"></a>    <span class="st">`</span><span class="dt">2018</span><span class="st">`</span><span class="op">:</span><span class="st">`</span><span class="dt">2019</span><span class="st">`</span>,</span>
<span id="cb1509-4"><a href="summary-manip.html#cb1509-4"></a>    <span class="dt">names_to =</span> <span class="st">&quot;year&quot;</span>,</span>
<span id="cb1509-5"><a href="summary-manip.html#cb1509-5"></a>    <span class="dt">values_to =</span> <span class="st">&quot;value&quot;</span> </span>
<span id="cb1509-6"><a href="summary-manip.html#cb1509-6"></a>    ) <span class="op">%&gt;%</span></span>
<span id="cb1509-7"><a href="summary-manip.html#cb1509-7"></a><span class="st">  </span><span class="kw">pivot_wider</span>(</span>
<span id="cb1509-8"><a href="summary-manip.html#cb1509-8"></a>    <span class="dt">names_from =</span> <span class="st">&quot;variable&quot;</span>,</span>
<span id="cb1509-9"><a href="summary-manip.html#cb1509-9"></a>    <span class="dt">values_from =</span> <span class="st">&quot;value&quot;</span></span>
<span id="cb1509-10"><a href="summary-manip.html#cb1509-10"></a>    ) <span class="op">%&gt;%</span></span>
<span id="cb1509-11"><a href="summary-manip.html#cb1509-11"></a><span class="st">  </span>knitr<span class="op">::</span><span class="kw">kable</span>()</span></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="right">id</th>
<th align="left">year</th>
<th align="right">x</th>
<th align="right">y</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">1</td>
<td align="left">2018</td>
<td align="right">1.2</td>
<td align="right">-5.1</td>
</tr>
<tr class="even">
<td align="right">1</td>
<td align="left">2019</td>
<td align="right">1.3</td>
<td align="right">-5.4</td>
</tr>
<tr class="odd">
<td align="right">2</td>
<td align="left">2018</td>
<td align="right">1.4</td>
<td align="right">-4.9</td>
</tr>
<tr class="even">
<td align="right">2</td>
<td align="left">2019</td>
<td align="right">1.6</td>
<td align="right">-4.2</td>
</tr>
<tr class="odd">
<td align="right">3</td>
<td align="left">2018</td>
<td align="right">1.3</td>
<td align="right">-4.3</td>
</tr>
<tr class="even">
<td align="right">3</td>
<td align="left">2019</td>
<td align="right">1.5</td>
<td align="right">-4.1</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="dplyr-spearate" class="section level2">
<h2><span class="header-section-number">26.16</span> 拆分数据列</h2>
<p>有时应该放在不同列的数据用分隔符分隔后放在同一列中了。
比如，下面数据集中“succ/total”列存放了用“/”分隔开的成功数与试验数：</p>
<div class="sourceCode" id="cb1510"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1510-1"><a href="summary-manip.html#cb1510-1"></a>d.sep &lt;-<span class="st"> </span><span class="kw">read_csv</span>(</span>
<span id="cb1510-2"><a href="summary-manip.html#cb1510-2"></a><span class="st">&quot;testid, succ/total</span></span>
<span id="cb1510-3"><a href="summary-manip.html#cb1510-3"></a><span class="st">1, 1/10</span></span>
<span id="cb1510-4"><a href="summary-manip.html#cb1510-4"></a><span class="st">2, 3/5</span></span>
<span id="cb1510-5"><a href="summary-manip.html#cb1510-5"></a><span class="st">3, 2/8</span></span>
<span id="cb1510-6"><a href="summary-manip.html#cb1510-6"></a><span class="st">&quot;</span>)</span>
<span id="cb1510-7"><a href="summary-manip.html#cb1510-7"></a>knitr<span class="op">::</span><span class="kw">kable</span>(d.sep)</span></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="right">testid</th>
<th align="left">succ/total</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">1</td>
<td align="left">1/10</td>
</tr>
<tr class="even">
<td align="right">2</td>
<td align="left">3/5</td>
</tr>
<tr class="odd">
<td align="right">3</td>
<td align="left">2/8</td>
</tr>
</tbody>
</table>
<p>用<code>tidyr::separate()</code>可以将这样的列拆分为各自的变量列，如</p>
<div class="sourceCode" id="cb1511"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1511-1"><a href="summary-manip.html#cb1511-1"></a>d.sep <span class="op">%&gt;%</span></span>
<span id="cb1511-2"><a href="summary-manip.html#cb1511-2"></a><span class="st">  </span><span class="kw">separate</span>(<span class="st">`</span><span class="dt">succ/total</span><span class="st">`</span>, <span class="dt">into=</span><span class="kw">c</span>(<span class="st">&quot;succ&quot;</span>, <span class="st">&quot;total&quot;</span>), </span>
<span id="cb1511-3"><a href="summary-manip.html#cb1511-3"></a>           <span class="dt">sep=</span><span class="st">&quot;/&quot;</span>, <span class="dt">convert=</span><span class="ot">TRUE</span>) <span class="op">%&gt;%</span><span class="st"> </span>knitr<span class="op">::</span><span class="kw">kable</span>()</span></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="right">testid</th>
<th align="right">succ</th>
<th align="right">total</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">1</td>
<td align="right">1</td>
<td align="right">10</td>
</tr>
<tr class="even">
<td align="right">2</td>
<td align="right">3</td>
<td align="right">5</td>
</tr>
<tr class="odd">
<td align="right">3</td>
<td align="right">2</td>
<td align="right">8</td>
</tr>
</tbody>
</table>
<p>其中<code>into</code>指定拆分后新变量名，
<code>sep</code>指定分隔符，
<code>convert=TRUE</code>要求自动将分割后的值转换为适当的类型。
<code>sep</code>还可以指定取子串的字符位置，
按位置拆分各个子串。</p>
<p>选项<code>extra</code>指出拆分时有多余内容的处理方法，
选项<code>fill</code>指出有不足内容的处理方法。</p>
<p>拆分的也可以是变量名和因子，
比如，
变量包括血压的高压和低压，
分男女计算了平均值，
结果表格可能为如下格式：</p>
<div class="sourceCode" id="cb1512"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1512-1"><a href="summary-manip.html#cb1512-1"></a>knitr<span class="op">::</span><span class="kw">kable</span>(dbpa)</span></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="left">var</th>
<th align="right">avg</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">male:systolicbp</td>
<td align="right">118</td>
</tr>
<tr class="even">
<td align="left">male:diastolicbp</td>
<td align="right">85</td>
</tr>
<tr class="odd">
<td align="left">female:systolicbp</td>
<td align="right">115</td>
</tr>
<tr class="even">
<td align="left">female:diastolicbp</td>
<td align="right">83</td>
</tr>
</tbody>
</table>
<p>用<code>separate()</code>函数将变量名和性别值分开：</p>
<div class="sourceCode" id="cb1513"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1513-1"><a href="summary-manip.html#cb1513-1"></a>dbpa2 &lt;-<span class="st"> </span>dbpa <span class="op">%&gt;%</span></span>
<span id="cb1513-2"><a href="summary-manip.html#cb1513-2"></a><span class="st">  </span><span class="kw">separate</span>(var, <span class="dt">into =</span> <span class="kw">c</span>(<span class="st">&quot;sex&quot;</span>, <span class="st">&quot;var&quot;</span>), <span class="dt">sep=</span><span class="st">&quot;:&quot;</span>)</span>
<span id="cb1513-3"><a href="summary-manip.html#cb1513-3"></a>knitr<span class="op">::</span><span class="kw">kable</span>(dbpa2)</span></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="left">sex</th>
<th align="left">var</th>
<th align="right">avg</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">male</td>
<td align="left">systolicbp</td>
<td align="right">118</td>
</tr>
<tr class="even">
<td align="left">male</td>
<td align="left">diastolicbp</td>
<td align="right">85</td>
</tr>
<tr class="odd">
<td align="left">female</td>
<td align="left">systolicbp</td>
<td align="right">115</td>
</tr>
<tr class="even">
<td align="left">female</td>
<td align="left">diastolicbp</td>
<td align="right">83</td>
</tr>
</tbody>
</table>
<p>实际上，这个数据集可能还需要将高压和低压变成两列，
用<code>pivot_wider()</code>函数：</p>
<div class="sourceCode" id="cb1514"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1514-1"><a href="summary-manip.html#cb1514-1"></a>dbpa3 &lt;-<span class="st"> </span>dbpa2 <span class="op">%&gt;%</span></span>
<span id="cb1514-2"><a href="summary-manip.html#cb1514-2"></a><span class="st">  </span><span class="kw">pivot_wider</span>(</span>
<span id="cb1514-3"><a href="summary-manip.html#cb1514-3"></a>    <span class="dt">names_from =</span> <span class="st">&quot;var&quot;</span>, <span class="dt">values_from =</span> <span class="st">&quot;avg&quot;</span>)</span>
<span id="cb1514-4"><a href="summary-manip.html#cb1514-4"></a>knitr<span class="op">::</span><span class="kw">kable</span>(dbpa3)</span></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="left">sex</th>
<th align="right">systolicbp</th>
<th align="right">diastolicbp</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">male</td>
<td align="right">118</td>
<td align="right">85</td>
</tr>
<tr class="even">
<td align="left">female</td>
<td align="right">115</td>
<td align="right">83</td>
</tr>
</tbody>
</table>
<p>函数<code>extract()</code>可以按照某种正则表达式表示的模式从指定列拆分出对应于正则表达式中捕获组的一列或多列内容。
例如，下面的数据中factors水平AA, AB, BA, BB实际是两个因子的组合，
将其拆分出来：</p>
<div class="sourceCode" id="cb1515"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1515-1"><a href="summary-manip.html#cb1515-1"></a>dexp &lt;-<span class="st"> </span><span class="kw">tibble</span>(</span>
<span id="cb1515-2"><a href="summary-manip.html#cb1515-2"></a>  <span class="dt">design =</span> <span class="kw">c</span>(<span class="st">&quot;AA&quot;</span>, <span class="st">&quot;AB&quot;</span>, <span class="st">&quot;BA&quot;</span>, <span class="st">&quot;BB&quot;</span>),</span>
<span id="cb1515-3"><a href="summary-manip.html#cb1515-3"></a>  <span class="dt">response =</span> <span class="kw">c</span>(<span class="dv">120</span>, <span class="dv">110</span>, <span class="dv">105</span>, <span class="dv">95</span>))</span>
<span id="cb1515-4"><a href="summary-manip.html#cb1515-4"></a>knitr<span class="op">::</span><span class="kw">kable</span>(dexp)</span></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="left">design</th>
<th align="right">response</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">AA</td>
<td align="right">120</td>
</tr>
<tr class="even">
<td align="left">AB</td>
<td align="right">110</td>
</tr>
<tr class="odd">
<td align="left">BA</td>
<td align="right">105</td>
</tr>
<tr class="even">
<td align="left">BB</td>
<td align="right">95</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb1516"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1516-1"><a href="summary-manip.html#cb1516-1"></a>dexp <span class="op">%&gt;%</span></span>
<span id="cb1516-2"><a href="summary-manip.html#cb1516-2"></a><span class="st">  </span><span class="kw">extract</span>(</span>
<span id="cb1516-3"><a href="summary-manip.html#cb1516-3"></a>    design,</span>
<span id="cb1516-4"><a href="summary-manip.html#cb1516-4"></a>    <span class="dt">into =</span> <span class="kw">c</span>(<span class="st">&quot;fac1&quot;</span>, <span class="st">&quot;fac2&quot;</span>),</span>
<span id="cb1516-5"><a href="summary-manip.html#cb1516-5"></a>    <span class="dt">regex =</span> <span class="st">&quot;(.)(.)&quot;</span></span>
<span id="cb1516-6"><a href="summary-manip.html#cb1516-6"></a>  ) <span class="op">%&gt;%</span></span>
<span id="cb1516-7"><a href="summary-manip.html#cb1516-7"></a><span class="st">  </span>knitr<span class="op">::</span><span class="kw">kable</span>()</span></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="left">fac1</th>
<th align="left">fac2</th>
<th align="right">response</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">A</td>
<td align="left">A</td>
<td align="right">120</td>
</tr>
<tr class="even">
<td align="left">A</td>
<td align="left">B</td>
<td align="right">110</td>
</tr>
<tr class="odd">
<td align="left">B</td>
<td align="left">A</td>
<td align="right">105</td>
</tr>
<tr class="even">
<td align="left">B</td>
<td align="left">B</td>
<td align="right">95</td>
</tr>
</tbody>
</table>
</div>
<div id="dplyr-unite" class="section level2">
<h2><span class="header-section-number">26.17</span> 合并数据列</h2>
<p><code>tidyr::unite()</code>函数可以将同一行的两列或多列的内容合并成一列。
这是<code>separate()</code>的反向操作，
如：</p>
<div class="sourceCode" id="cb1517"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1517-1"><a href="summary-manip.html#cb1517-1"></a>d.sep <span class="op">%&gt;%</span></span>
<span id="cb1517-2"><a href="summary-manip.html#cb1517-2"></a><span class="st">  </span><span class="kw">separate</span>(<span class="st">`</span><span class="dt">succ/total</span><span class="st">`</span>, <span class="dt">into=</span><span class="kw">c</span>(<span class="st">&quot;succ&quot;</span>, <span class="st">&quot;total&quot;</span>), </span>
<span id="cb1517-3"><a href="summary-manip.html#cb1517-3"></a>           <span class="dt">sep=</span><span class="st">&quot;/&quot;</span>, <span class="dt">convert=</span><span class="ot">TRUE</span>) <span class="op">%&gt;%</span></span>
<span id="cb1517-4"><a href="summary-manip.html#cb1517-4"></a><span class="st">  </span><span class="kw">unite</span>(ratio, succ, total, <span class="dt">sep=</span><span class="st">&quot;:&quot;</span>) <span class="op">%&gt;%</span></span>
<span id="cb1517-5"><a href="summary-manip.html#cb1517-5"></a><span class="st">  </span>knitr<span class="op">::</span><span class="kw">kable</span>()</span></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="right">testid</th>
<th align="left">ratio</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">1</td>
<td align="left">1:10</td>
</tr>
<tr class="even">
<td align="right">2</td>
<td align="left">3:5</td>
</tr>
<tr class="odd">
<td align="right">3</td>
<td align="left">2:8</td>
</tr>
</tbody>
</table>
<p><code>unite()</code>的第一个参数是要修改的数据框，
这里用管道<code>%&gt;%</code>传递进来，
第二个参数是合并后的变量名（<code>ratio</code>变量），
其它参数是要合并的变量名，<code>sep</code>指定分隔符。
实际上用<code>mutate()</code>、<code>paste()</code>或者<code>sprintf()</code>也能完成合并。</p>
</div>
<div id="summ-trans-combv" class="section level2">
<h2><span class="header-section-number">26.18</span> 数据框纵向合并</h2>
<p>矩阵或数据框要纵向合并，使用<code>rbind</code>函数即可。
dplyr包的<code>bind_rows()</code>函数也可以对两个或多个数据框纵向合并。
要求变量集合是相同的，变量次序可以不同。</p>
<p>比如，有如下两个分开男生、女生的数据框：</p>
<div class="sourceCode" id="cb1518"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1518-1"><a href="summary-manip.html#cb1518-1"></a>d3.class &lt;-<span class="st"> </span>d.class <span class="op">%&gt;%</span></span>
<span id="cb1518-2"><a href="summary-manip.html#cb1518-2"></a><span class="st">  </span><span class="kw">select</span>(name, sex, age) <span class="op">%&gt;%</span></span>
<span id="cb1518-3"><a href="summary-manip.html#cb1518-3"></a><span class="st">  </span><span class="kw">filter</span>(sex<span class="op">==</span><span class="st">&quot;M&quot;</span>)</span>
<span id="cb1518-4"><a href="summary-manip.html#cb1518-4"></a>d4.class &lt;-<span class="st"> </span>d.class <span class="op">%&gt;%</span></span>
<span id="cb1518-5"><a href="summary-manip.html#cb1518-5"></a><span class="st">  </span><span class="kw">select</span>(name, sex, age) <span class="op">%&gt;%</span></span>
<span id="cb1518-6"><a href="summary-manip.html#cb1518-6"></a><span class="st">  </span><span class="kw">filter</span>(sex<span class="op">==</span><span class="st">&quot;F&quot;</span>)</span></code></pre></div>
<p>合并行如下:</p>
<div class="sourceCode" id="cb1519"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1519-1"><a href="summary-manip.html#cb1519-1"></a>d3.class <span class="op">%&gt;%</span></span>
<span id="cb1519-2"><a href="summary-manip.html#cb1519-2"></a><span class="st">  </span><span class="kw">bind_rows</span>(d4.class) <span class="op">%&gt;%</span></span>
<span id="cb1519-3"><a href="summary-manip.html#cb1519-3"></a><span class="st">  </span>knitr<span class="op">::</span><span class="kw">kable</span>()</span></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="left">name</th>
<th align="left">sex</th>
<th align="right">age</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Alfred</td>
<td align="left">M</td>
<td align="right">14</td>
</tr>
<tr class="even">
<td align="left">Duke</td>
<td align="left">M</td>
<td align="right">14</td>
</tr>
<tr class="odd">
<td align="left">Guido</td>
<td align="left">M</td>
<td align="right">15</td>
</tr>
<tr class="even">
<td align="left">James</td>
<td align="left">M</td>
<td align="right">12</td>
</tr>
<tr class="odd">
<td align="left">Jeffrey</td>
<td align="left">M</td>
<td align="right">13</td>
</tr>
<tr class="even">
<td align="left">John</td>
<td align="left">M</td>
<td align="right">12</td>
</tr>
<tr class="odd">
<td align="left">Philip</td>
<td align="left">M</td>
<td align="right">16</td>
</tr>
<tr class="even">
<td align="left">Robert</td>
<td align="left">M</td>
<td align="right">12</td>
</tr>
<tr class="odd">
<td align="left">Thomas</td>
<td align="left">M</td>
<td align="right">11</td>
</tr>
<tr class="even">
<td align="left">William</td>
<td align="left">M</td>
<td align="right">15</td>
</tr>
<tr class="odd">
<td align="left">Alice</td>
<td align="left">F</td>
<td align="right">13</td>
</tr>
<tr class="even">
<td align="left">Becka</td>
<td align="left">F</td>
<td align="right">13</td>
</tr>
<tr class="odd">
<td align="left">Gail</td>
<td align="left">F</td>
<td align="right">14</td>
</tr>
<tr class="even">
<td align="left">Karen</td>
<td align="left">F</td>
<td align="right">12</td>
</tr>
<tr class="odd">
<td align="left">Kathy</td>
<td align="left">F</td>
<td align="right">12</td>
</tr>
<tr class="even">
<td align="left">Mary</td>
<td align="left">F</td>
<td align="right">15</td>
</tr>
<tr class="odd">
<td align="left">Sandy</td>
<td align="left">F</td>
<td align="right">11</td>
</tr>
<tr class="even">
<td align="left">Sharon</td>
<td align="left">F</td>
<td align="right">15</td>
</tr>
<tr class="odd">
<td align="left">Tammy</td>
<td align="left">F</td>
<td align="right">14</td>
</tr>
</tbody>
</table>
<p>将下面的数据框的变量列次序打乱，
合并不受影响：</p>
<div class="sourceCode" id="cb1520"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1520-1"><a href="summary-manip.html#cb1520-1"></a>d3.class <span class="op">%&gt;%</span></span>
<span id="cb1520-2"><a href="summary-manip.html#cb1520-2"></a><span class="st">  </span><span class="kw">select</span>(age, name, sex) <span class="op">%&gt;%</span></span>
<span id="cb1520-3"><a href="summary-manip.html#cb1520-3"></a><span class="st">  </span><span class="kw">bind_rows</span>(d4.class) <span class="op">%&gt;%</span></span>
<span id="cb1520-4"><a href="summary-manip.html#cb1520-4"></a><span class="st">  </span>knitr<span class="op">::</span><span class="kw">kable</span>()</span></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="right">age</th>
<th align="left">name</th>
<th align="left">sex</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">14</td>
<td align="left">Alfred</td>
<td align="left">M</td>
</tr>
<tr class="even">
<td align="right">14</td>
<td align="left">Duke</td>
<td align="left">M</td>
</tr>
<tr class="odd">
<td align="right">15</td>
<td align="left">Guido</td>
<td align="left">M</td>
</tr>
<tr class="even">
<td align="right">12</td>
<td align="left">James</td>
<td align="left">M</td>
</tr>
<tr class="odd">
<td align="right">13</td>
<td align="left">Jeffrey</td>
<td align="left">M</td>
</tr>
<tr class="even">
<td align="right">12</td>
<td align="left">John</td>
<td align="left">M</td>
</tr>
<tr class="odd">
<td align="right">16</td>
<td align="left">Philip</td>
<td align="left">M</td>
</tr>
<tr class="even">
<td align="right">12</td>
<td align="left">Robert</td>
<td align="left">M</td>
</tr>
<tr class="odd">
<td align="right">11</td>
<td align="left">Thomas</td>
<td align="left">M</td>
</tr>
<tr class="even">
<td align="right">15</td>
<td align="left">William</td>
<td align="left">M</td>
</tr>
<tr class="odd">
<td align="right">13</td>
<td align="left">Alice</td>
<td align="left">F</td>
</tr>
<tr class="even">
<td align="right">13</td>
<td align="left">Becka</td>
<td align="left">F</td>
</tr>
<tr class="odd">
<td align="right">14</td>
<td align="left">Gail</td>
<td align="left">F</td>
</tr>
<tr class="even">
<td align="right">12</td>
<td align="left">Karen</td>
<td align="left">F</td>
</tr>
<tr class="odd">
<td align="right">12</td>
<td align="left">Kathy</td>
<td align="left">F</td>
</tr>
<tr class="even">
<td align="right">15</td>
<td align="left">Mary</td>
<td align="left">F</td>
</tr>
<tr class="odd">
<td align="right">11</td>
<td align="left">Sandy</td>
<td align="left">F</td>
</tr>
<tr class="even">
<td align="right">15</td>
<td align="left">Sharon</td>
<td align="left">F</td>
</tr>
<tr class="odd">
<td align="right">14</td>
<td align="left">Tammy</td>
<td align="left">F</td>
</tr>
</tbody>
</table>
</div>
<div id="dplyr-join" class="section level2">
<h2><span class="header-section-number">26.19</span> 横向合并</h2>
<p>为了将两个行数相同的数据框按行号对齐合并，
可以用基本R的<code>cbind()</code>函数或者dplyr包的<code>bind_cols()</code>函数。</p>
<p>实际数据往往没有存放在单一的表中，
需要从多个表查找数据。
多个表之间的连接，
一般靠关键列（key）对准来连接。
连接可以是一对一的，
一对多的。
多对多连接应用较少，
因为多对多连接是所有两两组合。</p>
<p>在规范的数据库中，每个表都应该有主键，
这可以是一列，也可以是多列的组合。
为了确定某列是主键，
可以用<code>count()</code>和<code>filter()</code>，如</p>
<div class="sourceCode" id="cb1521"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1521-1"><a href="summary-manip.html#cb1521-1"></a>d.class <span class="op">%&gt;%</span></span>
<span id="cb1521-2"><a href="summary-manip.html#cb1521-2"></a><span class="st">  </span><span class="kw">count</span>(name) <span class="op">%&gt;%</span></span>
<span id="cb1521-3"><a href="summary-manip.html#cb1521-3"></a><span class="st">  </span><span class="kw">filter</span>(n<span class="op">&gt;</span><span class="dv">1</span>)</span></code></pre></div>
<pre><code>## # A tibble: 0 x 2
## # ... with 2 variables: name &lt;chr&gt;, n &lt;int&gt;</code></pre>
<p>没有发现重复出现的<code>name</code>，
说明<code>d.class</code>中<code>name</code>可以作为主键。</p>
<p>为了演示一对一的横向连接，
我们将d.class拆分为两个数据集d1.class和d2.class,
两个数据集都有主键<code>name</code>，
d1.class包含变量<code>name</code>, <code>sex</code>,
d2.class包含变量<code>name</code>, <code>age</code>, <code>height</code>, <code>weight</code>,
并删去某些观测：</p>
<div class="sourceCode" id="cb1523"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1523-1"><a href="summary-manip.html#cb1523-1"></a>d1.class &lt;-<span class="st"> </span>d.class <span class="op">%&gt;%</span></span>
<span id="cb1523-2"><a href="summary-manip.html#cb1523-2"></a><span class="st">  </span><span class="kw">select</span>(name, sex) <span class="op">%&gt;%</span></span>
<span id="cb1523-3"><a href="summary-manip.html#cb1523-3"></a><span class="st">  </span><span class="kw">filter</span>(<span class="op">!</span>(name <span class="op">%in%</span><span class="st">  &quot;Becka&quot;</span>))</span>
<span id="cb1523-4"><a href="summary-manip.html#cb1523-4"></a>d2.class &lt;-<span class="st"> </span>d.class <span class="op">%&gt;%</span></span>
<span id="cb1523-5"><a href="summary-manip.html#cb1523-5"></a><span class="st">  </span><span class="kw">select</span>(name, age, height, weight)</span></code></pre></div>
<p>用dplyr包的<code>inner_join()</code>函数将两个数据框按键值横向合并，
仅保留能匹配的观测。因为d1.class中丢失了Becka的观测，
所以合并后的数据框中也没有Becka的观测：</p>
<div class="sourceCode" id="cb1524"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1524-1"><a href="summary-manip.html#cb1524-1"></a>d1.class <span class="op">%&gt;%</span></span>
<span id="cb1524-2"><a href="summary-manip.html#cb1524-2"></a><span class="st">  </span><span class="kw">inner_join</span>(d2.class) <span class="op">%&gt;%</span></span>
<span id="cb1524-3"><a href="summary-manip.html#cb1524-3"></a><span class="st">  </span>knitr<span class="op">::</span><span class="kw">kable</span>()</span></code></pre></div>
<pre><code>## Joining, by = &quot;name&quot;</code></pre>
<table>
<thead>
<tr class="header">
<th align="left">name</th>
<th align="left">sex</th>
<th align="right">age</th>
<th align="right">height</th>
<th align="right">weight</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Alice</td>
<td align="left">F</td>
<td align="right">13</td>
<td align="right">56.5</td>
<td align="right">84.0</td>
</tr>
<tr class="even">
<td align="left">Gail</td>
<td align="left">F</td>
<td align="right">14</td>
<td align="right">64.3</td>
<td align="right">90.0</td>
</tr>
<tr class="odd">
<td align="left">Karen</td>
<td align="left">F</td>
<td align="right">12</td>
<td align="right">56.3</td>
<td align="right">77.0</td>
</tr>
<tr class="even">
<td align="left">Kathy</td>
<td align="left">F</td>
<td align="right">12</td>
<td align="right">59.8</td>
<td align="right">84.5</td>
</tr>
<tr class="odd">
<td align="left">Mary</td>
<td align="left">F</td>
<td align="right">15</td>
<td align="right">66.5</td>
<td align="right">112.0</td>
</tr>
<tr class="even">
<td align="left">Sandy</td>
<td align="left">F</td>
<td align="right">11</td>
<td align="right">51.3</td>
<td align="right">50.5</td>
</tr>
<tr class="odd">
<td align="left">Sharon</td>
<td align="left">F</td>
<td align="right">15</td>
<td align="right">62.5</td>
<td align="right">112.5</td>
</tr>
<tr class="even">
<td align="left">Tammy</td>
<td align="left">F</td>
<td align="right">14</td>
<td align="right">62.8</td>
<td align="right">102.5</td>
</tr>
<tr class="odd">
<td align="left">Alfred</td>
<td align="left">M</td>
<td align="right">14</td>
<td align="right">69.0</td>
<td align="right">112.5</td>
</tr>
<tr class="even">
<td align="left">Duke</td>
<td align="left">M</td>
<td align="right">14</td>
<td align="right">63.5</td>
<td align="right">102.5</td>
</tr>
<tr class="odd">
<td align="left">Guido</td>
<td align="left">M</td>
<td align="right">15</td>
<td align="right">67.0</td>
<td align="right">133.0</td>
</tr>
<tr class="even">
<td align="left">James</td>
<td align="left">M</td>
<td align="right">12</td>
<td align="right">57.3</td>
<td align="right">83.0</td>
</tr>
<tr class="odd">
<td align="left">Jeffrey</td>
<td align="left">M</td>
<td align="right">13</td>
<td align="right">62.5</td>
<td align="right">84.0</td>
</tr>
<tr class="even">
<td align="left">John</td>
<td align="left">M</td>
<td align="right">12</td>
<td align="right">59.0</td>
<td align="right">99.5</td>
</tr>
<tr class="odd">
<td align="left">Philip</td>
<td align="left">M</td>
<td align="right">16</td>
<td align="right">72.0</td>
<td align="right">150.0</td>
</tr>
<tr class="even">
<td align="left">Robert</td>
<td align="left">M</td>
<td align="right">12</td>
<td align="right">64.8</td>
<td align="right">128.0</td>
</tr>
<tr class="odd">
<td align="left">Thomas</td>
<td align="left">M</td>
<td align="right">11</td>
<td align="right">57.5</td>
<td align="right">85.0</td>
</tr>
<tr class="even">
<td align="left">William</td>
<td align="left">M</td>
<td align="right">15</td>
<td align="right">66.5</td>
<td align="right">112.0</td>
</tr>
</tbody>
</table>
<p>横向连接自动找到了共同的变量<code>name</code>作为连接的键值，
可以在<code>inner_join()</code>中用<code>by=</code>指定键值变量名，
如果有不同的变量名，
可以用<code>by = c("a"="b")</code>的格式指定左数据框的键值a与右数据框的键值b匹配进行连接。</p>
<p>两个表的横向连接，
经常是多对一连接。
例如，
<code>d.stu</code>中有学生学号、班级号、姓名、性别，
<code>d.cl</code>中有班级号、班主任名、年级，
可以通过班级号将两个表连接起来：</p>
<div class="sourceCode" id="cb1526"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1526-1"><a href="summary-manip.html#cb1526-1"></a>d.stu &lt;-<span class="st"> </span><span class="kw">tibble</span>(</span>
<span id="cb1526-2"><a href="summary-manip.html#cb1526-2"></a>  <span class="dt">sid=</span><span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>,<span class="dv">5</span>,<span class="dv">6</span>),</span>
<span id="cb1526-3"><a href="summary-manip.html#cb1526-3"></a>  <span class="dt">cid=</span><span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">1</span>,<span class="dv">2</span>),</span>
<span id="cb1526-4"><a href="summary-manip.html#cb1526-4"></a>  <span class="dt">sname=</span><span class="kw">c</span>(<span class="st">&quot;John&quot;</span>, <span class="st">&quot;Mary&quot;</span>, <span class="st">&quot;James&quot;</span>, <span class="st">&quot;Kitty&quot;</span>, <span class="st">&quot;Jasmine&quot;</span>, <span class="st">&quot;Kim&quot;</span>),</span>
<span id="cb1526-5"><a href="summary-manip.html#cb1526-5"></a>  <span class="dt">sex=</span><span class="kw">c</span>(<span class="st">&quot;M&quot;</span>, <span class="st">&quot;F&quot;</span>, <span class="st">&quot;M&quot;</span>, <span class="st">&quot;F&quot;</span>, <span class="st">&quot;F&quot;</span>, <span class="st">&quot;M&quot;</span>))</span>
<span id="cb1526-6"><a href="summary-manip.html#cb1526-6"></a>knitr<span class="op">::</span><span class="kw">kable</span>(d.stu)</span></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="right">sid</th>
<th align="right">cid</th>
<th align="left">sname</th>
<th align="left">sex</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">1</td>
<td align="right">1</td>
<td align="left">John</td>
<td align="left">M</td>
</tr>
<tr class="even">
<td align="right">2</td>
<td align="right">2</td>
<td align="left">Mary</td>
<td align="left">F</td>
</tr>
<tr class="odd">
<td align="right">3</td>
<td align="right">1</td>
<td align="left">James</td>
<td align="left">M</td>
</tr>
<tr class="even">
<td align="right">4</td>
<td align="right">2</td>
<td align="left">Kitty</td>
<td align="left">F</td>
</tr>
<tr class="odd">
<td align="right">5</td>
<td align="right">1</td>
<td align="left">Jasmine</td>
<td align="left">F</td>
</tr>
<tr class="even">
<td align="right">6</td>
<td align="right">2</td>
<td align="left">Kim</td>
<td align="left">M</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb1527"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1527-1"><a href="summary-manip.html#cb1527-1"></a>d.cl &lt;-<span class="st"> </span><span class="kw">tibble</span>(</span>
<span id="cb1527-2"><a href="summary-manip.html#cb1527-2"></a>  <span class="dt">cid=</span><span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">2</span>),</span>
<span id="cb1527-3"><a href="summary-manip.html#cb1527-3"></a>  <span class="dt">tname=</span><span class="kw">c</span>(<span class="st">&quot;Philip&quot;</span>, <span class="st">&quot;Joane&quot;</span>),</span>
<span id="cb1527-4"><a href="summary-manip.html#cb1527-4"></a>  <span class="dt">grade=</span><span class="kw">c</span>(<span class="st">&quot;2017&quot;</span>, <span class="st">&quot;2016&quot;</span>)</span>
<span id="cb1527-5"><a href="summary-manip.html#cb1527-5"></a>)</span>
<span id="cb1527-6"><a href="summary-manip.html#cb1527-6"></a>knitr<span class="op">::</span><span class="kw">kable</span>(d.cl)</span></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="right">cid</th>
<th align="left">tname</th>
<th align="left">grade</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">1</td>
<td align="left">Philip</td>
<td align="left">2017</td>
</tr>
<tr class="even">
<td align="right">2</td>
<td align="left">Joane</td>
<td align="left">2016</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb1528"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1528-1"><a href="summary-manip.html#cb1528-1"></a>d.stu <span class="op">%&gt;%</span></span>
<span id="cb1528-2"><a href="summary-manip.html#cb1528-2"></a><span class="st">  </span><span class="kw">left_join</span>(d.cl, <span class="dt">by=</span><span class="st">&quot;cid&quot;</span>) <span class="op">%&gt;%</span></span>
<span id="cb1528-3"><a href="summary-manip.html#cb1528-3"></a><span class="st">  </span>knitr<span class="op">::</span><span class="kw">kable</span>()</span></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="right">sid</th>
<th align="right">cid</th>
<th align="left">sname</th>
<th align="left">sex</th>
<th align="left">tname</th>
<th align="left">grade</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">1</td>
<td align="right">1</td>
<td align="left">John</td>
<td align="left">M</td>
<td align="left">Philip</td>
<td align="left">2017</td>
</tr>
<tr class="even">
<td align="right">2</td>
<td align="right">2</td>
<td align="left">Mary</td>
<td align="left">F</td>
<td align="left">Joane</td>
<td align="left">2016</td>
</tr>
<tr class="odd">
<td align="right">3</td>
<td align="right">1</td>
<td align="left">James</td>
<td align="left">M</td>
<td align="left">Philip</td>
<td align="left">2017</td>
</tr>
<tr class="even">
<td align="right">4</td>
<td align="right">2</td>
<td align="left">Kitty</td>
<td align="left">F</td>
<td align="left">Joane</td>
<td align="left">2016</td>
</tr>
<tr class="odd">
<td align="right">5</td>
<td align="right">1</td>
<td align="left">Jasmine</td>
<td align="left">F</td>
<td align="left">Philip</td>
<td align="left">2017</td>
</tr>
<tr class="even">
<td align="right">6</td>
<td align="right">2</td>
<td align="left">Kim</td>
<td align="left">M</td>
<td align="left">Joane</td>
<td align="left">2016</td>
</tr>
</tbody>
</table>
<p><code>left_join()</code>按照<code>by</code>变量指定的关键列匹配观测，
左数据集所有观测不论匹配与否全部保留，
右数据集仅使用与左数据集能匹配的观测。
不指定<code>by</code>变量时，
使用左、右数据集的共同列作为关键列。
如果左右数据集关键列变量名不同，
可以用<code>by=c("左名"="右名")</code>的格式。</p>
<p>类似地，
<code>right_join()</code>保留右数据集的所有观测，
而仅保留左数据集中能匹配的观测。
<code>full_join()</code>保留所有观测。
<code>inner_join()</code>仅保留能匹配的观测。</p>
</div>
<div id="dplyr-semi" class="section level2">
<h2><span class="header-section-number">26.20</span> 利用第二个数据集筛选</h2>
<p><code>left_join()</code>将右表中与左表匹配的观测的额外的列添加到左表中。
如果希望按照右表筛选左表的观测，
可以用<code>semi_join()</code>，
函数<code>anti_join()</code>则是要求保留与右表不匹配的观测。</p>
</div>
<div id="dplyr-set" class="section level2">
<h2><span class="header-section-number">26.21</span> 数据集的集合操作</h2>
<p>R的<code>intersect()</code>，<code>union()</code>, <code>setdiff()</code>本来是以向量作为集合进行集合操作。
dplyr包也提供了这些函数，
但是将两个tibble的各行作为元素进行集合操作。</p>
</div>
<div id="summ-trans-standard" class="section level2">
<h2><span class="header-section-number">26.22</span> 标准化</h2>
<p>设x是各列都为数值的列表(包括数据框和tibble)或数值型矩阵，
用<code>scale(x)</code>可以把每一列都标准化，
即每一列都减去该列的平均值，然后除以该列的样本标准差。
用<code>scale(x, center=TRUE, scale=FALSE)</code>仅中心化而不标准化。
如</p>
<div class="sourceCode" id="cb1529"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1529-1"><a href="summary-manip.html#cb1529-1"></a>d.class <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb1529-2"><a href="summary-manip.html#cb1529-2"></a><span class="st">  </span><span class="kw">select</span>(height, weight) <span class="op">%&gt;%</span></span>
<span id="cb1529-3"><a href="summary-manip.html#cb1529-3"></a><span class="st">  </span><span class="kw">scale</span>()</span></code></pre></div>
<pre><code>##            height      weight
##  [1,] -1.13843504 -0.70371312
##  [2,]  0.57794313 -0.08897522
##  [3,]  0.38290015 -0.44025402
##  [4,] -1.17744363 -1.01108207
##  [5,] -0.49479323 -0.68175819
##  [6,]  0.81199469  0.52576268
##  [7,] -2.15265850 -2.17469309
##  [8,]  0.03182280  0.54771760
##  [9,]  0.09033569  0.10861910
## [10,]  1.29960213  0.54771760
## [11,]  0.22686577  0.10861910
## [12,]  0.90951618  1.44786952
## [13,] -0.98240066 -0.74762297
## [14,]  0.03182280 -0.70371312
## [15,] -0.65082761 -0.02311045
## [16,]  1.88473105  2.19433697
## [17,]  0.48042164  1.22832027
## [18,] -0.94339207 -0.65980327
## [19,]  0.81199469  0.52576268
## attr(,&quot;scaled:center&quot;)
##    height    weight 
##  62.33684 100.02632 
## attr(,&quot;scaled:scale&quot;)
##    height    weight 
##  5.127075 22.773933</code></pre>
<p>为了把<code>x</code>的每列变到<span class="math inline">\([0,1]\)</span>内，可以用如下的方法：</p>
<div class="sourceCode" id="cb1531"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1531-1"><a href="summary-manip.html#cb1531-1"></a>d.class <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb1531-2"><a href="summary-manip.html#cb1531-2"></a><span class="st">  </span><span class="kw">select</span>(height, weight) <span class="op">%&gt;%</span></span>
<span id="cb1531-3"><a href="summary-manip.html#cb1531-3"></a><span class="st">  </span><span class="kw">scale</span>(<span class="dt">center=</span><span class="kw">apply</span>(., <span class="dv">2</span>, min),</span>
<span id="cb1531-4"><a href="summary-manip.html#cb1531-4"></a>      <span class="dt">scale=</span><span class="kw">apply</span>(., <span class="dv">2</span>, max) <span class="op">-</span><span class="st"> </span><span class="kw">apply</span>(., <span class="dv">2</span>, min))</span></code></pre></div>
<p>其中的<code>.</code>在管道操作中表示被传递处理的变量（一般是数据框）。
也可以写一个自定义的进行零一标准化的函数：</p>
<div class="sourceCode" id="cb1532"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1532-1"><a href="summary-manip.html#cb1532-1"></a>scale01 &lt;-<span class="st"> </span><span class="cf">function</span>(x){</span>
<span id="cb1532-2"><a href="summary-manip.html#cb1532-2"></a>  mind &lt;-<span class="st"> </span><span class="kw">apply</span>(x, <span class="dv">2</span>, min)</span>
<span id="cb1532-3"><a href="summary-manip.html#cb1532-3"></a>  maxd &lt;-<span class="st"> </span><span class="kw">apply</span>(x, <span class="dv">2</span>, max)</span>
<span id="cb1532-4"><a href="summary-manip.html#cb1532-4"></a>  <span class="kw">scale</span>(x, <span class="dt">center=</span>mind, <span class="dt">scale=</span>maxd<span class="op">-</span>mind)</span>
<span id="cb1532-5"><a href="summary-manip.html#cb1532-5"></a>}</span>
<span id="cb1532-6"><a href="summary-manip.html#cb1532-6"></a>d.class <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb1532-7"><a href="summary-manip.html#cb1532-7"></a><span class="st">  </span><span class="kw">select</span>(height, weight) <span class="op">%&gt;%</span></span>
<span id="cb1532-8"><a href="summary-manip.html#cb1532-8"></a><span class="st">  </span>scale01</span></code></pre></div>
<pre><code>##          height    weight
##  [1,] 0.2512077 0.3366834
##  [2,] 0.6763285 0.4773869
##  [3,] 0.6280193 0.3969849
##  [4,] 0.2415459 0.2663317
##  [5,] 0.4106280 0.3417085
##  [6,] 0.7342995 0.6180905
##  [7,] 0.0000000 0.0000000
##  [8,] 0.5410628 0.6231156
##  [9,] 0.5555556 0.5226131
## [10,] 0.8550725 0.6231156
## [11,] 0.5893720 0.5226131
## [12,] 0.7584541 0.8291457
## [13,] 0.2898551 0.3266332
## [14,] 0.5410628 0.3366834
## [15,] 0.3719807 0.4924623
## [16,] 1.0000000 1.0000000
## [17,] 0.6521739 0.7788945
## [18,] 0.2995169 0.3467337
## [19,] 0.7342995 0.6180905
## attr(,&quot;scaled:center&quot;)
## height weight 
##   51.3   50.5 
## attr(,&quot;scaled:scale&quot;)
## height weight 
##   20.7   99.5</code></pre>
<p>注意在管道操作中某个操作除了被传递的第一自变量外没有其它自变量时，
可以不写函数调用的空括号<code>()</code>。</p>
<p>函数<code>sweep()</code>可以执行对每列更一般的变换。</p>

</div>
</div>
<h3>References</h3>
<div id="refs" class="references">
<div id="ref-Wickham2014:tidy">
<p>Wickham, H. 2014. “Tidy Data.” <em>J Stat Software</em> 59. <a href="http://www.jstatsoft.org/v59/i10/">http://www.jstatsoft.org/v59/i10/</a>.</p>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="slides.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="summary-summ.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="static/js/app.min.js"></script>
<script src="static/js/lunr.js"></script>
<script src="static/js/clipboard.min.js"></script>
<script src="static/js/plugin-search.js"></script>
<script src="static/js/plugin-sharing.js"></script>
<script src="static/js/plugin-fontsettings.js"></script>
<script src="static/js/plugin-bookdown.js"></script>
<script src="static/js/jquery.highlight.js"></script>
<script src="static/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["Rbook.pdf"],
"toc": {
"collapse": "section",
"scroll_highlight": true
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
