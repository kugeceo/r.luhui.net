<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>27 数据汇总 | R语言教程</title>
  <meta name="description" content="李东风在北京大学数学科学学院开设本科生《统计软件》教材。采用R的bookdown制作，输出格式为bookdown::gitbook." />
  <meta name="generator" content="bookdown 0.21 and GitBook 2.6.7" />

  <meta property="og:title" content="27 数据汇总 | R语言教程" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="李东风在北京大学数学科学学院开设本科生《统计软件》教材。采用R的bookdown制作，输出格式为bookdown::gitbook." />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="27 数据汇总 | R语言教程" />
  
  <meta name="twitter:description" content="李东风在北京大学数学科学学院开设本科生《统计软件》教材。采用R的bookdown制作，输出格式为bookdown::gitbook." />
  

<meta name="author" content="李东风" />


<meta name="date" content="2020-12-28" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="summary-manip.html"/>
<link rel="next" href="graph.html"/>
<script src="static/js/jquery.min.js"></script>
<link href="static/css/style.css" rel="stylesheet" />
<link href="static/css/plugin-table.css" rel="stylesheet" />
<link href="static/css/plugin-bookdown.css" rel="stylesheet" />
<link href="static/css/plugin-highlight.css" rel="stylesheet" />
<link href="static/css/plugin-search.css" rel="stylesheet" />
<link href="static/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="static/css/plugin-clipboard.css" rel="stylesheet" />






<div style="display:none">
    <script src="http://s11.cnzz.com/z_stat.php?id=610720&web_id=610720" language="JavaScript"></script>
</div>





<script src="static/js/empty-anchor.js"></script>
<script src="static/js/htmlwidgets.js"></script>
<link href="static/css/str_view.css" rel="stylesheet" />
<script src="static/js/str_view.js"></script>
<link href="static/css/wordcloud.css" rel="stylesheet" />
<script src="static/js/wordcloud2-all.js"></script>
<script src="static/js/hover.js"></script>
<script src="static/js/wordcloud2.js"></script>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  jax: ["input/TeX","output/SVG"],
  extensions: ["tex2jax.js","MathMenu.js","MathZoom.js"],
  TeX: {
    extensions: ["AMSmath.js","AMSsymbols.js","noErrors.js","noUndefined.js"]
  }
});
</script>
<script type="text/javascript"
   src="static/js/mathjax.js">
</script>


<style type="text/css">
code.sourceCode > span { display: inline-block; line-height: 1.25; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="http://www.math.pku.edu.cn/teachers/lidf/docs/Rbook/html/_Rbook/index.html">R语言教程</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>前言</a></li>
<li class="part"><span><b>I 介绍</b></span></li>
<li class="chapter" data-level="1" data-path="intro.html"><a href="intro.html"><i class="fa fa-check"></i><b>1</b> R语言介绍</a><ul>
<li class="chapter" data-level="1.1" data-path="intro.html"><a href="intro.html#intro-hist-char"><i class="fa fa-check"></i><b>1.1</b> R的历史和特点</a><ul>
<li class="chapter" data-level="1.1.1" data-path="intro.html"><a href="intro.html#intro-hc-hist"><i class="fa fa-check"></i><b>1.1.1</b> R的历史</a></li>
<li class="chapter" data-level="1.1.2" data-path="intro.html"><a href="intro.html#intro-hc-char"><i class="fa fa-check"></i><b>1.1.2</b> R的特点</a></li>
</ul></li>
<li class="chapter" data-level="1.2" data-path="intro.html"><a href="intro.html#intro-install"><i class="fa fa-check"></i><b>1.2</b> R的下载与安装</a><ul>
<li class="chapter" data-level="1.2.1" data-path="intro.html"><a href="intro.html#intro-ins-down"><i class="fa fa-check"></i><b>1.2.1</b> R的下载</a></li>
<li class="chapter" data-level="1.2.2" data-path="intro.html"><a href="intro.html#intro-ins-install"><i class="fa fa-check"></i><b>1.2.2</b> R软件安装</a></li>
<li class="chapter" data-level="1.2.3" data-path="intro.html"><a href="intro.html#intro-ins-other-soft"><i class="fa fa-check"></i><b>1.2.3</b> 辅助软件</a></li>
</ul></li>
<li class="chapter" data-level="1.3" data-path="intro.html"><a href="intro.html#intro-ins-packages"><i class="fa fa-check"></i><b>1.3</b> R扩展软件包的安装与管理</a><ul>
<li class="chapter" data-level="1.3.1" data-path="intro.html"><a href="intro.html#intro-ins-pack-ins"><i class="fa fa-check"></i><b>1.3.1</b> 安装</a></li>
<li class="chapter" data-level="1.3.2" data-path="intro.html"><a href="intro.html#intro-ins-pack-gitbioc"><i class="fa fa-check"></i><b>1.3.2</b> Github和BioConductor的扩展包</a></li>
<li class="chapter" data-level="1.3.3" data-path="intro.html"><a href="intro.html#intro-ins-pack-upd"><i class="fa fa-check"></i><b>1.3.3</b> 更新扩展包</a></li>
<li class="chapter" data-level="1.3.4" data-path="intro.html"><a href="intro.html#intro-ins-pack-verup"><i class="fa fa-check"></i><b>1.3.4</b> 迁移扩展包</a></li>
<li class="chapter" data-level="1.3.5" data-path="intro.html"><a href="intro.html#intro-ins-pack-renv"><i class="fa fa-check"></i><b>1.3.5</b> 项目私有扩展包目录</a></li>
</ul></li>
<li class="chapter" data-level="1.4" data-path="intro.html"><a href="intro.html#intro-ruse"><i class="fa fa-check"></i><b>1.4</b> 基本R软件的用法</a><ul>
<li class="chapter" data-level="1.4.1" data-path="intro.html"><a href="intro.html#intro-ruse-run"><i class="fa fa-check"></i><b>1.4.1</b> 基本运行</a></li>
<li class="chapter" data-level="1.4.2" data-path="intro.html"><a href="intro.html#intro-ruse-proj"><i class="fa fa-check"></i><b>1.4.2</b> 项目目录</a></li>
</ul></li>
<li class="chapter" data-level="1.5" data-path="intro.html"><a href="intro.html#intro-rstudio"><i class="fa fa-check"></i><b>1.5</b> RStudio软件</a><ul>
<li class="chapter" data-level="1.5.1" data-path="intro.html"><a href="intro.html#intro-rstudio-intro"><i class="fa fa-check"></i><b>1.5.1</b> 介绍</a></li>
<li class="chapter" data-level="1.5.2" data-path="intro.html"><a href="intro.html#intro-rstudio-proj"><i class="fa fa-check"></i><b>1.5.2</b> 项目</a></li>
<li class="chapter" data-level="1.5.3" data-path="intro.html"><a href="intro.html#intro-rstudio-help"><i class="fa fa-check"></i><b>1.5.3</b> 帮助</a></li>
<li class="chapter" data-level="1.5.4" data-path="intro.html"><a href="intro.html#intro-rstudio-shortcuts"><i class="fa fa-check"></i><b>1.5.4</b> 使用技巧</a></li>
<li class="chapter" data-level="1.5.5" data-path="intro.html"><a href="intro.html#intro-rstudio-rmd"><i class="fa fa-check"></i><b>1.5.5</b> Rmd文件</a></li>
</ul></li>
<li class="chapter" data-level="1.6" data-path="intro.html"><a href="intro.html#intro-ins-ex"><i class="fa fa-check"></i><b>1.6</b> 练习</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="intro-example.html"><a href="intro-example.html"><i class="fa fa-check"></i><b>2</b> R语言入门运行样例</a><ul>
<li class="chapter" data-level="2.1" data-path="intro-example.html"><a href="intro-example.html#i-e-command-line"><i class="fa fa-check"></i><b>2.1</b> 命令行界面</a></li>
<li class="chapter" data-level="2.2" data-path="intro-example.html"><a href="intro-example.html#i-e-arith-op"><i class="fa fa-check"></i><b>2.2</b> 四则运算</a><ul>
<li class="chapter" data-level="2.2.1" data-path="intro-example.html"><a href="intro-example.html#i-e-arith-op-poker"><i class="fa fa-check"></i><b>2.2.1</b> 计算例子</a></li>
<li class="chapter" data-level="2.2.2" data-path="intro-example.html"><a href="intro-example.html#i-e-a-o-ex"><i class="fa fa-check"></i><b>2.2.2</b> 练习</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="intro-example.html"><a href="intro-example.html#i-e-math-func"><i class="fa fa-check"></i><b>2.3</b> 数学函数</a><ul>
<li class="chapter" data-level="2.3.1" data-path="intro-example.html"><a href="intro-example.html#i-e-m-f-sqrt"><i class="fa fa-check"></i><b>2.3.1</b> 数学函数——平方根、指数、对数</a></li>
<li class="chapter" data-level="2.3.2" data-path="intro-example.html"><a href="intro-example.html#i-e-m-f-round"><i class="fa fa-check"></i><b>2.3.2</b> 数学函数——取整</a></li>
<li class="chapter" data-level="2.3.3" data-path="intro-example.html"><a href="intro-example.html#i-e-m-f-sin"><i class="fa fa-check"></i><b>2.3.3</b> 数学函数——三角函数</a></li>
<li class="chapter" data-level="2.3.4" data-path="intro-example.html"><a href="intro-example.html#i-e-m-f-asin"><i class="fa fa-check"></i><b>2.3.4</b> 数学函数——反三角函数</a></li>
<li class="chapter" data-level="2.3.5" data-path="intro-example.html"><a href="intro-example.html#i-e-m-f-dist"><i class="fa fa-check"></i><b>2.3.5</b> 分布函数和分位数函数</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="intro-example.html"><a href="intro-example.html#i-e-output"><i class="fa fa-check"></i><b>2.4</b> 输出</a><ul>
<li class="chapter" data-level="2.4.1" data-path="intro-example.html"><a href="intro-example.html#i-e-o-simple"><i class="fa fa-check"></i><b>2.4.1</b> 简单输出</a></li>
<li class="chapter" data-level="2.4.2" data-path="intro-example.html"><a href="intro-example.html#i-e-o-sink"><i class="fa fa-check"></i><b>2.4.2</b> 用<code>sink()</code>函数作运行记录</a></li>
<li class="chapter" data-level="2.4.3" data-path="intro-example.html"><a href="intro-example.html#i-e-o-ex"><i class="fa fa-check"></i><b>2.4.3</b> 练习</a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="intro-example.html"><a href="intro-example.html#i-e-vector"><i class="fa fa-check"></i><b>2.5</b> 向量计算与变量赋值</a></li>
<li class="chapter" data-level="2.6" data-path="intro-example.html"><a href="intro-example.html#i-e-workspace"><i class="fa fa-check"></i><b>2.6</b> 工作空间介绍</a><ul>
<li class="chapter" data-level="2.6.1" data-path="intro-example.html"><a href="intro-example.html#i-e-w-ex"><i class="fa fa-check"></i><b>2.6.1</b> 练习</a></li>
</ul></li>
<li class="chapter" data-level="2.7" data-path="intro-example.html"><a href="intro-example.html#i-e-graph"><i class="fa fa-check"></i><b>2.7</b> 绘图示例</a><ul>
<li class="chapter" data-level="2.7.1" data-path="intro-example.html"><a href="intro-example.html#i-e-g-curve"><i class="fa fa-check"></i><b>2.7.1</b> 函数曲线示例</a></li>
<li class="chapter" data-level="2.7.2" data-path="intro-example.html"><a href="intro-example.html#i-e-g-barplot"><i class="fa fa-check"></i><b>2.7.2</b> 条形图示例</a></li>
<li class="chapter" data-level="2.7.3" data-path="intro-example.html"><a href="intro-example.html#i-e-g-scatter"><i class="fa fa-check"></i><b>2.7.3</b> 散点图示例</a></li>
<li class="chapter" data-level="2.7.4" data-path="intro-example.html"><a href="intro-example.html#i-e-g-demo"><i class="fa fa-check"></i><b>2.7.4</b> R软件自带的图形示例</a></li>
<li class="chapter" data-level="2.7.5" data-path="intro-example.html"><a href="intro-example.html#i-e-g-ex"><i class="fa fa-check"></i><b>2.7.5</b> 练习</a></li>
</ul></li>
<li class="chapter" data-level="2.8" data-path="intro-example.html"><a href="intro-example.html#i-e-summary"><i class="fa fa-check"></i><b>2.8</b> 汇总统计示例</a><ul>
<li class="chapter" data-level="2.8.1" data-path="intro-example.html"><a href="intro-example.html#i-e-s-table"><i class="fa fa-check"></i><b>2.8.1</b> 表格数据</a></li>
<li class="chapter" data-level="2.8.2" data-path="intro-example.html"><a href="intro-example.html#i-e-s-t-read-table"><i class="fa fa-check"></i><b>2.8.2</b> 读入表格数据</a></li>
<li class="chapter" data-level="2.8.3" data-path="intro-example.html"><a href="intro-example.html#i-e-s-ex"><i class="fa fa-check"></i><b>2.8.3</b> 练习</a></li>
<li class="chapter" data-level="2.8.4" data-path="intro-example.html"><a href="intro-example.html#i-e-s-qual-freq"><i class="fa fa-check"></i><b>2.8.4</b> 分类变量频数统计</a></li>
<li class="chapter" data-level="2.8.5" data-path="intro-example.html"><a href="intro-example.html#i-e-s-num-summ"><i class="fa fa-check"></i><b>2.8.5</b> 数值型变量的统计</a></li>
<li class="chapter" data-level="2.8.6" data-path="intro-example.html"><a href="intro-example.html#i-e-s-ex2"><i class="fa fa-check"></i><b>2.8.6</b> 练习</a></li>
</ul></li>
<li class="chapter" data-level="2.9" data-path="intro-example.html"><a href="intro-example.html#i-e-source"><i class="fa fa-check"></i><b>2.9</b> 运行源程序文件</a><ul>
<li class="chapter" data-level="2.9.1" data-path="intro-example.html"><a href="intro-example.html#i-e-source-enc"><i class="fa fa-check"></i><b>2.9.1</b> 源文件编码</a></li>
<li class="chapter" data-level="2.9.2" data-path="intro-example.html"><a href="intro-example.html#i-e-cwd"><i class="fa fa-check"></i><b>2.9.2</b> 当前工作目录</a></li>
<li class="chapter" data-level="2.9.3" data-path="intro-example.html"><a href="intro-example.html#i-e-source-ex"><i class="fa fa-check"></i><b>2.9.3</b> 练习</a></li>
</ul></li>
<li class="chapter" data-level="2.10" data-path="intro-example.html"><a href="intro-example.html#i-e-appendix-data"><i class="fa fa-check"></i><b>2.10</b> 附录：数据</a><ul>
<li class="chapter" data-level="2.10.1" data-path="intro-example.html"><a href="intro-example.html#i-e-appendix-data-tax"><i class="fa fa-check"></i><b>2.10.1</b> 公司纳税数据样例</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>II 数据类型与相应的运算</b></span></li>
<li class="chapter" data-level="3" data-path="prog-type-intro.html"><a href="prog-type-intro.html"><i class="fa fa-check"></i><b>3</b> 常量与变量</a><ul>
<li class="chapter" data-level="3.1" data-path="prog-type-intro.html"><a href="prog-type-intro.html#p-t-const"><i class="fa fa-check"></i><b>3.1</b> 常量</a></li>
<li class="chapter" data-level="3.2" data-path="prog-type-intro.html"><a href="prog-type-intro.html#p-t-cv-var"><i class="fa fa-check"></i><b>3.2</b> 变量</a></li>
<li class="chapter" data-level="3.3" data-path="prog-type-intro.html"><a href="prog-type-intro.html#p-t-type"><i class="fa fa-check"></i><b>3.3</b> R数据类型</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="prog-type-num.html"><a href="prog-type-num.html"><i class="fa fa-check"></i><b>4</b> 数值型向量及其运算</a><ul>
<li class="chapter" data-level="4.1" data-path="prog-type-num.html"><a href="prog-type-num.html#p-t-num"><i class="fa fa-check"></i><b>4.1</b> 数值型向量</a></li>
<li class="chapter" data-level="4.2" data-path="prog-type-num.html"><a href="prog-type-num.html#p-t-arith"><i class="fa fa-check"></i><b>4.2</b> 向量运算</a><ul>
<li class="chapter" data-level="4.2.1" data-path="prog-type-num.html"><a href="prog-type-num.html#p-t-arith-scalar"><i class="fa fa-check"></i><b>4.2.1</b> 标量和标量运算</a></li>
<li class="chapter" data-level="4.2.2" data-path="prog-type-num.html"><a href="prog-type-num.html#p-t-arith-vec-with-scalar"><i class="fa fa-check"></i><b>4.2.2</b> 向量与标量运算</a></li>
<li class="chapter" data-level="4.2.3" data-path="prog-type-num.html"><a href="prog-type-num.html#p-t-arith-vec-eq-len"><i class="fa fa-check"></i><b>4.2.3</b> 等长向量运算</a></li>
<li class="chapter" data-level="4.2.4" data-path="prog-type-num.html"><a href="prog-type-num.html#p-t-arith-vec-uneq-len"><i class="fa fa-check"></i><b>4.2.4</b> 不等长向量的运算</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="prog-type-num.html"><a href="prog-type-num.html#p-t-vfunc"><i class="fa fa-check"></i><b>4.3</b> 向量函数</a><ul>
<li class="chapter" data-level="4.3.1" data-path="prog-type-num.html"><a href="prog-type-num.html#p-t-vfunc-vector-func"><i class="fa fa-check"></i><b>4.3.1</b> 向量化的函数</a></li>
<li class="chapter" data-level="4.3.2" data-path="prog-type-num.html"><a href="prog-type-num.html#p-t-vfunc-sort"><i class="fa fa-check"></i><b>4.3.2</b> 排序函数</a></li>
<li class="chapter" data-level="4.3.3" data-path="prog-type-num.html"><a href="prog-type-num.html#p-t-vfunc-stat"><i class="fa fa-check"></i><b>4.3.3</b> 统计函数</a></li>
<li class="chapter" data-level="4.3.4" data-path="prog-type-num.html"><a href="prog-type-num.html#p-t-vfunc-seq"><i class="fa fa-check"></i><b>4.3.4</b> 生成规则序列的函数</a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="prog-type-num.html"><a href="prog-type-num.html#p-t-complex"><i class="fa fa-check"></i><b>4.4</b> 复数向量</a></li>
<li class="chapter" data-level="4.5" data-path="prog-type-num.html"><a href="prog-type-num.html#p-t-vfunc-ex"><i class="fa fa-check"></i><b>4.5</b> 练习</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="prog-type-logi.html"><a href="prog-type-logi.html"><i class="fa fa-check"></i><b>5</b> 逻辑型向量及其运算</a><ul>
<li class="chapter" data-level="5.1" data-path="prog-type-logi.html"><a href="prog-type-logi.html#p-t-logical-vec"><i class="fa fa-check"></i><b>5.1</b> 逻辑型向量与比较运算</a></li>
<li class="chapter" data-level="5.2" data-path="prog-type-logi.html"><a href="prog-type-logi.html#p-t-lvec-logic-op"><i class="fa fa-check"></i><b>5.2</b> 逻辑运算</a></li>
<li class="chapter" data-level="5.3" data-path="prog-type-logi.html"><a href="prog-type-logi.html#p-t-lvec-logic-op-vec"><i class="fa fa-check"></i><b>5.3</b> 逻辑运算函数</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="prog-type-char.html"><a href="prog-type-char.html"><i class="fa fa-check"></i><b>6</b> 字符型数据及其处理</a><ul>
<li class="chapter" data-level="6.1" data-path="prog-type-char.html"><a href="prog-type-char.html#p-t-char"><i class="fa fa-check"></i><b>6.1</b> 字符型向量</a></li>
<li class="chapter" data-level="6.2" data-path="prog-type-char.html"><a href="prog-type-char.html#p-t-char-paste"><i class="fa fa-check"></i><b>6.2</b> <code>paste()</code>函数</a></li>
<li class="chapter" data-level="6.3" data-path="prog-type-char.html"><a href="prog-type-char.html#p-t-char-toupper"><i class="fa fa-check"></i><b>6.3</b> 转换大小写</a></li>
<li class="chapter" data-level="6.4" data-path="prog-type-char.html"><a href="prog-type-char.html#p-t-char-nchar"><i class="fa fa-check"></i><b>6.4</b> 字符串长度</a></li>
<li class="chapter" data-level="6.5" data-path="prog-type-char.html"><a href="prog-type-char.html#p-t-char-substr"><i class="fa fa-check"></i><b>6.5</b> 取子串</a></li>
<li class="chapter" data-level="6.6" data-path="prog-type-char.html"><a href="prog-type-char.html#p-t-char-asnum"><i class="fa fa-check"></i><b>6.6</b> 类型转换</a></li>
<li class="chapter" data-level="6.7" data-path="prog-type-char.html"><a href="prog-type-char.html#p-t-char-strsplit"><i class="fa fa-check"></i><b>6.7</b> 字符串拆分</a></li>
<li class="chapter" data-level="6.8" data-path="prog-type-char.html"><a href="prog-type-char.html#p-t-char-gsub"><i class="fa fa-check"></i><b>6.8</b> 字符串替换功能</a></li>
<li class="chapter" data-level="6.9" data-path="prog-type-char.html"><a href="prog-type-char.html#p-t-char-regexp"><i class="fa fa-check"></i><b>6.9</b> 正则表达式</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="prog-type-index.html"><a href="prog-type-index.html"><i class="fa fa-check"></i><b>7</b> R向量下标和子集</a><ul>
<li class="chapter" data-level="7.1" data-path="prog-type-index.html"><a href="prog-type-index.html#p-t-subset-int"><i class="fa fa-check"></i><b>7.1</b> 正整数下标</a></li>
<li class="chapter" data-level="7.2" data-path="prog-type-index.html"><a href="prog-type-index.html#p-t-subset-negint"><i class="fa fa-check"></i><b>7.2</b> 负整数下标</a></li>
<li class="chapter" data-level="7.3" data-path="prog-type-index.html"><a href="prog-type-index.html#p-t-subset-all"><i class="fa fa-check"></i><b>7.3</b> 空下标与零下标</a></li>
<li class="chapter" data-level="7.4" data-path="prog-type-index.html"><a href="prog-type-index.html#p-t-subset-over"><i class="fa fa-check"></i><b>7.4</b> 下标超界</a></li>
<li class="chapter" data-level="7.5" data-path="prog-type-index.html"><a href="prog-type-index.html#p-t-subset-logic"><i class="fa fa-check"></i><b>7.5</b> 逻辑下标</a></li>
<li class="chapter" data-level="7.6" data-path="prog-type-index.html"><a href="prog-type-index.html#p-t-subset-which"><i class="fa fa-check"></i><b>7.6</b> <code>which()</code>、<code>which.min()</code>、<code>which.max()</code>函数</a></li>
<li class="chapter" data-level="7.7" data-path="prog-type-index.html"><a href="prog-type-index.html#p-t-subset-names"><i class="fa fa-check"></i><b>7.7</b> 元素名</a></li>
<li class="chapter" data-level="7.8" data-path="prog-type-index.html"><a href="prog-type-index.html#p-t-subset-mapping"><i class="fa fa-check"></i><b>7.8</b> 用R向量下标作映射</a></li>
<li class="chapter" data-level="7.9" data-path="prog-type-index.html"><a href="prog-type-index.html#p-t-subset-set"><i class="fa fa-check"></i><b>7.9</b> 集合运算</a></li>
<li class="chapter" data-level="7.10" data-path="prog-type-index.html"><a href="prog-type-index.html#p-t-set-ex"><i class="fa fa-check"></i><b>7.10</b> 练习</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="prog-type-attr.html"><a href="prog-type-attr.html"><i class="fa fa-check"></i><b>8</b> R数据类型的性质</a><ul>
<li class="chapter" data-level="8.1" data-path="prog-type-attr.html"><a href="prog-type-attr.html#p-t-modes-typeof"><i class="fa fa-check"></i><b>8.1</b> 存储模式与基本类型</a></li>
<li class="chapter" data-level="8.2" data-path="prog-type-attr.html"><a href="prog-type-attr.html#p-t-modes-as"><i class="fa fa-check"></i><b>8.2</b> 类型转换与类型升档</a></li>
<li class="chapter" data-level="8.3" data-path="prog-type-attr.html"><a href="prog-type-attr.html#p-t-modes-attr"><i class="fa fa-check"></i><b>8.3</b> 属性</a><ul>
<li class="chapter" data-level="8.3.1" data-path="prog-type-attr.html"><a href="prog-type-attr.html#p-t-modes-attr-asfun"><i class="fa fa-check"></i><b>8.3.1</b> <code>attributes</code>函数</a></li>
<li class="chapter" data-level="8.3.2" data-path="prog-type-attr.html"><a href="prog-type-attr.html#p-t-modes-attr-attrfun"><i class="fa fa-check"></i><b>8.3.2</b> <code>attr</code>函数</a></li>
<li class="chapter" data-level="8.3.3" data-path="prog-type-attr.html"><a href="prog-type-attr.html#p-t-modes-attr-names"><i class="fa fa-check"></i><b>8.3.3</b> <code>names</code>属性</a></li>
<li class="chapter" data-level="8.3.4" data-path="prog-type-attr.html"><a href="prog-type-attr.html#p-t-modes-attr-dim"><i class="fa fa-check"></i><b>8.3.4</b> <code>dim</code>属性</a></li>
</ul></li>
<li class="chapter" data-level="8.4" data-path="prog-type-attr.html"><a href="prog-type-attr.html#p-t-modes-class"><i class="fa fa-check"></i><b>8.4</b> 类属</a></li>
<li class="chapter" data-level="8.5" data-path="prog-type-attr.html"><a href="prog-type-attr.html#p-t-modes-str"><i class="fa fa-check"></i><b>8.5</b> <code>str()</code>函数</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="prog-type-date.html"><a href="prog-type-date.html"><i class="fa fa-check"></i><b>9</b> R日期时间</a><ul>
<li class="chapter" data-level="9.1" data-path="prog-type-date.html"><a href="prog-type-date.html#prog-type-dt-intro"><i class="fa fa-check"></i><b>9.1</b> R日期和日期时间类型</a></li>
<li class="chapter" data-level="9.2" data-path="prog-type-date.html"><a href="prog-type-date.html#prog-type-dt-fromchr"><i class="fa fa-check"></i><b>9.2</b> 从字符串生成日期数据</a></li>
<li class="chapter" data-level="9.3" data-path="prog-type-date.html"><a href="prog-type-date.html#p-t-date-format"><i class="fa fa-check"></i><b>9.3</b> 日期显示格式</a></li>
<li class="chapter" data-level="9.4" data-path="prog-type-date.html"><a href="prog-type-date.html#p-t-date-comp"><i class="fa fa-check"></i><b>9.4</b> 访问日期时间的组成值</a></li>
<li class="chapter" data-level="9.5" data-path="prog-type-date.html"><a href="prog-type-date.html#p-t-date-round"><i class="fa fa-check"></i><b>9.5</b> 日期舍入计算</a></li>
<li class="chapter" data-level="9.6" data-path="prog-type-date.html"><a href="prog-type-date.html#p-t-date-calc"><i class="fa fa-check"></i><b>9.6</b> 日期计算</a><ul>
<li class="chapter" data-level="9.6.1" data-path="prog-type-date.html"><a href="prog-type-date.html#p-t-date-calc-dur"><i class="fa fa-check"></i><b>9.6.1</b> 时间长度</a></li>
<li class="chapter" data-level="9.6.2" data-path="prog-type-date.html"><a href="prog-type-date.html#p-t-date-calc-per"><i class="fa fa-check"></i><b>9.6.2</b> 时间周期</a></li>
<li class="chapter" data-level="9.6.3" data-path="prog-type-date.html"><a href="prog-type-date.html#p-t-date-calc-int"><i class="fa fa-check"></i><b>9.6.3</b> 时间区间</a></li>
</ul></li>
<li class="chapter" data-level="9.7" data-path="prog-type-date.html"><a href="prog-type-date.html#prog-type-dt-baser"><i class="fa fa-check"></i><b>9.7</b> 基本R软件的日期功能</a><ul>
<li class="chapter" data-level="9.7.1" data-path="prog-type-date.html"><a href="prog-type-date.html#p-t-date-baser-gen"><i class="fa fa-check"></i><b>9.7.1</b> 生成日期和日期时间型数据</a></li>
<li class="chapter" data-level="9.7.2" data-path="prog-type-date.html"><a href="prog-type-date.html#p-t-date-baser-comp"><i class="fa fa-check"></i><b>9.7.2</b> 取出日期时间的组成值</a></li>
<li class="chapter" data-level="9.7.3" data-path="prog-type-date.html"><a href="prog-type-date.html#p-t-date-baser-calc"><i class="fa fa-check"></i><b>9.7.3</b> 日期计算</a></li>
</ul></li>
<li class="chapter" data-level="9.8" data-path="prog-type-date.html"><a href="prog-type-date.html#p-t-date-ex"><i class="fa fa-check"></i><b>9.8</b> 练习</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="prog-type-fact.html"><a href="prog-type-fact.html"><i class="fa fa-check"></i><b>10</b> R因子类型</a><ul>
<li class="chapter" data-level="10.1" data-path="prog-type-fact.html"><a href="prog-type-fact.html#p-t-fact"><i class="fa fa-check"></i><b>10.1</b> 因子</a></li>
<li class="chapter" data-level="10.2" data-path="prog-type-fact.html"><a href="prog-type-fact.html#p-t-factor-table"><i class="fa fa-check"></i><b>10.2</b> <code>table()</code>函数</a></li>
<li class="chapter" data-level="10.3" data-path="prog-type-fact.html"><a href="prog-type-fact.html#p-t-factor-tapply"><i class="fa fa-check"></i><b>10.3</b> <code>tapply()</code>函数</a></li>
<li class="chapter" data-level="10.4" data-path="prog-type-fact.html"><a href="prog-type-fact.html#summ-by-forcats"><i class="fa fa-check"></i><b>10.4</b> forcats包的因子函数</a></li>
<li class="chapter" data-level="10.5" data-path="prog-type-fact.html"><a href="prog-type-fact.html#p-t-factor-ex"><i class="fa fa-check"></i><b>10.5</b> 练习</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="prog-type-list.html"><a href="prog-type-list.html"><i class="fa fa-check"></i><b>11</b> 列表类型</a><ul>
<li class="chapter" data-level="11.1" data-path="prog-type-list.html"><a href="prog-type-list.html#p-t-list"><i class="fa fa-check"></i><b>11.1</b> 列表</a></li>
<li class="chapter" data-level="11.2" data-path="prog-type-list.html"><a href="prog-type-list.html#p-t-list-access"><i class="fa fa-check"></i><b>11.2</b> 列表元素访问</a></li>
<li class="chapter" data-level="11.3" data-path="prog-type-list.html"><a href="prog-type-list.html#p-t-list-as"><i class="fa fa-check"></i><b>11.3</b> 列表类型转换</a></li>
<li class="chapter" data-level="11.4" data-path="prog-type-list.html"><a href="prog-type-list.html#p-t-list-ex-strsplit"><i class="fa fa-check"></i><b>11.4</b> 返回列表的函数示例–<code>strsplit()</code></a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="prog-type-matrix.html"><a href="prog-type-matrix.html"><i class="fa fa-check"></i><b>12</b> R矩阵和数组</a><ul>
<li class="chapter" data-level="12.1" data-path="prog-type-matrix.html"><a href="prog-type-matrix.html#p-t-array-matrix"><i class="fa fa-check"></i><b>12.1</b> R矩阵</a></li>
<li class="chapter" data-level="12.2" data-path="prog-type-matrix.html"><a href="prog-type-matrix.html#p-t-array-subset"><i class="fa fa-check"></i><b>12.2</b> 矩阵子集</a></li>
<li class="chapter" data-level="12.3" data-path="prog-type-matrix.html"><a href="prog-type-matrix.html#p-t-array-cbind"><i class="fa fa-check"></i><b>12.3</b> <code>cbind()</code>和<code>rbind()</code>函数</a></li>
<li class="chapter" data-level="12.4" data-path="prog-type-matrix.html"><a href="prog-type-matrix.html#p-t-array-matop"><i class="fa fa-check"></i><b>12.4</b> 矩阵运算</a><ul>
<li class="chapter" data-level="12.4.1" data-path="prog-type-matrix.html"><a href="prog-type-matrix.html#p-t-array-matop-arith"><i class="fa fa-check"></i><b>12.4.1</b> 四则运算</a></li>
<li class="chapter" data-level="12.4.2" data-path="prog-type-matrix.html"><a href="prog-type-matrix.html#p-t-array-matop-mult"><i class="fa fa-check"></i><b>12.4.2</b> 矩阵乘法</a></li>
<li class="chapter" data-level="12.4.3" data-path="prog-type-matrix.html"><a href="prog-type-matrix.html#p-t-array-matop-vecmat"><i class="fa fa-check"></i><b>12.4.3</b> 向量与矩阵相乘</a></li>
<li class="chapter" data-level="12.4.4" data-path="prog-type-matrix.html"><a href="prog-type-matrix.html#p-t-array-matop-inprod"><i class="fa fa-check"></i><b>12.4.4</b> 内积</a></li>
<li class="chapter" data-level="12.4.5" data-path="prog-type-matrix.html"><a href="prog-type-matrix.html#p-t-array-matop-outer"><i class="fa fa-check"></i><b>12.4.5</b> 外积</a></li>
</ul></li>
<li class="chapter" data-level="12.5" data-path="prog-type-matrix.html"><a href="prog-type-matrix.html#p-t-array-solve"><i class="fa fa-check"></i><b>12.5</b> 逆矩阵与线性方程组求解</a></li>
<li class="chapter" data-level="12.6" data-path="prog-type-matrix.html"><a href="prog-type-matrix.html#p-t-array-apply"><i class="fa fa-check"></i><b>12.6</b> <code>apply()</code>函数</a></li>
<li class="chapter" data-level="12.7" data-path="prog-type-matrix.html"><a href="prog-type-matrix.html#p-t-array-array"><i class="fa fa-check"></i><b>12.7</b> 多维数组</a></li>
</ul></li>
<li class="chapter" data-level="13" data-path="prog-type-df.html"><a href="prog-type-df.html"><i class="fa fa-check"></i><b>13</b> 数据框</a><ul>
<li class="chapter" data-level="13.1" data-path="prog-type-df.html"><a href="prog-type-df.html#p-t-dataframe"><i class="fa fa-check"></i><b>13.1</b> 数据框</a></li>
<li class="chapter" data-level="13.2" data-path="prog-type-df.html"><a href="prog-type-df.html#p-t-df-access"><i class="fa fa-check"></i><b>13.2</b> 数据框内容访问</a></li>
<li class="chapter" data-level="13.3" data-path="prog-type-df.html"><a href="prog-type-df.html#p-t-df-rownames"><i class="fa fa-check"></i><b>13.3</b> 数据框的行名</a></li>
<li class="chapter" data-level="13.4" data-path="prog-type-df.html"><a href="prog-type-df.html#p-t-df-notmatrix"><i class="fa fa-check"></i><b>13.4</b> 数据框与矩阵的区别</a></li>
<li class="chapter" data-level="13.5" data-path="prog-type-df.html"><a href="prog-type-df.html#p-t-df-gl-func"><i class="fa fa-check"></i><b>13.5</b> <code>tidyr::expand_grid()</code>函数</a></li>
<li class="chapter" data-level="13.6" data-path="prog-type-df.html"><a href="prog-type-df.html#p-t-tibble"><i class="fa fa-check"></i><b>13.6</b> <code>tibble</code>类型</a></li>
<li class="chapter" data-level="13.7" data-path="prog-type-df.html"><a href="prog-type-df.html#p-t-df-ex"><i class="fa fa-check"></i><b>13.7</b> 练习</a></li>
</ul></li>
<li class="chapter" data-level="14" data-path="prog-type-ws.html"><a href="prog-type-ws.html"><i class="fa fa-check"></i><b>14</b> 工作空间和变量赋值</a><ul>
<li class="chapter" data-level="14.1" data-path="prog-type-ws.html"><a href="prog-type-ws.html#p-t-ws"><i class="fa fa-check"></i><b>14.1</b> 工作空间</a></li>
<li class="chapter" data-level="14.2" data-path="prog-type-ws.html"><a href="prog-type-ws.html#p-t-nlvname"><i class="fa fa-check"></i><b>14.2</b> 非法变量名</a></li>
<li class="chapter" data-level="14.3" data-path="prog-type-ws.html"><a href="prog-type-ws.html#p-t-ws-asign"><i class="fa fa-check"></i><b>14.3</b> 变量赋值与绑定</a></li>
<li class="chapter" data-level="14.4" data-path="prog-type-ws.html"><a href="prog-type-ws.html#p-t-ws-env"><i class="fa fa-check"></i><b>14.4</b> 环境</a></li>
</ul></li>
<li class="part"><span><b>III 编程</b></span></li>
<li class="chapter" data-level="15" data-path="prog-io.html"><a href="prog-io.html"><i class="fa fa-check"></i><b>15</b> R输入输出</a><ul>
<li class="chapter" data-level="15.1" data-path="prog-io.html"><a href="prog-io.html#p-io-simple"><i class="fa fa-check"></i><b>15.1</b> 输入输出的简单方法</a><ul>
<li class="chapter" data-level="15.1.1" data-path="prog-io.html"><a href="prog-io.html#p-io-simple-out"><i class="fa fa-check"></i><b>15.1.1</b> 简单的输出</a></li>
<li class="chapter" data-level="15.1.2" data-path="prog-io.html"><a href="prog-io.html#p-io-simple-input"><i class="fa fa-check"></i><b>15.1.2</b> 简单的输入</a></li>
</ul></li>
<li class="chapter" data-level="15.2" data-path="prog-io.html"><a href="prog-io.html#p-io-read-csv"><i class="fa fa-check"></i><b>15.2</b> 读取CSV文件</a><ul>
<li class="chapter" data-level="15.2.1" data-path="prog-io.html"><a href="prog-io.html#p-io-read-csv-format"><i class="fa fa-check"></i><b>15.2.1</b> CSV格式</a></li>
<li class="chapter" data-level="15.2.2" data-path="prog-io.html"><a href="prog-io.html#p-io-read-csv-fromstr"><i class="fa fa-check"></i><b>15.2.2</b> 从字符串读入</a></li>
<li class="chapter" data-level="15.2.3" data-path="prog-io.html"><a href="prog-io.html#p-io-read-csv-opt"><i class="fa fa-check"></i><b>15.2.3</b> <code>read_csv</code>选项</a></li>
<li class="chapter" data-level="15.2.4" data-path="prog-io.html"><a href="prog-io.html#p-io-read-csv-enc"><i class="fa fa-check"></i><b>15.2.4</b> 编码设置</a></li>
<li class="chapter" data-level="15.2.5" data-path="prog-io.html"><a href="prog-io.html#p-io-read-csv-na"><i class="fa fa-check"></i><b>15.2.5</b> 缺失值设置</a></li>
<li class="chapter" data-level="15.2.6" data-path="prog-io.html"><a href="prog-io.html#p-io-read-csv-colt"><i class="fa fa-check"></i><b>15.2.6</b> 各列类型设置</a></li>
<li class="chapter" data-level="15.2.7" data-path="prog-io.html"><a href="prog-io.html#p-io-read-csv-fact"><i class="fa fa-check"></i><b>15.2.7</b> 因子类型设置</a></li>
<li class="chapter" data-level="15.2.8" data-path="prog-io.html"><a href="prog-io.html#p-io-read-csv-date"><i class="fa fa-check"></i><b>15.2.8</b> 读入日期</a></li>
<li class="chapter" data-level="15.2.9" data-path="prog-io.html"><a href="prog-io.html#p-io-read-csv-funcs"><i class="fa fa-check"></i><b>15.2.9</b> 其它函数</a></li>
</ul></li>
<li class="chapter" data-level="15.3" data-path="prog-io.html"><a href="prog-io.html#p-io-excel"><i class="fa fa-check"></i><b>15.3</b> Excel表访问</a><ul>
<li class="chapter" data-level="15.3.1" data-path="prog-io.html"><a href="prog-io.html#p-io-excel-csv"><i class="fa fa-check"></i><b>15.3.1</b> 借助于文本格式</a></li>
<li class="chapter" data-level="15.3.2" data-path="prog-io.html"><a href="prog-io.html#p-io-excel-clip"><i class="fa fa-check"></i><b>15.3.2</b> 使用剪贴板</a></li>
<li class="chapter" data-level="15.3.3" data-path="prog-io.html"><a href="prog-io.html#p-io-excel-readxl"><i class="fa fa-check"></i><b>15.3.3</b> 利用readxl扩展包</a></li>
</ul></li>
<li class="chapter" data-level="15.4" data-path="prog-io.html"><a href="prog-io.html#p-io-file"><i class="fa fa-check"></i><b>15.4</b> 文件访问</a><ul>
<li class="chapter" data-level="15.4.1" data-path="prog-io.html"><a href="prog-io.html#p-io-file-conn"><i class="fa fa-check"></i><b>15.4.1</b> 连接</a></li>
<li class="chapter" data-level="15.4.2" data-path="prog-io.html"><a href="prog-io.html#p-io-file-text"><i class="fa fa-check"></i><b>15.4.2</b> 文本文件访问</a></li>
<li class="chapter" data-level="15.4.3" data-path="prog-io.html"><a href="prog-io.html#p-io-enc-batch"><i class="fa fa-check"></i><b>15.4.3</b> 文本文件分批读写</a></li>
<li class="chapter" data-level="15.4.4" data-path="prog-io.html"><a href="prog-io.html#p-io-file-bin"><i class="fa fa-check"></i><b>15.4.4</b> 二进制文件访问</a></li>
<li class="chapter" data-level="15.4.5" data-path="prog-io.html"><a href="prog-io.html#p-io-file-textcon"><i class="fa fa-check"></i><b>15.4.5</b> 字符型连接</a></li>
</ul></li>
<li class="chapter" data-level="15.5" data-path="prog-io.html"><a href="prog-io.html#p-io-enc"><i class="fa fa-check"></i><b>15.5</b> 中文编码问题</a><ul>
<li class="chapter" data-level="15.5.1" data-path="prog-io.html"><a href="prog-io.html#p-io-enc-base"><i class="fa fa-check"></i><b>15.5.1</b> 用基本R的读取函数读取</a></li>
<li class="chapter" data-level="15.5.2" data-path="prog-io.html"><a href="prog-io.html#p-io-enc-readr"><i class="fa fa-check"></i><b>15.5.2</b> 用readr包读取</a></li>
<li class="chapter" data-level="15.5.3" data-path="prog-io.html"><a href="prog-io.html#p-io-enc-write"><i class="fa fa-check"></i><b>15.5.3</b> 输出文件的编码</a></li>
</ul></li>
<li class="chapter" data-level="15.6" data-path="prog-io.html"><a href="prog-io.html#p-io-dir"><i class="fa fa-check"></i><b>15.6</b> 目录和文件管理</a></li>
<li class="chapter" data-level="15.7" data-path="prog-io.html"><a href="prog-io.html#p-io-db"><i class="fa fa-check"></i><b>15.7</b> SQL数据库访问</a><ul>
<li class="chapter" data-level="15.7.1" data-path="prog-io.html"><a href="prog-io.html#p-io-db-intro"><i class="fa fa-check"></i><b>15.7.1</b> 介绍</a></li>
<li class="chapter" data-level="15.7.2" data-path="prog-io.html"><a href="prog-io.html#p-io-db-sqlite"><i class="fa fa-check"></i><b>15.7.2</b> SQLite数据库访问</a></li>
<li class="chapter" data-level="15.7.3" data-path="prog-io.html"><a href="prog-io.html#p-io-db-sql"><i class="fa fa-check"></i><b>15.7.3</b> SQL命令简介</a></li>
<li class="chapter" data-level="15.7.4" data-path="prog-io.html"><a href="prog-io.html#p-io-db-oracle"><i class="fa fa-check"></i><b>15.7.4</b> 访问Oracle数据库</a></li>
<li class="chapter" data-level="15.7.5" data-path="prog-io.html"><a href="prog-io.html#p-io-db-mysql"><i class="fa fa-check"></i><b>15.7.5</b> MySQL数据库访问</a></li>
<li class="chapter" data-level="15.7.6" data-path="prog-io.html"><a href="prog-io.html#p-io-excel-rodbc"><i class="fa fa-check"></i><b>15.7.6</b> 利用RODBC访问Access数据库</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="16" data-path="prog-control.html"><a href="prog-control.html"><i class="fa fa-check"></i><b>16</b> 程序控制结构</a><ul>
<li class="chapter" data-level="16.1" data-path="prog-control.html"><a href="prog-control.html#p-con-exp"><i class="fa fa-check"></i><b>16.1</b> 表达式</a></li>
<li class="chapter" data-level="16.2" data-path="prog-control.html"><a href="prog-control.html#p-con-if"><i class="fa fa-check"></i><b>16.2</b> 分支结构</a><ul>
<li class="chapter" data-level="16.2.1" data-path="prog-control.html"><a href="prog-control.html#p-con-logic-index"><i class="fa fa-check"></i><b>16.2.1</b> 用逻辑下标代替分支结构</a></li>
<li class="chapter" data-level="16.2.2" data-path="prog-control.html"><a href="prog-control.html#p-con-ifelsef"><i class="fa fa-check"></i><b>16.2.2</b> <code>ifelse</code>函数</a></li>
<li class="chapter" data-level="16.2.3" data-path="prog-control.html"><a href="prog-control.html#p-con-switch"><i class="fa fa-check"></i><b>16.2.3</b> <code>switch</code>函数</a></li>
</ul></li>
<li class="chapter" data-level="16.3" data-path="prog-control.html"><a href="prog-control.html#p-con-loop"><i class="fa fa-check"></i><b>16.3</b> 循环结构</a><ul>
<li class="chapter" data-level="16.3.1" data-path="prog-control.html"><a href="prog-control.html#p-con-for"><i class="fa fa-check"></i><b>16.3.1</b> 计数循环</a></li>
<li class="chapter" data-level="16.3.2" data-path="prog-control.html"><a href="prog-control.html#p-con-while"><i class="fa fa-check"></i><b>16.3.2</b> <code>while</code>循环和<code>repeat</code>循环</a></li>
</ul></li>
<li class="chapter" data-level="16.4" data-path="prog-control.html"><a href="prog-control.html#p-con-cond"><i class="fa fa-check"></i><b>16.4</b> R中判断条件</a></li>
<li class="chapter" data-level="16.5" data-path="prog-control.html"><a href="prog-control.html#p-pipe"><i class="fa fa-check"></i><b>16.5</b> 管道控制</a></li>
</ul></li>
<li class="chapter" data-level="17" data-path="prog-func.html"><a href="prog-func.html"><i class="fa fa-check"></i><b>17</b> 函数</a><ul>
<li class="chapter" data-level="17.1" data-path="prog-func.html"><a href="prog-func.html#p-func"><i class="fa fa-check"></i><b>17.1</b> 函数基础</a><ul>
<li class="chapter" data-level="17.1.1" data-path="prog-func.html"><a href="prog-func.html#p-func-intro"><i class="fa fa-check"></i><b>17.1.1</b> 介绍</a></li>
<li class="chapter" data-level="17.1.2" data-path="prog-func.html"><a href="prog-func.html#p-func-def"><i class="fa fa-check"></i><b>17.1.2</b> 函数定义</a></li>
<li class="chapter" data-level="17.1.3" data-path="prog-func.html"><a href="prog-func.html#p-func-call"><i class="fa fa-check"></i><b>17.1.3</b> 函数调用</a></li>
<li class="chapter" data-level="17.1.4" data-path="prog-func.html"><a href="prog-func.html#p-func-recursive"><i class="fa fa-check"></i><b>17.1.4</b> 递归调用</a></li>
<li class="chapter" data-level="17.1.5" data-path="prog-func.html"><a href="prog-func.html#p-func-vr"><i class="fa fa-check"></i><b>17.1.5</b> 向量化</a></li>
<li class="chapter" data-level="17.1.6" data-path="prog-func.html"><a href="prog-func.html#p-func-anonymf"><i class="fa fa-check"></i><b>17.1.6</b> 无名函数</a></li>
</ul></li>
<li class="chapter" data-level="17.2" data-path="prog-func.html"><a href="prog-func.html#p-func-space"><i class="fa fa-check"></i><b>17.2</b> 变量作用域</a><ul>
<li class="chapter" data-level="17.2.1" data-path="prog-func.html"><a href="prog-func.html#p-func-global"><i class="fa fa-check"></i><b>17.2.1</b> 全局变量和工作空间</a></li>
<li class="chapter" data-level="17.2.2" data-path="prog-func.html"><a href="prog-func.html#p-func-local"><i class="fa fa-check"></i><b>17.2.2</b> 局部变量</a></li>
<li class="chapter" data-level="17.2.3" data-path="prog-func.html"><a href="prog-func.html#p-func-global-access"><i class="fa fa-check"></i><b>17.2.3</b> 在函数内访问全局变量</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="18" data-path="prog-prof.html"><a href="prog-prof.html"><i class="fa fa-check"></i><b>18</b> R程序效率</a><ul>
<li class="chapter" data-level="18.1" data-path="prog-prof.html"><a href="prog-prof.html#p-prof-effic"><i class="fa fa-check"></i><b>18.1</b> R的运行效率</a></li>
<li class="chapter" data-level="18.2" data-path="prog-prof.html"><a href="prog-prof.html#p-prof-vect"><i class="fa fa-check"></i><b>18.2</b> 向量化编程</a><ul>
<li class="chapter" data-level="18.2.1" data-path="prog-prof.html"><a href="prog-prof.html#p-prof-vect-ex1"><i class="fa fa-check"></i><b>18.2.1</b> 示例1</a></li>
<li class="chapter" data-level="18.2.2" data-path="prog-prof.html"><a href="prog-prof.html#p-prof-vect-ex2"><i class="fa fa-check"></i><b>18.2.2</b> 示例2</a></li>
<li class="chapter" data-level="18.2.3" data-path="prog-prof.html"><a href="prog-prof.html#p-prof-vect-ex3"><i class="fa fa-check"></i><b>18.2.3</b> 示例3</a></li>
</ul></li>
<li class="chapter" data-level="18.3" data-path="prog-prof.html"><a href="prog-prof.html#p-prof-loop"><i class="fa fa-check"></i><b>18.3</b> 减少显式循环</a><ul>
<li class="chapter" data-level="18.3.1" data-path="prog-prof.html"><a href="prog-prof.html#p-prof-replicate"><i class="fa fa-check"></i><b>18.3.1</b> <code>replicate()</code>函数</a></li>
</ul></li>
<li class="chapter" data-level="18.4" data-path="prog-prof.html"><a href="prog-prof.html#p-prof-copy"><i class="fa fa-check"></i><b>18.4</b> 避免制作副本</a></li>
<li class="chapter" data-level="18.5" data-path="prog-prof.html"><a href="prog-prof.html#p-prof-mathfun"><i class="fa fa-check"></i><b>18.5</b> R的计算函数</a><ul>
<li class="chapter" data-level="18.5.1" data-path="prog-prof.html"><a href="prog-prof.html#p-prof-mathfun-math"><i class="fa fa-check"></i><b>18.5.1</b> 数学函数</a></li>
<li class="chapter" data-level="18.5.2" data-path="prog-prof.html"><a href="prog-prof.html#p-prof-mathfun-sum"><i class="fa fa-check"></i><b>18.5.2</b> 概括函数</a></li>
<li class="chapter" data-level="18.5.3" data-path="prog-prof.html"><a href="prog-prof.html#p-prof-mathfun-max"><i class="fa fa-check"></i><b>18.5.3</b> 最值</a></li>
<li class="chapter" data-level="18.5.4" data-path="prog-prof.html"><a href="prog-prof.html#p-prof-mathfun-sort"><i class="fa fa-check"></i><b>18.5.4</b> 排序</a></li>
<li class="chapter" data-level="18.5.5" data-path="prog-prof.html"><a href="prog-prof.html#p-prof-mathfun-integrate"><i class="fa fa-check"></i><b>18.5.5</b> 一元定积分<code>integrate</code></a></li>
<li class="chapter" data-level="18.5.6" data-path="prog-prof.html"><a href="prog-prof.html#p-prof-mathfun-uniroot"><i class="fa fa-check"></i><b>18.5.6</b> 一元函数求根<code>uniroot</code></a></li>
<li class="chapter" data-level="18.5.7" data-path="prog-prof.html"><a href="prog-prof.html#p-prof-mathfun-fft"><i class="fa fa-check"></i><b>18.5.7</b> 离散傅立叶变换<code>fft</code></a></li>
<li class="chapter" data-level="18.5.8" data-path="prog-prof.html"><a href="prog-prof.html#p-prof-mathfun-filter"><i class="fa fa-check"></i><b>18.5.8</b> 用<code>filter</code>函数作迭代</a></li>
</ul></li>
<li class="chapter" data-level="18.6" data-path="prog-prof.html"><a href="prog-prof.html#p-prof-mcpu"><i class="fa fa-check"></i><b>18.6</b> 并行计算</a><ul>
<li class="chapter" data-level="18.6.1" data-path="prog-prof.html"><a href="prog-prof.html#p-prof-mcpu-ex1"><i class="fa fa-check"></i><b>18.6.1</b> 例1：完全不互相依赖的并行运算</a></li>
<li class="chapter" data-level="18.6.2" data-path="prog-prof.html"><a href="prog-prof.html#p-prof-mcpu-ex2"><i class="fa fa-check"></i><b>18.6.2</b> 例2：使用相同随机数序列的并行计算</a></li>
<li class="chapter" data-level="18.6.3" data-path="prog-prof.html"><a href="prog-prof.html#p-prof-mcpu-ex3"><i class="fa fa-check"></i><b>18.6.3</b> 例3：使用独立随机数序列的并行计算</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="19" data-path="p-advfunc.html"><a href="p-advfunc.html"><i class="fa fa-check"></i><b>19</b> 函数进阶</a><ul>
<li class="chapter" data-level="19.1" data-path="p-advfunc.html"><a href="p-advfunc.html#p-advfunc-callspe"><i class="fa fa-check"></i><b>19.1</b> 函数调用的各种形式</a></li>
<li class="chapter" data-level="19.2" data-path="p-advfunc.html"><a href="p-advfunc.html#p-advfunc-lex"><i class="fa fa-check"></i><b>19.2</b> 嵌套定义与句法作用域(lexical scoping)</a></li>
<li class="chapter" data-level="19.3" data-path="p-advfunc.html"><a href="p-advfunc.html#p-advfunc-inner"><i class="fa fa-check"></i><b>19.3</b> 辅助嵌套函数</a></li>
<li class="chapter" data-level="19.4" data-path="p-advfunc.html"><a href="p-advfunc.html#p-advfunc-lazy"><i class="fa fa-check"></i><b>19.4</b> 懒惰求值</a></li>
<li class="chapter" data-level="19.5" data-path="p-advfunc.html"><a href="p-advfunc.html#p-advfunc-debug"><i class="fa fa-check"></i><b>19.5</b> 程序调试</a><ul>
<li class="chapter" data-level="19.5.1" data-path="p-advfunc.html"><a href="p-advfunc.html#p-advfunc-debug-intro"><i class="fa fa-check"></i><b>19.5.1</b> 基本调试策略</a></li>
<li class="chapter" data-level="19.5.2" data-path="p-advfunc.html"><a href="p-advfunc.html#p-advfunc-debug-findfunc"><i class="fa fa-check"></i><b>19.5.2</b> 找到出错的函数</a></li>
<li class="chapter" data-level="19.5.3" data-path="p-advfunc.html"><a href="p-advfunc.html#p-advfunc-debug-browser"><i class="fa fa-check"></i><b>19.5.3</b> 跟踪调试</a></li>
<li class="chapter" data-level="19.5.4" data-path="p-advfunc.html"><a href="p-advfunc.html#p-advfunc-debug-cond"><i class="fa fa-check"></i><b>19.5.4</b> 条件断点</a></li>
<li class="chapter" data-level="19.5.5" data-path="p-advfunc.html"><a href="p-advfunc.html#p-advfunc-debug-debugf"><i class="fa fa-check"></i><b>19.5.5</b> 开启对一个函数的调试</a></li>
<li class="chapter" data-level="19.5.6" data-path="p-advfunc.html"><a href="p-advfunc.html#p-advfunc-debug-opt"><i class="fa fa-check"></i><b>19.5.6</b> 出错调试选项</a></li>
<li class="chapter" data-level="19.5.7" data-path="p-advfunc.html"><a href="p-advfunc.html#p-advfunc-debug-stop"><i class="fa fa-check"></i><b>19.5.7</b> <code>stop()</code>、<code>warning()</code>、<code>message()</code></a></li>
<li class="chapter" data-level="19.5.8" data-path="p-advfunc.html"><a href="p-advfunc.html#p-advfunc-debug-preventive"><i class="fa fa-check"></i><b>19.5.8</b> 预防性设计</a></li>
<li class="chapter" data-level="19.5.9" data-path="p-advfunc.html"><a href="p-advfunc.html#p-advfunc-debug-try"><i class="fa fa-check"></i><b>19.5.9</b> 出错处理机制</a></li>
</ul></li>
<li class="chapter" data-level="19.6" data-path="p-advfunc.html"><a href="p-advfunc.html#p-advfunc-funcprog"><i class="fa fa-check"></i><b>19.6</b> 函数式编程介绍</a><ul>
<li class="chapter" data-level="19.6.1" data-path="p-advfunc.html"><a href="p-advfunc.html#p-advfunc-pure"><i class="fa fa-check"></i><b>19.6.1</b> 纯函数</a></li>
<li class="chapter" data-level="19.6.2" data-path="p-advfunc.html"><a href="p-advfunc.html#p-advfunc-rec"><i class="fa fa-check"></i><b>19.6.2</b> 副作用和运行环境恢复</a></li>
<li class="chapter" data-level="19.6.3" data-path="p-advfunc.html"><a href="p-advfunc.html#p-advfunc-rsupp"><i class="fa fa-check"></i><b>19.6.3</b> R的函数式编程功能</a></li>
</ul></li>
<li class="chapter" data-level="19.7" data-path="p-advfunc.html"><a href="p-advfunc.html#p-advfunc-functional"><i class="fa fa-check"></i><b>19.7</b> 泛函</a><ul>
<li class="chapter" data-level="19.7.1" data-path="p-advfunc.html"><a href="p-advfunc.html#p-advfunc-fnctnl-map"><i class="fa fa-check"></i><b>19.7.1</b> <code>purrr::map</code>函数</a></li>
<li class="chapter" data-level="19.7.2" data-path="p-advfunc.html"><a href="p-advfunc.html#p-advfunc-fnctnl-mapv"><i class="fa fa-check"></i><b>19.7.2</b> purrr包中<code>map</code>函数的变种</a></li>
<li class="chapter" data-level="19.7.3" data-path="p-advfunc.html"><a href="p-advfunc.html#p-advfunc-fnctnl-reduce"><i class="fa fa-check"></i><b>19.7.3</b> purrr包中<code>reduce</code>类函数</a></li>
<li class="chapter" data-level="19.7.4" data-path="p-advfunc.html"><a href="p-advfunc.html#p-advfunc-fnctnl-pred"><i class="fa fa-check"></i><b>19.7.4</b> purrr包中使用示性函数的泛函</a></li>
<li class="chapter" data-level="19.7.5" data-path="p-advfunc.html"><a href="p-advfunc.html#p-advfunc-fnctnl-lapp"><i class="fa fa-check"></i><b>19.7.5</b> 基本R的函数式编程支持</a></li>
<li class="chapter" data-level="19.7.6" data-path="p-advfunc.html"><a href="p-advfunc.html#p-advfunc-fnctnl-udef"><i class="fa fa-check"></i><b>19.7.6</b> 自定义泛函</a></li>
</ul></li>
<li class="chapter" data-level="19.8" data-path="p-advfunc.html"><a href="p-advfunc.html#p-advfunc-factory"><i class="fa fa-check"></i><b>19.8</b> 函数工厂</a><ul>
<li class="chapter" data-level="19.8.1" data-path="p-advfunc.html"><a href="p-advfunc.html#p-advfunc-factory-clex"><i class="fa fa-check"></i><b>19.8.1</b> 闭包例子</a></li>
<li class="chapter" data-level="19.8.2" data-path="p-advfunc.html"><a href="p-advfunc.html#p-advfunc-factory-lazy"><i class="fa fa-check"></i><b>19.8.2</b> 动态查找和懒惰求值引起的问题</a></li>
<li class="chapter" data-level="19.8.3" data-path="p-advfunc.html"><a href="p-advfunc.html#p-advfunc-factory-mem"><i class="fa fa-check"></i><b>19.8.3</b> 函数工厂的内存负担</a></li>
<li class="chapter" data-level="19.8.4" data-path="p-advfunc.html"><a href="p-advfunc.html#p-advfunc-operator"><i class="fa fa-check"></i><b>19.8.4</b> 函数算子</a></li>
</ul></li>
<li class="chapter" data-level="19.9" data-path="p-advfunc.html"><a href="p-advfunc.html#p-advfunc-env"><i class="fa fa-check"></i><b>19.9</b> 环境</a><ul>
<li class="chapter" data-level="19.9.1" data-path="p-advfunc.html"><a href="p-advfunc.html#p-advfunc-env-def"><i class="fa fa-check"></i><b>19.9.1</b> 基本概念</a></li>
<li class="chapter" data-level="19.9.2" data-path="p-advfunc.html"><a href="p-advfunc.html#p-advfunc-env-recurs"><i class="fa fa-check"></i><b>19.9.2</b> 逐层向上访问环境</a></li>
<li class="chapter" data-level="19.9.3" data-path="p-advfunc.html"><a href="p-advfunc.html#p-advfunc-env-spec"><i class="fa fa-check"></i><b>19.9.3</b> 特殊环境</a></li>
<li class="chapter" data-level="19.9.4" data-path="p-advfunc.html"><a href="p-advfunc.html#p-advfunc-env-callst"><i class="fa fa-check"></i><b>19.9.4</b> 调用栈</a></li>
<li class="chapter" data-level="19.9.5" data-path="p-advfunc.html"><a href="p-advfunc.html#p-advfunc-env-usedt"><i class="fa fa-check"></i><b>19.9.5</b> 将环境用作一般数据结构</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>IV 制作研究报告和图书</b></span></li>
<li class="chapter" data-level="20" data-path="knitr.html"><a href="knitr.html"><i class="fa fa-check"></i><b>20</b> 用R制作研究报告</a></li>
<li class="chapter" data-level="21" data-path="markdown.html"><a href="markdown.html"><i class="fa fa-check"></i><b>21</b> Markdown格式</a><ul>
<li class="chapter" data-level="21.1" data-path="markdown.html"><a href="markdown.html#markdown-intro"><i class="fa fa-check"></i><b>21.1</b> 介绍</a></li>
<li class="chapter" data-level="21.2" data-path="markdown.html"><a href="markdown.html#markdown-app"><i class="fa fa-check"></i><b>21.2</b> Markdown格式文件的应用</a></li>
<li class="chapter" data-level="21.3" data-path="markdown.html"><a href="markdown.html#markdown-format"><i class="fa fa-check"></i><b>21.3</b> markdown格式说明</a><ul>
<li class="chapter" data-level="21.3.1" data-path="markdown.html"><a href="markdown.html#markdown-format-intro"><i class="fa fa-check"></i><b>21.3.1</b> 概述</a></li>
<li class="chapter" data-level="21.3.2" data-path="markdown.html"><a href="markdown.html#markdown-format-paragraph"><i class="fa fa-check"></i><b>21.3.2</b> 段落</a></li>
<li class="chapter" data-level="21.3.3" data-path="markdown.html"><a href="markdown.html#markdown-format-inline"><i class="fa fa-check"></i><b>21.3.3</b> 段内文字格式</a></li>
<li class="chapter" data-level="21.3.4" data-path="markdown.html"><a href="markdown.html#markdown-format-header"><i class="fa fa-check"></i><b>21.3.4</b> 标题和分隔线</a></li>
<li class="chapter" data-level="21.3.5" data-path="markdown.html"><a href="markdown.html#markdown-format-cite"><i class="fa fa-check"></i><b>21.3.5</b> 引用段落</a></li>
<li class="chapter" data-level="21.3.6" data-path="markdown.html"><a href="markdown.html#markdown-format-list"><i class="fa fa-check"></i><b>21.3.6</b> 列表</a></li>
<li class="chapter" data-level="21.3.7" data-path="markdown.html"><a href="markdown.html#markdown-format-code"><i class="fa fa-check"></i><b>21.3.7</b> 源程序</a></li>
<li class="chapter" data-level="21.3.8" data-path="markdown.html"><a href="markdown.html#markdown-format-link"><i class="fa fa-check"></i><b>21.3.8</b> 链接</a></li>
<li class="chapter" data-level="21.3.9" data-path="markdown.html"><a href="markdown.html#markdown-format-fig"><i class="fa fa-check"></i><b>21.3.9</b> 插入图形</a></li>
<li class="chapter" data-level="21.3.10" data-path="markdown.html"><a href="markdown.html#markdown-format-table"><i class="fa fa-check"></i><b>21.3.10</b> 表格</a></li>
</ul></li>
<li class="chapter" data-level="21.4" data-path="markdown.html"><a href="markdown.html#markdown-pandoc"><i class="fa fa-check"></i><b>21.4</b> 附录：pandoc软件介绍</a></li>
</ul></li>
<li class="chapter" data-level="22" data-path="rmarkdown.html"><a href="rmarkdown.html"><i class="fa fa-check"></i><b>22</b> R Markdown文件格式</a><ul>
<li class="chapter" data-level="22.1" data-path="rmarkdown.html"><a href="rmarkdown.html#rmd-intro"><i class="fa fa-check"></i><b>22.1</b> R Markdown文件</a></li>
<li class="chapter" data-level="22.2" data-path="rmarkdown.html"><a href="rmarkdown.html#rmd-compile"><i class="fa fa-check"></i><b>22.2</b> R Markdown文件的编译</a><ul>
<li class="chapter" data-level="22.2.1" data-path="rmarkdown.html"><a href="rmarkdown.html#rmd-compile-proc"><i class="fa fa-check"></i><b>22.2.1</b> 编译的实际过程</a></li>
</ul></li>
<li class="chapter" data-level="22.3" data-path="rmarkdown.html"><a href="rmarkdown.html#rmd-rcode"><i class="fa fa-check"></i><b>22.3</b> 在R Markdown文件中插入R代码</a></li>
<li class="chapter" data-level="22.4" data-path="rmarkdown.html"><a href="rmarkdown.html#rmd-kable"><i class="fa fa-check"></i><b>22.4</b> 输出表格</a></li>
<li class="chapter" data-level="22.5" data-path="rmarkdown.html"><a href="rmarkdown.html#rmd-graph"><i class="fa fa-check"></i><b>22.5</b> 利用R程序插图</a></li>
<li class="chapter" data-level="22.6" data-path="rmarkdown.html"><a href="rmarkdown.html#rmd-rcode-opt"><i class="fa fa-check"></i><b>22.6</b> 代码段选项</a><ul>
<li class="chapter" data-level="22.6.1" data-path="rmarkdown.html"><a href="rmarkdown.html#rmd-rcode-outformat"><i class="fa fa-check"></i><b>22.6.1</b> 代码和文本输出结果格式</a></li>
<li class="chapter" data-level="22.6.2" data-path="rmarkdown.html"><a href="rmarkdown.html#rmd-rcode-figopt"><i class="fa fa-check"></i><b>22.6.2</b> 图形选项</a></li>
<li class="chapter" data-level="22.6.3" data-path="rmarkdown.html"><a href="rmarkdown.html#rmd-rcode-cache"><i class="fa fa-check"></i><b>22.6.3</b> 缓存(cache)选项</a></li>
</ul></li>
<li class="chapter" data-level="22.7" data-path="rmarkdown.html"><a href="rmarkdown.html#rmd--sectionlink"><i class="fa fa-check"></i><b>22.7</b> 章节目录链接问题</a></li>
<li class="chapter" data-level="22.8" data-path="rmarkdown.html"><a href="rmarkdown.html#markdown-formula"><i class="fa fa-check"></i><b>22.8</b> 数学公式</a><ul>
<li class="chapter" data-level="22.8.1" data-path="rmarkdown.html"><a href="rmarkdown.html#markdown-formula-intro"><i class="fa fa-check"></i><b>22.8.1</b> 在Markdown中输入数学公式</a></li>
<li class="chapter" data-level="22.8.2" data-path="rmarkdown.html"><a href="rmarkdown.html#markdown-formula-type"><i class="fa fa-check"></i><b>22.8.2</b> 数学公式类别</a></li>
<li class="chapter" data-level="22.8.3" data-path="rmarkdown.html"><a href="rmarkdown.html#markdown-formula-basic"><i class="fa fa-check"></i><b>22.8.3</b> 基本功能</a></li>
<li class="chapter" data-level="22.8.4" data-path="rmarkdown.html"><a href="rmarkdown.html#markdown-formula-accent"><i class="fa fa-check"></i><b>22.8.4</b> 修饰符</a></li>
<li class="chapter" data-level="22.8.5" data-path="rmarkdown.html"><a href="rmarkdown.html#markdown-formula-align"><i class="fa fa-check"></i><b>22.8.5</b> 对齐与矩阵</a></li>
<li class="chapter" data-level="22.8.6" data-path="rmarkdown.html"><a href="rmarkdown.html#markdown-formula-fonts"><i class="fa fa-check"></i><b>22.8.6</b> 特殊字体</a></li>
</ul></li>
<li class="chapter" data-level="22.9" data-path="rmarkdown.html"><a href="rmarkdown.html#rmd-engines"><i class="fa fa-check"></i><b>22.9</b> 其它编程语言引擎</a></li>
<li class="chapter" data-level="22.10" data-path="rmarkdown.html"><a href="rmarkdown.html#rmd-interact"><i class="fa fa-check"></i><b>22.10</b> 交互内容</a></li>
<li class="chapter" data-level="22.11" data-path="rmarkdown.html"><a href="rmarkdown.html#rmarkdown-attryaml"><i class="fa fa-check"></i><b>22.11</b> 属性设置</a><ul>
<li class="chapter" data-level="22.11.1" data-path="rmarkdown.html"><a href="rmarkdown.html#rmarkdown-yaml"><i class="fa fa-check"></i><b>22.11.1</b> YAML元数据</a></li>
<li class="chapter" data-level="22.11.2" data-path="rmarkdown.html"><a href="rmarkdown.html#rmd-output-types"><i class="fa fa-check"></i><b>22.11.2</b> 输出格式</a></li>
<li class="chapter" data-level="22.11.3" data-path="rmarkdown.html"><a href="rmarkdown.html#rmd-output-attr"><i class="fa fa-check"></i><b>22.11.3</b> 输出格式设置</a></li>
<li class="chapter" data-level="22.11.4" data-path="rmarkdown.html"><a href="rmarkdown.html#rmd-output-attr-toc"><i class="fa fa-check"></i><b>22.11.4</b> 目录设置</a></li>
<li class="chapter" data-level="22.11.5" data-path="rmarkdown.html"><a href="rmarkdown.html#rmd-output-attr-numsec"><i class="fa fa-check"></i><b>22.11.5</b> 章节自动编号</a></li>
<li class="chapter" data-level="22.11.6" data-path="rmarkdown.html"><a href="rmarkdown.html#rmd-output-attr-wordnumsec"><i class="fa fa-check"></i><b>22.11.6</b> Word输出章节自动编号及模板功能</a></li>
<li class="chapter" data-level="22.11.7" data-path="rmarkdown.html"><a href="rmarkdown.html#rmd-output-htmlspecific"><i class="fa fa-check"></i><b>22.11.7</b> HTML特有输出格式设置</a></li>
<li class="chapter" data-level="22.11.8" data-path="rmarkdown.html"><a href="rmarkdown.html#rmd-mathjax"><i class="fa fa-check"></i><b>22.11.8</b> 关于数学公式支持的设置</a></li>
<li class="chapter" data-level="22.11.9" data-path="rmarkdown.html"><a href="rmarkdown.html#rmd-output-yml"><i class="fa fa-check"></i><b>22.11.9</b> 输出设置文件</a></li>
</ul></li>
<li class="chapter" data-level="22.12" data-path="rmarkdown.html"><a href="rmarkdown.html#rmd-latex"><i class="fa fa-check"></i><b>22.12</b> LaTeX和PDF输出</a><ul>
<li class="chapter" data-level="22.12.1" data-path="rmarkdown.html"><a href="rmarkdown.html#rmd-latex-tinytex"><i class="fa fa-check"></i><b>22.12.1</b> TinyTex的安装使用</a></li>
<li class="chapter" data-level="22.12.2" data-path="rmarkdown.html"><a href="rmarkdown.html#rmd-latex-yaml"><i class="fa fa-check"></i><b>22.12.2</b> Rmd中Latex设置</a></li>
</ul></li>
<li class="chapter" data-level="22.13" data-path="rmarkdown.html"><a href="rmarkdown.html#rmarkdown-rticles"><i class="fa fa-check"></i><b>22.13</b> 生成期刊文章</a></li>
<li class="chapter" data-level="22.14" data-path="rmarkdown.html"><a href="rmarkdown.html#rmarkdown-app1"><i class="fa fa-check"></i><b>22.14</b> 附录：经验与问题</a><ul>
<li class="chapter" data-level="22.14.1" data-path="rmarkdown.html"><a href="rmarkdown.html#rmarkdown-app1-wordtemplate"><i class="fa fa-check"></i><b>22.14.1</b> Word模板制作</a></li>
<li class="chapter" data-level="22.14.2" data-path="rmarkdown.html"><a href="rmarkdown.html#rmarkdown-app1-math"><i class="fa fa-check"></i><b>22.14.2</b> 数学公式设置补充</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="23" data-path="bookdown.html"><a href="bookdown.html"><i class="fa fa-check"></i><b>23</b> 用bookdown制作图书</a><ul>
<li class="chapter" data-level="23.1" data-path="bookdown.html"><a href="bookdown.html#bookdown-intro"><i class="fa fa-check"></i><b>23.1</b> 介绍</a></li>
<li class="chapter" data-level="23.2" data-path="bookdown.html"><a href="bookdown.html#bookdown-settings"><i class="fa fa-check"></i><b>23.2</b> 一本书的设置</a></li>
<li class="chapter" data-level="23.3" data-path="bookdown.html"><a href="bookdown.html#bookdown-sectioning"><i class="fa fa-check"></i><b>23.3</b> 章节结构</a></li>
<li class="chapter" data-level="23.4" data-path="bookdown.html"><a href="bookdown.html#bookdown-compile"><i class="fa fa-check"></i><b>23.4</b> 书的编译</a></li>
<li class="chapter" data-level="23.5" data-path="bookdown.html"><a href="bookdown.html#bookdown-cref"><i class="fa fa-check"></i><b>23.5</b> 交叉引用</a></li>
<li class="chapter" data-level="23.6" data-path="bookdown.html"><a href="bookdown.html#bookdown-formula"><i class="fa fa-check"></i><b>23.6</b> 数学公式和公式编号</a></li>
<li class="chapter" data-level="23.7" data-path="bookdown.html"><a href="bookdown.html#bookdown-theorem"><i class="fa fa-check"></i><b>23.7</b> 定理类编号</a></li>
<li class="chapter" data-level="23.8" data-path="bookdown.html"><a href="bookdown.html#bookdown-bib"><i class="fa fa-check"></i><b>23.8</b> 文献引用</a></li>
<li class="chapter" data-level="23.9" data-path="bookdown.html"><a href="bookdown.html#bookdown-graph"><i class="fa fa-check"></i><b>23.9</b> 插图</a></li>
<li class="chapter" data-level="23.10" data-path="bookdown.html"><a href="bookdown.html#bookdown-table"><i class="fa fa-check"></i><b>23.10</b> 表格</a><ul>
<li class="chapter" data-level="23.10.1" data-path="bookdown.html"><a href="bookdown.html#bookdown-table-md"><i class="fa fa-check"></i><b>23.10.1</b> Markdown表格</a></li>
<li class="chapter" data-level="23.10.2" data-path="bookdown.html"><a href="bookdown.html#bookdown-table-kable"><i class="fa fa-check"></i><b>23.10.2</b> 用<code>kable()</code>函数制作表格</a></li>
<li class="chapter" data-level="23.10.3" data-path="bookdown.html"><a href="bookdown.html#bookdown-table-kable"><i class="fa fa-check"></i><b>23.10.3</b> R中其它制作表格的包</a></li>
</ul></li>
<li class="chapter" data-level="23.11" data-path="bookdown.html"><a href="bookdown.html#bookdown-mathjax"><i class="fa fa-check"></i><b>23.11</b> 数学公式的设置</a></li>
<li class="chapter" data-level="23.12" data-path="bookdown.html"><a href="bookdown.html#bookdown-exp"><i class="fa fa-check"></i><b>23.12</b> 使用经验</a></li>
<li class="chapter" data-level="23.13" data-path="bookdown.html"><a href="bookdown.html#bookdown-bugs"><i class="fa fa-check"></i><b>23.13</b> bookdown的一些使用问题</a></li>
</ul></li>
<li class="chapter" data-level="24" data-path="rmdsite.html"><a href="rmdsite.html"><i class="fa fa-check"></i><b>24</b> 用R Markdown制作简易网站</a><ul>
<li class="chapter" data-level="24.1" data-path="rmdsite.html"><a href="rmdsite.html#rmdsite-intro"><i class="fa fa-check"></i><b>24.1</b> 介绍</a></li>
<li class="chapter" data-level="24.2" data-path="rmdsite.html"><a href="rmdsite.html#rmdsite-rmarkdown"><i class="fa fa-check"></i><b>24.2</b> 简易网站制作</a><ul>
<li class="chapter" data-level="24.2.1" data-path="rmdsite.html"><a href="rmdsite.html#rmdsite-rmarkdown-struct"><i class="fa fa-check"></i><b>24.2.1</b> 网站结构</a></li>
<li class="chapter" data-level="24.2.2" data-path="rmdsite.html"><a href="rmdsite.html#rmdsite-rmarkdown-build"><i class="fa fa-check"></i><b>24.2.2</b> 编译</a></li>
<li class="chapter" data-level="24.2.3" data-path="rmdsite.html"><a href="rmdsite.html#rmdsite-rmarkdown-pages"><i class="fa fa-check"></i><b>24.2.3</b> 内容文件</a></li>
<li class="chapter" data-level="24.2.4" data-path="rmdsite.html"><a href="rmdsite.html#rmdsite-rmarkdown-config"><i class="fa fa-check"></i><b>24.2.4</b> 网站设置</a></li>
</ul></li>
<li class="chapter" data-level="24.3" data-path="rmdsite.html"><a href="rmdsite.html#blogdown"><i class="fa fa-check"></i><b>24.3</b> 用blogdown制作网站</a><ul>
<li class="chapter" data-level="24.3.1" data-path="rmdsite.html"><a href="rmdsite.html#blogd-new"><i class="fa fa-check"></i><b>24.3.1</b> 生成新网站的框架</a></li>
<li class="chapter" data-level="24.3.2" data-path="rmdsite.html"><a href="rmdsite.html#blogd-page"><i class="fa fa-check"></i><b>24.3.2</b> 网页内容文件及其设置</a></li>
<li class="chapter" data-level="24.3.3" data-path="rmdsite.html"><a href="rmdsite.html#blogd-workflow"><i class="fa fa-check"></i><b>24.3.3</b> 初学者的工作流程</a></li>
<li class="chapter" data-level="24.3.4" data-path="rmdsite.html"><a href="rmdsite.html#blogd-config"><i class="fa fa-check"></i><b>24.3.4</b> 网站设置文件</a></li>
<li class="chapter" data-level="24.3.5" data-path="rmdsite.html"><a href="rmdsite.html#blogd-static"><i class="fa fa-check"></i><b>24.3.5</b> 静态文件</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="25" data-path="slides.html"><a href="slides.html"><i class="fa fa-check"></i><b>25</b> 制作幻灯片</a><ul>
<li class="chapter" data-level="25.1" data-path="slides.html"><a href="slides.html#rmd-slides-intro"><i class="fa fa-check"></i><b>25.1</b> 介绍</a></li>
<li class="chapter" data-level="25.2" data-path="slides.html"><a href="slides.html#rmd-slidy"><i class="fa fa-check"></i><b>25.2</b> Slidy幻灯片</a><ul>
<li class="chapter" data-level="25.2.1" data-path="slides.html"><a href="slides.html#rmd-slidy-format"><i class="fa fa-check"></i><b>25.2.1</b> 文件格式</a></li>
<li class="chapter" data-level="25.2.2" data-path="slides.html"><a href="slides.html#rmd-slidy-compile"><i class="fa fa-check"></i><b>25.2.2</b> 幻灯片编译</a></li>
<li class="chapter" data-level="25.2.3" data-path="slides.html"><a href="slides.html#rmd-slidy-play"><i class="fa fa-check"></i><b>25.2.3</b> 播放控制</a></li>
<li class="chapter" data-level="25.2.4" data-path="slides.html"><a href="slides.html#rmd-slidy-handout"><i class="fa fa-check"></i><b>25.2.4</b> 生成单页HTML</a></li>
<li class="chapter" data-level="25.2.5" data-path="slides.html"><a href="slides.html#rmd-slidy-mathjax"><i class="fa fa-check"></i><b>25.2.5</b> 数学公式处理与输出设置文件</a></li>
<li class="chapter" data-level="25.2.6" data-path="slides.html"><a href="slides.html#rmd-slidy-options"><i class="fa fa-check"></i><b>25.2.6</b> 其它选项</a></li>
<li class="chapter" data-level="25.2.7" data-path="slides.html"><a href="slides.html#rmd-slidy-laser"><i class="fa fa-check"></i><b>25.2.7</b> slidy幻灯片激光笔失效问题的修改</a></li>
</ul></li>
<li class="chapter" data-level="25.3" data-path="slides.html"><a href="slides.html#rmdslides-pp"><i class="fa fa-check"></i><b>25.3</b> MS PowerPoint幻灯片</a></li>
<li class="chapter" data-level="25.4" data-path="slides.html"><a href="slides.html#rmdslides-beamer"><i class="fa fa-check"></i><b>25.4</b> Bearmer幻灯片格式</a></li>
<li class="chapter" data-level="25.5" data-path="slides.html"><a href="slides.html#rmdslides-rpres"><i class="fa fa-check"></i><b>25.5</b> R Presentation格式</a></li>
</ul></li>
<li class="part"><span><b>V 数据整理与汇总</b></span></li>
<li class="chapter" data-level="26" data-path="summary-manip.html"><a href="summary-manip.html"><i class="fa fa-check"></i><b>26</b> 数据整理</a><ul>
<li class="chapter" data-level="26.1" data-path="summary-manip.html"><a href="summary-manip.html#summm-tidyv"><i class="fa fa-check"></i><b>26.1</b> tidyverse系统</a></li>
<li class="chapter" data-level="26.2" data-path="summary-manip.html"><a href="summary-manip.html#dplyr-filter"><i class="fa fa-check"></i><b>26.2</b> 用<code>filter()</code>选择行子集</a></li>
<li class="chapter" data-level="26.3" data-path="summary-manip.html"><a href="summary-manip.html#dplyr-head"><i class="fa fa-check"></i><b>26.3</b> 按行序号选择行子集</a></li>
<li class="chapter" data-level="26.4" data-path="summary-manip.html"><a href="summary-manip.html#dplyr-samplen"><i class="fa fa-check"></i><b>26.4</b> 用<code>sample_n()</code>对观测随机抽样</a></li>
<li class="chapter" data-level="26.5" data-path="summary-manip.html"><a href="summary-manip.html#dplyr-distinct"><i class="fa fa-check"></i><b>26.5</b> 用<code>distinct()</code>去除重复行</a></li>
<li class="chapter" data-level="26.6" data-path="summary-manip.html"><a href="summary-manip.html#tidyr-dropna"><i class="fa fa-check"></i><b>26.6</b> 用<code>drop_na()</code>去除指定的变量有缺失值的行</a></li>
<li class="chapter" data-level="26.7" data-path="summary-manip.html"><a href="summary-manip.html#dplyr-select"><i class="fa fa-check"></i><b>26.7</b> 用<code>select()</code>选择列子集</a></li>
<li class="chapter" data-level="26.8" data-path="summary-manip.html"><a href="summary-manip.html#dplyr-pull"><i class="fa fa-check"></i><b>26.8</b> 取出单个变量为向量</a></li>
<li class="chapter" data-level="26.9" data-path="summary-manip.html"><a href="summary-manip.html#dplyr-arrange"><i class="fa fa-check"></i><b>26.9</b> 用<code>arrange()</code>排序</a></li>
<li class="chapter" data-level="26.10" data-path="summary-manip.html"><a href="summary-manip.html#dplyr-rename"><i class="fa fa-check"></i><b>26.10</b> 用<code>rename()</code>修改变量名</a></li>
<li class="chapter" data-level="26.11" data-path="summary-manip.html"><a href="summary-manip.html#dplyr-mutate"><i class="fa fa-check"></i><b>26.11</b> 用<code>mutate()</code>计算新变量</a></li>
<li class="chapter" data-level="26.12" data-path="summary-manip.html"><a href="summary-manip.html#dplyr-transmute"><i class="fa fa-check"></i><b>26.12</b> 用<code>tranmute()</code>生成新变量的数据框</a></li>
<li class="chapter" data-level="26.13" data-path="summary-manip.html"><a href="summary-manip.html#dplyr-pipe"><i class="fa fa-check"></i><b>26.13</b> 用管道连接多次操作</a></li>
<li class="chapter" data-level="26.14" data-path="summary-manip.html"><a href="summary-manip.html#tidyr-longer"><i class="fa fa-check"></i><b>26.14</b> 宽表转换为长表</a><ul>
<li class="chapter" data-level="26.14.1" data-path="summary-manip.html"><a href="summary-manip.html#tidyr-longer-pl"><i class="fa fa-check"></i><b>26.14.1</b> <code>pivot_longer</code>函数</a></li>
<li class="chapter" data-level="26.14.2" data-path="summary-manip.html"><a href="summary-manip.html#tidyr-longer-prefixvalue"><i class="fa fa-check"></i><b>26.14.2</b> 从列名中提取数值</a></li>
<li class="chapter" data-level="26.14.3" data-path="summary-manip.html"><a href="summary-manip.html#tidyr-longer-colnamemultclassv"><i class="fa fa-check"></i><b>26.14.3</b> 从列名中提取多个分类变量值</a></li>
<li class="chapter" data-level="26.14.4" data-path="summary-manip.html"><a href="summary-manip.html#tidyr-longer-multvarsmultclassv"><i class="fa fa-check"></i><b>26.14.4</b> 一行中有多个属性的多次观测的情形</a></li>
</ul></li>
<li class="chapter" data-level="26.15" data-path="summary-manip.html"><a href="summary-manip.html#dplyr-wider"><i class="fa fa-check"></i><b>26.15</b> 长表转换为宽表</a><ul>
<li class="chapter" data-level="26.15.1" data-path="summary-manip.html"><a href="summary-manip.html#dplyr-wider-sepvars"><i class="fa fa-check"></i><b>26.15.1</b> 将多个混在一起的变量拆开</a></li>
<li class="chapter" data-level="26.15.2" data-path="summary-manip.html"><a href="summary-manip.html#dplyr-wider-combtimes"><i class="fa fa-check"></i><b>26.15.2</b> 将多个类别合并到一个观测</a></li>
<li class="chapter" data-level="26.15.3" data-path="summary-manip.html"><a href="summary-manip.html#dplyr-wider-combcross"><i class="fa fa-check"></i><b>26.15.3</b> 将交叉类别合并到一个观测</a></li>
<li class="chapter" data-level="26.15.4" data-path="summary-manip.html"><a href="summary-manip.html#dplyr-wider-mvmest"><i class="fa fa-check"></i><b>26.15.4</b> 多个变量的多种值</a></li>
<li class="chapter" data-level="26.15.5" data-path="summary-manip.html"><a href="summary-manip.html#dplyr-wider-mixed"><i class="fa fa-check"></i><b>26.15.5</b> 长宽转换混合使用</a></li>
</ul></li>
<li class="chapter" data-level="26.16" data-path="summary-manip.html"><a href="summary-manip.html#dplyr-spearate"><i class="fa fa-check"></i><b>26.16</b> 拆分数据列</a></li>
<li class="chapter" data-level="26.17" data-path="summary-manip.html"><a href="summary-manip.html#dplyr-unite"><i class="fa fa-check"></i><b>26.17</b> 合并数据列</a></li>
<li class="chapter" data-level="26.18" data-path="summary-manip.html"><a href="summary-manip.html#summ-trans-combv"><i class="fa fa-check"></i><b>26.18</b> 数据框纵向合并</a></li>
<li class="chapter" data-level="26.19" data-path="summary-manip.html"><a href="summary-manip.html#dplyr-join"><i class="fa fa-check"></i><b>26.19</b> 横向合并</a></li>
<li class="chapter" data-level="26.20" data-path="summary-manip.html"><a href="summary-manip.html#dplyr-semi"><i class="fa fa-check"></i><b>26.20</b> 利用第二个数据集筛选</a></li>
<li class="chapter" data-level="26.21" data-path="summary-manip.html"><a href="summary-manip.html#dplyr-set"><i class="fa fa-check"></i><b>26.21</b> 数据集的集合操作</a></li>
<li class="chapter" data-level="26.22" data-path="summary-manip.html"><a href="summary-manip.html#summ-trans-standard"><i class="fa fa-check"></i><b>26.22</b> 标准化</a></li>
</ul></li>
<li class="chapter" data-level="27" data-path="summary-summ.html"><a href="summary-summ.html"><i class="fa fa-check"></i><b>27</b> 数据汇总</a><ul>
<li class="chapter" data-level="27.1" data-path="summary-summ.html"><a href="summary-summ.html#dplyr-summ"><i class="fa fa-check"></i><b>27.1</b> 用dplyr作数据汇总</a></li>
<li class="chapter" data-level="27.2" data-path="summary-summ.html"><a href="summary-summ.html#dplyr-summat"><i class="fa fa-check"></i><b>27.2</b> 多个变量的汇总</a></li>
<li class="chapter" data-level="27.3" data-path="summary-summ.html"><a href="summary-summ.html#dplyr-groupby"><i class="fa fa-check"></i><b>27.3</b> 用dplyr作数据分组汇总</a></li>
<li class="chapter" data-level="27.4" data-path="summary-summ.html"><a href="summary-summ.html#dplyr-crossgroup"><i class="fa fa-check"></i><b>27.4</b> 交叉分类的汇总</a></li>
<li class="chapter" data-level="27.5" data-path="summary-summ.html"><a href="summary-summ.html#summ-nest"><i class="fa fa-check"></i><b>27.5</b> tibble中的列表列</a><ul>
<li class="chapter" data-level="27.5.1" data-path="summary-summ.html"><a href="summary-summ.html#summ-nest-intro"><i class="fa fa-check"></i><b>27.5.1</b> <code>nest</code>和<code>unnest</code></a></li>
<li class="chapter" data-level="27.5.2" data-path="summary-summ.html"><a href="summary-summ.html#summ-nest-groupby"><i class="fa fa-check"></i><b>27.5.2</b> <code>group_by</code>与<code>nest</code>配合</a></li>
<li class="chapter" data-level="27.5.3" data-path="summary-summ.html"><a href="summary-summ.html#summ-nest-summarise"><i class="fa fa-check"></i><b>27.5.3</b> <code>summarise</code>统计量用列表表示</a></li>
<li class="chapter" data-level="27.5.4" data-path="summary-summ.html"><a href="summary-summ.html#summ-nest-unnest-grammar"><i class="fa fa-check"></i><b>27.5.4</b> <code>unnest</code>的语法格式</a></li>
<li class="chapter" data-level="27.5.5" data-path="summary-summ.html"><a href="summary-summ.html#summ-nest-direct"><i class="fa fa-check"></i><b>27.5.5</b> 直接生成列表类型的列</a></li>
</ul></li>
<li class="chapter" data-level="27.6" data-path="summary-summ.html"><a href="summary-summ.html#summ-base"><i class="fa fa-check"></i><b>27.6</b> 基本R的汇总功能</a><ul>
<li class="chapter" data-level="27.6.1" data-path="summary-summ.html"><a href="summary-summ.html#summ-base-summary"><i class="fa fa-check"></i><b>27.6.1</b> <code>summary()</code>函数</a></li>
<li class="chapter" data-level="27.6.2" data-path="summary-summ.html"><a href="summary-summ.html#summ-cont"><i class="fa fa-check"></i><b>27.6.2</b> 连续型变量概括函数</a></li>
<li class="chapter" data-level="27.6.3" data-path="summary-summ.html"><a href="summary-summ.html#summ-fact"><i class="fa fa-check"></i><b>27.6.3</b> 分类变量概括</a></li>
<li class="chapter" data-level="27.6.4" data-path="summary-summ.html"><a href="summary-summ.html#summ-df"><i class="fa fa-check"></i><b>27.6.4</b> 数据框概括</a></li>
</ul></li>
<li class="chapter" data-level="27.7" data-path="summary-summ.html"><a href="summary-summ.html#summ-by"><i class="fa fa-check"></i><b>27.7</b> 用基本R作分类概括</a><ul>
<li class="chapter" data-level="27.7.1" data-path="summary-summ.html"><a href="summary-summ.html#summ-by-tapply"><i class="fa fa-check"></i><b>27.7.1</b> 用<code>tapply()</code>分组概括向量</a></li>
<li class="chapter" data-level="27.7.2" data-path="summary-summ.html"><a href="summary-summ.html#summ-by-aggregate"><i class="fa fa-check"></i><b>27.7.2</b> 用<code>aggregate()</code>分组概括数据框</a></li>
<li class="chapter" data-level="27.7.3" data-path="summary-summ.html"><a href="summary-summ.html#summ-by-split"><i class="fa fa-check"></i><b>27.7.3</b> 用<code>split()</code>函数分组后概括</a></li>
</ul></li>
<li class="chapter" data-level="27.8" data-path="summary-summ.html"><a href="summary-summ.html#summ-by-plyr"><i class="fa fa-check"></i><b>27.8</b> 用plyr包进行分类概括</a></li>
<li class="chapter" data-level="27.9" data-path="summary-summ.html"><a href="summary-summ.html#summ-by-exer"><i class="fa fa-check"></i><b>27.9</b> 练习</a></li>
</ul></li>
<li class="part"><span><b>VI 绘图</b></span></li>
<li class="chapter" data-level="28" data-path="graph.html"><a href="graph.html"><i class="fa fa-check"></i><b>28</b> 基本R绘图</a><ul>
<li class="chapter" data-level="28.1" data-path="graph.html"><a href="graph.html#graph-ph"><i class="fa fa-check"></i><b>28.1</b> 常用高级图形</a><ul>
<li class="chapter" data-level="28.1.1" data-path="graph.html"><a href="graph.html#graph-ph-barplot"><i class="fa fa-check"></i><b>28.1.1</b> 条形图</a></li>
<li class="chapter" data-level="28.1.2" data-path="graph.html"><a href="graph.html#graph-ph-hist"><i class="fa fa-check"></i><b>28.1.2</b> 直方图和密度估计图</a></li>
<li class="chapter" data-level="28.1.3" data-path="graph.html"><a href="graph.html#graph-ph-boxplot"><i class="fa fa-check"></i><b>28.1.3</b> 盒形图</a></li>
<li class="chapter" data-level="28.1.4" data-path="graph.html"><a href="graph.html#graph-pr-qq"><i class="fa fa-check"></i><b>28.1.4</b> 正态QQ图</a></li>
<li class="chapter" data-level="28.1.5" data-path="graph.html"><a href="graph.html#graph-ph-plot"><i class="fa fa-check"></i><b>28.1.5</b> 散点图</a></li>
<li class="chapter" data-level="28.1.6" data-path="graph.html"><a href="graph.html#graph-ph-curve"><i class="fa fa-check"></i><b>28.1.6</b> 曲线图</a></li>
<li class="chapter" data-level="28.1.7" data-path="graph.html"><a href="graph.html#graph-ph-3d"><i class="fa fa-check"></i><b>28.1.7</b> 三维图</a></li>
<li class="chapter" data-level="28.1.8" data-path="graph.html"><a href="graph.html#graph-ph-rgl"><i class="fa fa-check"></i><b>28.1.8</b> 动态三维图</a></li>
</ul></li>
<li class="chapter" data-level="28.2" data-path="graph.html"><a href="graph.html#graph-pl"><i class="fa fa-check"></i><b>28.2</b> 低级图形函数</a><ul>
<li class="chapter" data-level="28.2.1" data-path="graph.html"><a href="graph.html#graph-pl-abline"><i class="fa fa-check"></i><b>28.2.1</b> <code>abline()</code></a></li>
<li class="chapter" data-level="28.2.2" data-path="graph.html"><a href="graph.html#graph-pl-points"><i class="fa fa-check"></i><b>28.2.2</b> <code>points()</code></a></li>
<li class="chapter" data-level="28.2.3" data-path="graph.html"><a href="graph.html#graph-pl-lines"><i class="fa fa-check"></i><b>28.2.3</b> <code>lines()</code></a></li>
<li class="chapter" data-level="28.2.4" data-path="graph.html"><a href="graph.html#graph-pl-legend"><i class="fa fa-check"></i><b>28.2.4</b> 图例</a></li>
<li class="chapter" data-level="28.2.5" data-path="graph.html"><a href="graph.html#graph-pl-axis"><i class="fa fa-check"></i><b>28.2.5</b> <code>axis()</code></a></li>
<li class="chapter" data-level="28.2.6" data-path="graph.html"><a href="graph.html#graph-pl-text"><i class="fa fa-check"></i><b>28.2.6</b> <code>text()</code></a></li>
<li class="chapter" data-level="28.2.7" data-path="graph.html"><a href="graph.html#graph-pl-locator"><i class="fa fa-check"></i><b>28.2.7</b> <code>locator()</code>和<code>identify()</code></a></li>
</ul></li>
<li class="chapter" data-level="28.3" data-path="graph.html"><a href="graph.html#graph-par"><i class="fa fa-check"></i><b>28.3</b> 图形参数</a><ul>
<li class="chapter" data-level="28.3.1" data-path="graph.html"><a href="graph.html#graph-par-ex1"><i class="fa fa-check"></i><b>28.3.1</b> 例子：用图形参数解决barplot图形横坐标值过宽</a></li>
<li class="chapter" data-level="28.3.2" data-path="graph.html"><a href="graph.html#graph-par-elem"><i class="fa fa-check"></i><b>28.3.2</b> 图形元素控制</a></li>
<li class="chapter" data-level="28.3.3" data-path="graph.html"><a href="graph.html#graph-par-axis"><i class="fa fa-check"></i><b>28.3.3</b> 坐标轴与坐标刻度</a></li>
<li class="chapter" data-level="28.3.4" data-path="graph.html"><a href="graph.html#graph-par-mar"><i class="fa fa-check"></i><b>28.3.4</b> 图形边空</a></li>
<li class="chapter" data-level="28.3.5" data-path="graph.html"><a href="graph.html#graph-par-mfrow"><i class="fa fa-check"></i><b>28.3.5</b> 一页多图</a></li>
</ul></li>
<li class="chapter" data-level="28.4" data-path="graph.html"><a href="graph.html#graph-pout"><i class="fa fa-check"></i><b>28.4</b> 图形输出</a><ul>
<li class="chapter" data-level="28.4.1" data-path="graph.html"><a href="graph.html#graph-pout-pdf"><i class="fa fa-check"></i><b>28.4.1</b> PDF 输出</a></li>
<li class="chapter" data-level="28.4.2" data-path="graph.html"><a href="graph.html#graph-pout-png"><i class="fa fa-check"></i><b>28.4.2</b> PNG输出</a></li>
</ul></li>
<li class="chapter" data-level="28.5" data-path="graph.html"><a href="graph.html#graph-pzhn"><i class="fa fa-check"></i><b>28.5</b> 包含多种中文字体的图形</a></li>
<li class="chapter" data-level="28.6" data-path="graph.html"><a href="graph.html#graph-other"><i class="fa fa-check"></i><b>28.6</b> 其它图形</a><ul>
<li class="chapter" data-level="28.6.1" data-path="graph.html"><a href="graph.html#graph-other-corr"><i class="fa fa-check"></i><b>28.6.1</b> 相关系数图</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="29" data-path="ggplot2.html"><a href="ggplot2.html"><i class="fa fa-check"></i><b>29</b> ggplot作图入门</a><ul>
<li class="chapter" data-level="29.1" data-path="ggplot2.html"><a href="ggplot2.html#ggplot2-intro"><i class="fa fa-check"></i><b>29.1</b> 介绍</a></li>
<li class="chapter" data-level="29.2" data-path="ggplot2.html"><a href="ggplot2.html#ggplot2-principles"><i class="fa fa-check"></i><b>29.2</b> 作图的一般原则</a></li>
<li class="chapter" data-level="29.3" data-path="ggplot2.html"><a href="ggplot2.html#ggplot2-point"><i class="fa fa-check"></i><b>29.3</b> 散点图：ggplot入门</a><ul>
<li class="chapter" data-level="29.3.1" data-path="ggplot2.html"><a href="ggplot2.html#ggplot2-point-base"><i class="fa fa-check"></i><b>29.3.1</b> 基本的散点图</a></li>
<li class="chapter" data-level="29.3.2" data-path="ggplot2.html"><a href="ggplot2.html#ggplot2-point-layers"><i class="fa fa-check"></i><b>29.3.2</b> 逐步改善</a></li>
<li class="chapter" data-level="29.3.3" data-path="ggplot2.html"><a href="ggplot2.html#ggplot2-point-otheraes"><i class="fa fa-check"></i><b>29.3.3</b> 颜色、符号、线型等映射</a></li>
<li class="chapter" data-level="29.3.4" data-path="ggplot2.html"><a href="ggplot2.html#ggplot2-point-geomaes"><i class="fa fa-check"></i><b>29.3.4</b> 在geom函数中映射变量</a></li>
<li class="chapter" data-level="29.3.5" data-path="ggplot2.html"><a href="ggplot2.html#ggplot2-point-contcolor"><i class="fa fa-check"></i><b>29.3.5</b> 连续变量的颜色映射</a></li>
<li class="chapter" data-level="29.3.6" data-path="ggplot2.html"><a href="ggplot2.html#ggplot2-point-save"><i class="fa fa-check"></i><b>29.3.6</b> 保存图像</a></li>
</ul></li>
<li class="chapter" data-level="29.4" data-path="ggplot2.html"><a href="ggplot2.html#ggplot2-right"><i class="fa fa-check"></i><b>29.4</b> 折线图、分组、小图</a><ul>
<li class="chapter" data-level="29.4.1" data-path="ggplot2.html"><a href="ggplot2.html#ggplot2-right-group"><i class="fa fa-check"></i><b>29.4.1</b> 图形中的分组和折线图</a></li>
<li class="chapter" data-level="29.4.2" data-path="ggplot2.html"><a href="ggplot2.html#ggplot2-right-facet"><i class="fa fa-check"></i><b>29.4.2</b> 小图(facet)</a></li>
</ul></li>
<li class="chapter" data-level="29.5" data-path="ggplot2.html"><a href="ggplot2.html#ggplot2-bar-trans"><i class="fa fa-check"></i><b>29.5</b> 数据变换与条形图</a><ul>
<li class="chapter" data-level="29.5.1" data-path="ggplot2.html"><a href="ggplot2.html#ggplot2-right-morebar"><i class="fa fa-check"></i><b>29.5.1</b> 分段与并列条形图</a></li>
<li class="chapter" data-level="29.5.2" data-path="ggplot2.html"><a href="ggplot2.html#ggplot2-bar-morebar"><i class="fa fa-check"></i><b>29.5.2</b> 条形图的其它应用</a></li>
</ul></li>
<li class="chapter" data-level="29.6" data-path="ggplot2.html"><a href="ggplot2.html#ggplot2-hist"><i class="fa fa-check"></i><b>29.6</b> 直方图与密度估计</a></li>
<li class="chapter" data-level="29.7" data-path="ggplot2.html"><a href="ggplot2.html#ggplot2-gramm"><i class="fa fa-check"></i><b>29.7</b> 绘图语法介绍</a><ul>
<li class="chapter" data-level="29.7.1" data-path="ggplot2.html"><a href="ggplot2.html#ggplot2-gramm-gramm"><i class="fa fa-check"></i><b>29.7.1</b> 绘图语法</a></li>
<li class="chapter" data-level="29.7.2" data-path="ggplot2.html"><a href="ggplot2.html#ggplot2-gramm-geoms"><i class="fa fa-check"></i><b>29.7.2</b> 图形种类</a></li>
</ul></li>
<li class="chapter" data-level="29.8" data-path="ggplot2.html"><a href="ggplot2.html#ggplot2-moregeom"><i class="fa fa-check"></i><b>29.8</b> 更多图形种类</a><ul>
<li class="chapter" data-level="29.8.1" data-path="ggplot2.html"><a href="ggplot2.html#ggplot2-moregeom-continuousvar"><i class="fa fa-check"></i><b>29.8.1</b> 连续变量的分组图形</a></li>
<li class="chapter" data-level="29.8.2" data-path="ggplot2.html"><a href="ggplot2.html#ggplot2-moregeom-text"><i class="fa fa-check"></i><b>29.8.2</b> 坐标系中的文字</a></li>
<li class="chapter" data-level="29.8.3" data-path="ggplot2.html"><a href="ggplot2.html#ggplot2-moregeom-textops"><i class="fa fa-check"></i><b>29.8.3</b> 文字选项</a></li>
<li class="chapter" data-level="29.8.4" data-path="ggplot2.html"><a href="ggplot2.html#ggplot2-moregeom-outliers"><i class="fa fa-check"></i><b>29.8.4</b> 标出特殊点</a></li>
</ul></li>
<li class="chapter" data-level="29.9" data-path="ggplot2.html"><a href="ggplot2.html#ggplot2-auxfuncs-scale"><i class="fa fa-check"></i><b>29.9</b> 刻度(scale)</a></li>
<li class="chapter" data-level="29.10" data-path="ggplot2.html"><a href="ggplot2.html#ggplot2-refine-color"><i class="fa fa-check"></i><b>29.10</b> 如何使用颜色</a><ul>
<li class="chapter" data-level="29.10.1" data-path="ggplot2.html"><a href="ggplot2.html#ggplot2-refine-qual"><i class="fa fa-check"></i><b>29.10.1</b> 名义型变量的颜色</a></li>
<li class="chapter" data-level="29.10.2" data-path="ggplot2.html"><a href="ggplot2.html#ggplot2-refine-tile"><i class="fa fa-check"></i><b>29.10.2</b> 色块图</a></li>
<li class="chapter" data-level="29.10.3" data-path="ggplot2.html"><a href="ggplot2.html#ggplot2-refine-seq"><i class="fa fa-check"></i><b>29.10.3</b> 有序型变量的颜色</a></li>
<li class="chapter" data-level="29.10.4" data-path="ggplot2.html"><a href="ggplot2.html#ggplot2-refine-div"><i class="fa fa-check"></i><b>29.10.4</b> 相异型变量的颜色</a></li>
<li class="chapter" data-level="29.10.5" data-path="ggplot2.html"><a href="ggplot2.html#ggplot2-refine-num"><i class="fa fa-check"></i><b>29.10.5</b> 连续数值变量的颜色</a></li>
</ul></li>
<li class="chapter" data-level="29.11" data-path="ggplot2.html"><a href="ggplot2.html#ggplot2-auxfuncs"><i class="fa fa-check"></i><b>29.11</b> 标题、标注、指南、拼接</a><ul>
<li class="chapter" data-level="29.11.1" data-path="ggplot2.html"><a href="ggplot2.html#ggplot2-auxfuncs-labs"><i class="fa fa-check"></i><b>29.11.1</b> 标题</a></li>
<li class="chapter" data-level="29.11.2" data-path="ggplot2.html"><a href="ggplot2.html#ggplot2-auxfuncs-anno"><i class="fa fa-check"></i><b>29.11.2</b> 标注功能</a></li>
<li class="chapter" data-level="29.11.3" data-path="ggplot2.html"><a href="ggplot2.html#ggplot2-auxfuncs-guides"><i class="fa fa-check"></i><b>29.11.3</b> 指南(guides)</a></li>
<li class="chapter" data-level="29.11.4" data-path="ggplot2.html"><a href="ggplot2.html#ggplot2-auxfuncs-compfig"><i class="fa fa-check"></i><b>29.11.4</b> 拼接图形</a></li>
</ul></li>
<li class="chapter" data-level="29.12" data-path="ggplot2.html"><a href="ggplot2.html#ggplot2-refine"><i class="fa fa-check"></i><b>29.12</b> 图形定制调整</a><ul>
<li class="chapter" data-level="29.12.1" data-path="ggplot2.html"><a href="ggplot2.html#ggplot2-refine-asasec"><i class="fa fa-check"></i><b>29.12.1</b> 图形逐步调整例子</a></li>
</ul></li>
<li class="chapter" data-level="29.13" data-path="ggplot2.html"><a href="ggplot2.html#ggplot2-theme"><i class="fa fa-check"></i><b>29.13</b> 主题</a></li>
<li class="chapter" data-level="29.14" data-path="ggplot2.html"><a href="ggplot2.html#ggplot2-ref"><i class="fa fa-check"></i><b>29.14</b> 参考文献</a></li>
</ul></li>
<li class="chapter" data-level="30" data-path="ggplotvis.html"><a href="ggplotvis.html"><i class="fa fa-check"></i><b>30</b> ggplot的各种图形</a><ul>
<li class="chapter" data-level="30.1" data-path="ggplotvis.html"><a href="ggplotvis.html#ggplotvis-intro"><i class="fa fa-check"></i><b>30.1</b> 介绍</a></li>
<li class="chapter" data-level="30.2" data-path="ggplotvis.html"><a href="ggplotvis.html#ggplotvis-amount"><i class="fa fa-check"></i><b>30.2</b> 表现数量</a><ul>
<li class="chapter" data-level="30.2.1" data-path="ggplotvis.html"><a href="ggplotvis.html#ggplotvis-amount-bar"><i class="fa fa-check"></i><b>30.2.1</b> 条形图</a></li>
<li class="chapter" data-level="30.2.2" data-path="ggplotvis.html"><a href="ggplotvis.html#ggplotvis-amount-point"><i class="fa fa-check"></i><b>30.2.2</b> 点图</a></li>
<li class="chapter" data-level="30.2.3" data-path="ggplotvis.html"><a href="ggplotvis.html#ggplotvis-amount-heatmap"><i class="fa fa-check"></i><b>30.2.3</b> 热力图</a></li>
</ul></li>
<li class="chapter" data-level="30.3" data-path="ggplotvis.html"><a href="ggplotvis.html#ggplotvis-dist"><i class="fa fa-check"></i><b>30.3</b> 表现分布</a><ul>
<li class="chapter" data-level="30.3.1" data-path="ggplotvis.html"><a href="ggplotvis.html#ggplotvis-dist-suni-hist"><i class="fa fa-check"></i><b>30.3.1</b> 单个一元分布的直方图与密度估计图</a></li>
<li class="chapter" data-level="30.3.2" data-path="ggplotvis.html"><a href="ggplotvis.html#ggplotvis-dist-muni"><i class="fa fa-check"></i><b>30.3.2</b> 多个一元分布的直方图和密度图形</a></li>
<li class="chapter" data-level="30.3.3" data-path="ggplotvis.html"><a href="ggplotvis.html#ggplotvis-dist-cdf"><i class="fa fa-check"></i><b>30.3.3</b> 经验分布函数图</a></li>
<li class="chapter" data-level="30.3.4" data-path="ggplotvis.html"><a href="ggplotvis.html#ggplotvis-dist-qqplot"><i class="fa fa-check"></i><b>30.3.4</b> QQ图</a></li>
<li class="chapter" data-level="30.3.5" data-path="ggplotvis.html"><a href="ggplotvis.html#ggplotvis-dist-boxplot"><i class="fa fa-check"></i><b>30.3.5</b> 盒形图</a></li>
<li class="chapter" data-level="30.3.6" data-path="ggplotvis.html"><a href="ggplotvis.html#ggplotvis-dist-violin"><i class="fa fa-check"></i><b>30.3.6</b> 小提琴图</a></li>
<li class="chapter" data-level="30.3.7" data-path="ggplotvis.html"><a href="ggplotvis.html#ggplotvis-dist-mdens"><i class="fa fa-check"></i><b>30.3.7</b> 多个密度的其它画法</a></li>
<li class="chapter" data-level="30.3.8" data-path="ggplotvis.html"><a href="ggplotvis.html#ggplotvis-dist-2d"><i class="fa fa-check"></i><b>30.3.8</b> 二元分布直方图和等值线图</a></li>
</ul></li>
<li class="chapter" data-level="30.4" data-path="ggplotvis.html"><a href="ggplotvis.html#ggplotvis-prop"><i class="fa fa-check"></i><b>30.4</b> 表现比例</a><ul>
<li class="chapter" data-level="30.4.1" data-path="ggplotvis.html"><a href="ggplotvis.html#ggplotvis-prop-uni"><i class="fa fa-check"></i><b>30.4.1</b> 单个分布</a></li>
<li class="chapter" data-level="30.4.2" data-path="ggplotvis.html"><a href="ggplotvis.html#ggplotvis-prop-mult"><i class="fa fa-check"></i><b>30.4.2</b> 组间的比例分布的比较</a></li>
<li class="chapter" data-level="30.4.3" data-path="ggplotvis.html"><a href="ggplotvis.html#ggplotvis-prop-nest"><i class="fa fa-check"></i><b>30.4.3</b> 嵌套比例分布的比较</a></li>
</ul></li>
<li class="chapter" data-level="30.5" data-path="ggplotvis.html"><a href="ggplotvis.html#ggplotvis-mulvar"><i class="fa fa-check"></i><b>30.5</b> 表现多个变量间的关系</a><ul>
<li class="chapter" data-level="30.5.1" data-path="ggplotvis.html"><a href="ggplotvis.html#ggplotvis-mulvar-scatter"><i class="fa fa-check"></i><b>30.5.1</b> 散点图</a></li>
<li class="chapter" data-level="30.5.2" data-path="ggplotvis.html"><a href="ggplotvis.html#ggplotvis-mulvar-scatmat"><i class="fa fa-check"></i><b>30.5.2</b> 散点图矩阵</a></li>
<li class="chapter" data-level="30.5.3" data-path="ggplotvis.html"><a href="ggplotvis.html#ggplotvis-mulvar-corrgram"><i class="fa fa-check"></i><b>30.5.3</b> 相关系数矩阵图</a></li>
<li class="chapter" data-level="30.5.4" data-path="ggplotvis.html"><a href="ggplotvis.html#ggplotvis-mulvar-dimreduct"><i class="fa fa-check"></i><b>30.5.4</b> 数据降维</a></li>
<li class="chapter" data-level="30.5.5" data-path="ggplotvis.html"><a href="ggplotvis.html#ggplotvis-mulvar-paird"><i class="fa fa-check"></i><b>30.5.5</b> 成对数据</a></li>
</ul></li>
<li class="chapter" data-level="30.6" data-path="ggplotvis.html"><a href="ggplotvis.html#ggplotvis-ts"><i class="fa fa-check"></i><b>30.6</b> 时间序列图</a><ul>
<li class="chapter" data-level="30.6.1" data-path="ggplotvis.html"><a href="ggplotvis.html#ggplotvis-ts-uni"><i class="fa fa-check"></i><b>30.6.1</b> 一元时间序列</a></li>
<li class="chapter" data-level="30.6.2" data-path="ggplotvis.html"><a href="ggplotvis.html#ggplotvis-ts-mul"><i class="fa fa-check"></i><b>30.6.2</b> 多元时间序列</a></li>
<li class="chapter" data-level="30.6.3" data-path="ggplotvis.html"><a href="ggplotvis.html#ggplotvis-ts-het"><i class="fa fa-check"></i><b>30.6.3</b> 多个不同类型指标的时间序列</a></li>
</ul></li>
<li class="chapter" data-level="30.7" data-path="ggplotvis.html"><a href="ggplotvis.html#ggplotvis-fit"><i class="fa fa-check"></i><b>30.7</b> 拟合曲线图</a><ul>
<li class="chapter" data-level="30.7.1" data-path="ggplotvis.html"><a href="ggplotvis.html#ggplotvis-fit-smooth"><i class="fa fa-check"></i><b>30.7.1</b> 平滑方法</a></li>
<li class="chapter" data-level="30.7.2" data-path="ggplotvis.html"><a href="ggplotvis.html#ggplotvis-fit-param"><i class="fa fa-check"></i><b>30.7.2</b> 参数模型方法</a></li>
</ul></li>
<li class="chapter" data-level="30.8" data-path="ggplotvis.html"><a href="ggplotvis.html#ggplotvis-uncert"><i class="fa fa-check"></i><b>30.8</b> 表现不确定性</a><ul>
<li class="chapter" data-level="30.8.1" data-path="ggplotvis.html"><a href="ggplotvis.html#ggplotvis-uncert-prob"><i class="fa fa-check"></i><b>30.8.1</b> 表现概率</a></li>
<li class="chapter" data-level="30.8.2" data-path="ggplotvis.html"><a href="ggplotvis.html#ggplotvis-uncert-se"><i class="fa fa-check"></i><b>30.8.2</b> 表现点估计精度</a></li>
<li class="chapter" data-level="30.8.3" data-path="ggplotvis.html"><a href="ggplotvis.html#ggplotvis-uncert-cband"><i class="fa fa-check"></i><b>30.8.3</b> 拟合曲线的置信带</a></li>
<li class="chapter" data-level="30.8.4" data-path="ggplotvis.html"><a href="ggplotvis.html#ggplotvis-uncert-dyn"><i class="fa fa-check"></i><b>30.8.4</b> 随机结果动态演示</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>VII 统计模型</b></span></li>
<li class="chapter" data-level="31" data-path="stat-basics.html"><a href="stat-basics.html"><i class="fa fa-check"></i><b>31</b> R初等统计分析</a><ul>
<li class="chapter" data-level="31.1" data-path="stat-basics.html"><a href="stat-basics.html#stat-base-distr"><i class="fa fa-check"></i><b>31.1</b> 概率分布</a></li>
<li class="chapter" data-level="31.2" data-path="stat-basics.html"><a href="stat-basics.html#stat-base-mle"><i class="fa fa-check"></i><b>31.2</b> 最大似然估计</a><ul>
<li class="chapter" data-level="31.2.1" data-path="stat-basics.html"><a href="stat-basics.html#stat-base-mle-norm1"><i class="fa fa-check"></i><b>31.2.1</b> 一元正态分布参数最大似然估计</a></li>
</ul></li>
<li class="chapter" data-level="31.3" data-path="stat-basics.html"><a href="stat-basics.html#stat-base-hyptest"><i class="fa fa-check"></i><b>31.3</b> 假设检验和置信区间</a><ul>
<li class="chapter" data-level="31.3.1" data-path="stat-basics.html"><a href="stat-basics.html#stat-base-hyptest-mu"><i class="fa fa-check"></i><b>31.3.1</b> 均值的假设检验和置信区间</a></li>
<li class="chapter" data-level="31.3.2" data-path="stat-basics.html"><a href="stat-basics.html#stat-base-hyptest-prop"><i class="fa fa-check"></i><b>31.3.2</b> 比例的假设检验和置信区间</a></li>
<li class="chapter" data-level="31.3.3" data-path="stat-basics.html"><a href="stat-basics.html#stat-base-hyptest-sigma"><i class="fa fa-check"></i><b>31.3.3</b> 方差的假设检验和置信区间</a></li>
<li class="chapter" data-level="31.3.4" data-path="stat-basics.html"><a href="stat-basics.html#stat-base-hyptest-gof"><i class="fa fa-check"></i><b>31.3.4</b> 拟合优度检验</a></li>
<li class="chapter" data-level="31.3.5" data-path="stat-basics.html"><a href="stat-basics.html#stat-base-hyptest-gof-vcd"><i class="fa fa-check"></i><b>31.3.5</b> 检验分布类型</a></li>
<li class="chapter" data-level="31.3.6" data-path="stat-basics.html"><a href="stat-basics.html#stat-base-hyptest-indepcont"><i class="fa fa-check"></i><b>31.3.6</b> 列联表独立性卡方检验</a></li>
<li class="chapter" data-level="31.3.7" data-path="stat-basics.html"><a href="stat-basics.html#stat-base-hyptest-npar"><i class="fa fa-check"></i><b>31.3.7</b> 非参数检验</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="32" data-path="stat-reg.html"><a href="stat-reg.html"><i class="fa fa-check"></i><b>32</b> R相关与回归</a><ul>
<li class="chapter" data-level="32.1" data-path="stat-reg.html"><a href="stat-reg.html#stat-base-reg-cor"><i class="fa fa-check"></i><b>32.1</b> 相关分析</a><ul>
<li class="chapter" data-level="32.1.1" data-path="stat-reg.html"><a href="stat-reg.html#stat-base-reg-cor-prop"><i class="fa fa-check"></i><b>32.1.1</b> 相关系数的性质</a></li>
<li class="chapter" data-level="32.1.2" data-path="stat-reg.html"><a href="stat-reg.html#stat-base-reg-cor-caus"><i class="fa fa-check"></i><b>32.1.2</b> 相关与因果</a></li>
<li class="chapter" data-level="32.1.3" data-path="stat-reg.html"><a href="stat-reg.html#stat-base-reg-cor-magn"><i class="fa fa-check"></i><b>32.1.3</b> 相关系数大小</a></li>
<li class="chapter" data-level="32.1.4" data-path="stat-reg.html"><a href="stat-reg.html#stat-base-reg-cor-test"><i class="fa fa-check"></i><b>32.1.4</b> 相关系数的检验</a></li>
<li class="chapter" data-level="32.1.5" data-path="stat-reg.html"><a href="stat-reg.html#stat-base-reg-cor-vcorr"><i class="fa fa-check"></i><b>32.1.5</b> 相关阵</a></li>
</ul></li>
<li class="chapter" data-level="32.2" data-path="stat-reg.html"><a href="stat-reg.html#stat-base-reg-regsimp"><i class="fa fa-check"></i><b>32.2</b> 一元回归分析</a><ul>
<li class="chapter" data-level="32.2.1" data-path="stat-reg.html"><a href="stat-reg.html#stat-base-reg-regsimp-model"><i class="fa fa-check"></i><b>32.2.1</b> 模型</a></li>
<li class="chapter" data-level="32.2.2" data-path="stat-reg.html"><a href="stat-reg.html#stat-base-reg-regsimp-ls"><i class="fa fa-check"></i><b>32.2.2</b> 最小二乘法</a></li>
<li class="chapter" data-level="32.2.3" data-path="stat-reg.html"><a href="stat-reg.html#stat-base-reg-regsimp-test"><i class="fa fa-check"></i><b>32.2.3</b> 回归有效性</a></li>
<li class="chapter" data-level="32.2.4" data-path="stat-reg.html"><a href="stat-reg.html#stat-base-reg-regsimp-prog"><i class="fa fa-check"></i><b>32.2.4</b> R程序</a></li>
<li class="chapter" data-level="32.2.5" data-path="stat-reg.html"><a href="stat-reg.html#stat-base-reg-regsimp-diag"><i class="fa fa-check"></i><b>32.2.5</b> 回归诊断</a></li>
<li class="chapter" data-level="32.2.6" data-path="stat-reg.html"><a href="stat-reg.html#stat-base-reg-regsimp-ci"><i class="fa fa-check"></i><b>32.2.6</b> 预测区间</a></li>
<li class="chapter" data-level="32.2.7" data-path="stat-reg.html"><a href="stat-reg.html#stat-base-reg-regsimp-control"><i class="fa fa-check"></i><b>32.2.7</b> 控制</a></li>
</ul></li>
<li class="chapter" data-level="32.3" data-path="stat-reg.html"><a href="stat-reg.html#stat-base-reg-regmu"><i class="fa fa-check"></i><b>32.3</b> 多元线性回归</a><ul>
<li class="chapter" data-level="32.3.1" data-path="stat-reg.html"><a href="stat-reg.html#stat-base-reg-regmu-mod"><i class="fa fa-check"></i><b>32.3.1</b> 模型</a></li>
<li class="chapter" data-level="32.3.2" data-path="stat-reg.html"><a href="stat-reg.html#stat-base-reg-regmu-est"><i class="fa fa-check"></i><b>32.3.2</b> 参数估计</a></li>
<li class="chapter" data-level="32.3.3" data-path="stat-reg.html"><a href="stat-reg.html#stat-base-reg-regmu-rcode"><i class="fa fa-check"></i><b>32.3.3</b> R的多元回归程序</a></li>
<li class="chapter" data-level="32.3.4" data-path="stat-reg.html"><a href="stat-reg.html#stat-base-reg-regmu-test"><i class="fa fa-check"></i><b>32.3.4</b> 模型的检验</a></li>
<li class="chapter" data-level="32.3.5" data-path="stat-reg.html"><a href="stat-reg.html#stat-base-reg-regmu-subset"><i class="fa fa-check"></i><b>32.3.5</b> 回归自变量筛选</a></li>
<li class="chapter" data-level="32.3.6" data-path="stat-reg.html"><a href="stat-reg.html#stat-base-reg-regmu-dum"><i class="fa fa-check"></i><b>32.3.6</b> 哑变量与变截距项的模型</a></li>
<li class="chapter" data-level="32.3.7" data-path="stat-reg.html"><a href="stat-reg.html#stat-base-reg-regmu-resid"><i class="fa fa-check"></i><b>32.3.7</b> 残差诊断</a></li>
<li class="chapter" data-level="32.3.8" data-path="stat-reg.html"><a href="stat-reg.html#stat-base-reg-regmu-colin"><i class="fa fa-check"></i><b>32.3.8</b> 多重共线性</a></li>
<li class="chapter" data-level="32.3.9" data-path="stat-reg.html"><a href="stat-reg.html#stat-base-reg-regmu-lev"><i class="fa fa-check"></i><b>32.3.9</b> 强影响点分析</a></li>
<li class="chapter" data-level="32.3.10" data-path="stat-reg.html"><a href="stat-reg.html#stat-base-reg-regmu-overfit"><i class="fa fa-check"></i><b>32.3.10</b> 过度拟合示例</a></li>
<li class="chapter" data-level="32.3.11" data-path="stat-reg.html"><a href="stat-reg.html#stat-base-reg-regmu-comp-inset"><i class="fa fa-check"></i><b>32.3.11</b> 嵌套模型的比较</a></li>
<li class="chapter" data-level="32.3.12" data-path="stat-reg.html"><a href="stat-reg.html#stat-base-reg-regmu-pred"><i class="fa fa-check"></i><b>32.3.12</b> 拟合与预测</a></li>
<li class="chapter" data-level="32.3.13" data-path="stat-reg.html"><a href="stat-reg.html#stat-base-reg-regmu-curve"><i class="fa fa-check"></i><b>32.3.13</b> 利用线性回归模型做曲线拟合</a></li>
<li class="chapter" data-level="32.3.14" data-path="stat-reg.html"><a href="stat-reg.html#stat-base-reg-regmu-group"><i class="fa fa-check"></i><b>32.3.14</b> 分组建立多个模型</a></li>
</ul></li>
<li class="chapter" data-level="32.4" data-path="stat-reg.html"><a href="stat-reg.html#stat-base-reg-npar"><i class="fa fa-check"></i><b>32.4</b> 非参数回归</a><ul>
<li class="chapter" data-level="32.4.1" data-path="stat-reg.html"><a href="stat-reg.html#stat-base-reg-npar-mod"><i class="fa fa-check"></i><b>32.4.1</b> 模型</a></li>
<li class="chapter" data-level="32.4.2" data-path="stat-reg.html"><a href="stat-reg.html#stat-base-reg-cfit-spl1d"><i class="fa fa-check"></i><b>32.4.2</b> 样条平滑</a></li>
<li class="chapter" data-level="32.4.3" data-path="stat-reg.html"><a href="stat-reg.html#stat-base-reg-cfit-loess"><i class="fa fa-check"></i><b>32.4.3</b> 局部多项式曲线平滑</a></li>
<li class="chapter" data-level="32.4.4" data-path="stat-reg.html"><a href="stat-reg.html#stat-base-reg-cfit-bs"><i class="fa fa-check"></i><b>32.4.4</b> 样条函数变换</a></li>
<li class="chapter" data-level="32.4.5" data-path="stat-reg.html"><a href="stat-reg.html#stat-base-reg-cfit-gam"><i class="fa fa-check"></i><b>32.4.5</b> 线性可加模型</a></li>
</ul></li>
<li class="chapter" data-level="32.5" data-path="stat-reg.html"><a href="stat-reg.html#stat-base-reg-reglog"><i class="fa fa-check"></i><b>32.5</b> Logistic回归</a><ul>
<li class="chapter" data-level="32.5.1" data-path="stat-reg.html"><a href="stat-reg.html#stat-base-reg-reglog-mod"><i class="fa fa-check"></i><b>32.5.1</b> 模型</a></li>
<li class="chapter" data-level="32.5.2" data-path="stat-reg.html"><a href="stat-reg.html#stat-base-reg-reglog-rcode"><i class="fa fa-check"></i><b>32.5.2</b> R程序</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="33" data-path="stat-tsa.html"><a href="stat-tsa.html"><i class="fa fa-check"></i><b>33</b> R时间序列分析</a><ul>
<li class="chapter" data-level="33.1" data-path="stat-tsa.html"><a href="stat-tsa.html#stat-tsa-defs"><i class="fa fa-check"></i><b>33.1</b> 基本概念</a></li>
<li class="chapter" data-level="33.2" data-path="stat-tsa.html"><a href="stat-tsa.html#stat-tsa-dtype"><i class="fa fa-check"></i><b>33.2</b> 时间序列数据类型</a><ul>
<li class="chapter" data-level="33.2.1" data-path="stat-tsa.html"><a href="stat-tsa.html#stat-tsa-dtype-ts"><i class="fa fa-check"></i><b>33.2.1</b> ts类型</a></li>
<li class="chapter" data-level="33.2.2" data-path="stat-tsa.html"><a href="stat-tsa.html#stat-tsa-dtype-xts"><i class="fa fa-check"></i><b>33.2.2</b> xts类型与常用函数</a></li>
</ul></li>
<li class="chapter" data-level="33.3" data-path="stat-tsa.html"><a href="stat-tsa.html#stat-tsa-basicstat"><i class="fa fa-check"></i><b>33.3</b> 基本分析与作图</a></li>
<li class="chapter" data-level="33.4" data-path="stat-tsa.html"><a href="stat-tsa.html#stat-tsa-arima"><i class="fa fa-check"></i><b>33.4</b> ARIMA建模和模拟</a><ul>
<li class="chapter" data-level="33.4.1" data-path="stat-tsa.html"><a href="stat-tsa.html#stat-tsa-arima-def"><i class="fa fa-check"></i><b>33.4.1</b> 模型公式</a></li>
<li class="chapter" data-level="33.4.2" data-path="stat-tsa.html"><a href="stat-tsa.html#stat-tsa-arima-sim"><i class="fa fa-check"></i><b>33.4.2</b> 模拟</a></li>
<li class="chapter" data-level="33.4.3" data-path="stat-tsa.html"><a href="stat-tsa.html#stat-tsa-arima-armod"><i class="fa fa-check"></i><b>33.4.3</b> AR建模</a></li>
<li class="chapter" data-level="33.4.4" data-path="stat-tsa.html"><a href="stat-tsa.html#stat-tsa-arima-armamod"><i class="fa fa-check"></i><b>33.4.4</b> ARMA建模</a></li>
<li class="chapter" data-level="33.4.5" data-path="stat-tsa.html"><a href="stat-tsa.html#stat-tsa-arima-diag"><i class="fa fa-check"></i><b>33.4.5</b> 模型诊断</a></li>
<li class="chapter" data-level="33.4.6" data-path="stat-tsa.html"><a href="stat-tsa.html#stat-tsa-arima-lbtest"><i class="fa fa-check"></i><b>33.4.6</b> 白噪声检验</a></li>
<li class="chapter" data-level="33.4.7" data-path="stat-tsa.html"><a href="stat-tsa.html#stat-tsa-arima-sparse"><i class="fa fa-check"></i><b>33.4.7</b> 稀疏系数估计</a></li>
<li class="chapter" data-level="33.4.8" data-path="stat-tsa.html"><a href="stat-tsa.html#stat-tsa-arima-adftest"><i class="fa fa-check"></i><b>33.4.8</b> 单位根检验</a></li>
<li class="chapter" data-level="33.4.9" data-path="stat-tsa.html"><a href="stat-tsa.html#stat-tsa-arima-cfuncs"><i class="fa fa-check"></i><b>33.4.9</b> ARMA模型的一些自定义函数</a></li>
</ul></li>
<li class="chapter" data-level="33.5" data-path="stat-tsa.html"><a href="stat-tsa.html#stat-tsa-spectra"><i class="fa fa-check"></i><b>33.5</b> 谱密度估计</a></li>
<li class="chapter" data-level="33.6" data-path="stat-tsa.html"><a href="stat-tsa.html#stat-tsa-garch"><i class="fa fa-check"></i><b>33.6</b> GARCH类模型</a></li>
<li class="chapter" data-level="33.7" data-path="stat-tsa.html"><a href="stat-tsa.html#stat-tsa-mtsa"><i class="fa fa-check"></i><b>33.7</b> 多元时间序列基础统计</a></li>
<li class="chapter" data-level="33.8" data-path="stat-tsa.html"><a href="stat-tsa.html#stat-tsa-var"><i class="fa fa-check"></i><b>33.8</b> VAR模型</a></li>
<li class="chapter" data-level="33.9" data-path="stat-tsa.html"><a href="stat-tsa.html#stat-tsa-coint"><i class="fa fa-check"></i><b>33.9</b> 协整分析</a></li>
<li class="chapter" data-level="33.10" data-path="stat-tsa.html"><a href="stat-tsa.html#stat-tsa-causal"><i class="fa fa-check"></i><b>33.10</b> 因果性检验</a></li>
</ul></li>
<li class="chapter" data-level="34" data-path="stat-learning.html"><a href="stat-learning.html"><i class="fa fa-check"></i><b>34</b> 统计学习介绍</a><ul>
<li class="chapter" data-level="34.1" data-path="stat-learning.html"><a href="stat-learning.html#statl-intro"><i class="fa fa-check"></i><b>34.1</b> 统计学习的基本概念和一般步骤</a><ul>
<li class="chapter" data-level="34.1.1" data-path="stat-learning.html"><a href="stat-learning.html#statl-intro-basic"><i class="fa fa-check"></i><b>34.1.1</b> 统计学习的基本概念和方法</a></li>
<li class="chapter" data-level="34.1.2" data-path="stat-learning.html"><a href="stat-learning.html#statl-intro-biasvar"><i class="fa fa-check"></i><b>34.1.2</b> 偏差与方差折衷</a></li>
<li class="chapter" data-level="34.1.3" data-path="stat-learning.html"><a href="stat-learning.html#statl-cv"><i class="fa fa-check"></i><b>34.1.3</b> 交叉验证</a></li>
<li class="chapter" data-level="34.1.4" data-path="stat-learning.html"><a href="stat-learning.html#statl-steps"><i class="fa fa-check"></i><b>34.1.4</b> 一般步骤</a></li>
</ul></li>
<li class="chapter" data-level="34.2" data-path="stat-learning.html"><a href="stat-learning.html#statl-hitters"><i class="fa fa-check"></i><b>34.2</b> Hitters数据分析</a><ul>
<li class="chapter" data-level="34.2.1" data-path="stat-learning.html"><a href="stat-learning.html#statl-hitters-subset"><i class="fa fa-check"></i><b>34.2.1</b> 回归自变量选择</a></li>
<li class="chapter" data-level="34.2.2" data-path="stat-learning.html"><a href="stat-learning.html#statl-hitters-ridge"><i class="fa fa-check"></i><b>34.2.2</b> 岭回归</a></li>
<li class="chapter" data-level="34.2.3" data-path="stat-learning.html"><a href="stat-learning.html#statl-hitters-lasso"><i class="fa fa-check"></i><b>34.2.3</b> Lasso回归</a></li>
<li class="chapter" data-level="34.2.4" data-path="stat-learning.html"><a href="stat-learning.html#statl-hitters-simpt"><i class="fa fa-check"></i><b>34.2.4</b> 树回归的简单演示</a></li>
<li class="chapter" data-level="34.2.5" data-path="stat-learning.html"><a href="stat-learning.html#statl-hitters-tree"><i class="fa fa-check"></i><b>34.2.5</b> 树回归</a></li>
<li class="chapter" data-level="34.2.6" data-path="stat-learning.html"><a href="stat-learning.html#statl-hitters-bag"><i class="fa fa-check"></i><b>34.2.6</b> 装袋法</a></li>
<li class="chapter" data-level="34.2.7" data-path="stat-learning.html"><a href="stat-learning.html#statl-hitters-rf"><i class="fa fa-check"></i><b>34.2.7</b> 随机森林</a></li>
</ul></li>
<li class="chapter" data-level="34.3" data-path="stat-learning.html"><a href="stat-learning.html#statl-heart"><i class="fa fa-check"></i><b>34.3</b> Heart数据分析</a><ul>
<li class="chapter" data-level="34.3.1" data-path="stat-learning.html"><a href="stat-learning.html#statl-heart-tree"><i class="fa fa-check"></i><b>34.3.1</b> 树回归</a></li>
<li class="chapter" data-level="34.3.2" data-path="stat-learning.html"><a href="stat-learning.html#statl-heart-bag"><i class="fa fa-check"></i><b>34.3.2</b> 用装袋法</a></li>
<li class="chapter" data-level="34.3.3" data-path="stat-learning.html"><a href="stat-learning.html#statl-heart-rf"><i class="fa fa-check"></i><b>34.3.3</b> 用随机森林</a></li>
</ul></li>
<li class="chapter" data-level="34.4" data-path="stat-learning.html"><a href="stat-learning.html#statl-car"><i class="fa fa-check"></i><b>34.4</b> 汽车销量数据分析</a><ul>
<li class="chapter" data-level="34.4.1" data-path="stat-learning.html"><a href="stat-learning.html#statl-car-tree"><i class="fa fa-check"></i><b>34.4.1</b> 判别树</a></li>
<li class="chapter" data-level="34.4.2" data-path="stat-learning.html"><a href="stat-learning.html#statl-car-rf"><i class="fa fa-check"></i><b>34.4.2</b> 随机森林</a></li>
</ul></li>
<li class="chapter" data-level="34.5" data-path="stat-learning.html"><a href="stat-learning.html#statl-boston"><i class="fa fa-check"></i><b>34.5</b> 波士顿郊区房价数据</a><ul>
<li class="chapter" data-level="34.5.1" data-path="stat-learning.html"><a href="stat-learning.html#statl-boston-tree"><i class="fa fa-check"></i><b>34.5.1</b> 回归树</a></li>
<li class="chapter" data-level="34.5.2" data-path="stat-learning.html"><a href="stat-learning.html#statl-boston-bag"><i class="fa fa-check"></i><b>34.5.2</b> 装袋法</a></li>
<li class="chapter" data-level="34.5.3" data-path="stat-learning.html"><a href="stat-learning.html#statl-boston-rf"><i class="fa fa-check"></i><b>34.5.3</b> 随机森林</a></li>
<li class="chapter" data-level="34.5.4" data-path="stat-learning.html"><a href="stat-learning.html#statl-boston-boost"><i class="fa fa-check"></i><b>34.5.4</b> 提升法</a></li>
</ul></li>
<li class="chapter" data-level="34.6" data-path="stat-learning.html"><a href="stat-learning.html#statl-svm"><i class="fa fa-check"></i><b>34.6</b> 支持向量机方法</a><ul>
<li class="chapter" data-level="34.6.1" data-path="stat-learning.html"><a href="stat-learning.html#statl-svm-heart"><i class="fa fa-check"></i><b>34.6.1</b> 支持向量机用于Heart数据</a></li>
</ul></li>
<li class="chapter" data-level="34.7" data-path="stat-learning.html"><a href="stat-learning.html#statl-app"><i class="fa fa-check"></i><b>34.7</b> 附录</a><ul>
<li class="chapter" data-level="34.7.1" data-path="stat-learning.html"><a href="stat-learning.html#statl-app-hitters"><i class="fa fa-check"></i><b>34.7.1</b> Hitters数据</a></li>
<li class="chapter" data-level="34.7.2" data-path="stat-learning.html"><a href="stat-learning.html#statl-app-heart"><i class="fa fa-check"></i><b>34.7.2</b> Heart数据</a></li>
<li class="chapter" data-level="34.7.3" data-path="stat-learning.html"><a href="stat-learning.html#statl-app-car"><i class="fa fa-check"></i><b>34.7.3</b> CarSeats数据</a></li>
<li class="chapter" data-level="34.7.4" data-path="stat-learning.html"><a href="stat-learning.html#statl-app-boston"><i class="fa fa-check"></i><b>34.7.4</b> Boston数据</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="35" data-path="simulation.html"><a href="simulation.html"><i class="fa fa-check"></i><b>35</b> 随机模拟</a><ul>
<li class="chapter" data-level="35.1" data-path="simulation.html"><a href="simulation.html#simint"><i class="fa fa-check"></i><b>35.1</b> 随机数</a></li>
<li class="chapter" data-level="35.2" data-path="simulation.html"><a href="simulation.html#simsamp"><i class="fa fa-check"></i><b>35.2</b> <code>sample()</code>函数</a></li>
<li class="chapter" data-level="35.3" data-path="simulation.html"><a href="simulation.html#simexamp"><i class="fa fa-check"></i><b>35.3</b> 随机模拟示例</a><ul>
<li class="chapter" data-level="35.3.1" data-path="simulation.html"><a href="simulation.html#simexamp-expect"><i class="fa fa-check"></i><b>35.3.1</b> 估计期望值</a></li>
<li class="chapter" data-level="35.3.2" data-path="simulation.html"><a href="simulation.html#simexamp-lm"><i class="fa fa-check"></i><b>35.3.2</b> 线性回归模拟</a></li>
<li class="chapter" data-level="35.3.3" data-path="simulation.html"><a href="simulation.html#simexamp-kde"><i class="fa fa-check"></i><b>35.3.3</b> 核密度的bootstrap置信区间</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>VIII 特殊应用</b></span></li>
<li class="chapter" data-level="36" data-path="text.html"><a href="text.html"><i class="fa fa-check"></i><b>36</b> R语言的文本处理</a><ul>
<li class="chapter" data-level="36.1" data-path="text.html"><a href="text.html#text-simple"><i class="fa fa-check"></i><b>36.1</b> 简单的文本处理</a><ul>
<li class="chapter" data-level="36.1.1" data-path="text.html"><a href="text.html#text-simple-const"><i class="fa fa-check"></i><b>36.1.1</b> 字符型常量与字符型向量</a></li>
<li class="chapter" data-level="36.1.2" data-path="text.html"><a href="text.html#text-paste"><i class="fa fa-check"></i><b>36.1.2</b> 字符串连接、重复</a></li>
<li class="chapter" data-level="36.1.3" data-path="text.html"><a href="text.html#text-formatout"><i class="fa fa-check"></i><b>36.1.3</b> 格式化输出</a></li>
<li class="chapter" data-level="36.1.4" data-path="text.html"><a href="text.html#text-length"><i class="fa fa-check"></i><b>36.1.4</b> 字符串长度</a></li>
<li class="chapter" data-level="36.1.5" data-path="text.html"><a href="text.html#text-substring"><i class="fa fa-check"></i><b>36.1.5</b> 取子串</a></li>
<li class="chapter" data-level="36.1.6" data-path="text.html"><a href="text.html#text-convert"><i class="fa fa-check"></i><b>36.1.6</b> 字符串变换</a></li>
<li class="chapter" data-level="36.1.7" data-path="text.html"><a href="text.html#text-simp-find"><i class="fa fa-check"></i><b>36.1.7</b> 简单匹配与查找</a></li>
<li class="chapter" data-level="36.1.8" data-path="text.html"><a href="text.html#text-simple-gsub"><i class="fa fa-check"></i><b>36.1.8</b> 字符串替换</a></li>
<li class="chapter" data-level="36.1.9" data-path="text.html"><a href="text.html#text-simple-strsplit"><i class="fa fa-check"></i><b>36.1.9</b> 字符串拆分</a></li>
</ul></li>
<li class="chapter" data-level="36.2" data-path="text.html"><a href="text.html#text-file"><i class="fa fa-check"></i><b>36.2</b> 文本文件读写</a></li>
<li class="chapter" data-level="36.3" data-path="text.html"><a href="text.html#text-regex"><i class="fa fa-check"></i><b>36.3</b> 正则表达式</a><ul>
<li class="chapter" data-level="36.3.1" data-path="text.html"><a href="text.html#text-regex-strview"><i class="fa fa-check"></i><b>36.3.1</b> 字面匹配与匹配显示</a></li>
<li class="chapter" data-level="36.3.2" data-path="text.html"><a href="text.html#text-regex-ignore"><i class="fa fa-check"></i><b>36.3.2</b> 不区分大小写匹配和<code>regex</code>函数</a></li>
<li class="chapter" data-level="36.3.3" data-path="text.html"><a href="text.html#text-regex-dot"><i class="fa fa-check"></i><b>36.3.3</b> 用句点匹配单个字符</a></li>
<li class="chapter" data-level="36.3.4" data-path="text.html"><a href="text.html#text-regex-set"><i class="fa fa-check"></i><b>36.3.4</b> 匹配一组字符中的某一个</a></li>
<li class="chapter" data-level="36.3.5" data-path="text.html"><a href="text.html#text-regex-metalit"><i class="fa fa-check"></i><b>36.3.5</b> 原样匹配元字符</a></li>
<li class="chapter" data-level="36.3.6" data-path="text.html"><a href="text.html#text-regex-space"><i class="fa fa-check"></i><b>36.3.6</b> 匹配空白</a></li>
<li class="chapter" data-level="36.3.7" data-path="text.html"><a href="text.html#text-regex-digit"><i class="fa fa-check"></i><b>36.3.7</b> 匹配数字</a></li>
<li class="chapter" data-level="36.3.8" data-path="text.html"><a href="text.html#text-regex-alnum"><i class="fa fa-check"></i><b>36.3.8</b> 匹配字母、数字、下划线</a></li>
<li class="chapter" data-level="36.3.9" data-path="text.html"><a href="text.html#text-regex-hex"><i class="fa fa-check"></i><b>36.3.9</b> 十六进制和八进制数</a></li>
<li class="chapter" data-level="36.3.10" data-path="text.html"><a href="text.html#text-regex-posix"><i class="fa fa-check"></i><b>36.3.10</b> POSIX字符类</a></li>
<li class="chapter" data-level="36.3.11" data-path="text.html"><a href="text.html#text-regex-start"><i class="fa fa-check"></i><b>36.3.11</b> 匹配开头和末尾</a></li>
<li class="chapter" data-level="36.3.12" data-path="text.html"><a href="text.html#text-regex-wordb"><i class="fa fa-check"></i><b>36.3.12</b> 单词边界</a></li>
<li class="chapter" data-level="36.3.13" data-path="text.html"><a href="text.html#text-regex-repeat"><i class="fa fa-check"></i><b>36.3.13</b> 重复匹配</a></li>
<li class="chapter" data-level="36.3.14" data-path="text.html"><a href="text.html#text-regex-lazy"><i class="fa fa-check"></i><b>36.3.14</b> 贪婪匹配和懒惰匹配</a></li>
<li class="chapter" data-level="36.3.15" data-path="text.html"><a href="text.html#text-regex-smlines"><i class="fa fa-check"></i><b>36.3.15</b> 句点全匹配与多行模式</a></li>
<li class="chapter" data-level="36.3.16" data-path="text.html"><a href="text.html#text-regex-alt"><i class="fa fa-check"></i><b>36.3.16</b> 备择模式</a></li>
<li class="chapter" data-level="36.3.17" data-path="text.html"><a href="text.html#text-regex-group"><i class="fa fa-check"></i><b>36.3.17</b> 分组与捕获</a></li>
</ul></li>
<li class="chapter" data-level="36.4" data-path="text.html"><a href="text.html#text-stringr-funcs"><i class="fa fa-check"></i><b>36.4</b> stringr包的正则表达式函数</a><ul>
<li class="chapter" data-level="36.4.1" data-path="text.html"><a href="text.html#text-stringr-funcs-strview"><i class="fa fa-check"></i><b>36.4.1</b> <code>str_view()</code>函数</a></li>
<li class="chapter" data-level="36.4.2" data-path="text.html"><a href="text.html#text-stringr-funcs-regex"><i class="fa fa-check"></i><b>36.4.2</b> <code>regex()</code>函数</a></li>
<li class="chapter" data-level="36.4.3" data-path="text.html"><a href="text.html#text-stringr-funcs-detect"><i class="fa fa-check"></i><b>36.4.3</b> 检查那些元素能够匹配</a></li>
<li class="chapter" data-level="36.4.4" data-path="text.html"><a href="text.html#text-stringr-funcs-replace"><i class="fa fa-check"></i><b>36.4.4</b> 替换</a></li>
<li class="chapter" data-level="36.4.5" data-path="text.html"><a href="text.html#text-stringr-funcs-subset"><i class="fa fa-check"></i><b>36.4.5</b> 返回匹配的元素</a></li>
<li class="chapter" data-level="36.4.6" data-path="text.html"><a href="text.html#text-stringr-funcs-extract"><i class="fa fa-check"></i><b>36.4.6</b> 提取匹配内容</a></li>
<li class="chapter" data-level="36.4.7" data-path="text.html"><a href="text.html#text-stringr-funcs-match"><i class="fa fa-check"></i><b>36.4.7</b> 提取分组捕获内容</a></li>
<li class="chapter" data-level="36.4.8" data-path="text.html"><a href="text.html#text-stringr-funcs-locate"><i class="fa fa-check"></i><b>36.4.8</b> 定位匹配位置</a></li>
</ul></li>
<li class="chapter" data-level="36.5" data-path="text.html"><a href="text.html#text-regex-bfuncs"><i class="fa fa-check"></i><b>36.5</b> 利用基本R函数进行正则表达式处理</a><ul>
<li class="chapter" data-level="36.5.1" data-path="text.html"><a href="text.html#text-regex-bfuncs-igcase"><i class="fa fa-check"></i><b>36.5.1</b> 不区分大小写匹配</a></li>
<li class="chapter" data-level="36.5.2" data-path="text.html"><a href="text.html#text-regex-bfuncs-dotp"><i class="fa fa-check"></i><b>36.5.2</b> 匹配单个字符</a></li>
<li class="chapter" data-level="36.5.3" data-path="text.html"><a href="text.html#text-regex-bfuncs-setp"><i class="fa fa-check"></i><b>36.5.3</b> 匹配一组字符中的某一个</a></li>
<li class="chapter" data-level="36.5.4" data-path="text.html"><a href="text.html#text-regex-bfuncs-metalit"><i class="fa fa-check"></i><b>36.5.4</b> 原样匹配元字符</a></li>
<li class="chapter" data-level="36.5.5" data-path="text.html"><a href="text.html#text-regex-bfuncs-digit"><i class="fa fa-check"></i><b>36.5.5</b> 匹配数字</a></li>
<li class="chapter" data-level="36.5.6" data-path="text.html"><a href="text.html#text-regex-bfuncs-start"><i class="fa fa-check"></i><b>36.5.6</b> 匹配开头和末尾</a></li>
<li class="chapter" data-level="36.5.7" data-path="text.html"><a href="text.html#text-regex-bfuncs-alnum"><i class="fa fa-check"></i><b>36.5.7</b> 匹配字母、数字、下划线</a></li>
<li class="chapter" data-level="36.5.8" data-path="text.html"><a href="text.html#text-regex-bfuncs-hex"><i class="fa fa-check"></i><b>36.5.8</b> 十六进制和八进制数</a></li>
<li class="chapter" data-level="36.5.9" data-path="text.html"><a href="text.html#text-regex-bfuncs-posix"><i class="fa fa-check"></i><b>36.5.9</b> POSIX字符类</a></li>
<li class="chapter" data-level="36.5.10" data-path="text.html"><a href="text.html#text-regex-bfuncs-plus"><i class="fa fa-check"></i><b>36.5.10</b> 加号重复匹配</a></li>
<li class="chapter" data-level="36.5.11" data-path="text.html"><a href="text.html#text-regex-bfuncs-ast"><i class="fa fa-check"></i><b>36.5.11</b> 星号和问号重复匹配</a></li>
<li class="chapter" data-level="36.5.12" data-path="text.html"><a href="text.html#text-regex-bfuncs-repnum"><i class="fa fa-check"></i><b>36.5.12</b> 计数重复</a></li>
<li class="chapter" data-level="36.5.13" data-path="text.html"><a href="text.html#text-regex-bfuncs-lazy"><i class="fa fa-check"></i><b>36.5.13</b> 贪婪匹配和懒惰匹配</a></li>
<li class="chapter" data-level="36.5.14" data-path="text.html"><a href="text.html#text-regex-bfuncs-wordb"><i class="fa fa-check"></i><b>36.5.14</b> 单词边界</a></li>
<li class="chapter" data-level="36.5.15" data-path="text.html"><a href="text.html#text-regex-bfuncs-sm"><i class="fa fa-check"></i><b>36.5.15</b> 句点全匹配与多行模式</a></li>
<li class="chapter" data-level="36.5.16" data-path="text.html"><a href="text.html#text-regex-bfuncs-alt"><i class="fa fa-check"></i><b>36.5.16</b> 备择模式</a></li>
<li class="chapter" data-level="36.5.17" data-path="text.html"><a href="text.html#text-regex-bfuncs-group"><i class="fa fa-check"></i><b>36.5.17</b> 分组与捕获</a></li>
</ul></li>
<li class="chapter" data-level="36.6" data-path="text.html"><a href="text.html#text-regexex"><i class="fa fa-check"></i><b>36.6</b> 正则表达式应用例子</a><ul>
<li class="chapter" data-level="36.6.1" data-path="text.html"><a href="text.html#text-regexex-pre"><i class="fa fa-check"></i><b>36.6.1</b> 数据预处理</a></li>
<li class="chapter" data-level="36.6.2" data-path="text.html"><a href="text.html#text-regexex-excelmore"><i class="fa fa-check"></i><b>36.6.2</b> 不规则Excel文件处理</a></li>
<li class="chapter" data-level="36.6.3" data-path="text.html"><a href="text.html#text-regexex-wordfreq"><i class="fa fa-check"></i><b>36.6.3</b> 字频统计</a></li>
<li class="chapter" data-level="36.6.4" data-path="text.html"><a href="text.html#text-regexex-digits"><i class="fa fa-check"></i><b>36.6.4</b> 数字验证</a></li>
<li class="chapter" data-level="36.6.5" data-path="text.html"><a href="text.html#text-regexex-digfn"><i class="fa fa-check"></i><b>36.6.5</b> 文件名中的数字提取</a></li>
</ul></li>
<li class="chapter" data-level="36.7" data-path="text.html"><a href="text.html#text-webscape"><i class="fa fa-check"></i><b>36.7</b> 网站数据获取</a></li>
<li class="chapter" data-level="36.8" data-path="text.html"><a href="text.html#text-jiebaR"><i class="fa fa-check"></i><b>36.8</b> 中文分词与词频</a></li>
</ul></li>
<li class="part"><span><b>IX 用Rcpp访问C++代码</b></span></li>
<li class="chapter" data-level="37" data-path="rcpp.html"><a href="rcpp.html"><i class="fa fa-check"></i><b>37</b> Rcpp介绍</a><ul>
<li class="chapter" data-level="37.1" data-path="rcpp.html"><a href="rcpp.html#rcpp-intro-use"><i class="fa fa-check"></i><b>37.1</b> Rcpp的用途</a></li>
<li class="chapter" data-level="37.2" data-path="rcpp.html"><a href="rcpp.html#rcpp-intro-examp"><i class="fa fa-check"></i><b>37.2</b> Rcpp入门样例</a><ul>
<li class="chapter" data-level="37.2.1" data-path="rcpp.html"><a href="rcpp.html#rcpp-intro-examp-ex1"><i class="fa fa-check"></i><b>37.2.1</b> 用<code>cppFunction()</code>转换简单的C++函数—Fibnacci例子</a></li>
<li class="chapter" data-level="37.2.2" data-path="rcpp.html"><a href="rcpp.html#rcpp-intro-examp-ex2"><i class="fa fa-check"></i><b>37.2.2</b> 用<code>sourceCpp()</code>转换C++程序—正负交替迭代例子</a></li>
<li class="chapter" data-level="37.2.3" data-path="rcpp.html"><a href="rcpp.html#rcpp-intro-examp-ex3"><i class="fa fa-check"></i><b>37.2.3</b> 用<code>sourceCpp()</code>转换C++源文件中的程序—正负交替迭代例子</a></li>
<li class="chapter" data-level="37.2.4" data-path="rcpp.html"><a href="rcpp.html#rcpp-intro-examp-ex4"><i class="fa fa-check"></i><b>37.2.4</b> 用<code>sourceCpp()</code>转换C++源程序文件—卷积例子</a></li>
<li class="chapter" data-level="37.2.5" data-path="rcpp.html"><a href="rcpp.html#rcpp-intro-examp-rmdconv"><i class="fa fa-check"></i><b>37.2.5</b> 在Rmd文件中使用C++源程序文件</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="38" data-path="rcpp-typeconv.html"><a href="rcpp-typeconv.html"><i class="fa fa-check"></i><b>38</b> R与C++的类型转换</a><ul>
<li class="chapter" data-level="38.1" data-path="rcpp-typeconv.html"><a href="rcpp-typeconv.html#rcpp-typeconv-wrap"><i class="fa fa-check"></i><b>38.1</b> 用<code>wrap()</code>把C++变量返回到R中</a></li>
<li class="chapter" data-level="38.2" data-path="rcpp-typeconv.html"><a href="rcpp-typeconv.html#rcpp-typeconv-as"><i class="fa fa-check"></i><b>38.2</b> 用<code>as()</code>函数把R变量转换为C++类型</a></li>
<li class="chapter" data-level="38.3" data-path="rcpp-typeconv.html"><a href="rcpp-typeconv.html#rcpp-typeconv-implicit"><i class="fa fa-check"></i><b>38.3</b> <code>as()</code>和<code>wrap()</code>的隐含调用</a></li>
</ul></li>
<li class="chapter" data-level="39" data-path="rcpp-attr.html"><a href="rcpp-attr.html"><i class="fa fa-check"></i><b>39</b> Rcpp 属性</a><ul>
<li class="chapter" data-level="39.1" data-path="rcpp-attr.html"><a href="rcpp-attr.html#rcpp-attr-intro"><i class="fa fa-check"></i><b>39.1</b> Rcpp属性介绍</a></li>
<li class="chapter" data-level="39.2" data-path="rcpp-attr.html"><a href="rcpp-attr.html#rcpp-attr-export"><i class="fa fa-check"></i><b>39.2</b> 在C++源程序中指定要导出的C++函数</a></li>
<li class="chapter" data-level="39.3" data-path="rcpp-attr.html"><a href="rcpp-attr.html#rcpp-attr-sourcecpp"><i class="fa fa-check"></i><b>39.3</b> 在R中编译链接C++代码</a></li>
<li class="chapter" data-level="39.4" data-path="rcpp-attr.html"><a href="rcpp-attr.html#rcpp-attr-misc"><i class="fa fa-check"></i><b>39.4</b> Rcpp属性的其它功能</a><ul>
<li class="chapter" data-level="39.4.1" data-path="rcpp-attr.html"><a href="rcpp-attr.html#rcpp-attr-misc-default"><i class="fa fa-check"></i><b>39.4.1</b> 自变量有缺省值的函数</a></li>
<li class="chapter" data-level="39.4.2" data-path="rcpp-attr.html"><a href="rcpp-attr.html#rcpp-attr-misc-interrupt"><i class="fa fa-check"></i><b>39.4.2</b> 允许用户中断</a></li>
<li class="chapter" data-level="39.4.3" data-path="rcpp-attr.html"><a href="rcpp-attr.html#rcpp-attr-misc-rinclude"><i class="fa fa-check"></i><b>39.4.3</b> 把R代码写在C++源文件中</a></li>
<li class="chapter" data-level="39.4.4" data-path="rcpp-attr.html"><a href="rcpp-attr.html#rcpp-attr-misc-rand"><i class="fa fa-check"></i><b>39.4.4</b> 在C++中调用R的随机数发生器</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="40" data-path="rcpp-vectype.html"><a href="rcpp-vectype.html"><i class="fa fa-check"></i><b>40</b> Rcpp提供的C++数据类型</a><ul>
<li class="chapter" data-level="40.1" data-path="rcpp-vectype.html"><a href="rcpp-vectype.html#rcpp-vectype-robject"><i class="fa fa-check"></i><b>40.1</b> RObject类</a></li>
<li class="chapter" data-level="40.2" data-path="rcpp-vectype.html"><a href="rcpp-vectype.html#rcpp-vectype-ivec"><i class="fa fa-check"></i><b>40.2</b> IntegerVector类</a><ul>
<li class="chapter" data-level="40.2.1" data-path="rcpp-vectype.html"><a href="rcpp-vectype.html#rcpp-vectype-ivec-ex1"><i class="fa fa-check"></i><b>40.2.1</b> IntegerVector示例1：返回完全数</a></li>
<li class="chapter" data-level="40.2.2" data-path="rcpp-vectype.html"><a href="rcpp-vectype.html#rcpp-vectype-ivec-ex2"><i class="fa fa-check"></i><b>40.2.2</b> IntegerVector示例2：输入整数向量</a></li>
</ul></li>
<li class="chapter" data-level="40.3" data-path="rcpp-vectype.html"><a href="rcpp-vectype.html#rcpp-vectype-num"><i class="fa fa-check"></i><b>40.3</b> NumericVector类</a><ul>
<li class="chapter" data-level="40.3.1" data-path="rcpp-vectype.html"><a href="rcpp-vectype.html#rcpp-vectype-num-ex1"><i class="fa fa-check"></i><b>40.3.1</b> 示例1：计算元素<span class="math inline">\(p\)</span>次方的和</a></li>
<li class="chapter" data-level="40.3.2" data-path="rcpp-vectype.html"><a href="rcpp-vectype.html#rcpp-vectype-num-ex2"><i class="fa fa-check"></i><b>40.3.2</b> 示例2：<code>clone</code>函数</a></li>
<li class="chapter" data-level="40.3.3" data-path="rcpp-vectype.html"><a href="rcpp-vectype.html#rcpp-vectype-num-ex3"><i class="fa fa-check"></i><b>40.3.3</b> 示例3：向量子集</a></li>
</ul></li>
<li class="chapter" data-level="40.4" data-path="rcpp-vectype.html"><a href="rcpp-vectype.html#rcpp-vectype-mat"><i class="fa fa-check"></i><b>40.4</b> NumericMatrix类</a><ul>
<li class="chapter" data-level="40.4.1" data-path="rcpp-vectype.html"><a href="rcpp-vectype.html#rcpp-vectype-mat-ex1"><i class="fa fa-check"></i><b>40.4.1</b> 示例1：计算矩阵各列模的最大值</a></li>
<li class="chapter" data-level="40.4.2" data-path="rcpp-vectype.html"><a href="rcpp-vectype.html#rcpp-vectype-mat-ex2"><i class="fa fa-check"></i><b>40.4.2</b> 示例2：把输入矩阵制作副本计算元素平方根</a></li>
<li class="chapter" data-level="40.4.3" data-path="rcpp-vectype.html"><a href="rcpp-vectype.html#rcpp-vectype-mat-ex3"><i class="fa fa-check"></i><b>40.4.3</b> 示例3：访问列子集</a></li>
</ul></li>
<li class="chapter" data-level="40.5" data-path="rcpp-vectype.html"><a href="rcpp-vectype.html#rcpp-vectype-other"><i class="fa fa-check"></i><b>40.5</b> Rcpp的其它向量类</a><ul>
<li class="chapter" data-level="40.5.1" data-path="rcpp-vectype.html"><a href="rcpp-vectype.html#rcpp-vectype-logic"><i class="fa fa-check"></i><b>40.5.1</b> Rcpp的LogicalVector类</a></li>
<li class="chapter" data-level="40.5.2" data-path="rcpp-vectype.html"><a href="rcpp-vectype.html#rcpp-vectype-char"><i class="fa fa-check"></i><b>40.5.2</b> Rcpp的CharacterVector类型</a></li>
</ul></li>
<li class="chapter" data-level="40.6" data-path="rcpp-vectype.html"><a href="rcpp-vectype.html#rcpp-types"><i class="fa fa-check"></i><b>40.6</b> Rcpp提供的其它数据类型</a><ul>
<li class="chapter" data-level="40.6.1" data-path="rcpp-vectype.html"><a href="rcpp-vectype.html#rcpp-types-named"><i class="fa fa-check"></i><b>40.6.1</b> Named类型</a></li>
<li class="chapter" data-level="40.6.2" data-path="rcpp-vectype.html"><a href="rcpp-vectype.html#rcpp-types-list"><i class="fa fa-check"></i><b>40.6.2</b> List类型</a></li>
<li class="chapter" data-level="40.6.3" data-path="rcpp-vectype.html"><a href="rcpp-vectype.html#rcpp-types-df"><i class="fa fa-check"></i><b>40.6.3</b> Rcpp的DataFrame类</a></li>
<li class="chapter" data-level="40.6.4" data-path="rcpp-vectype.html"><a href="rcpp-vectype.html#rcpp-types-func"><i class="fa fa-check"></i><b>40.6.4</b> Rcpp的Function类</a></li>
<li class="chapter" data-level="40.6.5" data-path="rcpp-vectype.html"><a href="rcpp-vectype.html#rcpp-types-environ"><i class="fa fa-check"></i><b>40.6.5</b> Rcpp的Environment类</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="41" data-path="rcpp-sugar.html"><a href="rcpp-sugar.html"><i class="fa fa-check"></i><b>41</b> Rcpp糖</a><ul>
<li class="chapter" data-level="41.1" data-path="rcpp-sugar.html"><a href="rcpp-sugar.html#rcpp-sugar-examp"><i class="fa fa-check"></i><b>41.1</b> 简单示例</a></li>
<li class="chapter" data-level="41.2" data-path="rcpp-sugar.html"><a href="rcpp-sugar.html#rcpp-sugar-vecop"><i class="fa fa-check"></i><b>41.2</b> 向量化的运算符</a><ul>
<li class="chapter" data-level="41.2.1" data-path="rcpp-sugar.html"><a href="rcpp-sugar.html#rcpp-sugar-vecop-arith"><i class="fa fa-check"></i><b>41.2.1</b> 向量化的四则运算</a></li>
<li class="chapter" data-level="41.2.2" data-path="rcpp-sugar.html"><a href="rcpp-sugar.html#rcpp-sugar-vecop-binop"><i class="fa fa-check"></i><b>41.2.2</b> 向量化的二元逻辑运算</a></li>
<li class="chapter" data-level="41.2.3" data-path="rcpp-sugar.html"><a href="rcpp-sugar.html#rcpp-sugar-vecop-uop"><i class="fa fa-check"></i><b>41.2.3</b> 向量化的一元运算符</a></li>
</ul></li>
<li class="chapter" data-level="41.3" data-path="rcpp-sugar.html"><a href="rcpp-sugar.html#rcpp-sugar-mathfunc"><i class="fa fa-check"></i><b>41.3</b> 用Rcpp访问数学函数</a></li>
<li class="chapter" data-level="41.4" data-path="rcpp-sugar.html"><a href="rcpp-sugar.html#rcpp-sugar-any"><i class="fa fa-check"></i><b>41.4</b> 返回单一逻辑值的函数</a></li>
<li class="chapter" data-level="41.5" data-path="rcpp-sugar.html"><a href="rcpp-sugar.html#rcpp-sugar-expfunc"><i class="fa fa-check"></i><b>41.5</b> 返回糖表达式的函数</a></li>
<li class="chapter" data-level="41.6" data-path="rcpp-sugar.html"><a href="rcpp-sugar.html#rcpp-sugar-diff"><i class="fa fa-check"></i><b>41.6</b> R与Rcpp不同语法示例</a></li>
</ul></li>
<li class="chapter" data-level="42" data-path="rcpp-package.html"><a href="rcpp-package.html"><i class="fa fa-check"></i><b>42</b> 用Rcpp帮助制作R扩展包</a><ul>
<li class="chapter" data-level="42.1" data-path="rcpp-package.html"><a href="rcpp-package.html#rcpp-package-wo"><i class="fa fa-check"></i><b>42.1</b> 不用扩展包共享C++代码的方法</a></li>
<li class="chapter" data-level="42.2" data-path="rcpp-package.html"><a href="rcpp-package.html#rcpp-package-gen"><i class="fa fa-check"></i><b>42.2</b> 生成扩展包</a><ul>
<li class="chapter" data-level="42.2.1" data-path="rcpp-package.html"><a href="rcpp-package.html#rcpp-package-gen-exist"><i class="fa fa-check"></i><b>42.2.1</b> 利用已有基于Rcpp属性的源程序制作扩展包</a></li>
<li class="chapter" data-level="42.2.2" data-path="rcpp-package.html"><a href="rcpp-package.html#rcpp-package-gen-desc"><i class="fa fa-check"></i><b>42.2.2</b> DESCRIPTION文件</a></li>
<li class="chapter" data-level="42.2.3" data-path="rcpp-package.html"><a href="rcpp-package.html#rcpp-package-gen-namespace"><i class="fa fa-check"></i><b>42.2.3</b> NAMESPACE文件</a></li>
</ul></li>
<li class="chapter" data-level="42.3" data-path="rcpp-package.html"><a href="rcpp-package.html#rcpp-package-recomp"><i class="fa fa-check"></i><b>42.3</b> 重新编译</a></li>
<li class="chapter" data-level="42.4" data-path="rcpp-package.html"><a href="rcpp-package.html#rcpp-package-interface"><i class="fa fa-check"></i><b>42.4</b> 建立C++用的接口界面</a></li>
</ul></li>
<li class="part"><span><b>X 编程例子</b></span></li>
<li class="chapter" data-level="43" data-path="examples.html"><a href="examples.html"><i class="fa fa-check"></i><b>43</b> R编程例子</a><ul>
<li class="chapter" data-level="43.1" data-path="examples.html"><a href="examples.html#examples-rlang"><i class="fa fa-check"></i><b>43.1</b> R语言</a><ul>
<li class="chapter" data-level="43.1.1" data-path="examples.html"><a href="examples.html#examples-rlang-inverse"><i class="fa fa-check"></i><b>43.1.1</b> 用向量作逆变换</a></li>
<li class="chapter" data-level="43.1.2" data-path="examples.html"><a href="examples.html#examples-rlang-fibonacci"><i class="fa fa-check"></i><b>43.1.2</b> 斐波那契数列计算</a></li>
<li class="chapter" data-level="43.1.3" data-path="examples.html"><a href="examples.html#examples-rlang-permutation"><i class="fa fa-check"></i><b>43.1.3</b> 穷举所有排列</a></li>
<li class="chapter" data-level="43.1.4" data-path="examples.html"><a href="examples.html#examples-rlang-repgroup"><i class="fa fa-check"></i><b>43.1.4</b> 可重复分组方式穷举</a></li>
<li class="chapter" data-level="43.1.5" data-path="examples.html"><a href="examples.html#examples-rlang-runs"><i class="fa fa-check"></i><b>43.1.5</b> 升降连计数</a></li>
</ul></li>
<li class="chapter" data-level="43.2" data-path="examples.html"><a href="examples.html#examples-prob"><i class="fa fa-check"></i><b>43.2</b> 概率</a><ul>
<li class="chapter" data-level="43.2.1" data-path="examples.html"><a href="examples.html#examples-prob-thsage"><i class="fa fa-check"></i><b>43.2.1</b> 智者千虑必有一失</a></li>
<li class="chapter" data-level="43.2.2" data-path="examples.html"><a href="examples.html#examples-prob-coupleseats"><i class="fa fa-check"></i><b>43.2.2</b> 圆桌夫妇座位问题</a></li>
</ul></li>
<li class="chapter" data-level="43.3" data-path="examples.html"><a href="examples.html#examples-scicomp"><i class="fa fa-check"></i><b>43.3</b> 科学计算</a><ul>
<li class="chapter" data-level="43.3.1" data-path="examples.html"><a href="examples.html#examples-scicomp-citylink"><i class="fa fa-check"></i><b>43.3.1</b> 城市间最短路径</a></li>
<li class="chapter" data-level="43.3.2" data-path="examples.html"><a href="examples.html#examples-scicomp-daub"><i class="fa fa-check"></i><b>43.3.2</b> Daubechies小波函数计算</a></li>
<li class="chapter" data-level="43.3.3" data-path="examples.html"><a href="examples.html#examples-scicomp-heating"><i class="fa fa-check"></i><b>43.3.3</b> 房间加热温度变化</a></li>
</ul></li>
<li class="chapter" data-level="43.4" data-path="examples.html"><a href="examples.html#examples-statcomp"><i class="fa fa-check"></i><b>43.4</b> 统计计算</a><ul>
<li class="chapter" data-level="43.4.1" data-path="examples.html"><a href="examples.html#examples-statcomp-kernden"><i class="fa fa-check"></i><b>43.4.1</b> 核回归与核密度估计</a></li>
<li class="chapter" data-level="43.4.2" data-path="examples.html"><a href="examples.html#examples-statcomp-mcquad2d"><i class="fa fa-check"></i><b>43.4.2</b> 二维随机模拟积分</a></li>
<li class="chapter" data-level="43.4.3" data-path="examples.html"><a href="examples.html#examples-statcomp-hidfreq"><i class="fa fa-check"></i><b>43.4.3</b> 潜周期估计</a></li>
<li class="chapter" data-level="43.4.4" data-path="examples.html"><a href="examples.html#examples-statcomp-armaest"><i class="fa fa-check"></i><b>43.4.4</b> ARMA(1,1)模型估计</a></li>
<li class="chapter" data-level="43.4.5" data-path="examples.html"><a href="examples.html#examples-statcomp-varprop"><i class="fa fa-check"></i><b>43.4.5</b> VAR模型平稳性</a></li>
<li class="chapter" data-level="43.4.6" data-path="examples.html"><a href="examples.html#examples-statcomp-storereliab"><i class="fa fa-check"></i><b>43.4.6</b> 贮存可靠性评估</a></li>
</ul></li>
<li class="chapter" data-level="43.5" data-path="examples.html"><a href="examples.html#examples-datatreat"><i class="fa fa-check"></i><b>43.5</b> 数据处理</a><ul>
<li class="chapter" data-level="43.5.1" data-path="examples.html"><a href="examples.html#examples-datatreat-subscore"><i class="fa fa-check"></i><b>43.5.1</b> 小题分题型分数汇总</a></li>
<li class="chapter" data-level="43.5.2" data-path="examples.html"><a href="examples.html#examples-datatreat-cluslab"><i class="fa fa-check"></i><b>43.5.2</b> 类别编号重排</a></li>
</ul></li>
<li class="chapter" data-level="43.6" data-path="examples.html"><a href="examples.html#examples-texttr"><i class="fa fa-check"></i><b>43.6</b> 文本处理</a><ul>
<li class="chapter" data-level="43.6.1" data-path="examples.html"><a href="examples.html#examples-texttr-hongloument"><i class="fa fa-check"></i><b>43.6.1</b> 用R语言下载处理《红楼梦》htm文件</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li><a href="http://www.math.pku.edu.cn/teachers/lidf/" target="blank">编著：李东风</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">R语言教程</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="summary-summ" class="section level1">
<h1><span class="header-section-number">27</span> 数据汇总</h1>
<div id="dplyr-summ" class="section level2">
<h2><span class="header-section-number">27.1</span> 用dplyr作数据汇总</h2>
<p>dplyr包的<code>summarise()</code>函数可以对数据框计算统计量。</p>
<p>以肺癌病人化疗数据<a href="cancer.csv"><code>cancer.csv</code></a>为例，
有34个肺癌病人的数据：</p>
<div class="sourceCode" id="cb1534"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1534-1"><a href="summary-summ.html#cb1534-1"></a>d.cancer &lt;-<span class="st"> </span><span class="kw">read_csv</span>(</span>
<span id="cb1534-2"><a href="summary-summ.html#cb1534-2"></a>  <span class="st">&quot;cancer.csv&quot;</span>, <span class="dt">locale=</span><span class="kw">locale</span>(<span class="dt">encoding=</span><span class="st">&quot;GBK&quot;</span>))</span></code></pre></div>
<pre><code>## Parsed with column specification:
## cols(
##   id = col_double(),
##   age = col_double(),
##   sex = col_character(),
##   type = col_character(),
##   v0 = col_double(),
##   v1 = col_double()
## )</code></pre>
<div class="sourceCode" id="cb1536"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1536-1"><a href="summary-summ.html#cb1536-1"></a>knitr<span class="op">::</span><span class="kw">kable</span>(d.cancer)</span></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="right">id</th>
<th align="right">age</th>
<th align="left">sex</th>
<th align="left">type</th>
<th align="right">v0</th>
<th align="right">v1</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">1</td>
<td align="right">70</td>
<td align="left">F</td>
<td align="left">腺癌</td>
<td align="right">26.51</td>
<td align="right">2.91</td>
</tr>
<tr class="even">
<td align="right">2</td>
<td align="right">70</td>
<td align="left">F</td>
<td align="left">腺癌</td>
<td align="right">135.48</td>
<td align="right">35.08</td>
</tr>
<tr class="odd">
<td align="right">3</td>
<td align="right">69</td>
<td align="left">F</td>
<td align="left">腺癌</td>
<td align="right">209.74</td>
<td align="right">74.44</td>
</tr>
<tr class="even">
<td align="right">4</td>
<td align="right">68</td>
<td align="left">M</td>
<td align="left">腺癌</td>
<td align="right">61.00</td>
<td align="right">34.97</td>
</tr>
<tr class="odd">
<td align="right">5</td>
<td align="right">67</td>
<td align="left">M</td>
<td align="left">鳞癌</td>
<td align="right">237.75</td>
<td align="right">128.34</td>
</tr>
<tr class="even">
<td align="right">6</td>
<td align="right">75</td>
<td align="left">F</td>
<td align="left">腺癌</td>
<td align="right">330.24</td>
<td align="right">112.34</td>
</tr>
<tr class="odd">
<td align="right">7</td>
<td align="right">52</td>
<td align="left">M</td>
<td align="left">鳞癌</td>
<td align="right">104.90</td>
<td align="right">32.10</td>
</tr>
<tr class="even">
<td align="right">8</td>
<td align="right">71</td>
<td align="left">M</td>
<td align="left">鳞癌</td>
<td align="right">85.15</td>
<td align="right">29.15</td>
</tr>
<tr class="odd">
<td align="right">9</td>
<td align="right">68</td>
<td align="left">M</td>
<td align="left">鳞癌</td>
<td align="right">101.65</td>
<td align="right">22.15</td>
</tr>
<tr class="even">
<td align="right">10</td>
<td align="right">79</td>
<td align="left">M</td>
<td align="left">鳞癌</td>
<td align="right">65.54</td>
<td align="right">21.94</td>
</tr>
<tr class="odd">
<td align="right">11</td>
<td align="right">55</td>
<td align="left">M</td>
<td align="left">腺癌</td>
<td align="right">125.31</td>
<td align="right">12.33</td>
</tr>
<tr class="even">
<td align="right">12</td>
<td align="right">54</td>
<td align="left">M</td>
<td align="left">鳞癌</td>
<td align="right">224.36</td>
<td align="right">99.44</td>
</tr>
<tr class="odd">
<td align="right">13</td>
<td align="right">55</td>
<td align="left">F</td>
<td align="left">腺癌</td>
<td align="right">12.93</td>
<td align="right">2.30</td>
</tr>
<tr class="even">
<td align="right">14</td>
<td align="right">75</td>
<td align="left">M</td>
<td align="left">腺癌</td>
<td align="right">40.21</td>
<td align="right">23.96</td>
</tr>
<tr class="odd">
<td align="right">15</td>
<td align="right">61</td>
<td align="left">F</td>
<td align="left">腺癌</td>
<td align="right">12.58</td>
<td align="right">7.39</td>
</tr>
<tr class="even">
<td align="right">16</td>
<td align="right">76</td>
<td align="left">M</td>
<td align="left">鳞癌</td>
<td align="right">231.04</td>
<td align="right">112.58</td>
</tr>
<tr class="odd">
<td align="right">17</td>
<td align="right">65</td>
<td align="left">M</td>
<td align="left">鳞癌</td>
<td align="right">172.13</td>
<td align="right">91.62</td>
</tr>
<tr class="even">
<td align="right">18</td>
<td align="right">66</td>
<td align="left">M</td>
<td align="left">鳞癌</td>
<td align="right">39.26</td>
<td align="right">13.95</td>
</tr>
<tr class="odd">
<td align="right">19</td>
<td align="right">NA</td>
<td align="left">F</td>
<td align="left">腺癌</td>
<td align="right">32.91</td>
<td align="right">9.45</td>
</tr>
<tr class="even">
<td align="right">20</td>
<td align="right">63</td>
<td align="left">F</td>
<td align="left">腺癌</td>
<td align="right">161.00</td>
<td align="right">122.45</td>
</tr>
<tr class="odd">
<td align="right">21</td>
<td align="right">67</td>
<td align="left">M</td>
<td align="left">鳞癌</td>
<td align="right">105.26</td>
<td align="right">68.35</td>
</tr>
<tr class="even">
<td align="right">22</td>
<td align="right">51</td>
<td align="left">M</td>
<td align="left">鳞癌</td>
<td align="right">13.25</td>
<td align="right">5.25</td>
</tr>
<tr class="odd">
<td align="right">23</td>
<td align="right">49</td>
<td align="left">M</td>
<td align="left">鳞癌</td>
<td align="right">18.70</td>
<td align="right">3.34</td>
</tr>
<tr class="even">
<td align="right">24</td>
<td align="right">49</td>
<td align="left">M</td>
<td align="left">鳞癌</td>
<td align="right">60.23</td>
<td align="right">50.36</td>
</tr>
<tr class="odd">
<td align="right">25</td>
<td align="right">NA</td>
<td align="left">F</td>
<td align="left">鳞癌</td>
<td align="right">223.00</td>
<td align="right">25.59</td>
</tr>
<tr class="even">
<td align="right">26</td>
<td align="right">NA</td>
<td align="left">M</td>
<td align="left">鳞癌</td>
<td align="right">145.70</td>
<td align="right">35.36</td>
</tr>
<tr class="odd">
<td align="right">27</td>
<td align="right">NA</td>
<td align="left">M</td>
<td align="left">鳞癌</td>
<td align="right">138.44</td>
<td align="right">11.30</td>
</tr>
<tr class="even">
<td align="right">28</td>
<td align="right">NA</td>
<td align="left">M</td>
<td align="left">鳞癌</td>
<td align="right">83.71</td>
<td align="right">76.45</td>
</tr>
<tr class="odd">
<td align="right">29</td>
<td align="right">NA</td>
<td align="left">M</td>
<td align="left">鳞癌</td>
<td align="right">74.48</td>
<td align="right">23.66</td>
</tr>
<tr class="even">
<td align="right">30</td>
<td align="right">NA</td>
<td align="left">F</td>
<td align="left">腺癌</td>
<td align="right">42.70</td>
<td align="right">5.97</td>
</tr>
<tr class="odd">
<td align="right">31</td>
<td align="right">NA</td>
<td align="left">M</td>
<td align="left">鳞癌</td>
<td align="right">142.48</td>
<td align="right">68.46</td>
</tr>
<tr class="even">
<td align="right">32</td>
<td align="right">NA</td>
<td align="left">F</td>
<td align="left">鳞癌</td>
<td align="right">46.97</td>
<td align="right">27.32</td>
</tr>
<tr class="odd">
<td align="right">33</td>
<td align="right">NA</td>
<td align="left">F</td>
<td align="left">鳞癌</td>
<td align="right">170.63</td>
<td align="right">74.76</td>
</tr>
<tr class="even">
<td align="right">34</td>
<td align="right">NA</td>
<td align="left">F</td>
<td align="left">鳞癌</td>
<td align="right">67.37</td>
<td align="right">54.52</td>
</tr>
</tbody>
</table>
<p>求年龄(age)的观测个数、非缺失观测个数、平均值、标准差：</p>
<div class="sourceCode" id="cb1537"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1537-1"><a href="summary-summ.html#cb1537-1"></a>d.cancer <span class="op">%&gt;%</span></span>
<span id="cb1537-2"><a href="summary-summ.html#cb1537-2"></a><span class="st">  </span><span class="kw">summarise</span>(</span>
<span id="cb1537-3"><a href="summary-summ.html#cb1537-3"></a>    <span class="dt">nobs =</span> <span class="kw">n</span>(),</span>
<span id="cb1537-4"><a href="summary-summ.html#cb1537-4"></a>    <span class="dt">n =</span> <span class="kw">sum</span>(<span class="op">!</span><span class="kw">is.na</span>(age)),</span>
<span id="cb1537-5"><a href="summary-summ.html#cb1537-5"></a>    <span class="dt">mean.age=</span><span class="kw">mean</span>(age, <span class="dt">na.rm=</span><span class="ot">TRUE</span>),</span>
<span id="cb1537-6"><a href="summary-summ.html#cb1537-6"></a>    <span class="dt">sd.age=</span><span class="kw">sd</span>(age, <span class="dt">na.rm=</span><span class="ot">TRUE</span>)) <span class="op">%&gt;%</span></span>
<span id="cb1537-7"><a href="summary-summ.html#cb1537-7"></a><span class="st">  </span>knitr<span class="op">::</span><span class="kw">kable</span>()</span></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="right">nobs</th>
<th align="right">n</th>
<th align="right">mean.age</th>
<th align="right">sd.age</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">34</td>
<td align="right">23</td>
<td align="right">64.13043</td>
<td align="right">9.161701</td>
</tr>
</tbody>
</table>
<p>其中<code>n()</code>计算观测数（行数）。
为了计算某列的非缺失值个数，用<code>sum(!is.na(x))</code>。</p>
<p><code>summarise</code>中常用的汇总函数有：</p>
<ul>
<li>位置度量：<code>mean()</code>, <code>median()</code>。</li>
<li>分散程度（变异性）度量：<code>sd()</code>, <code>IQR()</code>, <code>mad()</code>。</li>
<li>分位数：<code>min()</code>, <code>max()</code>, <code>quantile()</code>。</li>
<li>按下标查询，如<code>first(x)</code>取出<code>x[1]</code>，
<code>last(x)</code>取出<code>x</code>的最后一个元素，
<code>nth(x,2)</code>取出<code>x[2]</code>。
可以提供一个缺省值以防某个下标位置不存在。</li>
<li>计数：<code>n()</code>给出某个组的观测数，
<code>sum(!is.na(x))</code>统计<code>x</code>的非缺失值个数，
<code>n_distinct(x)</code>统计<code>x</code>的不同值个数(缺失值也算一个值)。
<code>count(x)</code>给出<code>x</code>的每个不同值的个数（类似于<code>table()</code>函数）。</li>
</ul>
<p>这里有些函数是dplyr包提供的，
仅适用于tibble类型。</p>
</div>
<div id="dplyr-summat" class="section level2">
<h2><span class="header-section-number">27.2</span> 多个变量的汇总</h2>
<p>在有多个变量需要汇总时，
<code>summarise</code>的格式就会比较罗嗦。
比如，
需要对cancer数据集中v0和v1两个变量同时计算平均值和标准差：</p>
<div class="sourceCode" id="cb1538"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1538-1"><a href="summary-summ.html#cb1538-1"></a>d.cancer <span class="op">%&gt;%</span></span>
<span id="cb1538-2"><a href="summary-summ.html#cb1538-2"></a><span class="st">  </span><span class="kw">summarise</span>(</span>
<span id="cb1538-3"><a href="summary-summ.html#cb1538-3"></a>    <span class="dt">mean.v0=</span><span class="kw">mean</span>(v0, <span class="dt">na.rm=</span><span class="ot">TRUE</span>),</span>
<span id="cb1538-4"><a href="summary-summ.html#cb1538-4"></a>    <span class="dt">sd.v0 =</span> <span class="kw">sd</span>(v0, <span class="dt">na.rm=</span><span class="ot">TRUE</span>),</span>
<span id="cb1538-5"><a href="summary-summ.html#cb1538-5"></a>    <span class="dt">mean.v1=</span><span class="kw">mean</span>(v1, <span class="dt">na.rm=</span><span class="ot">TRUE</span>),</span>
<span id="cb1538-6"><a href="summary-summ.html#cb1538-6"></a>    <span class="dt">sd.v1 =</span> <span class="kw">sd</span>(v1, <span class="dt">na.rm=</span><span class="ot">TRUE</span>)) <span class="op">%&gt;%</span></span>
<span id="cb1538-7"><a href="summary-summ.html#cb1538-7"></a><span class="st">  </span>knitr<span class="op">::</span><span class="kw">kable</span>()</span></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="right">mean.v0</th>
<th align="right">sd.v0</th>
<th align="right">mean.v1</th>
<th align="right">sd.v1</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">110.0768</td>
<td align="right">79.52338</td>
<td align="right">44.69353</td>
<td align="right">38.44172</td>
</tr>
</tbody>
</table>
<p>显然，如果有许多变量要计算不止一个统计量，
就需要人为地将每一个变量的每一个统计量单独命名。
dplyr包的<code>summarse_at()</code>函数可以指定一批变量名与一批统计函数，
自动命名结果变量，如：</p>
<div class="sourceCode" id="cb1539"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1539-1"><a href="summary-summ.html#cb1539-1"></a>d.cancer <span class="op">%&gt;%</span></span>
<span id="cb1539-2"><a href="summary-summ.html#cb1539-2"></a><span class="st">  </span><span class="kw">summarise_at</span>(</span>
<span id="cb1539-3"><a href="summary-summ.html#cb1539-3"></a>    <span class="kw">c</span>(<span class="st">&quot;v0&quot;</span>, <span class="st">&quot;v1&quot;</span>),</span>
<span id="cb1539-4"><a href="summary-summ.html#cb1539-4"></a>    <span class="kw">list</span>(<span class="dt">avg =</span> <span class="op">~</span><span class="kw">mean</span>(.), <span class="dt">std =</span> <span class="op">~</span><span class="kw">sd</span>(.)), </span>
<span id="cb1539-5"><a href="summary-summ.html#cb1539-5"></a>    <span class="dt">na.rm=</span><span class="ot">TRUE</span>) <span class="op">%&gt;%</span></span>
<span id="cb1539-6"><a href="summary-summ.html#cb1539-6"></a><span class="st">  </span>knitr<span class="op">::</span><span class="kw">kable</span>()</span></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="right">v0_avg</th>
<th align="right">v1_avg</th>
<th align="right">v0_std</th>
<th align="right">v1_std</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">110.0768</td>
<td align="right">44.69353</td>
<td align="right">79.52338</td>
<td align="right">38.44172</td>
</tr>
</tbody>
</table>
<p>其中的选项<code>na.rm</code>将作为<code>...</code>格式的参数传递给统计函数<code>mean</code>和<code>sd</code>。</p>
<p><code>summarise_at</code>的第三自变量（在管道中的第二自变量位置）可以取：</p>
<ul>
<li>一个函数，如<code>mean</code>；</li>
<li>一个如<code>~ f(.)</code>这样的自定义无名函数，其中<code>.</code>表示自变量；</li>
<li>函数或者自定义无名函数的列表。</li>
</ul>
<p>结果统计量自动命名为“<code>变量名_统计量名</code>”的格式。</p>
<p>其中的变量子集也可以用序号范围表示，
或者用<code>vars()</code>函数写成不加撇号的格式，如：</p>
<div class="sourceCode" id="cb1540"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1540-1"><a href="summary-summ.html#cb1540-1"></a>d.cancer <span class="op">%&gt;%</span></span>
<span id="cb1540-2"><a href="summary-summ.html#cb1540-2"></a><span class="st">  </span><span class="kw">summarise_at</span>(</span>
<span id="cb1540-3"><a href="summary-summ.html#cb1540-3"></a>    <span class="dv">5</span><span class="op">:</span><span class="dv">6</span>,</span>
<span id="cb1540-4"><a href="summary-summ.html#cb1540-4"></a>    <span class="kw">list</span>(<span class="dt">avg =</span> <span class="op">~</span><span class="kw">mean</span>(.), <span class="dt">std =</span> <span class="op">~</span><span class="kw">sd</span>(.)), </span>
<span id="cb1540-5"><a href="summary-summ.html#cb1540-5"></a>    <span class="dt">na.rm=</span><span class="ot">TRUE</span>) <span class="op">%&gt;%</span></span>
<span id="cb1540-6"><a href="summary-summ.html#cb1540-6"></a><span class="st">  </span>knitr<span class="op">::</span><span class="kw">kable</span>()</span></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="right">v0_avg</th>
<th align="right">v1_avg</th>
<th align="right">v0_std</th>
<th align="right">v1_std</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">110.0768</td>
<td align="right">44.69353</td>
<td align="right">79.52338</td>
<td align="right">38.44172</td>
</tr>
</tbody>
</table>
<p>或</p>
<div class="sourceCode" id="cb1541"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1541-1"><a href="summary-summ.html#cb1541-1"></a>d.cancer <span class="op">%&gt;%</span></span>
<span id="cb1541-2"><a href="summary-summ.html#cb1541-2"></a><span class="st">  </span><span class="kw">summarise_at</span>(</span>
<span id="cb1541-3"><a href="summary-summ.html#cb1541-3"></a>    <span class="kw">vars</span>(v0, v1),</span>
<span id="cb1541-4"><a href="summary-summ.html#cb1541-4"></a>    <span class="kw">list</span>(<span class="dt">avg =</span> <span class="op">~</span><span class="kw">mean</span>(.), <span class="dt">std =</span> <span class="op">~</span><span class="kw">sd</span>(.)), </span>
<span id="cb1541-5"><a href="summary-summ.html#cb1541-5"></a>    <span class="dt">na.rm=</span><span class="ot">TRUE</span>) <span class="op">%&gt;%</span></span>
<span id="cb1541-6"><a href="summary-summ.html#cb1541-6"></a><span class="st">  </span>knitr<span class="op">::</span><span class="kw">kable</span>()</span></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="right">v0_avg</th>
<th align="right">v1_avg</th>
<th align="right">v0_std</th>
<th align="right">v1_std</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">110.0768</td>
<td align="right">44.69353</td>
<td align="right">79.52338</td>
<td align="right">38.44172</td>
</tr>
</tbody>
</table>
<p>如果要对所有数值型变量计算某些统计量，
可以用<code>summarize_if(is.numeric, list(变量后缀=~统计函数名&lt;, ...&gt;))</code>，
如：</p>
<div class="sourceCode" id="cb1542"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1542-1"><a href="summary-summ.html#cb1542-1"></a>d.cancer <span class="op">%&gt;%</span></span>
<span id="cb1542-2"><a href="summary-summ.html#cb1542-2"></a><span class="st">  </span><span class="kw">summarise_if</span>(</span>
<span id="cb1542-3"><a href="summary-summ.html#cb1542-3"></a>    is.numeric,</span>
<span id="cb1542-4"><a href="summary-summ.html#cb1542-4"></a>    <span class="kw">list</span>(<span class="dt">avg =</span> <span class="op">~</span><span class="kw">mean</span>(.), <span class="dt">std =</span> <span class="op">~</span><span class="kw">sd</span>(.)), </span>
<span id="cb1542-5"><a href="summary-summ.html#cb1542-5"></a>    <span class="dt">na.rm=</span><span class="ot">TRUE</span>) <span class="op">%&gt;%</span></span>
<span id="cb1542-6"><a href="summary-summ.html#cb1542-6"></a><span class="st">  </span>knitr<span class="op">::</span><span class="kw">kable</span>()</span></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="right">id_avg</th>
<th align="right">age_avg</th>
<th align="right">v0_avg</th>
<th align="right">v1_avg</th>
<th align="right">id_std</th>
<th align="right">age_std</th>
<th align="right">v0_std</th>
<th align="right">v1_std</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">17.5</td>
<td align="right">NA</td>
<td align="right">110.0768</td>
<td align="right">44.69353</td>
<td align="right">9.958246</td>
<td align="right">NaN</td>
<td align="right">79.52338</td>
<td align="right">38.44172</td>
</tr>
</tbody>
</table>
<p>其中的<code>is_numeric</code>用来筛选需要进行统计的变量子集，
可以替换成其它的示性函数（对每列返回一个逻辑值的函数）。</p>
<p><code>summarise_all</code>可以对所有变量计算统计量，如：</p>
<div class="sourceCode" id="cb1543"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1543-1"><a href="summary-summ.html#cb1543-1"></a>d.cancer <span class="op">%&gt;%</span></span>
<span id="cb1543-2"><a href="summary-summ.html#cb1543-2"></a><span class="st">  </span><span class="kw">select</span>(v0, v1) <span class="op">%&gt;%</span></span>
<span id="cb1543-3"><a href="summary-summ.html#cb1543-3"></a><span class="st">  </span><span class="kw">summarise_all</span>(</span>
<span id="cb1543-4"><a href="summary-summ.html#cb1543-4"></a>    <span class="kw">list</span>(<span class="dt">avg =</span> <span class="op">~</span><span class="kw">mean</span>(.), <span class="dt">std =</span> <span class="op">~</span><span class="kw">sd</span>(.)), </span>
<span id="cb1543-5"><a href="summary-summ.html#cb1543-5"></a>    <span class="dt">na.rm=</span><span class="ot">TRUE</span>) <span class="op">%&gt;%</span></span>
<span id="cb1543-6"><a href="summary-summ.html#cb1543-6"></a><span class="st">  </span>knitr<span class="op">::</span><span class="kw">kable</span>()</span></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="right">v0_avg</th>
<th align="right">v1_avg</th>
<th align="right">v0_std</th>
<th align="right">v1_std</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">110.0768</td>
<td align="right">44.69353</td>
<td align="right">79.52338</td>
<td align="right">38.44172</td>
</tr>
</tbody>
</table>
<p>可以用tidyr包将上面的变量与统计量拆开，
将变量放到不同的观测中，如：</p>
<div class="sourceCode" id="cb1544"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1544-1"><a href="summary-summ.html#cb1544-1"></a>d.cancer <span class="op">%&gt;%</span></span>
<span id="cb1544-2"><a href="summary-summ.html#cb1544-2"></a><span class="st">  </span><span class="kw">select</span>(v0, v1) <span class="op">%&gt;%</span></span>
<span id="cb1544-3"><a href="summary-summ.html#cb1544-3"></a><span class="st">  </span><span class="kw">summarise_all</span>(</span>
<span id="cb1544-4"><a href="summary-summ.html#cb1544-4"></a>    <span class="kw">list</span>(<span class="dt">avg =</span> <span class="op">~</span><span class="kw">mean</span>(.), <span class="dt">std =</span> <span class="op">~</span><span class="kw">sd</span>(.)), </span>
<span id="cb1544-5"><a href="summary-summ.html#cb1544-5"></a>    <span class="dt">na.rm=</span><span class="ot">TRUE</span>) <span class="op">%&gt;%</span></span>
<span id="cb1544-6"><a href="summary-summ.html#cb1544-6"></a><span class="st">  </span><span class="kw">pivot_longer</span>(</span>
<span id="cb1544-7"><a href="summary-summ.html#cb1544-7"></a>    <span class="kw">everything</span>(),</span>
<span id="cb1544-8"><a href="summary-summ.html#cb1544-8"></a>    <span class="dt">names_sep =</span><span class="st">&quot;_&quot;</span>,</span>
<span id="cb1544-9"><a href="summary-summ.html#cb1544-9"></a>    <span class="dt">names_to =</span> <span class="kw">c</span>(<span class="st">&quot;variable&quot;</span>, <span class="st">&quot;.value&quot;</span>)</span>
<span id="cb1544-10"><a href="summary-summ.html#cb1544-10"></a>    ) <span class="op">%&gt;%</span></span>
<span id="cb1544-11"><a href="summary-summ.html#cb1544-11"></a><span class="st">  </span>knitr<span class="op">::</span><span class="kw">kable</span>()</span></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="left">variable</th>
<th align="right">avg</th>
<th align="right">std</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">v0</td>
<td align="right">110.07676</td>
<td align="right">79.52338</td>
</tr>
<tr class="even">
<td align="left">v1</td>
<td align="right">44.69353</td>
<td align="right">38.44172</td>
</tr>
</tbody>
</table>
</div>
<div id="dplyr-groupby" class="section level2">
<h2><span class="header-section-number">27.3</span> 用dplyr作数据分组汇总</h2>
<p>数据汇总问题更常见的是作分组汇总。
dplyr包的<code>group_by()</code>函数对数据框（或tibble）分组，
随后的<code>summarise()</code>将按照分组汇总。</p>
<p>比如，
按不同性别分组计算人数与年龄平均值：</p>
<div class="sourceCode" id="cb1545"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1545-1"><a href="summary-summ.html#cb1545-1"></a>d.cancer <span class="op">%&gt;%</span></span>
<span id="cb1545-2"><a href="summary-summ.html#cb1545-2"></a><span class="st">  </span><span class="kw">group_by</span>(sex) <span class="op">%&gt;%</span></span>
<span id="cb1545-3"><a href="summary-summ.html#cb1545-3"></a><span class="st">  </span><span class="kw">summarise</span>(</span>
<span id="cb1545-4"><a href="summary-summ.html#cb1545-4"></a>    <span class="dt">count=</span><span class="kw">n</span>(), </span>
<span id="cb1545-5"><a href="summary-summ.html#cb1545-5"></a>    <span class="dt">mean.age=</span><span class="kw">mean</span>(age, <span class="dt">na.rm=</span><span class="ot">TRUE</span>)) <span class="op">%&gt;%</span></span>
<span id="cb1545-6"><a href="summary-summ.html#cb1545-6"></a><span class="st">  </span>knitr<span class="op">::</span><span class="kw">kable</span>()</span></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="left">sex</th>
<th align="right">count</th>
<th align="right">mean.age</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">F</td>
<td align="right">13</td>
<td align="right">66.14286</td>
</tr>
<tr class="even">
<td align="left">M</td>
<td align="right">21</td>
<td align="right">63.25000</td>
</tr>
</tbody>
</table>
<p>按不同性别分组计算v0和v1的人数、平均值、标准差：</p>
<div class="sourceCode" id="cb1546"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1546-1"><a href="summary-summ.html#cb1546-1"></a>d.cancer <span class="op">%&gt;%</span></span>
<span id="cb1546-2"><a href="summary-summ.html#cb1546-2"></a><span class="st">  </span><span class="kw">group_by</span>(sex) <span class="op">%&gt;%</span></span>
<span id="cb1546-3"><a href="summary-summ.html#cb1546-3"></a><span class="st">  </span><span class="kw">summarise_at</span>(</span>
<span id="cb1546-4"><a href="summary-summ.html#cb1546-4"></a>    <span class="kw">c</span>(<span class="st">&quot;v0&quot;</span>, <span class="st">&quot;v1&quot;</span>),</span>
<span id="cb1546-5"><a href="summary-summ.html#cb1546-5"></a>    <span class="kw">list</span>(<span class="dt">count =</span> <span class="op">~</span><span class="kw">n</span>(), <span class="dt">avg =</span> <span class="op">~</span><span class="kw">mean</span>(.), <span class="dt">std =</span> <span class="op">~</span><span class="kw">sd</span>(.)), </span>
<span id="cb1546-6"><a href="summary-summ.html#cb1546-6"></a>    <span class="dt">na.rm=</span><span class="ot">TRUE</span>) <span class="op">%&gt;%</span></span>
<span id="cb1546-7"><a href="summary-summ.html#cb1546-7"></a><span class="st">  </span>knitr<span class="op">::</span><span class="kw">kable</span>()</span></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="left">sex</th>
<th align="right">v0_count</th>
<th align="right">v1_count</th>
<th align="right">v0_avg</th>
<th align="right">v1_avg</th>
<th align="right">v0_std</th>
<th align="right">v1_std</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">F</td>
<td align="right">13</td>
<td align="right">13</td>
<td align="right">113.2354</td>
<td align="right">42.65538</td>
<td align="right">100.06621</td>
<td align="right">41.72226</td>
</tr>
<tr class="even">
<td align="left">M</td>
<td align="right">21</td>
<td align="right">21</td>
<td align="right">108.1214</td>
<td align="right">45.95524</td>
<td align="right">66.45374</td>
<td align="right">37.27592</td>
</tr>
</tbody>
</table>
<p>上面的程序应该将<code>v0_count</code>和<code>v1_count</code>合并，
但是<code>summarise_at</code>在有多个变量和多个统计量时总会将变量两两搭配，
确实需要时可以分别统计再合并，结果程序会略繁琐一些：</p>
<div class="sourceCode" id="cb1547"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1547-1"><a href="summary-summ.html#cb1547-1"></a><span class="kw">bind_cols</span>(</span>
<span id="cb1547-2"><a href="summary-summ.html#cb1547-2"></a>  d.cancer <span class="op">%&gt;%</span></span>
<span id="cb1547-3"><a href="summary-summ.html#cb1547-3"></a><span class="st">    </span><span class="kw">group_by</span>(sex) <span class="op">%&gt;%</span></span>
<span id="cb1547-4"><a href="summary-summ.html#cb1547-4"></a><span class="st">    </span><span class="kw">summarise</span>(<span class="dt">count =</span> <span class="kw">n</span>() ),</span>
<span id="cb1547-5"><a href="summary-summ.html#cb1547-5"></a>  d.cancer <span class="op">%&gt;%</span></span>
<span id="cb1547-6"><a href="summary-summ.html#cb1547-6"></a><span class="st">    </span><span class="kw">group_by</span>(sex) <span class="op">%&gt;%</span></span>
<span id="cb1547-7"><a href="summary-summ.html#cb1547-7"></a><span class="st">    </span><span class="kw">summarise_at</span>(</span>
<span id="cb1547-8"><a href="summary-summ.html#cb1547-8"></a>      <span class="kw">c</span>(<span class="st">&quot;v0&quot;</span>, <span class="st">&quot;v1&quot;</span>),</span>
<span id="cb1547-9"><a href="summary-summ.html#cb1547-9"></a>      <span class="kw">list</span>(<span class="dt">avg =</span> <span class="op">~</span><span class="kw">mean</span>(.), <span class="dt">std =</span> <span class="op">~</span><span class="kw">sd</span>(.)), </span>
<span id="cb1547-10"><a href="summary-summ.html#cb1547-10"></a>      <span class="dt">na.rm=</span><span class="ot">TRUE</span>) <span class="op">%&gt;%</span></span>
<span id="cb1547-11"><a href="summary-summ.html#cb1547-11"></a><span class="st">    </span><span class="kw">select</span>(<span class="op">-</span>sex)</span>
<span id="cb1547-12"><a href="summary-summ.html#cb1547-12"></a>  )</span></code></pre></div>
<pre><code>## # A tibble: 2 x 6
##   sex   count v0_avg v1_avg v0_std v1_std
##   &lt;chr&gt; &lt;int&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;
## 1 F        13   113.   42.7  100.    41.7
## 2 M        21   108.   46.0   66.5   37.3</code></pre>
<p>为了查询数值型变量取值满足某种条件的个数和比例，
可以将该条件用<code>sum()</code>和<code>mean()</code>函数统计，
比如，
对男女两组分别计算年龄在60岁以上的人数和比例：</p>
<div class="sourceCode" id="cb1549"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1549-1"><a href="summary-summ.html#cb1549-1"></a>d.cancer <span class="op">%&gt;%</span></span>
<span id="cb1549-2"><a href="summary-summ.html#cb1549-2"></a><span class="st">  </span><span class="kw">group_by</span>(sex) <span class="op">%&gt;%</span></span>
<span id="cb1549-3"><a href="summary-summ.html#cb1549-3"></a><span class="st">  </span><span class="kw">summarise</span>(</span>
<span id="cb1549-4"><a href="summary-summ.html#cb1549-4"></a>    <span class="dt">nold =</span> <span class="kw">sum</span>(age <span class="op">&gt;=</span><span class="st"> </span><span class="dv">60</span>, <span class="dt">na.rm=</span><span class="ot">TRUE</span>), </span>
<span id="cb1549-5"><a href="summary-summ.html#cb1549-5"></a>    <span class="dt">pold =</span> nold <span class="op">/</span><span class="st"> </span><span class="kw">n</span>()) <span class="op">%&gt;%</span></span>
<span id="cb1549-6"><a href="summary-summ.html#cb1549-6"></a><span class="st">  </span>knitr<span class="op">::</span><span class="kw">kable</span>()</span></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="left">sex</th>
<th align="right">nold</th>
<th align="right">pold</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">F</td>
<td align="right">6</td>
<td align="right">0.4615385</td>
</tr>
<tr class="even">
<td align="left">M</td>
<td align="right">10</td>
<td align="right">0.4761905</td>
</tr>
</tbody>
</table>
<p>用<code>group_by()</code>分组后除了可以分组汇总，
还可以分组筛选：</p>
<div class="sourceCode" id="cb1550"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1550-1"><a href="summary-summ.html#cb1550-1"></a>d.cancer <span class="op">%&gt;%</span></span>
<span id="cb1550-2"><a href="summary-summ.html#cb1550-2"></a><span class="st">  </span><span class="kw">group_by</span>(sex) <span class="op">%&gt;%</span></span>
<span id="cb1550-3"><a href="summary-summ.html#cb1550-3"></a><span class="st">  </span><span class="kw">filter</span>(<span class="kw">rank</span>(<span class="kw">desc</span>(v0)) <span class="op">&lt;=</span><span class="st"> </span><span class="dv">2</span>) <span class="op">%&gt;%</span></span>
<span id="cb1550-4"><a href="summary-summ.html#cb1550-4"></a><span class="st">  </span><span class="kw">arrange</span>(sex, <span class="kw">desc</span>(v0)) <span class="op">%&gt;%</span></span>
<span id="cb1550-5"><a href="summary-summ.html#cb1550-5"></a><span class="st">  </span>knitr<span class="op">::</span><span class="kw">kable</span>()</span></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="right">id</th>
<th align="right">age</th>
<th align="left">sex</th>
<th align="left">type</th>
<th align="right">v0</th>
<th align="right">v1</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">6</td>
<td align="right">75</td>
<td align="left">F</td>
<td align="left">腺癌</td>
<td align="right">330.24</td>
<td align="right">112.34</td>
</tr>
<tr class="even">
<td align="right">25</td>
<td align="right">NA</td>
<td align="left">F</td>
<td align="left">鳞癌</td>
<td align="right">223.00</td>
<td align="right">25.59</td>
</tr>
<tr class="odd">
<td align="right">5</td>
<td align="right">67</td>
<td align="left">M</td>
<td align="left">鳞癌</td>
<td align="right">237.75</td>
<td align="right">128.34</td>
</tr>
<tr class="even">
<td align="right">16</td>
<td align="right">76</td>
<td align="left">M</td>
<td align="left">鳞癌</td>
<td align="right">231.04</td>
<td align="right">112.58</td>
</tr>
</tbody>
</table>
<p>以上程序按性别分组后，
在每组中找出疗前体积排名在前两名的。</p>
<p>在分组后也可以根据每组的统计量用<code>mutate()</code>定义新变量。
比如，每组的v0, v1除以本组的最大值（结果略）：</p>
<div class="sourceCode" id="cb1551"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1551-1"><a href="summary-summ.html#cb1551-1"></a>d.cancer <span class="op">%&gt;%</span></span>
<span id="cb1551-2"><a href="summary-summ.html#cb1551-2"></a><span class="st">  </span><span class="kw">group_by</span>(sex) <span class="op">%&gt;%</span></span>
<span id="cb1551-3"><a href="summary-summ.html#cb1551-3"></a><span class="st">  </span><span class="kw">mutate</span>(</span>
<span id="cb1551-4"><a href="summary-summ.html#cb1551-4"></a>    <span class="dt">v0s =</span> v0 <span class="op">/</span><span class="st"> </span><span class="kw">max</span>(v0),</span>
<span id="cb1551-5"><a href="summary-summ.html#cb1551-5"></a>    <span class="dt">v1s =</span> v1 <span class="op">/</span><span class="st"> </span><span class="kw">max</span>(v1))</span></code></pre></div>
</div>
<div id="dplyr-crossgroup" class="section level2">
<h2><span class="header-section-number">27.4</span> 交叉分类的汇总</h2>
<p>下面的程序对d.cancer数据框分性别与病理类型分别统计人数：</p>
<div class="sourceCode" id="cb1552"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1552-1"><a href="summary-summ.html#cb1552-1"></a>d.cancer <span class="op">%&gt;%</span></span>
<span id="cb1552-2"><a href="summary-summ.html#cb1552-2"></a><span class="st">  </span><span class="kw">group_by</span>(sex, type) <span class="op">%&gt;%</span></span>
<span id="cb1552-3"><a href="summary-summ.html#cb1552-3"></a><span class="st">  </span><span class="kw">summarise</span>(<span class="dt">freq=</span><span class="kw">n</span>()) <span class="op">%&gt;%</span></span>
<span id="cb1552-4"><a href="summary-summ.html#cb1552-4"></a><span class="st">  </span>knitr<span class="op">::</span><span class="kw">kable</span>()</span></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="left">sex</th>
<th align="left">type</th>
<th align="right">freq</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">F</td>
<td align="left">鳞癌</td>
<td align="right">4</td>
</tr>
<tr class="even">
<td align="left">F</td>
<td align="left">腺癌</td>
<td align="right">9</td>
</tr>
<tr class="odd">
<td align="left">M</td>
<td align="left">鳞癌</td>
<td align="right">18</td>
</tr>
<tr class="even">
<td align="left">M</td>
<td align="left">腺癌</td>
<td align="right">3</td>
</tr>
</tbody>
</table>
<p>如果仅需要计算交叉分类频数，
不需要用<code>group_by()</code>，
可以用dplyr的<code>count()</code>函数，如：</p>
<div class="sourceCode" id="cb1553"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1553-1"><a href="summary-summ.html#cb1553-1"></a>d.cancer <span class="op">%&gt;%</span></span>
<span id="cb1553-2"><a href="summary-summ.html#cb1553-2"></a><span class="st">  </span><span class="kw">count</span>(sex, type) <span class="op">%&gt;%</span></span>
<span id="cb1553-3"><a href="summary-summ.html#cb1553-3"></a><span class="st">  </span>knitr<span class="op">::</span><span class="kw">kable</span>()</span></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="left">sex</th>
<th align="left">type</th>
<th align="right">n</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">F</td>
<td align="left">鳞癌</td>
<td align="right">4</td>
</tr>
<tr class="even">
<td align="left">F</td>
<td align="left">腺癌</td>
<td align="right">9</td>
</tr>
<tr class="odd">
<td align="left">M</td>
<td align="left">鳞癌</td>
<td align="right">18</td>
</tr>
<tr class="even">
<td align="left">M</td>
<td align="left">腺癌</td>
<td align="right">3</td>
</tr>
</tbody>
</table>
<p>下面的程序数出NHANES数据框中ID(受访者编码)与SurveyYr(考察年份)每一对组合的出现次数,
筛选出二次及以上者，并降序排列，仅显示前10行结果：</p>
<div class="sourceCode" id="cb1554"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1554-1"><a href="summary-summ.html#cb1554-1"></a>NHANES <span class="op">%&gt;%</span></span>
<span id="cb1554-2"><a href="summary-summ.html#cb1554-2"></a><span class="st">  </span><span class="kw">count</span>(ID, SurveyYr) <span class="op">%&gt;%</span></span>
<span id="cb1554-3"><a href="summary-summ.html#cb1554-3"></a><span class="st">  </span><span class="kw">filter</span>(n <span class="op">&gt;=</span><span class="dv">2</span> ) <span class="op">%&gt;%</span></span>
<span id="cb1554-4"><a href="summary-summ.html#cb1554-4"></a><span class="st">  </span><span class="kw">arrange</span>(<span class="kw">desc</span>(n)) <span class="op">%&gt;%</span></span>
<span id="cb1554-5"><a href="summary-summ.html#cb1554-5"></a><span class="st">  </span><span class="kw">head</span>(<span class="dv">10</span>) <span class="op">%&gt;%</span></span>
<span id="cb1554-6"><a href="summary-summ.html#cb1554-6"></a><span class="st">  </span>knitr<span class="op">::</span><span class="kw">kable</span>()</span></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="right">ID</th>
<th align="left">SurveyYr</th>
<th align="right">n</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">70324</td>
<td align="left">2011_12</td>
<td align="right">8</td>
</tr>
<tr class="even">
<td align="right">62927</td>
<td align="left">2011_12</td>
<td align="right">7</td>
</tr>
<tr class="odd">
<td align="right">63297</td>
<td align="left">2011_12</td>
<td align="right">7</td>
</tr>
<tr class="even">
<td align="right">69626</td>
<td align="left">2011_12</td>
<td align="right">7</td>
</tr>
<tr class="odd">
<td align="right">60566</td>
<td align="left">2009_10</td>
<td align="right">6</td>
</tr>
<tr class="even">
<td align="right">61442</td>
<td align="left">2009_10</td>
<td align="right">6</td>
</tr>
<tr class="odd">
<td align="right">63163</td>
<td align="left">2011_12</td>
<td align="right">6</td>
</tr>
<tr class="even">
<td align="right">63330</td>
<td align="left">2011_12</td>
<td align="right">6</td>
</tr>
<tr class="odd">
<td align="right">63390</td>
<td align="left">2011_12</td>
<td align="right">6</td>
</tr>
<tr class="even">
<td align="right">63744</td>
<td align="left">2011_12</td>
<td align="right">6</td>
</tr>
</tbody>
</table>
<p>用<code>group_by()</code>交叉分组汇总后的结果不是普通的tibble，
总是带有外层分组信息，
最内层的分组信息不再有效。
不注意这种规定在后续的使用中可能会产生问题，
为此，
可以用<code>ungroup()</code>函数取消分组。</p>
<p>例如，
希望在用<code>group_by()</code>按照性别和病理类别交叉分类计算频数后求所有病人的总人数，
用了如下程序：</p>
<div class="sourceCode" id="cb1555"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1555-1"><a href="summary-summ.html#cb1555-1"></a>d.cancer <span class="op">%&gt;%</span></span>
<span id="cb1555-2"><a href="summary-summ.html#cb1555-2"></a><span class="st">  </span><span class="kw">group_by</span>(sex, type) <span class="op">%&gt;%</span></span>
<span id="cb1555-3"><a href="summary-summ.html#cb1555-3"></a><span class="st">  </span><span class="kw">summarise</span>(<span class="dt">freq=</span><span class="kw">n</span>()) <span class="op">%&gt;%</span></span>
<span id="cb1555-4"><a href="summary-summ.html#cb1555-4"></a><span class="st">  </span><span class="kw">summarise</span>(<span class="dt">ntotal=</span><span class="kw">sum</span>(freq)) <span class="op">%&gt;%</span></span>
<span id="cb1555-5"><a href="summary-summ.html#cb1555-5"></a><span class="st">  </span>knitr<span class="op">::</span><span class="kw">kable</span>()</span></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="left">sex</th>
<th align="right">ntotal</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">F</td>
<td align="right">13</td>
</tr>
<tr class="even">
<td align="left">M</td>
<td align="right">21</td>
</tr>
</tbody>
</table>
<p>可以看出并没有能够计算总人数，
而是按原来交叉分类的外层分类即性别分组计算了总人数。
这是因为交叉分组计算频数后的结果仍按照外层分类变量sex分组，
所以<code>summarise(ntotal=sum(freq))</code>也是分两组进行的。
在中间加入<code>ungroup()</code>就可以不分组计算总人数：</p>
<div class="sourceCode" id="cb1556"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1556-1"><a href="summary-summ.html#cb1556-1"></a>d.cancer <span class="op">%&gt;%</span></span>
<span id="cb1556-2"><a href="summary-summ.html#cb1556-2"></a><span class="st">  </span><span class="kw">group_by</span>(sex, type) <span class="op">%&gt;%</span></span>
<span id="cb1556-3"><a href="summary-summ.html#cb1556-3"></a><span class="st">  </span><span class="kw">summarise</span>(<span class="dt">freq=</span><span class="kw">n</span>()) <span class="op">%&gt;%</span></span>
<span id="cb1556-4"><a href="summary-summ.html#cb1556-4"></a><span class="st">  </span><span class="kw">ungroup</span>() <span class="op">%&gt;%</span></span>
<span id="cb1556-5"><a href="summary-summ.html#cb1556-5"></a><span class="st">  </span><span class="kw">summarise</span>(<span class="dt">ntotal=</span><span class="kw">sum</span>(freq)) <span class="op">%&gt;%</span></span>
<span id="cb1556-6"><a href="summary-summ.html#cb1556-6"></a><span class="st">  </span>knitr<span class="op">::</span><span class="kw">kable</span>()</span></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="right">ntotal</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">34</td>
</tr>
</tbody>
</table>
<p>得到了需要的结果。</p>
</div>
<div id="summ-nest" class="section level2">
<h2><span class="header-section-number">27.5</span> tibble中的列表列</h2>
<div id="summ-nest-intro" class="section level3">
<h3><span class="header-section-number">27.5.1</span> <code>nest</code>和<code>unnest</code></h3>
<p>dplyr包的<code>group_by</code>与<code>summarise</code>、<code>summarise_at</code>等函数配合，
可以对数据框分组计算各种概括统计量。</p>
<p>但是，如果分组以后希望进行更复杂的统计分析，
比如分组回归建模，
<code>summarise</code>就不够用了。
这时，
可以用基本R的<code>split</code>函数将数据框按某个分类变量拆分为子数据框的列表，
然后用purrr包的map类函数分类建模，
最终将各个模型的结果合并为一个数据框。</p>
<p>上面的办法虽然可行，
但是管理不够方便。
tidyr包（属于tidyverse系列，载入tidyverse时会自动载入）提供了<code>nest</code>和<code>unnest</code>函数，
可以将子数据框保存在tibble中，
可以将保存在tibble中的子数据框合并为一个大数据框。
实际上，
tibble允许存在数据类型是列表(list)的列，
子数据框就是以列表数据类型保存在tibble的一列中的。</p>
</div>
<div id="summ-nest-groupby" class="section level3">
<h3><span class="header-section-number">27.5.2</span> <code>group_by</code>与<code>nest</code>配合</h3>
<p>对数据框用<code>group_by</code>分组后调用<code>nest</code>函数就可以生成每个组的子数据框。</p>
<p>例如，
将d.cancer数据框按<code>type</code>分类拆分为2个子数据框，
存入tibble的data列中：</p>
<div class="sourceCode" id="cb1557"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1557-1"><a href="summary-summ.html#cb1557-1"></a>d.cancer <span class="op">%&gt;%</span></span>
<span id="cb1557-2"><a href="summary-summ.html#cb1557-2"></a><span class="st">  </span><span class="kw">group_by</span>(type) <span class="op">%&gt;%</span></span>
<span id="cb1557-3"><a href="summary-summ.html#cb1557-3"></a><span class="st">  </span><span class="kw">nest</span>()</span></code></pre></div>
<pre><code>## # A tibble: 2 x 2
## # Groups:   type [2]
##   type  data             
##   &lt;chr&gt; &lt;list&gt;           
## 1 腺癌  &lt;tibble [12 x 5]&gt;
## 2 鳞癌  &lt;tibble [22 x 5]&gt;</code></pre>
<p>现在<code>data</code>列是列表类型的，
有2个元素，
每个元素是一个子数据框。
<code>group_by()</code>中也可以用两个或多个分类变量构成交叉分组。</p>
<p>可以用purrr包的<code>map()</code>等函数对每个子数据框进行处理，
结果可以用<code>mutate</code>保存为新的列表类型的列，
如果结果是数值型标量也可以保存为普通的数据框列。</p>
<p>例如，下面先定义对子数据框回归建模的函数，
然后用purrr包的<code>map</code>函数将回归建模的函数作用到<code>data</code>列的每个元素，
用<code>mutate</code>保存到列表类型的<code>lmr</code>列中：</p>
<div class="sourceCode" id="cb1559"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1559-1"><a href="summary-summ.html#cb1559-1"></a>fmod &lt;-<span class="st"> </span><span class="cf">function</span>(subdf)  <span class="kw">lm</span>(v1 <span class="op">~</span><span class="st"> </span>v0, <span class="dt">data =</span> subdf)</span>
<span id="cb1559-2"><a href="summary-summ.html#cb1559-2"></a>mod.cancer &lt;-<span class="st"> </span>d.cancer <span class="op">%&gt;%</span></span>
<span id="cb1559-3"><a href="summary-summ.html#cb1559-3"></a><span class="st">  </span><span class="kw">group_by</span>(type) <span class="op">%&gt;%</span></span>
<span id="cb1559-4"><a href="summary-summ.html#cb1559-4"></a><span class="st">  </span><span class="kw">nest</span>() <span class="op">%&gt;%</span></span>
<span id="cb1559-5"><a href="summary-summ.html#cb1559-5"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">lmr =</span> <span class="kw">map</span>(data, fmod))</span>
<span id="cb1559-6"><a href="summary-summ.html#cb1559-6"></a>mod.cancer</span></code></pre></div>
<pre><code>## # A tibble: 2 x 3
## # Groups:   type [2]
##   type  data              lmr   
##   &lt;chr&gt; &lt;list&gt;            &lt;list&gt;
## 1 腺癌  &lt;tibble [12 x 5]&gt; &lt;lm&gt;  
## 2 鳞癌  &lt;tibble [22 x 5]&gt; &lt;lm&gt;</code></pre>
<p>写一个函数从一个回归模型及相应子数据框中，
提取R方，
将提取的结果保存为普通数值型列r.squared：</p>
<div class="sourceCode" id="cb1561"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1561-1"><a href="summary-summ.html#cb1561-1"></a>frsqr &lt;-<span class="st"> </span><span class="cf">function</span>(mod){</span>
<span id="cb1561-2"><a href="summary-summ.html#cb1561-2"></a>  <span class="kw">summary</span>(mod)<span class="op">$</span>r.squared</span>
<span id="cb1561-3"><a href="summary-summ.html#cb1561-3"></a>}</span>
<span id="cb1561-4"><a href="summary-summ.html#cb1561-4"></a>mod.cancer <span class="op">%&gt;%</span></span>
<span id="cb1561-5"><a href="summary-summ.html#cb1561-5"></a><span class="st">  </span><span class="kw">mutate</span>(</span>
<span id="cb1561-6"><a href="summary-summ.html#cb1561-6"></a>    <span class="dt">r.squared =</span> <span class="kw">map_dbl</span>(lmr, frsqr)) <span class="op">%&gt;%</span></span>
<span id="cb1561-7"><a href="summary-summ.html#cb1561-7"></a><span class="st">  </span><span class="kw">select</span>(<span class="op">-</span>data, <span class="op">-</span>lmr)</span></code></pre></div>
<pre><code>## # A tibble: 2 x 2
## # Groups:   type [2]
##   type  r.squared
##   &lt;chr&gt;     &lt;dbl&gt;
## 1 腺癌      0.710
## 2 鳞癌      0.520</code></pre>
<p><code>map()</code>和<code>map_dbl()</code>中输入函数时可以用purrr包的无名函数写法，如：</p>
<div class="sourceCode" id="cb1563"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1563-1"><a href="summary-summ.html#cb1563-1"></a>d.cancer <span class="op">%&gt;%</span></span>
<span id="cb1563-2"><a href="summary-summ.html#cb1563-2"></a><span class="st">  </span><span class="kw">group_by</span>(type) <span class="op">%&gt;%</span></span>
<span id="cb1563-3"><a href="summary-summ.html#cb1563-3"></a><span class="st">  </span><span class="kw">nest</span>() <span class="op">%&gt;%</span></span>
<span id="cb1563-4"><a href="summary-summ.html#cb1563-4"></a><span class="st">  </span><span class="kw">mutate</span>(</span>
<span id="cb1563-5"><a href="summary-summ.html#cb1563-5"></a>    <span class="dt">lmr =</span> <span class="kw">map</span>(data, <span class="op">~</span><span class="st"> </span><span class="kw">lm</span>(v1 <span class="op">~</span><span class="st"> </span>v0, <span class="dt">data =</span> .x)),</span>
<span id="cb1563-6"><a href="summary-summ.html#cb1563-6"></a>    <span class="dt">r.squared =</span> <span class="kw">map_dbl</span>(lmr, <span class="op">~</span><span class="st"> </span><span class="kw">summary</span>(.x)<span class="op">$</span>r.squared)) <span class="op">%&gt;%</span></span>
<span id="cb1563-7"><a href="summary-summ.html#cb1563-7"></a><span class="st">  </span><span class="kw">select</span>(<span class="op">-</span>data, <span class="op">-</span>lmr)</span></code></pre></div>
<pre><code>## # A tibble: 2 x 2
## # Groups:   type [2]
##   type  r.squared
##   &lt;chr&gt;     &lt;dbl&gt;
## 1 腺癌      0.710
## 2 鳞癌      0.520</code></pre>
<p>也可以从每个模型提取多个值，
这时，
为了使得多个值在展开时能保存在同一行中，
需要将每个子数据框的提取结果保存为一个一行的子数据框：</p>
<div class="sourceCode" id="cb1565"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1565-1"><a href="summary-summ.html#cb1565-1"></a>fextract &lt;-<span class="st"> </span><span class="cf">function</span>(mod){</span>
<span id="cb1565-2"><a href="summary-summ.html#cb1565-2"></a>  x1 &lt;-<span class="st"> </span><span class="kw">coef</span>(mod)</span>
<span id="cb1565-3"><a href="summary-summ.html#cb1565-3"></a>  <span class="kw">tibble</span>(</span>
<span id="cb1565-4"><a href="summary-summ.html#cb1565-4"></a>    <span class="dt">intercept =</span> x1[<span class="dv">1</span>],</span>
<span id="cb1565-5"><a href="summary-summ.html#cb1565-5"></a>    <span class="dt">v0 =</span> x1[<span class="dv">2</span>],</span>
<span id="cb1565-6"><a href="summary-summ.html#cb1565-6"></a>    <span class="dt">r.squared =</span> <span class="kw">summary</span>(mod)<span class="op">$</span>r.squared</span>
<span id="cb1565-7"><a href="summary-summ.html#cb1565-7"></a>  )</span>
<span id="cb1565-8"><a href="summary-summ.html#cb1565-8"></a>}</span>
<span id="cb1565-9"><a href="summary-summ.html#cb1565-9"></a>mod.cancer <span class="op">%&gt;%</span></span>
<span id="cb1565-10"><a href="summary-summ.html#cb1565-10"></a><span class="st">  </span><span class="kw">mutate</span>(</span>
<span id="cb1565-11"><a href="summary-summ.html#cb1565-11"></a>    <span class="dt">outlist =</span> <span class="kw">map</span>(lmr, fextract))</span></code></pre></div>
<pre><code>## # A tibble: 2 x 4
## # Groups:   type [2]
##   type  data              lmr    outlist         
##   &lt;chr&gt; &lt;list&gt;            &lt;list&gt; &lt;list&gt;          
## 1 腺癌  &lt;tibble [12 x 5]&gt; &lt;lm&gt;   &lt;tibble [1 x 3]&gt;
## 2 鳞癌  &lt;tibble [22 x 5]&gt; &lt;lm&gt;   &lt;tibble [1 x 3]&gt;</code></pre>
<p>结果的<code>outlist</code>列是列表类型的，
每个元素是一个<span class="math inline">\(1 \times 3\)</span>的tibble。
下面，就可以用<code>unnest</code>将每个组提取的回归结果转换为普通的数据框列：</p>
<div class="sourceCode" id="cb1567"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1567-1"><a href="summary-summ.html#cb1567-1"></a>mod.cancer <span class="op">%&gt;%</span></span>
<span id="cb1567-2"><a href="summary-summ.html#cb1567-2"></a><span class="st">  </span><span class="kw">mutate</span>(</span>
<span id="cb1567-3"><a href="summary-summ.html#cb1567-3"></a>    <span class="dt">outlist =</span> <span class="kw">map</span>(lmr, fextract)) <span class="op">%&gt;%</span></span>
<span id="cb1567-4"><a href="summary-summ.html#cb1567-4"></a><span class="st">  </span><span class="kw">select</span>(<span class="op">-</span>data, <span class="op">-</span>lmr) <span class="op">%&gt;%</span></span>
<span id="cb1567-5"><a href="summary-summ.html#cb1567-5"></a><span class="st">  </span><span class="kw">unnest</span>(outlist)</span></code></pre></div>
<pre><code>## # A tibble: 2 x 4
## # Groups:   type [2]
##   type  intercept    v0 r.squared
##   &lt;chr&gt;     &lt;dbl&gt; &lt;dbl&gt;     &lt;dbl&gt;
## 1 腺癌      0.225 0.370     0.710
## 2 鳞癌      5.51  0.374     0.520</code></pre>
<p>提取的结果也可以是一个不止一行的子数据框，例如，
提取回归结果中的系数估计、标准误差、t统计量和检验p值组成的矩阵：</p>
<div class="sourceCode" id="cb1569"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1569-1"><a href="summary-summ.html#cb1569-1"></a>fcoefmat &lt;-<span class="st"> </span><span class="cf">function</span>(mod){</span>
<span id="cb1569-2"><a href="summary-summ.html#cb1569-2"></a>  <span class="kw">as_tibble</span>(<span class="kw">summary</span>(mod)<span class="op">$</span>coefficients,</span>
<span id="cb1569-3"><a href="summary-summ.html#cb1569-3"></a>            <span class="dt">rownames=</span><span class="st">&quot;term&quot;</span>)</span>
<span id="cb1569-4"><a href="summary-summ.html#cb1569-4"></a>}</span>
<span id="cb1569-5"><a href="summary-summ.html#cb1569-5"></a>mod.cancer <span class="op">%&gt;%</span></span>
<span id="cb1569-6"><a href="summary-summ.html#cb1569-6"></a><span class="st">  </span><span class="kw">mutate</span>(</span>
<span id="cb1569-7"><a href="summary-summ.html#cb1569-7"></a>    <span class="dt">outlist =</span> <span class="kw">map</span>(lmr, fcoefmat)) <span class="op">%&gt;%</span></span>
<span id="cb1569-8"><a href="summary-summ.html#cb1569-8"></a><span class="st">  </span><span class="kw">unnest</span>(outlist) <span class="op">%&gt;%</span></span>
<span id="cb1569-9"><a href="summary-summ.html#cb1569-9"></a><span class="st">  </span><span class="kw">select</span>(<span class="op">-</span>data, <span class="op">-</span><span class="st"> </span>lmr)</span></code></pre></div>
<pre><code>## # A tibble: 4 x 6
## # Groups:   type [2]
##   type  term        Estimate `Std. Error` `t value` `Pr(&gt;|t|)`
##   &lt;chr&gt; &lt;chr&gt;          &lt;dbl&gt;        &lt;dbl&gt;     &lt;dbl&gt;      &lt;dbl&gt;
## 1 腺癌  (Intercept)    0.225      10.2       0.0221   0.983   
## 2 腺癌  v0             0.370       0.0749    4.94     0.000585
## 3 鳞癌  (Intercept)    5.51       10.8       0.510    0.616   
## 4 鳞癌  v0             0.374       0.0803    4.66     0.000151</code></pre>
<p>为了更好地提取统计模型的信息为规整的数据框格式，
broom扩展包提供了tidy函数，
可以将统计模型的输出转换为数据框；
这些功能与tidyr的nest, unnest配合，
可以很好地提取统计模型的信息，如：</p>
<div class="sourceCode" id="cb1571"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1571-1"><a href="summary-summ.html#cb1571-1"></a>mod.cancer <span class="op">%&gt;%</span></span>
<span id="cb1571-2"><a href="summary-summ.html#cb1571-2"></a><span class="st">  </span><span class="kw">mutate</span>(</span>
<span id="cb1571-3"><a href="summary-summ.html#cb1571-3"></a>    <span class="dt">outlist =</span> <span class="kw">map</span>(lmr, broom<span class="op">::</span>tidy)) <span class="op">%&gt;%</span></span>
<span id="cb1571-4"><a href="summary-summ.html#cb1571-4"></a><span class="st">  </span><span class="kw">select</span>(<span class="op">-</span>data, <span class="op">-</span>lmr) <span class="op">%&gt;%</span></span>
<span id="cb1571-5"><a href="summary-summ.html#cb1571-5"></a><span class="st">  </span><span class="kw">unnest</span>(outlist)</span></code></pre></div>
<pre><code>## # A tibble: 4 x 6
## # Groups:   type [2]
##   type  term        estimate std.error statistic  p.value
##   &lt;chr&gt; &lt;chr&gt;          &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt;
## 1 腺癌  (Intercept)    0.225   10.2       0.0221 0.983   
## 2 腺癌  v0             0.370    0.0749    4.94   0.000585
## 3 鳞癌  (Intercept)    5.51    10.8       0.510  0.616   
## 4 鳞癌  v0             0.374    0.0803    4.66   0.000151</code></pre>
<p><code>unnest</code>提取出的信息也可以是一个向量，
在展开时会展开到同一列中。
例如，
对每个组提取回归的拟合值：</p>
<div class="sourceCode" id="cb1573"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1573-1"><a href="summary-summ.html#cb1573-1"></a>mod.cancer <span class="op">%&gt;%</span></span>
<span id="cb1573-2"><a href="summary-summ.html#cb1573-2"></a><span class="st">  </span><span class="kw">mutate</span>(</span>
<span id="cb1573-3"><a href="summary-summ.html#cb1573-3"></a>    <span class="dt">v1hat =</span> <span class="kw">map</span>(lmr, <span class="op">~</span><span class="st"> </span><span class="kw">fitted</span>(.))) <span class="op">%&gt;%</span></span>
<span id="cb1573-4"><a href="summary-summ.html#cb1573-4"></a><span class="st">  </span><span class="kw">select</span>(<span class="op">-</span>lmr) <span class="op">%&gt;%</span></span>
<span id="cb1573-5"><a href="summary-summ.html#cb1573-5"></a><span class="st">  </span><span class="kw">unnest</span>(<span class="kw">c</span>(data, v1hat))</span></code></pre></div>
<pre><code>## # A tibble: 34 x 7
## # Groups:   type [2]
##    type     id   age sex      v0     v1  v1hat
##    &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt; &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;
##  1 腺癌      1    70 F      26.5   2.91  10.0 
##  2 腺癌      2    70 F     135.   35.1   50.4 
##  3 腺癌      3    69 F     210.   74.4   77.9 
##  4 腺癌      4    68 M      61    35.0   22.8 
##  5 腺癌      6    75 F     330.  112.   123.  
##  6 腺癌     11    55 M     125.   12.3   46.6 
##  7 腺癌     13    55 F      12.9   2.3    5.01
##  8 腺癌     14    75 M      40.2  24.0   15.1 
##  9 腺癌     15    61 F      12.6   7.39   4.88
## 10 腺癌     19    NA F      32.9   9.45  12.4 
## # ... with 24 more rows</code></pre>
<p>程序中的<code>unnest</code>将<code>data</code>列和<code>v1hat</code>列都释放为普通的数据框列了，
<code>data</code>列中释放出了多列原始数据，
<code>fitted</code>列中释放出了v1回归拟合值。</p>
</div>
<div id="summ-nest-summarise" class="section level3">
<h3><span class="header-section-number">27.5.3</span> <code>summarise</code>统计量用列表表示</h3>
<p>实际上，
<code>summarise</code>等函数如果将结果用<code>list()</code>声明，
汇总结果就可以保存为列表类型的列，
结果可以包含多个值，
<code>unnest</code>可以将结果恢复成正常的数据框，
如：</p>
<div class="sourceCode" id="cb1575"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1575-1"><a href="summary-summ.html#cb1575-1"></a>vnames &lt;-<span class="st"> </span><span class="kw">expand_grid</span>(</span>
<span id="cb1575-2"><a href="summary-summ.html#cb1575-2"></a>  <span class="dt">var =</span> <span class="kw">c</span>(<span class="st">&quot;v0&quot;</span>, <span class="st">&quot;v1&quot;</span>),</span>
<span id="cb1575-3"><a href="summary-summ.html#cb1575-3"></a>  <span class="dt">stat =</span> <span class="kw">c</span>(<span class="st">&quot;min&quot;</span>, <span class="st">&quot;max&quot;</span>)) <span class="op">%&gt;%</span></span>
<span id="cb1575-4"><a href="summary-summ.html#cb1575-4"></a><span class="st">  </span><span class="kw">pmap_chr</span>(paste, <span class="dt">sep=</span><span class="st">&quot;_&quot;</span>)</span>
<span id="cb1575-5"><a href="summary-summ.html#cb1575-5"></a></span>
<span id="cb1575-6"><a href="summary-summ.html#cb1575-6"></a>d.cancer <span class="op">%&gt;%</span></span>
<span id="cb1575-7"><a href="summary-summ.html#cb1575-7"></a><span class="st">  </span><span class="kw">group_by</span>(type) <span class="op">%&gt;%</span></span>
<span id="cb1575-8"><a href="summary-summ.html#cb1575-8"></a><span class="st">  </span><span class="kw">summarise</span>(</span>
<span id="cb1575-9"><a href="summary-summ.html#cb1575-9"></a>    <span class="dt">stat =</span> <span class="kw">list</span>(vnames),</span>
<span id="cb1575-10"><a href="summary-summ.html#cb1575-10"></a>    <span class="dt">value =</span> <span class="kw">list</span>(<span class="kw">c</span>(<span class="kw">range</span>(v0), <span class="kw">range</span>(v1)))  ) <span class="op">%&gt;%</span></span>
<span id="cb1575-11"><a href="summary-summ.html#cb1575-11"></a><span class="st">  </span><span class="kw">unnest</span>(<span class="kw">c</span>(stat, value))</span></code></pre></div>
<pre><code>## # A tibble: 8 x 3
##   type  stat    value
##   &lt;chr&gt; &lt;chr&gt;   &lt;dbl&gt;
## 1 鳞癌  v0_min  13.2 
## 2 鳞癌  v0_max 238.  
## 3 鳞癌  v1_min   3.34
## 4 鳞癌  v1_max 128.  
## 5 腺癌  v0_min  12.6 
## 6 腺癌  v0_max 330.  
## 7 腺癌  v1_min   2.3 
## 8 腺癌  v1_max 122.</code></pre>
<p>这个例子可以用长宽表转换方法变成每个统计量占一列：</p>
<div class="sourceCode" id="cb1577"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1577-1"><a href="summary-summ.html#cb1577-1"></a>d.cancer <span class="op">%&gt;%</span></span>
<span id="cb1577-2"><a href="summary-summ.html#cb1577-2"></a><span class="st">  </span><span class="kw">group_by</span>(type) <span class="op">%&gt;%</span></span>
<span id="cb1577-3"><a href="summary-summ.html#cb1577-3"></a><span class="st">  </span><span class="kw">summarise</span>(</span>
<span id="cb1577-4"><a href="summary-summ.html#cb1577-4"></a>    <span class="dt">stat =</span> <span class="kw">list</span>(vnames),</span>
<span id="cb1577-5"><a href="summary-summ.html#cb1577-5"></a>    <span class="dt">value =</span> <span class="kw">list</span>(<span class="kw">c</span>(<span class="kw">range</span>(v0), <span class="kw">range</span>(v1)))  ) <span class="op">%&gt;%</span></span>
<span id="cb1577-6"><a href="summary-summ.html#cb1577-6"></a><span class="st">  </span><span class="kw">unnest</span>(<span class="kw">c</span>(stat, value)) <span class="op">%&gt;%</span></span>
<span id="cb1577-7"><a href="summary-summ.html#cb1577-7"></a><span class="st">  </span><span class="kw">separate</span>(stat, <span class="dt">into =</span> <span class="kw">c</span>(<span class="st">&quot;variable&quot;</span>, <span class="st">&quot;stat&quot;</span>), <span class="dt">sep=</span><span class="st">&quot;_&quot;</span>) <span class="op">%&gt;%</span></span>
<span id="cb1577-8"><a href="summary-summ.html#cb1577-8"></a><span class="st">  </span><span class="kw">pivot_wider</span>(</span>
<span id="cb1577-9"><a href="summary-summ.html#cb1577-9"></a>    <span class="dt">names_from =</span> <span class="st">&quot;stat&quot;</span>,</span>
<span id="cb1577-10"><a href="summary-summ.html#cb1577-10"></a>    <span class="dt">values_from =</span> <span class="st">&quot;value&quot;</span></span>
<span id="cb1577-11"><a href="summary-summ.html#cb1577-11"></a>  )</span></code></pre></div>
<pre><code>## # A tibble: 4 x 4
##   type  variable   min   max
##   &lt;chr&gt; &lt;chr&gt;    &lt;dbl&gt; &lt;dbl&gt;
## 1 鳞癌  v0       13.2   238.
## 2 鳞癌  v1        3.34  128.
## 3 腺癌  v0       12.6   330.
## 4 腺癌  v1        2.3   122.</code></pre>
</div>
<div id="summ-nest-unnest-grammar" class="section level3">
<h3><span class="header-section-number">27.5.4</span> <code>unnest</code>的语法格式</h3>
<p><code>unnest()</code>第一自变量为管道输入的数据框，
第二自变量<code>cols</code>可以用如下格式：</p>
<ul>
<li>单个变量名，不需要写成字符串形式；</li>
<li>多个变量名，写成<code>c(x, y, z)</code>这样的格式，不需要写成字符型向量；</li>
<li>保存在字符型向量中的变量名，用<code>one_of(vnames)</code>格式，
其中<code>vnames</code>是保存了要释放的列名的字符型向量的变量名;
也可以写成<code>one_of(c("x", "y", "z"))</code>这样的格式。</li>
</ul>
</div>
<div id="summ-nest-direct" class="section level3">
<h3><span class="header-section-number">27.5.5</span> 直接生成列表类型的列</h3>
<p>也可以直接生成列表类型的列，
符合条件时可以用<code>unnest()</code>合并为大数据框。
如：</p>
<div class="sourceCode" id="cb1579"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1579-1"><a href="summary-summ.html#cb1579-1"></a>d1 &lt;-<span class="st"> </span><span class="kw">tibble</span>(</span>
<span id="cb1579-2"><a href="summary-summ.html#cb1579-2"></a>  <span class="dt">id =</span> <span class="dv">1</span><span class="op">:</span><span class="dv">2</span>,</span>
<span id="cb1579-3"><a href="summary-summ.html#cb1579-3"></a>  <span class="dt">df =</span> <span class="kw">vector</span>(<span class="st">&quot;list&quot;</span>, <span class="dt">length=</span><span class="dv">2</span>))</span>
<span id="cb1579-4"><a href="summary-summ.html#cb1579-4"></a>d1[[<span class="st">&quot;df&quot;</span>]][<span class="dv">1</span>] &lt;-<span class="st"> </span><span class="kw">list</span>(</span>
<span id="cb1579-5"><a href="summary-summ.html#cb1579-5"></a>  <span class="kw">tibble</span>(<span class="dt">x=</span><span class="dv">1</span>, <span class="dt">y=</span><span class="dv">2</span>)</span>
<span id="cb1579-6"><a href="summary-summ.html#cb1579-6"></a>)</span>
<span id="cb1579-7"><a href="summary-summ.html#cb1579-7"></a>d1[[<span class="st">&quot;df&quot;</span>]][<span class="dv">2</span>] &lt;-<span class="st"> </span><span class="kw">list</span>(</span>
<span id="cb1579-8"><a href="summary-summ.html#cb1579-8"></a>  <span class="kw">tibble</span>(<span class="dt">x=</span><span class="dv">11</span><span class="op">:</span><span class="dv">12</span>, <span class="dt">y=</span><span class="dv">21</span><span class="op">:</span><span class="dv">22</span>)</span>
<span id="cb1579-9"><a href="summary-summ.html#cb1579-9"></a>)</span>
<span id="cb1579-10"><a href="summary-summ.html#cb1579-10"></a>d1 <span class="op">%&gt;%</span></span>
<span id="cb1579-11"><a href="summary-summ.html#cb1579-11"></a><span class="st">  </span><span class="kw">unnest</span>(<span class="dt">cols =</span> <span class="kw">c</span>(df))</span></code></pre></div>
<pre><code>## # A tibble: 3 x 3
##      id     x     y
##   &lt;int&gt; &lt;dbl&gt; &lt;dbl&gt;
## 1     1     1     2
## 2     2    11    21
## 3     2    12    22</code></pre>
</div>
</div>
<div id="summ-base" class="section level2">
<h2><span class="header-section-number">27.6</span> 基本R的汇总功能</h2>
<div id="summ-base-summary" class="section level3">
<h3><span class="header-section-number">27.6.1</span> <code>summary()</code>函数</h3>
<p>对数值型向量<code>x</code>，用<code>summary(x)</code>可以获得变量的平均值、中位数、
最小值、最大值、四分之一和四分之三分位数。 如</p>
<div class="sourceCode" id="cb1581"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1581-1"><a href="summary-summ.html#cb1581-1"></a><span class="kw">summary</span>(d.cancer[[<span class="st">&quot;v0&quot;</span>]])</span></code></pre></div>
<pre><code>##    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
##   12.58   43.77   93.40  110.08  157.18  330.24</code></pre>
<div class="sourceCode" id="cb1583"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1583-1"><a href="summary-summ.html#cb1583-1"></a><span class="kw">summary</span>(d.cancer[[<span class="st">&quot;v1&quot;</span>]])</span></code></pre></div>
<pre><code>##    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
##    2.30   12.73   30.62   44.69   72.94  128.34</code></pre>
<p>v0是放疗前的肿瘤体积，
v1是放疗后的体积，
可以看出放疗后体积减小了很多。</p>
<p>可以用盒形图表现类似的信息，如</p>
<div class="sourceCode" id="cb1585"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1585-1"><a href="summary-summ.html#cb1585-1"></a><span class="kw">boxplot</span>(d.cancer[,<span class="kw">c</span>(<span class="st">&quot;v0&quot;</span>, <span class="st">&quot;v1&quot;</span>)], <span class="dt">main=</span><span class="st">&quot;肿瘤体积&quot;</span>)</span></code></pre></div>
<p><img src="static/picture/summ-summ-boxp01-1.png" width="672" /></p>
<p>对一个数据框<code>d</code>， 用<code>summary(d)</code>可以获得每个连续型变量的基本统计量，
和每个离散取值变量的频率。如</p>
<div class="sourceCode" id="cb1586"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1586-1"><a href="summary-summ.html#cb1586-1"></a><span class="kw">summary</span>(d.cancer)</span></code></pre></div>
<pre><code>##        id             age            sex                type          
##  Min.   : 1.00   Min.   :49.00   Length:34          Length:34         
##  1st Qu.: 9.25   1st Qu.:55.00   Class :character   Class :character  
##  Median :17.50   Median :67.00   Mode  :character   Mode  :character  
##  Mean   :17.50   Mean   :64.13                                        
##  3rd Qu.:25.75   3rd Qu.:70.00                                        
##  Max.   :34.00   Max.   :79.00                                        
##                  NA&#39;s   :11                                           
##        v0               v1        
##  Min.   : 12.58   Min.   :  2.30  
##  1st Qu.: 43.77   1st Qu.: 12.73  
##  Median : 93.40   Median : 30.62  
##  Mean   :110.08   Mean   : 44.69  
##  3rd Qu.:157.18   3rd Qu.: 72.94  
##  Max.   :330.24   Max.   :128.34  
## </code></pre>
<p>对数据框<code>d</code>，用<code>str(d)</code>可以获得各个变量的类型和取值样例。 如</p>
<div class="sourceCode" id="cb1588"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1588-1"><a href="summary-summ.html#cb1588-1"></a><span class="kw">str</span>(d.cancer)</span></code></pre></div>
<pre><code>## Classes &#39;spec_tbl_df&#39;, &#39;tbl_df&#39;, &#39;tbl&#39; and &#39;data.frame&#39;: 34 obs. of  6 variables:
##  $ id  : num  1 2 3 4 5 6 7 8 9 10 ...
##  $ age : num  70 70 69 68 67 75 52 71 68 79 ...
##  $ sex : chr  &quot;F&quot; &quot;F&quot; &quot;F&quot; &quot;M&quot; ...
##  $ type: chr  &quot;腺癌&quot; &quot;腺癌&quot; &quot;腺癌&quot; &quot;腺癌&quot; ...
##  $ v0  : num  26.5 135.5 209.7 61 237.8 ...
##  $ v1  : num  2.91 35.08 74.44 34.97 128.34 ...
##  - attr(*, &quot;spec&quot;)=
##   .. cols(
##   ..   id = col_double(),
##   ..   age = col_double(),
##   ..   sex = col_character(),
##   ..   type = col_character(),
##   ..   v0 = col_double(),
##   ..   v1 = col_double()
##   .. )</code></pre>
<p>用<code>head(d)</code>可以返回数据框（或向量、矩阵）的前几行，
用<code>tail(d)</code>可以返回数据框的后几行。</p>
</div>
<div id="summ-cont" class="section level3">
<h3><span class="header-section-number">27.6.2</span> 连续型变量概括函数</h3>
<p>对连续取值的变量<code>x</code>，
可以用<code>mean</code>, <code>std</code>, <code>var</code>, <code>sum</code>, <code>prod</code>,
<code>min</code>, <code>max</code>等函数获取基本统计量。
加<code>na.rm=TRUE</code>选项可以仅对非缺失值计算。</p>
<p><code>sort(x)</code>返回排序后的结果。
<code>rev(x)</code>把<code>x</code>所有元素次序颠倒后返回。
<code>quantile(x, c(0.05, 0.95))</code>可以求<code>x</code>的样本分位数。
<code>rank(x)</code>对<code>x</code>求秩得分（即名次，但从最小到最大排列）。</p>
</div>
<div id="summ-fact" class="section level3">
<h3><span class="header-section-number">27.6.3</span> 分类变量概括</h3>
<p>分类变量一般输入为因子。
对因子或其它向量<code>x</code>，
<code>table(x)</code>返回<code>x</code>的每个不同值的频率（出现次数），
结果为一个类（class）为table的一维数组。
每个元素有对应的元素名，为<code>x</code>的各水平值。
如</p>
<div class="sourceCode" id="cb1590"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1590-1"><a href="summary-summ.html#cb1590-1"></a>res &lt;-<span class="st"> </span><span class="kw">table</span>(d.cancer[[<span class="st">&quot;sex&quot;</span>]]); res</span></code></pre></div>
<pre><code>## 
##  F  M 
## 13 21</code></pre>
<div class="sourceCode" id="cb1592"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1592-1"><a href="summary-summ.html#cb1592-1"></a>res[<span class="st">&quot;F&quot;</span>]</span></code></pre></div>
<pre><code>##  F 
## 13</code></pre>
<p>对单个分类变量, <code>table</code>结果是一个有元素名的向量。
用<code>as.data.frame()</code>函数把<code>table</code>的结果转为数据框:</p>
<div class="sourceCode" id="cb1594"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1594-1"><a href="summary-summ.html#cb1594-1"></a><span class="kw">as.data.frame</span>(res)</span></code></pre></div>
<pre><code>##   Var1 Freq
## 1    F   13
## 2    M   21</code></pre>
<p>用<code>prop.table()</code>将频数转换成百分比：</p>
<div class="sourceCode" id="cb1596"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1596-1"><a href="summary-summ.html#cb1596-1"></a><span class="kw">prop.table</span>(res)</span></code></pre></div>
<pre><code>## 
##         F         M 
## 0.3823529 0.6176471</code></pre>
<p><code>table</code>作的单变量频数表可以用<code>barplot</code>表现为图形，如:</p>
<div class="sourceCode" id="cb1598"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1598-1"><a href="summary-summ.html#cb1598-1"></a><span class="kw">barplot</span>(res, <span class="dt">main=</span><span class="st">&quot;性别分布&quot;</span>)</span></code></pre></div>
<p><img src="static/picture/summ-summ-barplot01-1.png" width="672" /></p>
<p>对两个分类变量<code>x1</code>和<code>x2</code>，
其每个组合的出现次数可以用<code>table(x1,x2)</code>函数统计， 结果叫做列联表。
如</p>
<div class="sourceCode" id="cb1599"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1599-1"><a href="summary-summ.html#cb1599-1"></a>res2 &lt;-<span class="st"> </span><span class="kw">with</span>(d.cancer, <span class="kw">table</span>(sex, type)); res2</span></code></pre></div>
<pre><code>##    type
## sex 鳞癌 腺癌
##   F    4    9
##   M   18    3</code></pre>
<p>结果是一个类为table的二维数组（矩阵），
每行以第一个变量<code>x1</code>的各水平值为行名，
每列以第二个变量<code>x2</code>的各水平值为列名。
这里用了<code>with()</code>函数引入一个数据框，
后续的参数中的表达式可以直接使用数据框的变量。</p>
<p>对两个分类变量, <code>table</code>结果是一个矩阵。
用<code>as.data.frame</code>函数把<code>table</code>的结果转为数据框:</p>
<div class="sourceCode" id="cb1601"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1601-1"><a href="summary-summ.html#cb1601-1"></a><span class="kw">as.data.frame</span>(res2)</span></code></pre></div>
<pre><code>##   sex type Freq
## 1   F 鳞癌    4
## 2   M 鳞癌   18
## 3   F 腺癌    9
## 4   M 腺癌    3</code></pre>
<p>列联表的结果可以用条形图表示。如</p>
<div class="sourceCode" id="cb1603"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1603-1"><a href="summary-summ.html#cb1603-1"></a><span class="kw">barplot</span>(res2, <span class="dt">legend=</span><span class="ot">TRUE</span>)</span></code></pre></div>
<p><img src="static/picture/summ-summ-table2-barp02-1.png" width="672" /></p>
<p>或</p>
<div class="sourceCode" id="cb1604"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1604-1"><a href="summary-summ.html#cb1604-1"></a><span class="kw">barplot</span>(res2, <span class="dt">legend=</span><span class="ot">TRUE</span>, <span class="dt">beside=</span><span class="ot">TRUE</span>)</span></code></pre></div>
<p><img src="static/picture/summ-summ-table2-barp03-1.png" width="672" /></p>
<p>对于<code>table()</code>的结果列联表，
可以用<code>addmargins()</code>函数增加行和与列和。 如</p>
<div class="sourceCode" id="cb1605"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1605-1"><a href="summary-summ.html#cb1605-1"></a><span class="kw">addmargins</span>(res2)</span></code></pre></div>
<pre><code>##      type
## sex   鳞癌 腺癌 Sum
##   F      4    9  13
##   M     18    3  21
##   Sum   22   12  34</code></pre>
<p>用<code>margin.table()</code>可以计算列联表行或列的和并返回，如</p>
<div class="sourceCode" id="cb1607"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1607-1"><a href="summary-summ.html#cb1607-1"></a><span class="kw">margin.table</span>(res2, <span class="dv">1</span>)</span></code></pre></div>
<pre><code>## sex
##  F  M 
## 13 21</code></pre>
<div class="sourceCode" id="cb1609"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1609-1"><a href="summary-summ.html#cb1609-1"></a><span class="kw">margin.table</span>(res2, <span class="dv">2</span>)</span></code></pre></div>
<pre><code>## type
## 鳞癌 腺癌 
##   22   12</code></pre>
<p>用<code>prop.table(r)</code>把一个列联表<code>r</code>转换成百分比表。 如</p>
<div class="sourceCode" id="cb1611"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1611-1"><a href="summary-summ.html#cb1611-1"></a><span class="kw">prop.table</span>(res2)</span></code></pre></div>
<pre><code>##    type
## sex       鳞癌       腺癌
##   F 0.11764706 0.26470588
##   M 0.52941176 0.08823529</code></pre>
<p>用<code>prop.table(res,1)</code>把列联表<code>res</code>转换成行百分比表。
用<code>prop.table(res,2)</code>把列联表<code>res</code>转换成列百分比表。 如</p>
<div class="sourceCode" id="cb1613"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1613-1"><a href="summary-summ.html#cb1613-1"></a><span class="kw">prop.table</span>(res2, <span class="dv">1</span>)</span></code></pre></div>
<pre><code>##    type
## sex      鳞癌      腺癌
##   F 0.3076923 0.6923077
##   M 0.8571429 0.1428571</code></pre>
<div class="sourceCode" id="cb1615"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1615-1"><a href="summary-summ.html#cb1615-1"></a><span class="kw">prop.table</span>(res2, <span class="dv">2</span>)</span></code></pre></div>
<pre><code>##    type
## sex      鳞癌      腺癌
##   F 0.1818182 0.7500000
##   M 0.8181818 0.2500000</code></pre>
<p>在有多个分类变量时，
用<code>as.data.frame(table(x1, x2, x3))</code>
形成多个分类变量交叉分类的频数统计数据框。</p>
<p>dplyr包的<code>count()</code>功能与<code>table()</code>类似。</p>
</div>
<div id="summ-df" class="section level3">
<h3><span class="header-section-number">27.6.4</span> 数据框概括</h3>
<p>用<code>colMeans()</code>对数据框或矩阵的每列计算均值，
用<code>colSums()</code>对数据框或矩阵的每列计算总和。
用<code>rowMeans()</code>和<code>rowSums()</code>对矩阵的每行计算均值或总和。</p>
<p>数据框与矩阵有区别，
某些适用于矩阵的计算对数据框不适用，
例如矩阵乘法。
用<code>as.matrix()</code>把数据框的数值子集转换成矩阵。</p>
<p>对矩阵，用<code>apply(x, 1, FUN)</code>对矩阵x的每一行使用函数FUN计算结果，
用<code>apply(x, 2, FUN)</code>对矩阵x的每一列使用函数FUN计算结果。</p>
<p>如果<code>apply(x,1,FUN)</code>中的FUN对每个行变量得到多个<span class="math inline">\(m\)</span>结果，
结果将是一个矩阵，行数为<span class="math inline">\(m\)</span>，列数等于nrow(x)。
如果<code>apply(x,2,FUN)</code>中的FUN对每个列变量得到多个<span class="math inline">\(m\)</span>结果，
结果将是一个矩阵，行数为<span class="math inline">\(m\)</span>，列数等于ncol(x)。
例如：</p>
<div class="sourceCode" id="cb1617"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1617-1"><a href="summary-summ.html#cb1617-1"></a><span class="kw">apply</span>(<span class="kw">as.matrix</span>(iris[,<span class="dv">1</span><span class="op">:</span><span class="dv">4</span>]), <span class="dv">2</span>,</span>
<span id="cb1617-2"><a href="summary-summ.html#cb1617-2"></a>        <span class="cf">function</span>(x)</span>
<span id="cb1617-3"><a href="summary-summ.html#cb1617-3"></a>        <span class="kw">c</span>(<span class="dt">n=</span><span class="kw">sum</span>(<span class="op">!</span><span class="kw">is.na</span>(x)),</span>
<span id="cb1617-4"><a href="summary-summ.html#cb1617-4"></a>          <span class="dt">mean=</span><span class="kw">mean</span>(x, <span class="dt">na.rm=</span><span class="ot">TRUE</span>),</span>
<span id="cb1617-5"><a href="summary-summ.html#cb1617-5"></a>          <span class="dt">sd=</span><span class="kw">sd</span>(x, <span class="dt">na.rm=</span><span class="ot">TRUE</span>)))</span></code></pre></div>
<pre><code>##      Sepal.Length Sepal.Width Petal.Length Petal.Width
## n     150.0000000 150.0000000   150.000000 150.0000000
## mean    5.8433333   3.0573333     3.758000   1.1993333
## sd      0.8280661   0.4358663     1.765298   0.7622377</code></pre>
</div>
</div>
<div id="summ-by" class="section level2">
<h2><span class="header-section-number">27.7</span> 用基本R作分类概括</h2>
<div id="summ-by-tapply" class="section level3">
<h3><span class="header-section-number">27.7.1</span> 用<code>tapply()</code>分组概括向量</h3>
<p>用<code>tapply()</code>函数进行分组概括, 格式为：</p>
<div class="sourceCode" id="cb1619"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1619-1"><a href="summary-summ.html#cb1619-1"></a>  <span class="kw">tapply</span>(X, INDEX, FUN)</span></code></pre></div>
<p>其中<code>X</code>是一个向量， <code>INDEX</code>是一个分类变量， <code>FUN</code>是概括统计函数。</p>
<p>比如，下面的程序分性别组计算疗前体积的均值：</p>
<div class="sourceCode" id="cb1620"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1620-1"><a href="summary-summ.html#cb1620-1"></a><span class="kw">with</span>(</span>
<span id="cb1620-2"><a href="summary-summ.html#cb1620-2"></a>  d.cancer, </span>
<span id="cb1620-3"><a href="summary-summ.html#cb1620-3"></a>  <span class="kw">tapply</span>(v0, sex, mean))</span></code></pre></div>
<pre><code>##        F        M 
## 113.2354 108.1214</code></pre>
</div>
<div id="summ-by-aggregate" class="section level3">
<h3><span class="header-section-number">27.7.2</span> 用<code>aggregate()</code>分组概括数据框</h3>
<p><code>aggregate</code>函数对输入的数据框用指定的分组变量（或交叉分组）
分组进行概括统计。
例如，下面的程序按性别分组计算年龄、疗前体积、疗后体积的平均值:</p>
<div class="sourceCode" id="cb1622"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1622-1"><a href="summary-summ.html#cb1622-1"></a><span class="kw">aggregate</span>(</span>
<span id="cb1622-2"><a href="summary-summ.html#cb1622-2"></a>  d.cancer[, <span class="kw">c</span>(<span class="st">&quot;age&quot;</span>, <span class="st">&quot;v0&quot;</span>, <span class="st">&quot;v1&quot;</span>)],</span>
<span id="cb1622-3"><a href="summary-summ.html#cb1622-3"></a>  <span class="kw">list</span>(<span class="dt">sex=</span>d.cancer[[<span class="st">&quot;sex&quot;</span>]]), </span>
<span id="cb1622-4"><a href="summary-summ.html#cb1622-4"></a>  mean, <span class="dt">na.rm=</span><span class="ot">TRUE</span>)</span></code></pre></div>
<pre><code>##   sex      age       v0       v1
## 1   F 66.14286 113.2354 42.65538
## 2   M 63.25000 108.1214 45.95524</code></pre>
<p><code>aggregate()</code>第一个参数是数据框，
第二个参数是列表，列表元素是用来分组或交叉分组的变量，
第三个参数是概括用的函数，
概括用的函数的选项可以在后面给出。</p>
<p>可以交叉分组后概括，如</p>
<div class="sourceCode" id="cb1624"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1624-1"><a href="summary-summ.html#cb1624-1"></a><span class="kw">with</span>(</span>
<span id="cb1624-2"><a href="summary-summ.html#cb1624-2"></a>  d.cancer,</span>
<span id="cb1624-3"><a href="summary-summ.html#cb1624-3"></a>  <span class="kw">aggregate</span>(</span>
<span id="cb1624-4"><a href="summary-summ.html#cb1624-4"></a>    <span class="kw">cbind</span>(v0, v1), </span>
<span id="cb1624-5"><a href="summary-summ.html#cb1624-5"></a>    <span class="kw">list</span>(<span class="dt">sex=</span>sex, <span class="dt">type=</span>type), </span>
<span id="cb1624-6"><a href="summary-summ.html#cb1624-6"></a>    mean))</span></code></pre></div>
<pre><code>##   sex type        v0       v1
## 1   F 鳞癌 126.99250 45.54750
## 2   M 鳞癌 113.55722 49.65556
## 3   F 腺癌 107.12111 41.37000
## 4   M 腺癌  75.50667 23.75333</code></pre>
</div>
<div id="summ-by-split" class="section level3">
<h3><span class="header-section-number">27.7.3</span> 用<code>split()</code>函数分组后概括</h3>
<p>split函数可以把数据框的各行按照一个或几个分组变量分为子集的列表，
然后可以用<code>sapply()</code>或<code>vapply()</code>对每组进行概括。
如</p>
<div class="sourceCode" id="cb1626"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1626-1"><a href="summary-summ.html#cb1626-1"></a>sp &lt;-<span class="st"> </span><span class="kw">split</span>(d.cancer[,<span class="kw">c</span>(<span class="st">&quot;v0&quot;</span>,<span class="st">&quot;v1&quot;</span>)], d.cancer[[<span class="st">&quot;sex&quot;</span>]])</span>
<span id="cb1626-2"><a href="summary-summ.html#cb1626-2"></a><span class="kw">sapply</span>(sp, colMeans)</span></code></pre></div>
<pre><code>##            F         M
## v0 113.23538 108.12143
## v1  42.65538  45.95524</code></pre>
<p>返回矩阵，行为变量v0, v1，列为不同性别，
值为相应的变量在各性别组的平均值。
当<code>sapply()</code>对列表每项的操作返回一个向量时，
总是列表每项的输出保存为结果的一列。
<code>colMeans</code>函数计算分组后数据框子集每列的平均值。</p>
</div>
</div>
<div id="summ-by-plyr" class="section level2">
<h2><span class="header-section-number">27.8</span> 用plyr包进行分类概括</h2>
<p>plyr是一个专注于分组后分别分析然后将分析结果尽可能合理地合并的扩展包,
功能强大，
dplyr包仅针对数据框，使用更方便，但是对于复杂情况功能不如plyr包强。
plyr包已经被dplyr、purrr包代替，不再继续开发新版本。
这部分内容仅作为备忘，
读者可以跳过。</p>
<p>plyr的输入支持数组、数据框、列表，
输出支持数组、数据框、列表或无输出。
分组分析的函数输出格式需要与指定的输出格式一致。</p>
<p>这里主要介绍从数据框分组概括并将结果保存为数据框的方法，
使用plyr包的<code>ddply()</code>函数。
实际上，dplyr包的这种功能更方便。
plyr包的优点是可以自定义概括函数，
使得结果表格符合用户的预期，
处理多个变量时程序更简洁。</p>
<p>plyr包与dplyr包的函数名冲突比较大，
所以需要先卸载dplyr包再调用plyr包：</p>
<div class="sourceCode" id="cb1628"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1628-1"><a href="summary-summ.html#cb1628-1"></a><span class="cf">if</span>(<span class="st">&quot;dplyr&quot;</span> <span class="op">%in%</span><span class="st"> </span><span class="kw">.packages</span>()) <span class="kw">detach</span>(<span class="st">&quot;package:dplyr&quot;</span>)</span>
<span id="cb1628-2"><a href="summary-summ.html#cb1628-2"></a><span class="kw">library</span>(plyr)</span></code></pre></div>
<p><code>ddply()</code>函数第一自变量是要分组的数据框，
第二自变量是分组用的变量名，
第三自变量是一个概括函数，
此概括函数以一个数据框子集（数据类型是数据框）为输入，
输出是一个数值、一个数值型向量或者一个数据框,
但最好是数据框。
例如，按性别分组，计算v0的平均值：</p>
<div class="sourceCode" id="cb1629"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1629-1"><a href="summary-summ.html#cb1629-1"></a><span class="kw">ddply</span>(d.cancer, <span class="st">&quot;sex&quot;</span>, </span>
<span id="cb1629-2"><a href="summary-summ.html#cb1629-2"></a>      <span class="cf">function</span>(d) <span class="kw">c</span>(<span class="dt">mean.v0 =</span> <span class="kw">mean</span>(d[[<span class="st">&quot;v0&quot;</span>]], <span class="dt">na.rm=</span><span class="ot">TRUE</span>)))</span></code></pre></div>
<p>下面的程序按性别分组，
分别计算v0与v1的平均值：</p>
<div class="sourceCode" id="cb1630"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1630-1"><a href="summary-summ.html#cb1630-1"></a><span class="kw">ddply</span>(d.cancer, <span class="st">&quot;sex&quot;</span>, </span>
<span id="cb1630-2"><a href="summary-summ.html#cb1630-2"></a>      <span class="cf">function</span>(d) <span class="kw">colMeans</span>(d[,<span class="kw">c</span>(<span class="st">&quot;v0&quot;</span>, <span class="st">&quot;v1&quot;</span>)]))</span></code></pre></div>
<p>下面的程序按性别分组，计算v0和v1的平均值、标准差：</p>
<div class="sourceCode" id="cb1631"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1631-1"><a href="summary-summ.html#cb1631-1"></a>f1 &lt;-<span class="st"> </span><span class="cf">function</span>(dsub){</span>
<span id="cb1631-2"><a href="summary-summ.html#cb1631-2"></a>  tab &lt;-<span class="st"> </span><span class="kw">tibble</span>(</span>
<span id="cb1631-3"><a href="summary-summ.html#cb1631-3"></a>    <span class="st">&quot;变量&quot;</span>=<span class="kw">c</span>(<span class="st">&quot;v0&quot;</span>, <span class="st">&quot;v1&quot;</span>),</span>
<span id="cb1631-4"><a href="summary-summ.html#cb1631-4"></a>    <span class="st">&quot;均值&quot;</span>=<span class="kw">c</span>(<span class="kw">mean</span>(dsub[,<span class="st">&quot;v0&quot;</span>], <span class="dt">na.rm=</span><span class="ot">TRUE</span>), </span>
<span id="cb1631-5"><a href="summary-summ.html#cb1631-5"></a>           <span class="kw">mean</span>(dsub[,<span class="st">&quot;v1&quot;</span>], <span class="dt">na.rm=</span><span class="ot">TRUE</span>)),</span>
<span id="cb1631-6"><a href="summary-summ.html#cb1631-6"></a>    <span class="st">&quot;标准差&quot;</span>=<span class="kw">c</span>(<span class="kw">sd</span>(dsub[,<span class="st">&quot;v0&quot;</span>], <span class="dt">na.rm=</span><span class="ot">TRUE</span>), </span>
<span id="cb1631-7"><a href="summary-summ.html#cb1631-7"></a>            <span class="kw">sd</span>(dsub[,<span class="st">&quot;v1&quot;</span>], <span class="dt">na.rm=</span><span class="ot">TRUE</span>)))</span>
<span id="cb1631-8"><a href="summary-summ.html#cb1631-8"></a>  tab</span>
<span id="cb1631-9"><a href="summary-summ.html#cb1631-9"></a>}</span>
<span id="cb1631-10"><a href="summary-summ.html#cb1631-10"></a><span class="kw">ddply</span>(d.cancer, <span class="st">&quot;sex&quot;</span>, f1)</span></code></pre></div>
<p>注意<code>f1()</code>结果是一个数据框。
程序有些重复内容，对每个变量和每个统计量都需要分别写出，
如果这样用plyr包就不如直接用<code>dplyr::summarise()</code>了。
下面用<code>vapply()</code>简化程序。</p>
<p>按性别分组，然后v0、v1各自一行结果，
计算非缺失值个数、均值、标准差、中位数：</p>
<div class="sourceCode" id="cb1632"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1632-1"><a href="summary-summ.html#cb1632-1"></a>f2 &lt;-<span class="st"> </span><span class="cf">function</span>(d, variables){</span>
<span id="cb1632-2"><a href="summary-summ.html#cb1632-2"></a>  d1 &lt;-<span class="st"> </span>d[,variables,drop=<span class="ot">FALSE</span>]</span>
<span id="cb1632-3"><a href="summary-summ.html#cb1632-3"></a>  nnotmiss &lt;-<span class="st"> </span><span class="kw">vapply</span>(d1, <span class="cf">function</span>(x) <span class="kw">sum</span>(<span class="op">!</span><span class="kw">is.na</span>(x)), 1L)</span>
<span id="cb1632-4"><a href="summary-summ.html#cb1632-4"></a>  xm &lt;-<span class="st"> </span><span class="kw">vapply</span>(d1, mean, <span class="fl">0.0</span>, <span class="dt">na.rm=</span><span class="ot">TRUE</span>)</span>
<span id="cb1632-5"><a href="summary-summ.html#cb1632-5"></a>  xsd &lt;-<span class="st"> </span><span class="kw">vapply</span>(d1, sd, <span class="fl">1.0</span>, <span class="dt">na.rm=</span><span class="ot">TRUE</span>)</span>
<span id="cb1632-6"><a href="summary-summ.html#cb1632-6"></a>  xmed &lt;-<span class="st"> </span><span class="kw">vapply</span>(d1, median, <span class="fl">0.0</span>, <span class="dt">na.rm=</span><span class="ot">TRUE</span>)</span>
<span id="cb1632-7"><a href="summary-summ.html#cb1632-7"></a>  <span class="kw">data.frame</span>(<span class="dt">variable=</span>variables,</span>
<span id="cb1632-8"><a href="summary-summ.html#cb1632-8"></a>             <span class="dt">n=</span>nnotmiss,</span>
<span id="cb1632-9"><a href="summary-summ.html#cb1632-9"></a>             <span class="dt">mean=</span>xm,</span>
<span id="cb1632-10"><a href="summary-summ.html#cb1632-10"></a>             <span class="dt">sd=</span>xsd,</span>
<span id="cb1632-11"><a href="summary-summ.html#cb1632-11"></a>             <span class="dt">median=</span>xmed)</span>
<span id="cb1632-12"><a href="summary-summ.html#cb1632-12"></a>}</span>
<span id="cb1632-13"><a href="summary-summ.html#cb1632-13"></a><span class="kw">ddply</span>(d.cancer, <span class="st">&quot;sex&quot;</span>, f2, <span class="dt">variables =</span> <span class="kw">c</span>(<span class="st">&quot;v0&quot;</span>, <span class="st">&quot;v1&quot;</span>))</span></code></pre></div>
<p><code>f2()</code>函数针对分组后的数据框子集，
这样的函数可以先在一个子集上试验。
在<code>f2()</code>函数中，
设输入的数据子集为<code>d</code>，
要分析的变量组成的数据框为<code>d1</code>，
用<code>vapply()</code>函数对<code>d1</code>的每一列计算一种统计量，
然后将每种统计量作为结果数据框的一列。
<code>vapply()</code>函数类似于<code>lapply()</code>和<code>sapply()</code>，
但是用第三个自变量表示要应用的变换函数的返回值类型和个数，
用举例的方法给出。</p>
<p><code>ddply()</code>也可以对交叉分类后每个类分别汇总，
例如按照性别与病理类型交叉分组后汇总v0、v1：</p>
<div class="sourceCode" id="cb1633"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1633-1"><a href="summary-summ.html#cb1633-1"></a><span class="kw">ddply</span>(d.cancer, <span class="kw">c</span>(<span class="st">&quot;sex&quot;</span>, <span class="st">&quot;type&quot;</span>), f2, <span class="dt">variables=</span><span class="kw">c</span>(<span class="st">&quot;v0&quot;</span>, <span class="st">&quot;v1&quot;</span>))</span></code></pre></div>
<p>上面的程序写法适用于已知要分析的变量名的情况。
如果想对每个数值型变量都分析，
而且想把要计算的统计量用统一的格式调用，可以写成：</p>
<div class="sourceCode" id="cb1634"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1634-1"><a href="summary-summ.html#cb1634-1"></a>f3 &lt;-<span class="st"> </span><span class="cf">function</span>(d){</span>
<span id="cb1634-2"><a href="summary-summ.html#cb1634-2"></a>  ff &lt;-<span class="st"> </span><span class="cf">function</span>(x){</span>
<span id="cb1634-3"><a href="summary-summ.html#cb1634-3"></a>    <span class="kw">c</span>(<span class="dt">n=</span><span class="kw">sum</span>(<span class="op">!</span><span class="kw">is.na</span>(x)),</span>
<span id="cb1634-4"><a href="summary-summ.html#cb1634-4"></a>      <span class="kw">each</span>(mean, sd, median)(x, <span class="dt">na.rm=</span><span class="ot">TRUE</span>))</span>
<span id="cb1634-5"><a href="summary-summ.html#cb1634-5"></a>  }</span>
<span id="cb1634-6"><a href="summary-summ.html#cb1634-6"></a>  <span class="kw">ldply</span>(<span class="kw">Filter</span>(is.numeric, d), ff)</span>
<span id="cb1634-7"><a href="summary-summ.html#cb1634-7"></a>}</span>
<span id="cb1634-8"><a href="summary-summ.html#cb1634-8"></a><span class="kw">ddply</span>(d.cancer, <span class="st">&quot;sex&quot;</span>, f3)</span></code></pre></div>
<p><code>ff()</code>函数对输入的一个数值型向量计算4种统计量，
返回一个长度为4的数值型向量，
用来对分组后的数据子集中的一列计算4种统计量。
plyr包的<code>each()</code>函数接受多个函数，
返回一个函数可以同时得到这几个函数的结果，
结果中各元素用输入的函数名命名。
<code>f3()</code>函数中的<code>Filter</code>函数用于从列表或数据框中取出满足条件的项，
这里取出输入的数据子集<code>d</code>中所有的数值型列。
<code>f3()</code>函数中的<code>ldply()</code>函数接受一个列表或看成列表的一个数据框，
对数据框的每列应用<code>ff()</code>函数计算4种统计量，
然后合并所有各列的统计量为一个数据框，
结果数据框的每行对应于<code>d</code>中的一列。
程序中的<code>ddply()</code>函数接受一个数据框，
第二自变量指定用来将数据框分组的变量，
第三自变量<code>f3()</code>是对分组后的数据框子集进行分析的函数，
此函数接受一个数据框，输出一个数据框。</p>
<p>上面的程序也可以利用无名函数写成：</p>
<div class="sourceCode" id="cb1635"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1635-1"><a href="summary-summ.html#cb1635-1"></a>f4 &lt;-<span class="st"> </span><span class="cf">function</span>(x){</span>
<span id="cb1635-2"><a href="summary-summ.html#cb1635-2"></a>  <span class="kw">c</span>(<span class="dt">n=</span><span class="kw">sum</span>(<span class="op">!</span><span class="kw">is.na</span>(x)),</span>
<span id="cb1635-3"><a href="summary-summ.html#cb1635-3"></a>    <span class="kw">each</span>(mean, sd, median)(x, <span class="dt">na.rm=</span><span class="ot">TRUE</span>))</span>
<span id="cb1635-4"><a href="summary-summ.html#cb1635-4"></a>}</span>
<span id="cb1635-5"><a href="summary-summ.html#cb1635-5"></a><span class="kw">ddply</span>(d.cancer, <span class="st">&quot;sex&quot;</span>, </span>
<span id="cb1635-6"><a href="summary-summ.html#cb1635-6"></a>      <span class="cf">function</span>(d) </span>
<span id="cb1635-7"><a href="summary-summ.html#cb1635-7"></a>        <span class="kw">ldply</span>(<span class="kw">Filter</span>(is.numeric, d), f4))</span></code></pre></div>
</div>
<div id="summ-by-exer" class="section level2">
<h2><span class="header-section-number">27.9</span> 练习</h2>
<ul>
<li><p>把<a href="patients.csv"><code>patients.csv</code></a>读入“d.patients”中，
并计算发病年龄、发病年、发病月、
发病年月（格式如“200702”表示2007年2月份）。</p></li>
<li><p>把“现住地址国标”作为字符型，去掉最后两位，仅保留前6位数字，
保存到变量“地址编码”中。</p></li>
<li><p>按照地址编码和发病年月交叉分类汇总发病人数，
保存到数据框d.pas1中， 然后保存为CSV文件“分区分年月统计.csv”中。
要求结果有三列：“地址编码”、“发病年月”、“发病人数”。</p></li>
<li><p>按照地址编码和发病月分类汇总发病人数， 保存到数据框d.pas2中，
然后保存为CSV文件“分区分月统计.csv”中。 要求每个地址编码占一行，
各列为地址编码以及1、2、…………、12各月份，
每行为同一地址编码各月份的发病数。</p></li>
<li><p>按发病年月和性别汇总发病人数，
并计算同年月不分性别的发病总人数。 结果保存到数据框d.pas3中，
然后保存到CSV文件“分年月分性别统计.csv”中。 要求每个不同年月占一行，
变量包括年月、男性发病数、女性发病数、总计。</p></li>
<li><p>分析病人的职业分布，保存到数据框d.pas4中，
然后保存到CSV文件“职业构成.csv”中。
要求各列为职业、发病人数、百分比（结果乘以100并保留一位小数）。</p></li>
<li><p>把年龄分成0—9, 11—19, ……, 70以上各段， 保存为“年龄段”变量。
用年龄段和性别交叉汇总发病人数和百分比(结果乘以100并保留一位小数)，
保存到“年龄性别分布.csv”中。
要求将每个年龄段的男性发病人数、发病率、女性发病人数、发病率存为一行。</p></li>
</ul>

</div>
</div>



            </section>

          </div>
        </div>
      </div>
<a href="summary-manip.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="graph.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="static/js/app.min.js"></script>
<script src="static/js/lunr.js"></script>
<script src="static/js/clipboard.min.js"></script>
<script src="static/js/plugin-search.js"></script>
<script src="static/js/plugin-sharing.js"></script>
<script src="static/js/plugin-fontsettings.js"></script>
<script src="static/js/plugin-bookdown.js"></script>
<script src="static/js/jquery.highlight.js"></script>
<script src="static/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["Rbook.pdf"],
"toc": {
"collapse": "section",
"scroll_highlight": true
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
