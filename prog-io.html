<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>15 R输入输出 | R语言教程</title>
  <meta name="description" content="李东风在北京大学数学科学学院开设本科生《统计软件》教材。采用R的bookdown制作，输出格式为bookdown::gitbook." />
  <meta name="generator" content="bookdown 0.21 and GitBook 2.6.7" />

  <meta property="og:title" content="15 R输入输出 | R语言教程" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="李东风在北京大学数学科学学院开设本科生《统计软件》教材。采用R的bookdown制作，输出格式为bookdown::gitbook." />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="15 R输入输出 | R语言教程" />
  
  <meta name="twitter:description" content="李东风在北京大学数学科学学院开设本科生《统计软件》教材。采用R的bookdown制作，输出格式为bookdown::gitbook." />
  

<meta name="author" content="李东风" />


<meta name="date" content="2020-12-28" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="prog-type-ws.html"/>
<link rel="next" href="prog-control.html"/>
<script src="static/js/jquery.min.js"></script>
<link href="static/css/style.css" rel="stylesheet" />
<link href="static/css/plugin-table.css" rel="stylesheet" />
<link href="static/css/plugin-bookdown.css" rel="stylesheet" />
<link href="static/css/plugin-highlight.css" rel="stylesheet" />
<link href="static/css/plugin-search.css" rel="stylesheet" />
<link href="static/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="static/css/plugin-clipboard.css" rel="stylesheet" />






<div style="display:none">
    <script src="http://s11.cnzz.com/z_stat.php?id=610720&web_id=610720" language="JavaScript"></script>
</div>





<script src="static/js/empty-anchor.js"></script>
<script src="static/js/htmlwidgets.js"></script>
<link href="static/css/str_view.css" rel="stylesheet" />
<script src="static/js/str_view.js"></script>
<link href="static/css/wordcloud.css" rel="stylesheet" />
<script src="static/js/wordcloud2-all.js"></script>
<script src="static/js/hover.js"></script>
<script src="static/js/wordcloud2.js"></script>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  jax: ["input/TeX","output/SVG"],
  extensions: ["tex2jax.js","MathMenu.js","MathZoom.js"],
  TeX: {
    extensions: ["AMSmath.js","AMSsymbols.js","noErrors.js","noUndefined.js"]
  }
});
</script>
<script type="text/javascript"
   src="static/js/mathjax.js">
</script>


<style type="text/css">
code.sourceCode > span { display: inline-block; line-height: 1.25; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="http://www.math.pku.edu.cn/teachers/lidf/docs/Rbook/html/_Rbook/index.html">R语言教程</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>前言</a></li>
<li class="part"><span><b>I 介绍</b></span></li>
<li class="chapter" data-level="1" data-path="intro.html"><a href="intro.html"><i class="fa fa-check"></i><b>1</b> R语言介绍</a><ul>
<li class="chapter" data-level="1.1" data-path="intro.html"><a href="intro.html#intro-hist-char"><i class="fa fa-check"></i><b>1.1</b> R的历史和特点</a><ul>
<li class="chapter" data-level="1.1.1" data-path="intro.html"><a href="intro.html#intro-hc-hist"><i class="fa fa-check"></i><b>1.1.1</b> R的历史</a></li>
<li class="chapter" data-level="1.1.2" data-path="intro.html"><a href="intro.html#intro-hc-char"><i class="fa fa-check"></i><b>1.1.2</b> R的特点</a></li>
</ul></li>
<li class="chapter" data-level="1.2" data-path="intro.html"><a href="intro.html#intro-install"><i class="fa fa-check"></i><b>1.2</b> R的下载与安装</a><ul>
<li class="chapter" data-level="1.2.1" data-path="intro.html"><a href="intro.html#intro-ins-down"><i class="fa fa-check"></i><b>1.2.1</b> R的下载</a></li>
<li class="chapter" data-level="1.2.2" data-path="intro.html"><a href="intro.html#intro-ins-install"><i class="fa fa-check"></i><b>1.2.2</b> R软件安装</a></li>
<li class="chapter" data-level="1.2.3" data-path="intro.html"><a href="intro.html#intro-ins-other-soft"><i class="fa fa-check"></i><b>1.2.3</b> 辅助软件</a></li>
</ul></li>
<li class="chapter" data-level="1.3" data-path="intro.html"><a href="intro.html#intro-ins-packages"><i class="fa fa-check"></i><b>1.3</b> R扩展软件包的安装与管理</a><ul>
<li class="chapter" data-level="1.3.1" data-path="intro.html"><a href="intro.html#intro-ins-pack-ins"><i class="fa fa-check"></i><b>1.3.1</b> 安装</a></li>
<li class="chapter" data-level="1.3.2" data-path="intro.html"><a href="intro.html#intro-ins-pack-gitbioc"><i class="fa fa-check"></i><b>1.3.2</b> Github和BioConductor的扩展包</a></li>
<li class="chapter" data-level="1.3.3" data-path="intro.html"><a href="intro.html#intro-ins-pack-upd"><i class="fa fa-check"></i><b>1.3.3</b> 更新扩展包</a></li>
<li class="chapter" data-level="1.3.4" data-path="intro.html"><a href="intro.html#intro-ins-pack-verup"><i class="fa fa-check"></i><b>1.3.4</b> 迁移扩展包</a></li>
<li class="chapter" data-level="1.3.5" data-path="intro.html"><a href="intro.html#intro-ins-pack-renv"><i class="fa fa-check"></i><b>1.3.5</b> 项目私有扩展包目录</a></li>
</ul></li>
<li class="chapter" data-level="1.4" data-path="intro.html"><a href="intro.html#intro-ruse"><i class="fa fa-check"></i><b>1.4</b> 基本R软件的用法</a><ul>
<li class="chapter" data-level="1.4.1" data-path="intro.html"><a href="intro.html#intro-ruse-run"><i class="fa fa-check"></i><b>1.4.1</b> 基本运行</a></li>
<li class="chapter" data-level="1.4.2" data-path="intro.html"><a href="intro.html#intro-ruse-proj"><i class="fa fa-check"></i><b>1.4.2</b> 项目目录</a></li>
</ul></li>
<li class="chapter" data-level="1.5" data-path="intro.html"><a href="intro.html#intro-rstudio"><i class="fa fa-check"></i><b>1.5</b> RStudio软件</a><ul>
<li class="chapter" data-level="1.5.1" data-path="intro.html"><a href="intro.html#intro-rstudio-intro"><i class="fa fa-check"></i><b>1.5.1</b> 介绍</a></li>
<li class="chapter" data-level="1.5.2" data-path="intro.html"><a href="intro.html#intro-rstudio-proj"><i class="fa fa-check"></i><b>1.5.2</b> 项目</a></li>
<li class="chapter" data-level="1.5.3" data-path="intro.html"><a href="intro.html#intro-rstudio-help"><i class="fa fa-check"></i><b>1.5.3</b> 帮助</a></li>
<li class="chapter" data-level="1.5.4" data-path="intro.html"><a href="intro.html#intro-rstudio-shortcuts"><i class="fa fa-check"></i><b>1.5.4</b> 使用技巧</a></li>
<li class="chapter" data-level="1.5.5" data-path="intro.html"><a href="intro.html#intro-rstudio-rmd"><i class="fa fa-check"></i><b>1.5.5</b> Rmd文件</a></li>
</ul></li>
<li class="chapter" data-level="1.6" data-path="intro.html"><a href="intro.html#intro-ins-ex"><i class="fa fa-check"></i><b>1.6</b> 练习</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="intro-example.html"><a href="intro-example.html"><i class="fa fa-check"></i><b>2</b> R语言入门运行样例</a><ul>
<li class="chapter" data-level="2.1" data-path="intro-example.html"><a href="intro-example.html#i-e-command-line"><i class="fa fa-check"></i><b>2.1</b> 命令行界面</a></li>
<li class="chapter" data-level="2.2" data-path="intro-example.html"><a href="intro-example.html#i-e-arith-op"><i class="fa fa-check"></i><b>2.2</b> 四则运算</a><ul>
<li class="chapter" data-level="2.2.1" data-path="intro-example.html"><a href="intro-example.html#i-e-arith-op-poker"><i class="fa fa-check"></i><b>2.2.1</b> 计算例子</a></li>
<li class="chapter" data-level="2.2.2" data-path="intro-example.html"><a href="intro-example.html#i-e-a-o-ex"><i class="fa fa-check"></i><b>2.2.2</b> 练习</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="intro-example.html"><a href="intro-example.html#i-e-math-func"><i class="fa fa-check"></i><b>2.3</b> 数学函数</a><ul>
<li class="chapter" data-level="2.3.1" data-path="intro-example.html"><a href="intro-example.html#i-e-m-f-sqrt"><i class="fa fa-check"></i><b>2.3.1</b> 数学函数——平方根、指数、对数</a></li>
<li class="chapter" data-level="2.3.2" data-path="intro-example.html"><a href="intro-example.html#i-e-m-f-round"><i class="fa fa-check"></i><b>2.3.2</b> 数学函数——取整</a></li>
<li class="chapter" data-level="2.3.3" data-path="intro-example.html"><a href="intro-example.html#i-e-m-f-sin"><i class="fa fa-check"></i><b>2.3.3</b> 数学函数——三角函数</a></li>
<li class="chapter" data-level="2.3.4" data-path="intro-example.html"><a href="intro-example.html#i-e-m-f-asin"><i class="fa fa-check"></i><b>2.3.4</b> 数学函数——反三角函数</a></li>
<li class="chapter" data-level="2.3.5" data-path="intro-example.html"><a href="intro-example.html#i-e-m-f-dist"><i class="fa fa-check"></i><b>2.3.5</b> 分布函数和分位数函数</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="intro-example.html"><a href="intro-example.html#i-e-output"><i class="fa fa-check"></i><b>2.4</b> 输出</a><ul>
<li class="chapter" data-level="2.4.1" data-path="intro-example.html"><a href="intro-example.html#i-e-o-simple"><i class="fa fa-check"></i><b>2.4.1</b> 简单输出</a></li>
<li class="chapter" data-level="2.4.2" data-path="intro-example.html"><a href="intro-example.html#i-e-o-sink"><i class="fa fa-check"></i><b>2.4.2</b> 用<code>sink()</code>函数作运行记录</a></li>
<li class="chapter" data-level="2.4.3" data-path="intro-example.html"><a href="intro-example.html#i-e-o-ex"><i class="fa fa-check"></i><b>2.4.3</b> 练习</a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="intro-example.html"><a href="intro-example.html#i-e-vector"><i class="fa fa-check"></i><b>2.5</b> 向量计算与变量赋值</a></li>
<li class="chapter" data-level="2.6" data-path="intro-example.html"><a href="intro-example.html#i-e-workspace"><i class="fa fa-check"></i><b>2.6</b> 工作空间介绍</a><ul>
<li class="chapter" data-level="2.6.1" data-path="intro-example.html"><a href="intro-example.html#i-e-w-ex"><i class="fa fa-check"></i><b>2.6.1</b> 练习</a></li>
</ul></li>
<li class="chapter" data-level="2.7" data-path="intro-example.html"><a href="intro-example.html#i-e-graph"><i class="fa fa-check"></i><b>2.7</b> 绘图示例</a><ul>
<li class="chapter" data-level="2.7.1" data-path="intro-example.html"><a href="intro-example.html#i-e-g-curve"><i class="fa fa-check"></i><b>2.7.1</b> 函数曲线示例</a></li>
<li class="chapter" data-level="2.7.2" data-path="intro-example.html"><a href="intro-example.html#i-e-g-barplot"><i class="fa fa-check"></i><b>2.7.2</b> 条形图示例</a></li>
<li class="chapter" data-level="2.7.3" data-path="intro-example.html"><a href="intro-example.html#i-e-g-scatter"><i class="fa fa-check"></i><b>2.7.3</b> 散点图示例</a></li>
<li class="chapter" data-level="2.7.4" data-path="intro-example.html"><a href="intro-example.html#i-e-g-demo"><i class="fa fa-check"></i><b>2.7.4</b> R软件自带的图形示例</a></li>
<li class="chapter" data-level="2.7.5" data-path="intro-example.html"><a href="intro-example.html#i-e-g-ex"><i class="fa fa-check"></i><b>2.7.5</b> 练习</a></li>
</ul></li>
<li class="chapter" data-level="2.8" data-path="intro-example.html"><a href="intro-example.html#i-e-summary"><i class="fa fa-check"></i><b>2.8</b> 汇总统计示例</a><ul>
<li class="chapter" data-level="2.8.1" data-path="intro-example.html"><a href="intro-example.html#i-e-s-table"><i class="fa fa-check"></i><b>2.8.1</b> 表格数据</a></li>
<li class="chapter" data-level="2.8.2" data-path="intro-example.html"><a href="intro-example.html#i-e-s-t-read-table"><i class="fa fa-check"></i><b>2.8.2</b> 读入表格数据</a></li>
<li class="chapter" data-level="2.8.3" data-path="intro-example.html"><a href="intro-example.html#i-e-s-ex"><i class="fa fa-check"></i><b>2.8.3</b> 练习</a></li>
<li class="chapter" data-level="2.8.4" data-path="intro-example.html"><a href="intro-example.html#i-e-s-qual-freq"><i class="fa fa-check"></i><b>2.8.4</b> 分类变量频数统计</a></li>
<li class="chapter" data-level="2.8.5" data-path="intro-example.html"><a href="intro-example.html#i-e-s-num-summ"><i class="fa fa-check"></i><b>2.8.5</b> 数值型变量的统计</a></li>
<li class="chapter" data-level="2.8.6" data-path="intro-example.html"><a href="intro-example.html#i-e-s-ex2"><i class="fa fa-check"></i><b>2.8.6</b> 练习</a></li>
</ul></li>
<li class="chapter" data-level="2.9" data-path="intro-example.html"><a href="intro-example.html#i-e-source"><i class="fa fa-check"></i><b>2.9</b> 运行源程序文件</a><ul>
<li class="chapter" data-level="2.9.1" data-path="intro-example.html"><a href="intro-example.html#i-e-source-enc"><i class="fa fa-check"></i><b>2.9.1</b> 源文件编码</a></li>
<li class="chapter" data-level="2.9.2" data-path="intro-example.html"><a href="intro-example.html#i-e-cwd"><i class="fa fa-check"></i><b>2.9.2</b> 当前工作目录</a></li>
<li class="chapter" data-level="2.9.3" data-path="intro-example.html"><a href="intro-example.html#i-e-source-ex"><i class="fa fa-check"></i><b>2.9.3</b> 练习</a></li>
</ul></li>
<li class="chapter" data-level="2.10" data-path="intro-example.html"><a href="intro-example.html#i-e-appendix-data"><i class="fa fa-check"></i><b>2.10</b> 附录：数据</a><ul>
<li class="chapter" data-level="2.10.1" data-path="intro-example.html"><a href="intro-example.html#i-e-appendix-data-tax"><i class="fa fa-check"></i><b>2.10.1</b> 公司纳税数据样例</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>II 数据类型与相应的运算</b></span></li>
<li class="chapter" data-level="3" data-path="prog-type-intro.html"><a href="prog-type-intro.html"><i class="fa fa-check"></i><b>3</b> 常量与变量</a><ul>
<li class="chapter" data-level="3.1" data-path="prog-type-intro.html"><a href="prog-type-intro.html#p-t-const"><i class="fa fa-check"></i><b>3.1</b> 常量</a></li>
<li class="chapter" data-level="3.2" data-path="prog-type-intro.html"><a href="prog-type-intro.html#p-t-cv-var"><i class="fa fa-check"></i><b>3.2</b> 变量</a></li>
<li class="chapter" data-level="3.3" data-path="prog-type-intro.html"><a href="prog-type-intro.html#p-t-type"><i class="fa fa-check"></i><b>3.3</b> R数据类型</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="prog-type-num.html"><a href="prog-type-num.html"><i class="fa fa-check"></i><b>4</b> 数值型向量及其运算</a><ul>
<li class="chapter" data-level="4.1" data-path="prog-type-num.html"><a href="prog-type-num.html#p-t-num"><i class="fa fa-check"></i><b>4.1</b> 数值型向量</a></li>
<li class="chapter" data-level="4.2" data-path="prog-type-num.html"><a href="prog-type-num.html#p-t-arith"><i class="fa fa-check"></i><b>4.2</b> 向量运算</a><ul>
<li class="chapter" data-level="4.2.1" data-path="prog-type-num.html"><a href="prog-type-num.html#p-t-arith-scalar"><i class="fa fa-check"></i><b>4.2.1</b> 标量和标量运算</a></li>
<li class="chapter" data-level="4.2.2" data-path="prog-type-num.html"><a href="prog-type-num.html#p-t-arith-vec-with-scalar"><i class="fa fa-check"></i><b>4.2.2</b> 向量与标量运算</a></li>
<li class="chapter" data-level="4.2.3" data-path="prog-type-num.html"><a href="prog-type-num.html#p-t-arith-vec-eq-len"><i class="fa fa-check"></i><b>4.2.3</b> 等长向量运算</a></li>
<li class="chapter" data-level="4.2.4" data-path="prog-type-num.html"><a href="prog-type-num.html#p-t-arith-vec-uneq-len"><i class="fa fa-check"></i><b>4.2.4</b> 不等长向量的运算</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="prog-type-num.html"><a href="prog-type-num.html#p-t-vfunc"><i class="fa fa-check"></i><b>4.3</b> 向量函数</a><ul>
<li class="chapter" data-level="4.3.1" data-path="prog-type-num.html"><a href="prog-type-num.html#p-t-vfunc-vector-func"><i class="fa fa-check"></i><b>4.3.1</b> 向量化的函数</a></li>
<li class="chapter" data-level="4.3.2" data-path="prog-type-num.html"><a href="prog-type-num.html#p-t-vfunc-sort"><i class="fa fa-check"></i><b>4.3.2</b> 排序函数</a></li>
<li class="chapter" data-level="4.3.3" data-path="prog-type-num.html"><a href="prog-type-num.html#p-t-vfunc-stat"><i class="fa fa-check"></i><b>4.3.3</b> 统计函数</a></li>
<li class="chapter" data-level="4.3.4" data-path="prog-type-num.html"><a href="prog-type-num.html#p-t-vfunc-seq"><i class="fa fa-check"></i><b>4.3.4</b> 生成规则序列的函数</a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="prog-type-num.html"><a href="prog-type-num.html#p-t-complex"><i class="fa fa-check"></i><b>4.4</b> 复数向量</a></li>
<li class="chapter" data-level="4.5" data-path="prog-type-num.html"><a href="prog-type-num.html#p-t-vfunc-ex"><i class="fa fa-check"></i><b>4.5</b> 练习</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="prog-type-logi.html"><a href="prog-type-logi.html"><i class="fa fa-check"></i><b>5</b> 逻辑型向量及其运算</a><ul>
<li class="chapter" data-level="5.1" data-path="prog-type-logi.html"><a href="prog-type-logi.html#p-t-logical-vec"><i class="fa fa-check"></i><b>5.1</b> 逻辑型向量与比较运算</a></li>
<li class="chapter" data-level="5.2" data-path="prog-type-logi.html"><a href="prog-type-logi.html#p-t-lvec-logic-op"><i class="fa fa-check"></i><b>5.2</b> 逻辑运算</a></li>
<li class="chapter" data-level="5.3" data-path="prog-type-logi.html"><a href="prog-type-logi.html#p-t-lvec-logic-op-vec"><i class="fa fa-check"></i><b>5.3</b> 逻辑运算函数</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="prog-type-char.html"><a href="prog-type-char.html"><i class="fa fa-check"></i><b>6</b> 字符型数据及其处理</a><ul>
<li class="chapter" data-level="6.1" data-path="prog-type-char.html"><a href="prog-type-char.html#p-t-char"><i class="fa fa-check"></i><b>6.1</b> 字符型向量</a></li>
<li class="chapter" data-level="6.2" data-path="prog-type-char.html"><a href="prog-type-char.html#p-t-char-paste"><i class="fa fa-check"></i><b>6.2</b> <code>paste()</code>函数</a></li>
<li class="chapter" data-level="6.3" data-path="prog-type-char.html"><a href="prog-type-char.html#p-t-char-toupper"><i class="fa fa-check"></i><b>6.3</b> 转换大小写</a></li>
<li class="chapter" data-level="6.4" data-path="prog-type-char.html"><a href="prog-type-char.html#p-t-char-nchar"><i class="fa fa-check"></i><b>6.4</b> 字符串长度</a></li>
<li class="chapter" data-level="6.5" data-path="prog-type-char.html"><a href="prog-type-char.html#p-t-char-substr"><i class="fa fa-check"></i><b>6.5</b> 取子串</a></li>
<li class="chapter" data-level="6.6" data-path="prog-type-char.html"><a href="prog-type-char.html#p-t-char-asnum"><i class="fa fa-check"></i><b>6.6</b> 类型转换</a></li>
<li class="chapter" data-level="6.7" data-path="prog-type-char.html"><a href="prog-type-char.html#p-t-char-strsplit"><i class="fa fa-check"></i><b>6.7</b> 字符串拆分</a></li>
<li class="chapter" data-level="6.8" data-path="prog-type-char.html"><a href="prog-type-char.html#p-t-char-gsub"><i class="fa fa-check"></i><b>6.8</b> 字符串替换功能</a></li>
<li class="chapter" data-level="6.9" data-path="prog-type-char.html"><a href="prog-type-char.html#p-t-char-regexp"><i class="fa fa-check"></i><b>6.9</b> 正则表达式</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="prog-type-index.html"><a href="prog-type-index.html"><i class="fa fa-check"></i><b>7</b> R向量下标和子集</a><ul>
<li class="chapter" data-level="7.1" data-path="prog-type-index.html"><a href="prog-type-index.html#p-t-subset-int"><i class="fa fa-check"></i><b>7.1</b> 正整数下标</a></li>
<li class="chapter" data-level="7.2" data-path="prog-type-index.html"><a href="prog-type-index.html#p-t-subset-negint"><i class="fa fa-check"></i><b>7.2</b> 负整数下标</a></li>
<li class="chapter" data-level="7.3" data-path="prog-type-index.html"><a href="prog-type-index.html#p-t-subset-all"><i class="fa fa-check"></i><b>7.3</b> 空下标与零下标</a></li>
<li class="chapter" data-level="7.4" data-path="prog-type-index.html"><a href="prog-type-index.html#p-t-subset-over"><i class="fa fa-check"></i><b>7.4</b> 下标超界</a></li>
<li class="chapter" data-level="7.5" data-path="prog-type-index.html"><a href="prog-type-index.html#p-t-subset-logic"><i class="fa fa-check"></i><b>7.5</b> 逻辑下标</a></li>
<li class="chapter" data-level="7.6" data-path="prog-type-index.html"><a href="prog-type-index.html#p-t-subset-which"><i class="fa fa-check"></i><b>7.6</b> <code>which()</code>、<code>which.min()</code>、<code>which.max()</code>函数</a></li>
<li class="chapter" data-level="7.7" data-path="prog-type-index.html"><a href="prog-type-index.html#p-t-subset-names"><i class="fa fa-check"></i><b>7.7</b> 元素名</a></li>
<li class="chapter" data-level="7.8" data-path="prog-type-index.html"><a href="prog-type-index.html#p-t-subset-mapping"><i class="fa fa-check"></i><b>7.8</b> 用R向量下标作映射</a></li>
<li class="chapter" data-level="7.9" data-path="prog-type-index.html"><a href="prog-type-index.html#p-t-subset-set"><i class="fa fa-check"></i><b>7.9</b> 集合运算</a></li>
<li class="chapter" data-level="7.10" data-path="prog-type-index.html"><a href="prog-type-index.html#p-t-set-ex"><i class="fa fa-check"></i><b>7.10</b> 练习</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="prog-type-attr.html"><a href="prog-type-attr.html"><i class="fa fa-check"></i><b>8</b> R数据类型的性质</a><ul>
<li class="chapter" data-level="8.1" data-path="prog-type-attr.html"><a href="prog-type-attr.html#p-t-modes-typeof"><i class="fa fa-check"></i><b>8.1</b> 存储模式与基本类型</a></li>
<li class="chapter" data-level="8.2" data-path="prog-type-attr.html"><a href="prog-type-attr.html#p-t-modes-as"><i class="fa fa-check"></i><b>8.2</b> 类型转换与类型升档</a></li>
<li class="chapter" data-level="8.3" data-path="prog-type-attr.html"><a href="prog-type-attr.html#p-t-modes-attr"><i class="fa fa-check"></i><b>8.3</b> 属性</a><ul>
<li class="chapter" data-level="8.3.1" data-path="prog-type-attr.html"><a href="prog-type-attr.html#p-t-modes-attr-asfun"><i class="fa fa-check"></i><b>8.3.1</b> <code>attributes</code>函数</a></li>
<li class="chapter" data-level="8.3.2" data-path="prog-type-attr.html"><a href="prog-type-attr.html#p-t-modes-attr-attrfun"><i class="fa fa-check"></i><b>8.3.2</b> <code>attr</code>函数</a></li>
<li class="chapter" data-level="8.3.3" data-path="prog-type-attr.html"><a href="prog-type-attr.html#p-t-modes-attr-names"><i class="fa fa-check"></i><b>8.3.3</b> <code>names</code>属性</a></li>
<li class="chapter" data-level="8.3.4" data-path="prog-type-attr.html"><a href="prog-type-attr.html#p-t-modes-attr-dim"><i class="fa fa-check"></i><b>8.3.4</b> <code>dim</code>属性</a></li>
</ul></li>
<li class="chapter" data-level="8.4" data-path="prog-type-attr.html"><a href="prog-type-attr.html#p-t-modes-class"><i class="fa fa-check"></i><b>8.4</b> 类属</a></li>
<li class="chapter" data-level="8.5" data-path="prog-type-attr.html"><a href="prog-type-attr.html#p-t-modes-str"><i class="fa fa-check"></i><b>8.5</b> <code>str()</code>函数</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="prog-type-date.html"><a href="prog-type-date.html"><i class="fa fa-check"></i><b>9</b> R日期时间</a><ul>
<li class="chapter" data-level="9.1" data-path="prog-type-date.html"><a href="prog-type-date.html#prog-type-dt-intro"><i class="fa fa-check"></i><b>9.1</b> R日期和日期时间类型</a></li>
<li class="chapter" data-level="9.2" data-path="prog-type-date.html"><a href="prog-type-date.html#prog-type-dt-fromchr"><i class="fa fa-check"></i><b>9.2</b> 从字符串生成日期数据</a></li>
<li class="chapter" data-level="9.3" data-path="prog-type-date.html"><a href="prog-type-date.html#p-t-date-format"><i class="fa fa-check"></i><b>9.3</b> 日期显示格式</a></li>
<li class="chapter" data-level="9.4" data-path="prog-type-date.html"><a href="prog-type-date.html#p-t-date-comp"><i class="fa fa-check"></i><b>9.4</b> 访问日期时间的组成值</a></li>
<li class="chapter" data-level="9.5" data-path="prog-type-date.html"><a href="prog-type-date.html#p-t-date-round"><i class="fa fa-check"></i><b>9.5</b> 日期舍入计算</a></li>
<li class="chapter" data-level="9.6" data-path="prog-type-date.html"><a href="prog-type-date.html#p-t-date-calc"><i class="fa fa-check"></i><b>9.6</b> 日期计算</a><ul>
<li class="chapter" data-level="9.6.1" data-path="prog-type-date.html"><a href="prog-type-date.html#p-t-date-calc-dur"><i class="fa fa-check"></i><b>9.6.1</b> 时间长度</a></li>
<li class="chapter" data-level="9.6.2" data-path="prog-type-date.html"><a href="prog-type-date.html#p-t-date-calc-per"><i class="fa fa-check"></i><b>9.6.2</b> 时间周期</a></li>
<li class="chapter" data-level="9.6.3" data-path="prog-type-date.html"><a href="prog-type-date.html#p-t-date-calc-int"><i class="fa fa-check"></i><b>9.6.3</b> 时间区间</a></li>
</ul></li>
<li class="chapter" data-level="9.7" data-path="prog-type-date.html"><a href="prog-type-date.html#prog-type-dt-baser"><i class="fa fa-check"></i><b>9.7</b> 基本R软件的日期功能</a><ul>
<li class="chapter" data-level="9.7.1" data-path="prog-type-date.html"><a href="prog-type-date.html#p-t-date-baser-gen"><i class="fa fa-check"></i><b>9.7.1</b> 生成日期和日期时间型数据</a></li>
<li class="chapter" data-level="9.7.2" data-path="prog-type-date.html"><a href="prog-type-date.html#p-t-date-baser-comp"><i class="fa fa-check"></i><b>9.7.2</b> 取出日期时间的组成值</a></li>
<li class="chapter" data-level="9.7.3" data-path="prog-type-date.html"><a href="prog-type-date.html#p-t-date-baser-calc"><i class="fa fa-check"></i><b>9.7.3</b> 日期计算</a></li>
</ul></li>
<li class="chapter" data-level="9.8" data-path="prog-type-date.html"><a href="prog-type-date.html#p-t-date-ex"><i class="fa fa-check"></i><b>9.8</b> 练习</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="prog-type-fact.html"><a href="prog-type-fact.html"><i class="fa fa-check"></i><b>10</b> R因子类型</a><ul>
<li class="chapter" data-level="10.1" data-path="prog-type-fact.html"><a href="prog-type-fact.html#p-t-fact"><i class="fa fa-check"></i><b>10.1</b> 因子</a></li>
<li class="chapter" data-level="10.2" data-path="prog-type-fact.html"><a href="prog-type-fact.html#p-t-factor-table"><i class="fa fa-check"></i><b>10.2</b> <code>table()</code>函数</a></li>
<li class="chapter" data-level="10.3" data-path="prog-type-fact.html"><a href="prog-type-fact.html#p-t-factor-tapply"><i class="fa fa-check"></i><b>10.3</b> <code>tapply()</code>函数</a></li>
<li class="chapter" data-level="10.4" data-path="prog-type-fact.html"><a href="prog-type-fact.html#summ-by-forcats"><i class="fa fa-check"></i><b>10.4</b> forcats包的因子函数</a></li>
<li class="chapter" data-level="10.5" data-path="prog-type-fact.html"><a href="prog-type-fact.html#p-t-factor-ex"><i class="fa fa-check"></i><b>10.5</b> 练习</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="prog-type-list.html"><a href="prog-type-list.html"><i class="fa fa-check"></i><b>11</b> 列表类型</a><ul>
<li class="chapter" data-level="11.1" data-path="prog-type-list.html"><a href="prog-type-list.html#p-t-list"><i class="fa fa-check"></i><b>11.1</b> 列表</a></li>
<li class="chapter" data-level="11.2" data-path="prog-type-list.html"><a href="prog-type-list.html#p-t-list-access"><i class="fa fa-check"></i><b>11.2</b> 列表元素访问</a></li>
<li class="chapter" data-level="11.3" data-path="prog-type-list.html"><a href="prog-type-list.html#p-t-list-as"><i class="fa fa-check"></i><b>11.3</b> 列表类型转换</a></li>
<li class="chapter" data-level="11.4" data-path="prog-type-list.html"><a href="prog-type-list.html#p-t-list-ex-strsplit"><i class="fa fa-check"></i><b>11.4</b> 返回列表的函数示例–<code>strsplit()</code></a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="prog-type-matrix.html"><a href="prog-type-matrix.html"><i class="fa fa-check"></i><b>12</b> R矩阵和数组</a><ul>
<li class="chapter" data-level="12.1" data-path="prog-type-matrix.html"><a href="prog-type-matrix.html#p-t-array-matrix"><i class="fa fa-check"></i><b>12.1</b> R矩阵</a></li>
<li class="chapter" data-level="12.2" data-path="prog-type-matrix.html"><a href="prog-type-matrix.html#p-t-array-subset"><i class="fa fa-check"></i><b>12.2</b> 矩阵子集</a></li>
<li class="chapter" data-level="12.3" data-path="prog-type-matrix.html"><a href="prog-type-matrix.html#p-t-array-cbind"><i class="fa fa-check"></i><b>12.3</b> <code>cbind()</code>和<code>rbind()</code>函数</a></li>
<li class="chapter" data-level="12.4" data-path="prog-type-matrix.html"><a href="prog-type-matrix.html#p-t-array-matop"><i class="fa fa-check"></i><b>12.4</b> 矩阵运算</a><ul>
<li class="chapter" data-level="12.4.1" data-path="prog-type-matrix.html"><a href="prog-type-matrix.html#p-t-array-matop-arith"><i class="fa fa-check"></i><b>12.4.1</b> 四则运算</a></li>
<li class="chapter" data-level="12.4.2" data-path="prog-type-matrix.html"><a href="prog-type-matrix.html#p-t-array-matop-mult"><i class="fa fa-check"></i><b>12.4.2</b> 矩阵乘法</a></li>
<li class="chapter" data-level="12.4.3" data-path="prog-type-matrix.html"><a href="prog-type-matrix.html#p-t-array-matop-vecmat"><i class="fa fa-check"></i><b>12.4.3</b> 向量与矩阵相乘</a></li>
<li class="chapter" data-level="12.4.4" data-path="prog-type-matrix.html"><a href="prog-type-matrix.html#p-t-array-matop-inprod"><i class="fa fa-check"></i><b>12.4.4</b> 内积</a></li>
<li class="chapter" data-level="12.4.5" data-path="prog-type-matrix.html"><a href="prog-type-matrix.html#p-t-array-matop-outer"><i class="fa fa-check"></i><b>12.4.5</b> 外积</a></li>
</ul></li>
<li class="chapter" data-level="12.5" data-path="prog-type-matrix.html"><a href="prog-type-matrix.html#p-t-array-solve"><i class="fa fa-check"></i><b>12.5</b> 逆矩阵与线性方程组求解</a></li>
<li class="chapter" data-level="12.6" data-path="prog-type-matrix.html"><a href="prog-type-matrix.html#p-t-array-apply"><i class="fa fa-check"></i><b>12.6</b> <code>apply()</code>函数</a></li>
<li class="chapter" data-level="12.7" data-path="prog-type-matrix.html"><a href="prog-type-matrix.html#p-t-array-array"><i class="fa fa-check"></i><b>12.7</b> 多维数组</a></li>
</ul></li>
<li class="chapter" data-level="13" data-path="prog-type-df.html"><a href="prog-type-df.html"><i class="fa fa-check"></i><b>13</b> 数据框</a><ul>
<li class="chapter" data-level="13.1" data-path="prog-type-df.html"><a href="prog-type-df.html#p-t-dataframe"><i class="fa fa-check"></i><b>13.1</b> 数据框</a></li>
<li class="chapter" data-level="13.2" data-path="prog-type-df.html"><a href="prog-type-df.html#p-t-df-access"><i class="fa fa-check"></i><b>13.2</b> 数据框内容访问</a></li>
<li class="chapter" data-level="13.3" data-path="prog-type-df.html"><a href="prog-type-df.html#p-t-df-rownames"><i class="fa fa-check"></i><b>13.3</b> 数据框的行名</a></li>
<li class="chapter" data-level="13.4" data-path="prog-type-df.html"><a href="prog-type-df.html#p-t-df-notmatrix"><i class="fa fa-check"></i><b>13.4</b> 数据框与矩阵的区别</a></li>
<li class="chapter" data-level="13.5" data-path="prog-type-df.html"><a href="prog-type-df.html#p-t-df-gl-func"><i class="fa fa-check"></i><b>13.5</b> <code>tidyr::expand_grid()</code>函数</a></li>
<li class="chapter" data-level="13.6" data-path="prog-type-df.html"><a href="prog-type-df.html#p-t-tibble"><i class="fa fa-check"></i><b>13.6</b> <code>tibble</code>类型</a></li>
<li class="chapter" data-level="13.7" data-path="prog-type-df.html"><a href="prog-type-df.html#p-t-df-ex"><i class="fa fa-check"></i><b>13.7</b> 练习</a></li>
</ul></li>
<li class="chapter" data-level="14" data-path="prog-type-ws.html"><a href="prog-type-ws.html"><i class="fa fa-check"></i><b>14</b> 工作空间和变量赋值</a><ul>
<li class="chapter" data-level="14.1" data-path="prog-type-ws.html"><a href="prog-type-ws.html#p-t-ws"><i class="fa fa-check"></i><b>14.1</b> 工作空间</a></li>
<li class="chapter" data-level="14.2" data-path="prog-type-ws.html"><a href="prog-type-ws.html#p-t-nlvname"><i class="fa fa-check"></i><b>14.2</b> 非法变量名</a></li>
<li class="chapter" data-level="14.3" data-path="prog-type-ws.html"><a href="prog-type-ws.html#p-t-ws-asign"><i class="fa fa-check"></i><b>14.3</b> 变量赋值与绑定</a></li>
<li class="chapter" data-level="14.4" data-path="prog-type-ws.html"><a href="prog-type-ws.html#p-t-ws-env"><i class="fa fa-check"></i><b>14.4</b> 环境</a></li>
</ul></li>
<li class="part"><span><b>III 编程</b></span></li>
<li class="chapter" data-level="15" data-path="prog-io.html"><a href="prog-io.html"><i class="fa fa-check"></i><b>15</b> R输入输出</a><ul>
<li class="chapter" data-level="15.1" data-path="prog-io.html"><a href="prog-io.html#p-io-simple"><i class="fa fa-check"></i><b>15.1</b> 输入输出的简单方法</a><ul>
<li class="chapter" data-level="15.1.1" data-path="prog-io.html"><a href="prog-io.html#p-io-simple-out"><i class="fa fa-check"></i><b>15.1.1</b> 简单的输出</a></li>
<li class="chapter" data-level="15.1.2" data-path="prog-io.html"><a href="prog-io.html#p-io-simple-input"><i class="fa fa-check"></i><b>15.1.2</b> 简单的输入</a></li>
</ul></li>
<li class="chapter" data-level="15.2" data-path="prog-io.html"><a href="prog-io.html#p-io-read-csv"><i class="fa fa-check"></i><b>15.2</b> 读取CSV文件</a><ul>
<li class="chapter" data-level="15.2.1" data-path="prog-io.html"><a href="prog-io.html#p-io-read-csv-format"><i class="fa fa-check"></i><b>15.2.1</b> CSV格式</a></li>
<li class="chapter" data-level="15.2.2" data-path="prog-io.html"><a href="prog-io.html#p-io-read-csv-fromstr"><i class="fa fa-check"></i><b>15.2.2</b> 从字符串读入</a></li>
<li class="chapter" data-level="15.2.3" data-path="prog-io.html"><a href="prog-io.html#p-io-read-csv-opt"><i class="fa fa-check"></i><b>15.2.3</b> <code>read_csv</code>选项</a></li>
<li class="chapter" data-level="15.2.4" data-path="prog-io.html"><a href="prog-io.html#p-io-read-csv-enc"><i class="fa fa-check"></i><b>15.2.4</b> 编码设置</a></li>
<li class="chapter" data-level="15.2.5" data-path="prog-io.html"><a href="prog-io.html#p-io-read-csv-na"><i class="fa fa-check"></i><b>15.2.5</b> 缺失值设置</a></li>
<li class="chapter" data-level="15.2.6" data-path="prog-io.html"><a href="prog-io.html#p-io-read-csv-colt"><i class="fa fa-check"></i><b>15.2.6</b> 各列类型设置</a></li>
<li class="chapter" data-level="15.2.7" data-path="prog-io.html"><a href="prog-io.html#p-io-read-csv-fact"><i class="fa fa-check"></i><b>15.2.7</b> 因子类型设置</a></li>
<li class="chapter" data-level="15.2.8" data-path="prog-io.html"><a href="prog-io.html#p-io-read-csv-date"><i class="fa fa-check"></i><b>15.2.8</b> 读入日期</a></li>
<li class="chapter" data-level="15.2.9" data-path="prog-io.html"><a href="prog-io.html#p-io-read-csv-funcs"><i class="fa fa-check"></i><b>15.2.9</b> 其它函数</a></li>
</ul></li>
<li class="chapter" data-level="15.3" data-path="prog-io.html"><a href="prog-io.html#p-io-excel"><i class="fa fa-check"></i><b>15.3</b> Excel表访问</a><ul>
<li class="chapter" data-level="15.3.1" data-path="prog-io.html"><a href="prog-io.html#p-io-excel-csv"><i class="fa fa-check"></i><b>15.3.1</b> 借助于文本格式</a></li>
<li class="chapter" data-level="15.3.2" data-path="prog-io.html"><a href="prog-io.html#p-io-excel-clip"><i class="fa fa-check"></i><b>15.3.2</b> 使用剪贴板</a></li>
<li class="chapter" data-level="15.3.3" data-path="prog-io.html"><a href="prog-io.html#p-io-excel-readxl"><i class="fa fa-check"></i><b>15.3.3</b> 利用readxl扩展包</a></li>
</ul></li>
<li class="chapter" data-level="15.4" data-path="prog-io.html"><a href="prog-io.html#p-io-file"><i class="fa fa-check"></i><b>15.4</b> 文件访问</a><ul>
<li class="chapter" data-level="15.4.1" data-path="prog-io.html"><a href="prog-io.html#p-io-file-conn"><i class="fa fa-check"></i><b>15.4.1</b> 连接</a></li>
<li class="chapter" data-level="15.4.2" data-path="prog-io.html"><a href="prog-io.html#p-io-file-text"><i class="fa fa-check"></i><b>15.4.2</b> 文本文件访问</a></li>
<li class="chapter" data-level="15.4.3" data-path="prog-io.html"><a href="prog-io.html#p-io-enc-batch"><i class="fa fa-check"></i><b>15.4.3</b> 文本文件分批读写</a></li>
<li class="chapter" data-level="15.4.4" data-path="prog-io.html"><a href="prog-io.html#p-io-file-bin"><i class="fa fa-check"></i><b>15.4.4</b> 二进制文件访问</a></li>
<li class="chapter" data-level="15.4.5" data-path="prog-io.html"><a href="prog-io.html#p-io-file-textcon"><i class="fa fa-check"></i><b>15.4.5</b> 字符型连接</a></li>
</ul></li>
<li class="chapter" data-level="15.5" data-path="prog-io.html"><a href="prog-io.html#p-io-enc"><i class="fa fa-check"></i><b>15.5</b> 中文编码问题</a><ul>
<li class="chapter" data-level="15.5.1" data-path="prog-io.html"><a href="prog-io.html#p-io-enc-base"><i class="fa fa-check"></i><b>15.5.1</b> 用基本R的读取函数读取</a></li>
<li class="chapter" data-level="15.5.2" data-path="prog-io.html"><a href="prog-io.html#p-io-enc-readr"><i class="fa fa-check"></i><b>15.5.2</b> 用readr包读取</a></li>
<li class="chapter" data-level="15.5.3" data-path="prog-io.html"><a href="prog-io.html#p-io-enc-write"><i class="fa fa-check"></i><b>15.5.3</b> 输出文件的编码</a></li>
</ul></li>
<li class="chapter" data-level="15.6" data-path="prog-io.html"><a href="prog-io.html#p-io-dir"><i class="fa fa-check"></i><b>15.6</b> 目录和文件管理</a></li>
<li class="chapter" data-level="15.7" data-path="prog-io.html"><a href="prog-io.html#p-io-db"><i class="fa fa-check"></i><b>15.7</b> SQL数据库访问</a><ul>
<li class="chapter" data-level="15.7.1" data-path="prog-io.html"><a href="prog-io.html#p-io-db-intro"><i class="fa fa-check"></i><b>15.7.1</b> 介绍</a></li>
<li class="chapter" data-level="15.7.2" data-path="prog-io.html"><a href="prog-io.html#p-io-db-sqlite"><i class="fa fa-check"></i><b>15.7.2</b> SQLite数据库访问</a></li>
<li class="chapter" data-level="15.7.3" data-path="prog-io.html"><a href="prog-io.html#p-io-db-sql"><i class="fa fa-check"></i><b>15.7.3</b> SQL命令简介</a></li>
<li class="chapter" data-level="15.7.4" data-path="prog-io.html"><a href="prog-io.html#p-io-db-oracle"><i class="fa fa-check"></i><b>15.7.4</b> 访问Oracle数据库</a></li>
<li class="chapter" data-level="15.7.5" data-path="prog-io.html"><a href="prog-io.html#p-io-db-mysql"><i class="fa fa-check"></i><b>15.7.5</b> MySQL数据库访问</a></li>
<li class="chapter" data-level="15.7.6" data-path="prog-io.html"><a href="prog-io.html#p-io-excel-rodbc"><i class="fa fa-check"></i><b>15.7.6</b> 利用RODBC访问Access数据库</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="16" data-path="prog-control.html"><a href="prog-control.html"><i class="fa fa-check"></i><b>16</b> 程序控制结构</a><ul>
<li class="chapter" data-level="16.1" data-path="prog-control.html"><a href="prog-control.html#p-con-exp"><i class="fa fa-check"></i><b>16.1</b> 表达式</a></li>
<li class="chapter" data-level="16.2" data-path="prog-control.html"><a href="prog-control.html#p-con-if"><i class="fa fa-check"></i><b>16.2</b> 分支结构</a><ul>
<li class="chapter" data-level="16.2.1" data-path="prog-control.html"><a href="prog-control.html#p-con-logic-index"><i class="fa fa-check"></i><b>16.2.1</b> 用逻辑下标代替分支结构</a></li>
<li class="chapter" data-level="16.2.2" data-path="prog-control.html"><a href="prog-control.html#p-con-ifelsef"><i class="fa fa-check"></i><b>16.2.2</b> <code>ifelse</code>函数</a></li>
<li class="chapter" data-level="16.2.3" data-path="prog-control.html"><a href="prog-control.html#p-con-switch"><i class="fa fa-check"></i><b>16.2.3</b> <code>switch</code>函数</a></li>
</ul></li>
<li class="chapter" data-level="16.3" data-path="prog-control.html"><a href="prog-control.html#p-con-loop"><i class="fa fa-check"></i><b>16.3</b> 循环结构</a><ul>
<li class="chapter" data-level="16.3.1" data-path="prog-control.html"><a href="prog-control.html#p-con-for"><i class="fa fa-check"></i><b>16.3.1</b> 计数循环</a></li>
<li class="chapter" data-level="16.3.2" data-path="prog-control.html"><a href="prog-control.html#p-con-while"><i class="fa fa-check"></i><b>16.3.2</b> <code>while</code>循环和<code>repeat</code>循环</a></li>
</ul></li>
<li class="chapter" data-level="16.4" data-path="prog-control.html"><a href="prog-control.html#p-con-cond"><i class="fa fa-check"></i><b>16.4</b> R中判断条件</a></li>
<li class="chapter" data-level="16.5" data-path="prog-control.html"><a href="prog-control.html#p-pipe"><i class="fa fa-check"></i><b>16.5</b> 管道控制</a></li>
</ul></li>
<li class="chapter" data-level="17" data-path="prog-func.html"><a href="prog-func.html"><i class="fa fa-check"></i><b>17</b> 函数</a><ul>
<li class="chapter" data-level="17.1" data-path="prog-func.html"><a href="prog-func.html#p-func"><i class="fa fa-check"></i><b>17.1</b> 函数基础</a><ul>
<li class="chapter" data-level="17.1.1" data-path="prog-func.html"><a href="prog-func.html#p-func-intro"><i class="fa fa-check"></i><b>17.1.1</b> 介绍</a></li>
<li class="chapter" data-level="17.1.2" data-path="prog-func.html"><a href="prog-func.html#p-func-def"><i class="fa fa-check"></i><b>17.1.2</b> 函数定义</a></li>
<li class="chapter" data-level="17.1.3" data-path="prog-func.html"><a href="prog-func.html#p-func-call"><i class="fa fa-check"></i><b>17.1.3</b> 函数调用</a></li>
<li class="chapter" data-level="17.1.4" data-path="prog-func.html"><a href="prog-func.html#p-func-recursive"><i class="fa fa-check"></i><b>17.1.4</b> 递归调用</a></li>
<li class="chapter" data-level="17.1.5" data-path="prog-func.html"><a href="prog-func.html#p-func-vr"><i class="fa fa-check"></i><b>17.1.5</b> 向量化</a></li>
<li class="chapter" data-level="17.1.6" data-path="prog-func.html"><a href="prog-func.html#p-func-anonymf"><i class="fa fa-check"></i><b>17.1.6</b> 无名函数</a></li>
</ul></li>
<li class="chapter" data-level="17.2" data-path="prog-func.html"><a href="prog-func.html#p-func-space"><i class="fa fa-check"></i><b>17.2</b> 变量作用域</a><ul>
<li class="chapter" data-level="17.2.1" data-path="prog-func.html"><a href="prog-func.html#p-func-global"><i class="fa fa-check"></i><b>17.2.1</b> 全局变量和工作空间</a></li>
<li class="chapter" data-level="17.2.2" data-path="prog-func.html"><a href="prog-func.html#p-func-local"><i class="fa fa-check"></i><b>17.2.2</b> 局部变量</a></li>
<li class="chapter" data-level="17.2.3" data-path="prog-func.html"><a href="prog-func.html#p-func-global-access"><i class="fa fa-check"></i><b>17.2.3</b> 在函数内访问全局变量</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="18" data-path="prog-prof.html"><a href="prog-prof.html"><i class="fa fa-check"></i><b>18</b> R程序效率</a><ul>
<li class="chapter" data-level="18.1" data-path="prog-prof.html"><a href="prog-prof.html#p-prof-effic"><i class="fa fa-check"></i><b>18.1</b> R的运行效率</a></li>
<li class="chapter" data-level="18.2" data-path="prog-prof.html"><a href="prog-prof.html#p-prof-vect"><i class="fa fa-check"></i><b>18.2</b> 向量化编程</a><ul>
<li class="chapter" data-level="18.2.1" data-path="prog-prof.html"><a href="prog-prof.html#p-prof-vect-ex1"><i class="fa fa-check"></i><b>18.2.1</b> 示例1</a></li>
<li class="chapter" data-level="18.2.2" data-path="prog-prof.html"><a href="prog-prof.html#p-prof-vect-ex2"><i class="fa fa-check"></i><b>18.2.2</b> 示例2</a></li>
<li class="chapter" data-level="18.2.3" data-path="prog-prof.html"><a href="prog-prof.html#p-prof-vect-ex3"><i class="fa fa-check"></i><b>18.2.3</b> 示例3</a></li>
</ul></li>
<li class="chapter" data-level="18.3" data-path="prog-prof.html"><a href="prog-prof.html#p-prof-loop"><i class="fa fa-check"></i><b>18.3</b> 减少显式循环</a><ul>
<li class="chapter" data-level="18.3.1" data-path="prog-prof.html"><a href="prog-prof.html#p-prof-replicate"><i class="fa fa-check"></i><b>18.3.1</b> <code>replicate()</code>函数</a></li>
</ul></li>
<li class="chapter" data-level="18.4" data-path="prog-prof.html"><a href="prog-prof.html#p-prof-copy"><i class="fa fa-check"></i><b>18.4</b> 避免制作副本</a></li>
<li class="chapter" data-level="18.5" data-path="prog-prof.html"><a href="prog-prof.html#p-prof-mathfun"><i class="fa fa-check"></i><b>18.5</b> R的计算函数</a><ul>
<li class="chapter" data-level="18.5.1" data-path="prog-prof.html"><a href="prog-prof.html#p-prof-mathfun-math"><i class="fa fa-check"></i><b>18.5.1</b> 数学函数</a></li>
<li class="chapter" data-level="18.5.2" data-path="prog-prof.html"><a href="prog-prof.html#p-prof-mathfun-sum"><i class="fa fa-check"></i><b>18.5.2</b> 概括函数</a></li>
<li class="chapter" data-level="18.5.3" data-path="prog-prof.html"><a href="prog-prof.html#p-prof-mathfun-max"><i class="fa fa-check"></i><b>18.5.3</b> 最值</a></li>
<li class="chapter" data-level="18.5.4" data-path="prog-prof.html"><a href="prog-prof.html#p-prof-mathfun-sort"><i class="fa fa-check"></i><b>18.5.4</b> 排序</a></li>
<li class="chapter" data-level="18.5.5" data-path="prog-prof.html"><a href="prog-prof.html#p-prof-mathfun-integrate"><i class="fa fa-check"></i><b>18.5.5</b> 一元定积分<code>integrate</code></a></li>
<li class="chapter" data-level="18.5.6" data-path="prog-prof.html"><a href="prog-prof.html#p-prof-mathfun-uniroot"><i class="fa fa-check"></i><b>18.5.6</b> 一元函数求根<code>uniroot</code></a></li>
<li class="chapter" data-level="18.5.7" data-path="prog-prof.html"><a href="prog-prof.html#p-prof-mathfun-fft"><i class="fa fa-check"></i><b>18.5.7</b> 离散傅立叶变换<code>fft</code></a></li>
<li class="chapter" data-level="18.5.8" data-path="prog-prof.html"><a href="prog-prof.html#p-prof-mathfun-filter"><i class="fa fa-check"></i><b>18.5.8</b> 用<code>filter</code>函数作迭代</a></li>
</ul></li>
<li class="chapter" data-level="18.6" data-path="prog-prof.html"><a href="prog-prof.html#p-prof-mcpu"><i class="fa fa-check"></i><b>18.6</b> 并行计算</a><ul>
<li class="chapter" data-level="18.6.1" data-path="prog-prof.html"><a href="prog-prof.html#p-prof-mcpu-ex1"><i class="fa fa-check"></i><b>18.6.1</b> 例1：完全不互相依赖的并行运算</a></li>
<li class="chapter" data-level="18.6.2" data-path="prog-prof.html"><a href="prog-prof.html#p-prof-mcpu-ex2"><i class="fa fa-check"></i><b>18.6.2</b> 例2：使用相同随机数序列的并行计算</a></li>
<li class="chapter" data-level="18.6.3" data-path="prog-prof.html"><a href="prog-prof.html#p-prof-mcpu-ex3"><i class="fa fa-check"></i><b>18.6.3</b> 例3：使用独立随机数序列的并行计算</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="19" data-path="p-advfunc.html"><a href="p-advfunc.html"><i class="fa fa-check"></i><b>19</b> 函数进阶</a><ul>
<li class="chapter" data-level="19.1" data-path="p-advfunc.html"><a href="p-advfunc.html#p-advfunc-callspe"><i class="fa fa-check"></i><b>19.1</b> 函数调用的各种形式</a></li>
<li class="chapter" data-level="19.2" data-path="p-advfunc.html"><a href="p-advfunc.html#p-advfunc-lex"><i class="fa fa-check"></i><b>19.2</b> 嵌套定义与句法作用域(lexical scoping)</a></li>
<li class="chapter" data-level="19.3" data-path="p-advfunc.html"><a href="p-advfunc.html#p-advfunc-inner"><i class="fa fa-check"></i><b>19.3</b> 辅助嵌套函数</a></li>
<li class="chapter" data-level="19.4" data-path="p-advfunc.html"><a href="p-advfunc.html#p-advfunc-lazy"><i class="fa fa-check"></i><b>19.4</b> 懒惰求值</a></li>
<li class="chapter" data-level="19.5" data-path="p-advfunc.html"><a href="p-advfunc.html#p-advfunc-debug"><i class="fa fa-check"></i><b>19.5</b> 程序调试</a><ul>
<li class="chapter" data-level="19.5.1" data-path="p-advfunc.html"><a href="p-advfunc.html#p-advfunc-debug-intro"><i class="fa fa-check"></i><b>19.5.1</b> 基本调试策略</a></li>
<li class="chapter" data-level="19.5.2" data-path="p-advfunc.html"><a href="p-advfunc.html#p-advfunc-debug-findfunc"><i class="fa fa-check"></i><b>19.5.2</b> 找到出错的函数</a></li>
<li class="chapter" data-level="19.5.3" data-path="p-advfunc.html"><a href="p-advfunc.html#p-advfunc-debug-browser"><i class="fa fa-check"></i><b>19.5.3</b> 跟踪调试</a></li>
<li class="chapter" data-level="19.5.4" data-path="p-advfunc.html"><a href="p-advfunc.html#p-advfunc-debug-cond"><i class="fa fa-check"></i><b>19.5.4</b> 条件断点</a></li>
<li class="chapter" data-level="19.5.5" data-path="p-advfunc.html"><a href="p-advfunc.html#p-advfunc-debug-debugf"><i class="fa fa-check"></i><b>19.5.5</b> 开启对一个函数的调试</a></li>
<li class="chapter" data-level="19.5.6" data-path="p-advfunc.html"><a href="p-advfunc.html#p-advfunc-debug-opt"><i class="fa fa-check"></i><b>19.5.6</b> 出错调试选项</a></li>
<li class="chapter" data-level="19.5.7" data-path="p-advfunc.html"><a href="p-advfunc.html#p-advfunc-debug-stop"><i class="fa fa-check"></i><b>19.5.7</b> <code>stop()</code>、<code>warning()</code>、<code>message()</code></a></li>
<li class="chapter" data-level="19.5.8" data-path="p-advfunc.html"><a href="p-advfunc.html#p-advfunc-debug-preventive"><i class="fa fa-check"></i><b>19.5.8</b> 预防性设计</a></li>
<li class="chapter" data-level="19.5.9" data-path="p-advfunc.html"><a href="p-advfunc.html#p-advfunc-debug-try"><i class="fa fa-check"></i><b>19.5.9</b> 出错处理机制</a></li>
</ul></li>
<li class="chapter" data-level="19.6" data-path="p-advfunc.html"><a href="p-advfunc.html#p-advfunc-funcprog"><i class="fa fa-check"></i><b>19.6</b> 函数式编程介绍</a><ul>
<li class="chapter" data-level="19.6.1" data-path="p-advfunc.html"><a href="p-advfunc.html#p-advfunc-pure"><i class="fa fa-check"></i><b>19.6.1</b> 纯函数</a></li>
<li class="chapter" data-level="19.6.2" data-path="p-advfunc.html"><a href="p-advfunc.html#p-advfunc-rec"><i class="fa fa-check"></i><b>19.6.2</b> 副作用和运行环境恢复</a></li>
<li class="chapter" data-level="19.6.3" data-path="p-advfunc.html"><a href="p-advfunc.html#p-advfunc-rsupp"><i class="fa fa-check"></i><b>19.6.3</b> R的函数式编程功能</a></li>
</ul></li>
<li class="chapter" data-level="19.7" data-path="p-advfunc.html"><a href="p-advfunc.html#p-advfunc-functional"><i class="fa fa-check"></i><b>19.7</b> 泛函</a><ul>
<li class="chapter" data-level="19.7.1" data-path="p-advfunc.html"><a href="p-advfunc.html#p-advfunc-fnctnl-map"><i class="fa fa-check"></i><b>19.7.1</b> <code>purrr::map</code>函数</a></li>
<li class="chapter" data-level="19.7.2" data-path="p-advfunc.html"><a href="p-advfunc.html#p-advfunc-fnctnl-mapv"><i class="fa fa-check"></i><b>19.7.2</b> purrr包中<code>map</code>函数的变种</a></li>
<li class="chapter" data-level="19.7.3" data-path="p-advfunc.html"><a href="p-advfunc.html#p-advfunc-fnctnl-reduce"><i class="fa fa-check"></i><b>19.7.3</b> purrr包中<code>reduce</code>类函数</a></li>
<li class="chapter" data-level="19.7.4" data-path="p-advfunc.html"><a href="p-advfunc.html#p-advfunc-fnctnl-pred"><i class="fa fa-check"></i><b>19.7.4</b> purrr包中使用示性函数的泛函</a></li>
<li class="chapter" data-level="19.7.5" data-path="p-advfunc.html"><a href="p-advfunc.html#p-advfunc-fnctnl-lapp"><i class="fa fa-check"></i><b>19.7.5</b> 基本R的函数式编程支持</a></li>
<li class="chapter" data-level="19.7.6" data-path="p-advfunc.html"><a href="p-advfunc.html#p-advfunc-fnctnl-udef"><i class="fa fa-check"></i><b>19.7.6</b> 自定义泛函</a></li>
</ul></li>
<li class="chapter" data-level="19.8" data-path="p-advfunc.html"><a href="p-advfunc.html#p-advfunc-factory"><i class="fa fa-check"></i><b>19.8</b> 函数工厂</a><ul>
<li class="chapter" data-level="19.8.1" data-path="p-advfunc.html"><a href="p-advfunc.html#p-advfunc-factory-clex"><i class="fa fa-check"></i><b>19.8.1</b> 闭包例子</a></li>
<li class="chapter" data-level="19.8.2" data-path="p-advfunc.html"><a href="p-advfunc.html#p-advfunc-factory-lazy"><i class="fa fa-check"></i><b>19.8.2</b> 动态查找和懒惰求值引起的问题</a></li>
<li class="chapter" data-level="19.8.3" data-path="p-advfunc.html"><a href="p-advfunc.html#p-advfunc-factory-mem"><i class="fa fa-check"></i><b>19.8.3</b> 函数工厂的内存负担</a></li>
<li class="chapter" data-level="19.8.4" data-path="p-advfunc.html"><a href="p-advfunc.html#p-advfunc-operator"><i class="fa fa-check"></i><b>19.8.4</b> 函数算子</a></li>
</ul></li>
<li class="chapter" data-level="19.9" data-path="p-advfunc.html"><a href="p-advfunc.html#p-advfunc-env"><i class="fa fa-check"></i><b>19.9</b> 环境</a><ul>
<li class="chapter" data-level="19.9.1" data-path="p-advfunc.html"><a href="p-advfunc.html#p-advfunc-env-def"><i class="fa fa-check"></i><b>19.9.1</b> 基本概念</a></li>
<li class="chapter" data-level="19.9.2" data-path="p-advfunc.html"><a href="p-advfunc.html#p-advfunc-env-recurs"><i class="fa fa-check"></i><b>19.9.2</b> 逐层向上访问环境</a></li>
<li class="chapter" data-level="19.9.3" data-path="p-advfunc.html"><a href="p-advfunc.html#p-advfunc-env-spec"><i class="fa fa-check"></i><b>19.9.3</b> 特殊环境</a></li>
<li class="chapter" data-level="19.9.4" data-path="p-advfunc.html"><a href="p-advfunc.html#p-advfunc-env-callst"><i class="fa fa-check"></i><b>19.9.4</b> 调用栈</a></li>
<li class="chapter" data-level="19.9.5" data-path="p-advfunc.html"><a href="p-advfunc.html#p-advfunc-env-usedt"><i class="fa fa-check"></i><b>19.9.5</b> 将环境用作一般数据结构</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>IV 制作研究报告和图书</b></span></li>
<li class="chapter" data-level="20" data-path="knitr.html"><a href="knitr.html"><i class="fa fa-check"></i><b>20</b> 用R制作研究报告</a></li>
<li class="chapter" data-level="21" data-path="markdown.html"><a href="markdown.html"><i class="fa fa-check"></i><b>21</b> Markdown格式</a><ul>
<li class="chapter" data-level="21.1" data-path="markdown.html"><a href="markdown.html#markdown-intro"><i class="fa fa-check"></i><b>21.1</b> 介绍</a></li>
<li class="chapter" data-level="21.2" data-path="markdown.html"><a href="markdown.html#markdown-app"><i class="fa fa-check"></i><b>21.2</b> Markdown格式文件的应用</a></li>
<li class="chapter" data-level="21.3" data-path="markdown.html"><a href="markdown.html#markdown-format"><i class="fa fa-check"></i><b>21.3</b> markdown格式说明</a><ul>
<li class="chapter" data-level="21.3.1" data-path="markdown.html"><a href="markdown.html#markdown-format-intro"><i class="fa fa-check"></i><b>21.3.1</b> 概述</a></li>
<li class="chapter" data-level="21.3.2" data-path="markdown.html"><a href="markdown.html#markdown-format-paragraph"><i class="fa fa-check"></i><b>21.3.2</b> 段落</a></li>
<li class="chapter" data-level="21.3.3" data-path="markdown.html"><a href="markdown.html#markdown-format-inline"><i class="fa fa-check"></i><b>21.3.3</b> 段内文字格式</a></li>
<li class="chapter" data-level="21.3.4" data-path="markdown.html"><a href="markdown.html#markdown-format-header"><i class="fa fa-check"></i><b>21.3.4</b> 标题和分隔线</a></li>
<li class="chapter" data-level="21.3.5" data-path="markdown.html"><a href="markdown.html#markdown-format-cite"><i class="fa fa-check"></i><b>21.3.5</b> 引用段落</a></li>
<li class="chapter" data-level="21.3.6" data-path="markdown.html"><a href="markdown.html#markdown-format-list"><i class="fa fa-check"></i><b>21.3.6</b> 列表</a></li>
<li class="chapter" data-level="21.3.7" data-path="markdown.html"><a href="markdown.html#markdown-format-code"><i class="fa fa-check"></i><b>21.3.7</b> 源程序</a></li>
<li class="chapter" data-level="21.3.8" data-path="markdown.html"><a href="markdown.html#markdown-format-link"><i class="fa fa-check"></i><b>21.3.8</b> 链接</a></li>
<li class="chapter" data-level="21.3.9" data-path="markdown.html"><a href="markdown.html#markdown-format-fig"><i class="fa fa-check"></i><b>21.3.9</b> 插入图形</a></li>
<li class="chapter" data-level="21.3.10" data-path="markdown.html"><a href="markdown.html#markdown-format-table"><i class="fa fa-check"></i><b>21.3.10</b> 表格</a></li>
</ul></li>
<li class="chapter" data-level="21.4" data-path="markdown.html"><a href="markdown.html#markdown-pandoc"><i class="fa fa-check"></i><b>21.4</b> 附录：pandoc软件介绍</a></li>
</ul></li>
<li class="chapter" data-level="22" data-path="rmarkdown.html"><a href="rmarkdown.html"><i class="fa fa-check"></i><b>22</b> R Markdown文件格式</a><ul>
<li class="chapter" data-level="22.1" data-path="rmarkdown.html"><a href="rmarkdown.html#rmd-intro"><i class="fa fa-check"></i><b>22.1</b> R Markdown文件</a></li>
<li class="chapter" data-level="22.2" data-path="rmarkdown.html"><a href="rmarkdown.html#rmd-compile"><i class="fa fa-check"></i><b>22.2</b> R Markdown文件的编译</a><ul>
<li class="chapter" data-level="22.2.1" data-path="rmarkdown.html"><a href="rmarkdown.html#rmd-compile-proc"><i class="fa fa-check"></i><b>22.2.1</b> 编译的实际过程</a></li>
</ul></li>
<li class="chapter" data-level="22.3" data-path="rmarkdown.html"><a href="rmarkdown.html#rmd-rcode"><i class="fa fa-check"></i><b>22.3</b> 在R Markdown文件中插入R代码</a></li>
<li class="chapter" data-level="22.4" data-path="rmarkdown.html"><a href="rmarkdown.html#rmd-kable"><i class="fa fa-check"></i><b>22.4</b> 输出表格</a></li>
<li class="chapter" data-level="22.5" data-path="rmarkdown.html"><a href="rmarkdown.html#rmd-graph"><i class="fa fa-check"></i><b>22.5</b> 利用R程序插图</a></li>
<li class="chapter" data-level="22.6" data-path="rmarkdown.html"><a href="rmarkdown.html#rmd-rcode-opt"><i class="fa fa-check"></i><b>22.6</b> 代码段选项</a><ul>
<li class="chapter" data-level="22.6.1" data-path="rmarkdown.html"><a href="rmarkdown.html#rmd-rcode-outformat"><i class="fa fa-check"></i><b>22.6.1</b> 代码和文本输出结果格式</a></li>
<li class="chapter" data-level="22.6.2" data-path="rmarkdown.html"><a href="rmarkdown.html#rmd-rcode-figopt"><i class="fa fa-check"></i><b>22.6.2</b> 图形选项</a></li>
<li class="chapter" data-level="22.6.3" data-path="rmarkdown.html"><a href="rmarkdown.html#rmd-rcode-cache"><i class="fa fa-check"></i><b>22.6.3</b> 缓存(cache)选项</a></li>
</ul></li>
<li class="chapter" data-level="22.7" data-path="rmarkdown.html"><a href="rmarkdown.html#rmd--sectionlink"><i class="fa fa-check"></i><b>22.7</b> 章节目录链接问题</a></li>
<li class="chapter" data-level="22.8" data-path="rmarkdown.html"><a href="rmarkdown.html#markdown-formula"><i class="fa fa-check"></i><b>22.8</b> 数学公式</a><ul>
<li class="chapter" data-level="22.8.1" data-path="rmarkdown.html"><a href="rmarkdown.html#markdown-formula-intro"><i class="fa fa-check"></i><b>22.8.1</b> 在Markdown中输入数学公式</a></li>
<li class="chapter" data-level="22.8.2" data-path="rmarkdown.html"><a href="rmarkdown.html#markdown-formula-type"><i class="fa fa-check"></i><b>22.8.2</b> 数学公式类别</a></li>
<li class="chapter" data-level="22.8.3" data-path="rmarkdown.html"><a href="rmarkdown.html#markdown-formula-basic"><i class="fa fa-check"></i><b>22.8.3</b> 基本功能</a></li>
<li class="chapter" data-level="22.8.4" data-path="rmarkdown.html"><a href="rmarkdown.html#markdown-formula-accent"><i class="fa fa-check"></i><b>22.8.4</b> 修饰符</a></li>
<li class="chapter" data-level="22.8.5" data-path="rmarkdown.html"><a href="rmarkdown.html#markdown-formula-align"><i class="fa fa-check"></i><b>22.8.5</b> 对齐与矩阵</a></li>
<li class="chapter" data-level="22.8.6" data-path="rmarkdown.html"><a href="rmarkdown.html#markdown-formula-fonts"><i class="fa fa-check"></i><b>22.8.6</b> 特殊字体</a></li>
</ul></li>
<li class="chapter" data-level="22.9" data-path="rmarkdown.html"><a href="rmarkdown.html#rmd-engines"><i class="fa fa-check"></i><b>22.9</b> 其它编程语言引擎</a></li>
<li class="chapter" data-level="22.10" data-path="rmarkdown.html"><a href="rmarkdown.html#rmd-interact"><i class="fa fa-check"></i><b>22.10</b> 交互内容</a></li>
<li class="chapter" data-level="22.11" data-path="rmarkdown.html"><a href="rmarkdown.html#rmarkdown-attryaml"><i class="fa fa-check"></i><b>22.11</b> 属性设置</a><ul>
<li class="chapter" data-level="22.11.1" data-path="rmarkdown.html"><a href="rmarkdown.html#rmarkdown-yaml"><i class="fa fa-check"></i><b>22.11.1</b> YAML元数据</a></li>
<li class="chapter" data-level="22.11.2" data-path="rmarkdown.html"><a href="rmarkdown.html#rmd-output-types"><i class="fa fa-check"></i><b>22.11.2</b> 输出格式</a></li>
<li class="chapter" data-level="22.11.3" data-path="rmarkdown.html"><a href="rmarkdown.html#rmd-output-attr"><i class="fa fa-check"></i><b>22.11.3</b> 输出格式设置</a></li>
<li class="chapter" data-level="22.11.4" data-path="rmarkdown.html"><a href="rmarkdown.html#rmd-output-attr-toc"><i class="fa fa-check"></i><b>22.11.4</b> 目录设置</a></li>
<li class="chapter" data-level="22.11.5" data-path="rmarkdown.html"><a href="rmarkdown.html#rmd-output-attr-numsec"><i class="fa fa-check"></i><b>22.11.5</b> 章节自动编号</a></li>
<li class="chapter" data-level="22.11.6" data-path="rmarkdown.html"><a href="rmarkdown.html#rmd-output-attr-wordnumsec"><i class="fa fa-check"></i><b>22.11.6</b> Word输出章节自动编号及模板功能</a></li>
<li class="chapter" data-level="22.11.7" data-path="rmarkdown.html"><a href="rmarkdown.html#rmd-output-htmlspecific"><i class="fa fa-check"></i><b>22.11.7</b> HTML特有输出格式设置</a></li>
<li class="chapter" data-level="22.11.8" data-path="rmarkdown.html"><a href="rmarkdown.html#rmd-mathjax"><i class="fa fa-check"></i><b>22.11.8</b> 关于数学公式支持的设置</a></li>
<li class="chapter" data-level="22.11.9" data-path="rmarkdown.html"><a href="rmarkdown.html#rmd-output-yml"><i class="fa fa-check"></i><b>22.11.9</b> 输出设置文件</a></li>
</ul></li>
<li class="chapter" data-level="22.12" data-path="rmarkdown.html"><a href="rmarkdown.html#rmd-latex"><i class="fa fa-check"></i><b>22.12</b> LaTeX和PDF输出</a><ul>
<li class="chapter" data-level="22.12.1" data-path="rmarkdown.html"><a href="rmarkdown.html#rmd-latex-tinytex"><i class="fa fa-check"></i><b>22.12.1</b> TinyTex的安装使用</a></li>
<li class="chapter" data-level="22.12.2" data-path="rmarkdown.html"><a href="rmarkdown.html#rmd-latex-yaml"><i class="fa fa-check"></i><b>22.12.2</b> Rmd中Latex设置</a></li>
</ul></li>
<li class="chapter" data-level="22.13" data-path="rmarkdown.html"><a href="rmarkdown.html#rmarkdown-rticles"><i class="fa fa-check"></i><b>22.13</b> 生成期刊文章</a></li>
<li class="chapter" data-level="22.14" data-path="rmarkdown.html"><a href="rmarkdown.html#rmarkdown-app1"><i class="fa fa-check"></i><b>22.14</b> 附录：经验与问题</a><ul>
<li class="chapter" data-level="22.14.1" data-path="rmarkdown.html"><a href="rmarkdown.html#rmarkdown-app1-wordtemplate"><i class="fa fa-check"></i><b>22.14.1</b> Word模板制作</a></li>
<li class="chapter" data-level="22.14.2" data-path="rmarkdown.html"><a href="rmarkdown.html#rmarkdown-app1-math"><i class="fa fa-check"></i><b>22.14.2</b> 数学公式设置补充</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="23" data-path="bookdown.html"><a href="bookdown.html"><i class="fa fa-check"></i><b>23</b> 用bookdown制作图书</a><ul>
<li class="chapter" data-level="23.1" data-path="bookdown.html"><a href="bookdown.html#bookdown-intro"><i class="fa fa-check"></i><b>23.1</b> 介绍</a></li>
<li class="chapter" data-level="23.2" data-path="bookdown.html"><a href="bookdown.html#bookdown-settings"><i class="fa fa-check"></i><b>23.2</b> 一本书的设置</a></li>
<li class="chapter" data-level="23.3" data-path="bookdown.html"><a href="bookdown.html#bookdown-sectioning"><i class="fa fa-check"></i><b>23.3</b> 章节结构</a></li>
<li class="chapter" data-level="23.4" data-path="bookdown.html"><a href="bookdown.html#bookdown-compile"><i class="fa fa-check"></i><b>23.4</b> 书的编译</a></li>
<li class="chapter" data-level="23.5" data-path="bookdown.html"><a href="bookdown.html#bookdown-cref"><i class="fa fa-check"></i><b>23.5</b> 交叉引用</a></li>
<li class="chapter" data-level="23.6" data-path="bookdown.html"><a href="bookdown.html#bookdown-formula"><i class="fa fa-check"></i><b>23.6</b> 数学公式和公式编号</a></li>
<li class="chapter" data-level="23.7" data-path="bookdown.html"><a href="bookdown.html#bookdown-theorem"><i class="fa fa-check"></i><b>23.7</b> 定理类编号</a></li>
<li class="chapter" data-level="23.8" data-path="bookdown.html"><a href="bookdown.html#bookdown-bib"><i class="fa fa-check"></i><b>23.8</b> 文献引用</a></li>
<li class="chapter" data-level="23.9" data-path="bookdown.html"><a href="bookdown.html#bookdown-graph"><i class="fa fa-check"></i><b>23.9</b> 插图</a></li>
<li class="chapter" data-level="23.10" data-path="bookdown.html"><a href="bookdown.html#bookdown-table"><i class="fa fa-check"></i><b>23.10</b> 表格</a><ul>
<li class="chapter" data-level="23.10.1" data-path="bookdown.html"><a href="bookdown.html#bookdown-table-md"><i class="fa fa-check"></i><b>23.10.1</b> Markdown表格</a></li>
<li class="chapter" data-level="23.10.2" data-path="bookdown.html"><a href="bookdown.html#bookdown-table-kable"><i class="fa fa-check"></i><b>23.10.2</b> 用<code>kable()</code>函数制作表格</a></li>
<li class="chapter" data-level="23.10.3" data-path="bookdown.html"><a href="bookdown.html#bookdown-table-kable"><i class="fa fa-check"></i><b>23.10.3</b> R中其它制作表格的包</a></li>
</ul></li>
<li class="chapter" data-level="23.11" data-path="bookdown.html"><a href="bookdown.html#bookdown-mathjax"><i class="fa fa-check"></i><b>23.11</b> 数学公式的设置</a></li>
<li class="chapter" data-level="23.12" data-path="bookdown.html"><a href="bookdown.html#bookdown-exp"><i class="fa fa-check"></i><b>23.12</b> 使用经验</a></li>
<li class="chapter" data-level="23.13" data-path="bookdown.html"><a href="bookdown.html#bookdown-bugs"><i class="fa fa-check"></i><b>23.13</b> bookdown的一些使用问题</a></li>
</ul></li>
<li class="chapter" data-level="24" data-path="rmdsite.html"><a href="rmdsite.html"><i class="fa fa-check"></i><b>24</b> 用R Markdown制作简易网站</a><ul>
<li class="chapter" data-level="24.1" data-path="rmdsite.html"><a href="rmdsite.html#rmdsite-intro"><i class="fa fa-check"></i><b>24.1</b> 介绍</a></li>
<li class="chapter" data-level="24.2" data-path="rmdsite.html"><a href="rmdsite.html#rmdsite-rmarkdown"><i class="fa fa-check"></i><b>24.2</b> 简易网站制作</a><ul>
<li class="chapter" data-level="24.2.1" data-path="rmdsite.html"><a href="rmdsite.html#rmdsite-rmarkdown-struct"><i class="fa fa-check"></i><b>24.2.1</b> 网站结构</a></li>
<li class="chapter" data-level="24.2.2" data-path="rmdsite.html"><a href="rmdsite.html#rmdsite-rmarkdown-build"><i class="fa fa-check"></i><b>24.2.2</b> 编译</a></li>
<li class="chapter" data-level="24.2.3" data-path="rmdsite.html"><a href="rmdsite.html#rmdsite-rmarkdown-pages"><i class="fa fa-check"></i><b>24.2.3</b> 内容文件</a></li>
<li class="chapter" data-level="24.2.4" data-path="rmdsite.html"><a href="rmdsite.html#rmdsite-rmarkdown-config"><i class="fa fa-check"></i><b>24.2.4</b> 网站设置</a></li>
</ul></li>
<li class="chapter" data-level="24.3" data-path="rmdsite.html"><a href="rmdsite.html#blogdown"><i class="fa fa-check"></i><b>24.3</b> 用blogdown制作网站</a><ul>
<li class="chapter" data-level="24.3.1" data-path="rmdsite.html"><a href="rmdsite.html#blogd-new"><i class="fa fa-check"></i><b>24.3.1</b> 生成新网站的框架</a></li>
<li class="chapter" data-level="24.3.2" data-path="rmdsite.html"><a href="rmdsite.html#blogd-page"><i class="fa fa-check"></i><b>24.3.2</b> 网页内容文件及其设置</a></li>
<li class="chapter" data-level="24.3.3" data-path="rmdsite.html"><a href="rmdsite.html#blogd-workflow"><i class="fa fa-check"></i><b>24.3.3</b> 初学者的工作流程</a></li>
<li class="chapter" data-level="24.3.4" data-path="rmdsite.html"><a href="rmdsite.html#blogd-config"><i class="fa fa-check"></i><b>24.3.4</b> 网站设置文件</a></li>
<li class="chapter" data-level="24.3.5" data-path="rmdsite.html"><a href="rmdsite.html#blogd-static"><i class="fa fa-check"></i><b>24.3.5</b> 静态文件</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="25" data-path="slides.html"><a href="slides.html"><i class="fa fa-check"></i><b>25</b> 制作幻灯片</a><ul>
<li class="chapter" data-level="25.1" data-path="slides.html"><a href="slides.html#rmd-slides-intro"><i class="fa fa-check"></i><b>25.1</b> 介绍</a></li>
<li class="chapter" data-level="25.2" data-path="slides.html"><a href="slides.html#rmd-slidy"><i class="fa fa-check"></i><b>25.2</b> Slidy幻灯片</a><ul>
<li class="chapter" data-level="25.2.1" data-path="slides.html"><a href="slides.html#rmd-slidy-format"><i class="fa fa-check"></i><b>25.2.1</b> 文件格式</a></li>
<li class="chapter" data-level="25.2.2" data-path="slides.html"><a href="slides.html#rmd-slidy-compile"><i class="fa fa-check"></i><b>25.2.2</b> 幻灯片编译</a></li>
<li class="chapter" data-level="25.2.3" data-path="slides.html"><a href="slides.html#rmd-slidy-play"><i class="fa fa-check"></i><b>25.2.3</b> 播放控制</a></li>
<li class="chapter" data-level="25.2.4" data-path="slides.html"><a href="slides.html#rmd-slidy-handout"><i class="fa fa-check"></i><b>25.2.4</b> 生成单页HTML</a></li>
<li class="chapter" data-level="25.2.5" data-path="slides.html"><a href="slides.html#rmd-slidy-mathjax"><i class="fa fa-check"></i><b>25.2.5</b> 数学公式处理与输出设置文件</a></li>
<li class="chapter" data-level="25.2.6" data-path="slides.html"><a href="slides.html#rmd-slidy-options"><i class="fa fa-check"></i><b>25.2.6</b> 其它选项</a></li>
<li class="chapter" data-level="25.2.7" data-path="slides.html"><a href="slides.html#rmd-slidy-laser"><i class="fa fa-check"></i><b>25.2.7</b> slidy幻灯片激光笔失效问题的修改</a></li>
</ul></li>
<li class="chapter" data-level="25.3" data-path="slides.html"><a href="slides.html#rmdslides-pp"><i class="fa fa-check"></i><b>25.3</b> MS PowerPoint幻灯片</a></li>
<li class="chapter" data-level="25.4" data-path="slides.html"><a href="slides.html#rmdslides-beamer"><i class="fa fa-check"></i><b>25.4</b> Bearmer幻灯片格式</a></li>
<li class="chapter" data-level="25.5" data-path="slides.html"><a href="slides.html#rmdslides-rpres"><i class="fa fa-check"></i><b>25.5</b> R Presentation格式</a></li>
</ul></li>
<li class="part"><span><b>V 数据整理与汇总</b></span></li>
<li class="chapter" data-level="26" data-path="summary-manip.html"><a href="summary-manip.html"><i class="fa fa-check"></i><b>26</b> 数据整理</a><ul>
<li class="chapter" data-level="26.1" data-path="summary-manip.html"><a href="summary-manip.html#summm-tidyv"><i class="fa fa-check"></i><b>26.1</b> tidyverse系统</a></li>
<li class="chapter" data-level="26.2" data-path="summary-manip.html"><a href="summary-manip.html#dplyr-filter"><i class="fa fa-check"></i><b>26.2</b> 用<code>filter()</code>选择行子集</a></li>
<li class="chapter" data-level="26.3" data-path="summary-manip.html"><a href="summary-manip.html#dplyr-head"><i class="fa fa-check"></i><b>26.3</b> 按行序号选择行子集</a></li>
<li class="chapter" data-level="26.4" data-path="summary-manip.html"><a href="summary-manip.html#dplyr-samplen"><i class="fa fa-check"></i><b>26.4</b> 用<code>sample_n()</code>对观测随机抽样</a></li>
<li class="chapter" data-level="26.5" data-path="summary-manip.html"><a href="summary-manip.html#dplyr-distinct"><i class="fa fa-check"></i><b>26.5</b> 用<code>distinct()</code>去除重复行</a></li>
<li class="chapter" data-level="26.6" data-path="summary-manip.html"><a href="summary-manip.html#tidyr-dropna"><i class="fa fa-check"></i><b>26.6</b> 用<code>drop_na()</code>去除指定的变量有缺失值的行</a></li>
<li class="chapter" data-level="26.7" data-path="summary-manip.html"><a href="summary-manip.html#dplyr-select"><i class="fa fa-check"></i><b>26.7</b> 用<code>select()</code>选择列子集</a></li>
<li class="chapter" data-level="26.8" data-path="summary-manip.html"><a href="summary-manip.html#dplyr-pull"><i class="fa fa-check"></i><b>26.8</b> 取出单个变量为向量</a></li>
<li class="chapter" data-level="26.9" data-path="summary-manip.html"><a href="summary-manip.html#dplyr-arrange"><i class="fa fa-check"></i><b>26.9</b> 用<code>arrange()</code>排序</a></li>
<li class="chapter" data-level="26.10" data-path="summary-manip.html"><a href="summary-manip.html#dplyr-rename"><i class="fa fa-check"></i><b>26.10</b> 用<code>rename()</code>修改变量名</a></li>
<li class="chapter" data-level="26.11" data-path="summary-manip.html"><a href="summary-manip.html#dplyr-mutate"><i class="fa fa-check"></i><b>26.11</b> 用<code>mutate()</code>计算新变量</a></li>
<li class="chapter" data-level="26.12" data-path="summary-manip.html"><a href="summary-manip.html#dplyr-transmute"><i class="fa fa-check"></i><b>26.12</b> 用<code>tranmute()</code>生成新变量的数据框</a></li>
<li class="chapter" data-level="26.13" data-path="summary-manip.html"><a href="summary-manip.html#dplyr-pipe"><i class="fa fa-check"></i><b>26.13</b> 用管道连接多次操作</a></li>
<li class="chapter" data-level="26.14" data-path="summary-manip.html"><a href="summary-manip.html#tidyr-longer"><i class="fa fa-check"></i><b>26.14</b> 宽表转换为长表</a><ul>
<li class="chapter" data-level="26.14.1" data-path="summary-manip.html"><a href="summary-manip.html#tidyr-longer-pl"><i class="fa fa-check"></i><b>26.14.1</b> <code>pivot_longer</code>函数</a></li>
<li class="chapter" data-level="26.14.2" data-path="summary-manip.html"><a href="summary-manip.html#tidyr-longer-prefixvalue"><i class="fa fa-check"></i><b>26.14.2</b> 从列名中提取数值</a></li>
<li class="chapter" data-level="26.14.3" data-path="summary-manip.html"><a href="summary-manip.html#tidyr-longer-colnamemultclassv"><i class="fa fa-check"></i><b>26.14.3</b> 从列名中提取多个分类变量值</a></li>
<li class="chapter" data-level="26.14.4" data-path="summary-manip.html"><a href="summary-manip.html#tidyr-longer-multvarsmultclassv"><i class="fa fa-check"></i><b>26.14.4</b> 一行中有多个属性的多次观测的情形</a></li>
</ul></li>
<li class="chapter" data-level="26.15" data-path="summary-manip.html"><a href="summary-manip.html#dplyr-wider"><i class="fa fa-check"></i><b>26.15</b> 长表转换为宽表</a><ul>
<li class="chapter" data-level="26.15.1" data-path="summary-manip.html"><a href="summary-manip.html#dplyr-wider-sepvars"><i class="fa fa-check"></i><b>26.15.1</b> 将多个混在一起的变量拆开</a></li>
<li class="chapter" data-level="26.15.2" data-path="summary-manip.html"><a href="summary-manip.html#dplyr-wider-combtimes"><i class="fa fa-check"></i><b>26.15.2</b> 将多个类别合并到一个观测</a></li>
<li class="chapter" data-level="26.15.3" data-path="summary-manip.html"><a href="summary-manip.html#dplyr-wider-combcross"><i class="fa fa-check"></i><b>26.15.3</b> 将交叉类别合并到一个观测</a></li>
<li class="chapter" data-level="26.15.4" data-path="summary-manip.html"><a href="summary-manip.html#dplyr-wider-mvmest"><i class="fa fa-check"></i><b>26.15.4</b> 多个变量的多种值</a></li>
<li class="chapter" data-level="26.15.5" data-path="summary-manip.html"><a href="summary-manip.html#dplyr-wider-mixed"><i class="fa fa-check"></i><b>26.15.5</b> 长宽转换混合使用</a></li>
</ul></li>
<li class="chapter" data-level="26.16" data-path="summary-manip.html"><a href="summary-manip.html#dplyr-spearate"><i class="fa fa-check"></i><b>26.16</b> 拆分数据列</a></li>
<li class="chapter" data-level="26.17" data-path="summary-manip.html"><a href="summary-manip.html#dplyr-unite"><i class="fa fa-check"></i><b>26.17</b> 合并数据列</a></li>
<li class="chapter" data-level="26.18" data-path="summary-manip.html"><a href="summary-manip.html#summ-trans-combv"><i class="fa fa-check"></i><b>26.18</b> 数据框纵向合并</a></li>
<li class="chapter" data-level="26.19" data-path="summary-manip.html"><a href="summary-manip.html#dplyr-join"><i class="fa fa-check"></i><b>26.19</b> 横向合并</a></li>
<li class="chapter" data-level="26.20" data-path="summary-manip.html"><a href="summary-manip.html#dplyr-semi"><i class="fa fa-check"></i><b>26.20</b> 利用第二个数据集筛选</a></li>
<li class="chapter" data-level="26.21" data-path="summary-manip.html"><a href="summary-manip.html#dplyr-set"><i class="fa fa-check"></i><b>26.21</b> 数据集的集合操作</a></li>
<li class="chapter" data-level="26.22" data-path="summary-manip.html"><a href="summary-manip.html#summ-trans-standard"><i class="fa fa-check"></i><b>26.22</b> 标准化</a></li>
</ul></li>
<li class="chapter" data-level="27" data-path="summary-summ.html"><a href="summary-summ.html"><i class="fa fa-check"></i><b>27</b> 数据汇总</a><ul>
<li class="chapter" data-level="27.1" data-path="summary-summ.html"><a href="summary-summ.html#dplyr-summ"><i class="fa fa-check"></i><b>27.1</b> 用dplyr作数据汇总</a></li>
<li class="chapter" data-level="27.2" data-path="summary-summ.html"><a href="summary-summ.html#dplyr-summat"><i class="fa fa-check"></i><b>27.2</b> 多个变量的汇总</a></li>
<li class="chapter" data-level="27.3" data-path="summary-summ.html"><a href="summary-summ.html#dplyr-groupby"><i class="fa fa-check"></i><b>27.3</b> 用dplyr作数据分组汇总</a></li>
<li class="chapter" data-level="27.4" data-path="summary-summ.html"><a href="summary-summ.html#dplyr-crossgroup"><i class="fa fa-check"></i><b>27.4</b> 交叉分类的汇总</a></li>
<li class="chapter" data-level="27.5" data-path="summary-summ.html"><a href="summary-summ.html#summ-nest"><i class="fa fa-check"></i><b>27.5</b> tibble中的列表列</a><ul>
<li class="chapter" data-level="27.5.1" data-path="summary-summ.html"><a href="summary-summ.html#summ-nest-intro"><i class="fa fa-check"></i><b>27.5.1</b> <code>nest</code>和<code>unnest</code></a></li>
<li class="chapter" data-level="27.5.2" data-path="summary-summ.html"><a href="summary-summ.html#summ-nest-groupby"><i class="fa fa-check"></i><b>27.5.2</b> <code>group_by</code>与<code>nest</code>配合</a></li>
<li class="chapter" data-level="27.5.3" data-path="summary-summ.html"><a href="summary-summ.html#summ-nest-summarise"><i class="fa fa-check"></i><b>27.5.3</b> <code>summarise</code>统计量用列表表示</a></li>
<li class="chapter" data-level="27.5.4" data-path="summary-summ.html"><a href="summary-summ.html#summ-nest-unnest-grammar"><i class="fa fa-check"></i><b>27.5.4</b> <code>unnest</code>的语法格式</a></li>
<li class="chapter" data-level="27.5.5" data-path="summary-summ.html"><a href="summary-summ.html#summ-nest-direct"><i class="fa fa-check"></i><b>27.5.5</b> 直接生成列表类型的列</a></li>
</ul></li>
<li class="chapter" data-level="27.6" data-path="summary-summ.html"><a href="summary-summ.html#summ-base"><i class="fa fa-check"></i><b>27.6</b> 基本R的汇总功能</a><ul>
<li class="chapter" data-level="27.6.1" data-path="summary-summ.html"><a href="summary-summ.html#summ-base-summary"><i class="fa fa-check"></i><b>27.6.1</b> <code>summary()</code>函数</a></li>
<li class="chapter" data-level="27.6.2" data-path="summary-summ.html"><a href="summary-summ.html#summ-cont"><i class="fa fa-check"></i><b>27.6.2</b> 连续型变量概括函数</a></li>
<li class="chapter" data-level="27.6.3" data-path="summary-summ.html"><a href="summary-summ.html#summ-fact"><i class="fa fa-check"></i><b>27.6.3</b> 分类变量概括</a></li>
<li class="chapter" data-level="27.6.4" data-path="summary-summ.html"><a href="summary-summ.html#summ-df"><i class="fa fa-check"></i><b>27.6.4</b> 数据框概括</a></li>
</ul></li>
<li class="chapter" data-level="27.7" data-path="summary-summ.html"><a href="summary-summ.html#summ-by"><i class="fa fa-check"></i><b>27.7</b> 用基本R作分类概括</a><ul>
<li class="chapter" data-level="27.7.1" data-path="summary-summ.html"><a href="summary-summ.html#summ-by-tapply"><i class="fa fa-check"></i><b>27.7.1</b> 用<code>tapply()</code>分组概括向量</a></li>
<li class="chapter" data-level="27.7.2" data-path="summary-summ.html"><a href="summary-summ.html#summ-by-aggregate"><i class="fa fa-check"></i><b>27.7.2</b> 用<code>aggregate()</code>分组概括数据框</a></li>
<li class="chapter" data-level="27.7.3" data-path="summary-summ.html"><a href="summary-summ.html#summ-by-split"><i class="fa fa-check"></i><b>27.7.3</b> 用<code>split()</code>函数分组后概括</a></li>
</ul></li>
<li class="chapter" data-level="27.8" data-path="summary-summ.html"><a href="summary-summ.html#summ-by-plyr"><i class="fa fa-check"></i><b>27.8</b> 用plyr包进行分类概括</a></li>
<li class="chapter" data-level="27.9" data-path="summary-summ.html"><a href="summary-summ.html#summ-by-exer"><i class="fa fa-check"></i><b>27.9</b> 练习</a></li>
</ul></li>
<li class="part"><span><b>VI 绘图</b></span></li>
<li class="chapter" data-level="28" data-path="graph.html"><a href="graph.html"><i class="fa fa-check"></i><b>28</b> 基本R绘图</a><ul>
<li class="chapter" data-level="28.1" data-path="graph.html"><a href="graph.html#graph-ph"><i class="fa fa-check"></i><b>28.1</b> 常用高级图形</a><ul>
<li class="chapter" data-level="28.1.1" data-path="graph.html"><a href="graph.html#graph-ph-barplot"><i class="fa fa-check"></i><b>28.1.1</b> 条形图</a></li>
<li class="chapter" data-level="28.1.2" data-path="graph.html"><a href="graph.html#graph-ph-hist"><i class="fa fa-check"></i><b>28.1.2</b> 直方图和密度估计图</a></li>
<li class="chapter" data-level="28.1.3" data-path="graph.html"><a href="graph.html#graph-ph-boxplot"><i class="fa fa-check"></i><b>28.1.3</b> 盒形图</a></li>
<li class="chapter" data-level="28.1.4" data-path="graph.html"><a href="graph.html#graph-pr-qq"><i class="fa fa-check"></i><b>28.1.4</b> 正态QQ图</a></li>
<li class="chapter" data-level="28.1.5" data-path="graph.html"><a href="graph.html#graph-ph-plot"><i class="fa fa-check"></i><b>28.1.5</b> 散点图</a></li>
<li class="chapter" data-level="28.1.6" data-path="graph.html"><a href="graph.html#graph-ph-curve"><i class="fa fa-check"></i><b>28.1.6</b> 曲线图</a></li>
<li class="chapter" data-level="28.1.7" data-path="graph.html"><a href="graph.html#graph-ph-3d"><i class="fa fa-check"></i><b>28.1.7</b> 三维图</a></li>
<li class="chapter" data-level="28.1.8" data-path="graph.html"><a href="graph.html#graph-ph-rgl"><i class="fa fa-check"></i><b>28.1.8</b> 动态三维图</a></li>
</ul></li>
<li class="chapter" data-level="28.2" data-path="graph.html"><a href="graph.html#graph-pl"><i class="fa fa-check"></i><b>28.2</b> 低级图形函数</a><ul>
<li class="chapter" data-level="28.2.1" data-path="graph.html"><a href="graph.html#graph-pl-abline"><i class="fa fa-check"></i><b>28.2.1</b> <code>abline()</code></a></li>
<li class="chapter" data-level="28.2.2" data-path="graph.html"><a href="graph.html#graph-pl-points"><i class="fa fa-check"></i><b>28.2.2</b> <code>points()</code></a></li>
<li class="chapter" data-level="28.2.3" data-path="graph.html"><a href="graph.html#graph-pl-lines"><i class="fa fa-check"></i><b>28.2.3</b> <code>lines()</code></a></li>
<li class="chapter" data-level="28.2.4" data-path="graph.html"><a href="graph.html#graph-pl-legend"><i class="fa fa-check"></i><b>28.2.4</b> 图例</a></li>
<li class="chapter" data-level="28.2.5" data-path="graph.html"><a href="graph.html#graph-pl-axis"><i class="fa fa-check"></i><b>28.2.5</b> <code>axis()</code></a></li>
<li class="chapter" data-level="28.2.6" data-path="graph.html"><a href="graph.html#graph-pl-text"><i class="fa fa-check"></i><b>28.2.6</b> <code>text()</code></a></li>
<li class="chapter" data-level="28.2.7" data-path="graph.html"><a href="graph.html#graph-pl-locator"><i class="fa fa-check"></i><b>28.2.7</b> <code>locator()</code>和<code>identify()</code></a></li>
</ul></li>
<li class="chapter" data-level="28.3" data-path="graph.html"><a href="graph.html#graph-par"><i class="fa fa-check"></i><b>28.3</b> 图形参数</a><ul>
<li class="chapter" data-level="28.3.1" data-path="graph.html"><a href="graph.html#graph-par-ex1"><i class="fa fa-check"></i><b>28.3.1</b> 例子：用图形参数解决barplot图形横坐标值过宽</a></li>
<li class="chapter" data-level="28.3.2" data-path="graph.html"><a href="graph.html#graph-par-elem"><i class="fa fa-check"></i><b>28.3.2</b> 图形元素控制</a></li>
<li class="chapter" data-level="28.3.3" data-path="graph.html"><a href="graph.html#graph-par-axis"><i class="fa fa-check"></i><b>28.3.3</b> 坐标轴与坐标刻度</a></li>
<li class="chapter" data-level="28.3.4" data-path="graph.html"><a href="graph.html#graph-par-mar"><i class="fa fa-check"></i><b>28.3.4</b> 图形边空</a></li>
<li class="chapter" data-level="28.3.5" data-path="graph.html"><a href="graph.html#graph-par-mfrow"><i class="fa fa-check"></i><b>28.3.5</b> 一页多图</a></li>
</ul></li>
<li class="chapter" data-level="28.4" data-path="graph.html"><a href="graph.html#graph-pout"><i class="fa fa-check"></i><b>28.4</b> 图形输出</a><ul>
<li class="chapter" data-level="28.4.1" data-path="graph.html"><a href="graph.html#graph-pout-pdf"><i class="fa fa-check"></i><b>28.4.1</b> PDF 输出</a></li>
<li class="chapter" data-level="28.4.2" data-path="graph.html"><a href="graph.html#graph-pout-png"><i class="fa fa-check"></i><b>28.4.2</b> PNG输出</a></li>
</ul></li>
<li class="chapter" data-level="28.5" data-path="graph.html"><a href="graph.html#graph-pzhn"><i class="fa fa-check"></i><b>28.5</b> 包含多种中文字体的图形</a></li>
<li class="chapter" data-level="28.6" data-path="graph.html"><a href="graph.html#graph-other"><i class="fa fa-check"></i><b>28.6</b> 其它图形</a><ul>
<li class="chapter" data-level="28.6.1" data-path="graph.html"><a href="graph.html#graph-other-corr"><i class="fa fa-check"></i><b>28.6.1</b> 相关系数图</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="29" data-path="ggplot2.html"><a href="ggplot2.html"><i class="fa fa-check"></i><b>29</b> ggplot作图入门</a><ul>
<li class="chapter" data-level="29.1" data-path="ggplot2.html"><a href="ggplot2.html#ggplot2-intro"><i class="fa fa-check"></i><b>29.1</b> 介绍</a></li>
<li class="chapter" data-level="29.2" data-path="ggplot2.html"><a href="ggplot2.html#ggplot2-principles"><i class="fa fa-check"></i><b>29.2</b> 作图的一般原则</a></li>
<li class="chapter" data-level="29.3" data-path="ggplot2.html"><a href="ggplot2.html#ggplot2-point"><i class="fa fa-check"></i><b>29.3</b> 散点图：ggplot入门</a><ul>
<li class="chapter" data-level="29.3.1" data-path="ggplot2.html"><a href="ggplot2.html#ggplot2-point-base"><i class="fa fa-check"></i><b>29.3.1</b> 基本的散点图</a></li>
<li class="chapter" data-level="29.3.2" data-path="ggplot2.html"><a href="ggplot2.html#ggplot2-point-layers"><i class="fa fa-check"></i><b>29.3.2</b> 逐步改善</a></li>
<li class="chapter" data-level="29.3.3" data-path="ggplot2.html"><a href="ggplot2.html#ggplot2-point-otheraes"><i class="fa fa-check"></i><b>29.3.3</b> 颜色、符号、线型等映射</a></li>
<li class="chapter" data-level="29.3.4" data-path="ggplot2.html"><a href="ggplot2.html#ggplot2-point-geomaes"><i class="fa fa-check"></i><b>29.3.4</b> 在geom函数中映射变量</a></li>
<li class="chapter" data-level="29.3.5" data-path="ggplot2.html"><a href="ggplot2.html#ggplot2-point-contcolor"><i class="fa fa-check"></i><b>29.3.5</b> 连续变量的颜色映射</a></li>
<li class="chapter" data-level="29.3.6" data-path="ggplot2.html"><a href="ggplot2.html#ggplot2-point-save"><i class="fa fa-check"></i><b>29.3.6</b> 保存图像</a></li>
</ul></li>
<li class="chapter" data-level="29.4" data-path="ggplot2.html"><a href="ggplot2.html#ggplot2-right"><i class="fa fa-check"></i><b>29.4</b> 折线图、分组、小图</a><ul>
<li class="chapter" data-level="29.4.1" data-path="ggplot2.html"><a href="ggplot2.html#ggplot2-right-group"><i class="fa fa-check"></i><b>29.4.1</b> 图形中的分组和折线图</a></li>
<li class="chapter" data-level="29.4.2" data-path="ggplot2.html"><a href="ggplot2.html#ggplot2-right-facet"><i class="fa fa-check"></i><b>29.4.2</b> 小图(facet)</a></li>
</ul></li>
<li class="chapter" data-level="29.5" data-path="ggplot2.html"><a href="ggplot2.html#ggplot2-bar-trans"><i class="fa fa-check"></i><b>29.5</b> 数据变换与条形图</a><ul>
<li class="chapter" data-level="29.5.1" data-path="ggplot2.html"><a href="ggplot2.html#ggplot2-right-morebar"><i class="fa fa-check"></i><b>29.5.1</b> 分段与并列条形图</a></li>
<li class="chapter" data-level="29.5.2" data-path="ggplot2.html"><a href="ggplot2.html#ggplot2-bar-morebar"><i class="fa fa-check"></i><b>29.5.2</b> 条形图的其它应用</a></li>
</ul></li>
<li class="chapter" data-level="29.6" data-path="ggplot2.html"><a href="ggplot2.html#ggplot2-hist"><i class="fa fa-check"></i><b>29.6</b> 直方图与密度估计</a></li>
<li class="chapter" data-level="29.7" data-path="ggplot2.html"><a href="ggplot2.html#ggplot2-gramm"><i class="fa fa-check"></i><b>29.7</b> 绘图语法介绍</a><ul>
<li class="chapter" data-level="29.7.1" data-path="ggplot2.html"><a href="ggplot2.html#ggplot2-gramm-gramm"><i class="fa fa-check"></i><b>29.7.1</b> 绘图语法</a></li>
<li class="chapter" data-level="29.7.2" data-path="ggplot2.html"><a href="ggplot2.html#ggplot2-gramm-geoms"><i class="fa fa-check"></i><b>29.7.2</b> 图形种类</a></li>
</ul></li>
<li class="chapter" data-level="29.8" data-path="ggplot2.html"><a href="ggplot2.html#ggplot2-moregeom"><i class="fa fa-check"></i><b>29.8</b> 更多图形种类</a><ul>
<li class="chapter" data-level="29.8.1" data-path="ggplot2.html"><a href="ggplot2.html#ggplot2-moregeom-continuousvar"><i class="fa fa-check"></i><b>29.8.1</b> 连续变量的分组图形</a></li>
<li class="chapter" data-level="29.8.2" data-path="ggplot2.html"><a href="ggplot2.html#ggplot2-moregeom-text"><i class="fa fa-check"></i><b>29.8.2</b> 坐标系中的文字</a></li>
<li class="chapter" data-level="29.8.3" data-path="ggplot2.html"><a href="ggplot2.html#ggplot2-moregeom-textops"><i class="fa fa-check"></i><b>29.8.3</b> 文字选项</a></li>
<li class="chapter" data-level="29.8.4" data-path="ggplot2.html"><a href="ggplot2.html#ggplot2-moregeom-outliers"><i class="fa fa-check"></i><b>29.8.4</b> 标出特殊点</a></li>
</ul></li>
<li class="chapter" data-level="29.9" data-path="ggplot2.html"><a href="ggplot2.html#ggplot2-auxfuncs-scale"><i class="fa fa-check"></i><b>29.9</b> 刻度(scale)</a></li>
<li class="chapter" data-level="29.10" data-path="ggplot2.html"><a href="ggplot2.html#ggplot2-refine-color"><i class="fa fa-check"></i><b>29.10</b> 如何使用颜色</a><ul>
<li class="chapter" data-level="29.10.1" data-path="ggplot2.html"><a href="ggplot2.html#ggplot2-refine-qual"><i class="fa fa-check"></i><b>29.10.1</b> 名义型变量的颜色</a></li>
<li class="chapter" data-level="29.10.2" data-path="ggplot2.html"><a href="ggplot2.html#ggplot2-refine-tile"><i class="fa fa-check"></i><b>29.10.2</b> 色块图</a></li>
<li class="chapter" data-level="29.10.3" data-path="ggplot2.html"><a href="ggplot2.html#ggplot2-refine-seq"><i class="fa fa-check"></i><b>29.10.3</b> 有序型变量的颜色</a></li>
<li class="chapter" data-level="29.10.4" data-path="ggplot2.html"><a href="ggplot2.html#ggplot2-refine-div"><i class="fa fa-check"></i><b>29.10.4</b> 相异型变量的颜色</a></li>
<li class="chapter" data-level="29.10.5" data-path="ggplot2.html"><a href="ggplot2.html#ggplot2-refine-num"><i class="fa fa-check"></i><b>29.10.5</b> 连续数值变量的颜色</a></li>
</ul></li>
<li class="chapter" data-level="29.11" data-path="ggplot2.html"><a href="ggplot2.html#ggplot2-auxfuncs"><i class="fa fa-check"></i><b>29.11</b> 标题、标注、指南、拼接</a><ul>
<li class="chapter" data-level="29.11.1" data-path="ggplot2.html"><a href="ggplot2.html#ggplot2-auxfuncs-labs"><i class="fa fa-check"></i><b>29.11.1</b> 标题</a></li>
<li class="chapter" data-level="29.11.2" data-path="ggplot2.html"><a href="ggplot2.html#ggplot2-auxfuncs-anno"><i class="fa fa-check"></i><b>29.11.2</b> 标注功能</a></li>
<li class="chapter" data-level="29.11.3" data-path="ggplot2.html"><a href="ggplot2.html#ggplot2-auxfuncs-guides"><i class="fa fa-check"></i><b>29.11.3</b> 指南(guides)</a></li>
<li class="chapter" data-level="29.11.4" data-path="ggplot2.html"><a href="ggplot2.html#ggplot2-auxfuncs-compfig"><i class="fa fa-check"></i><b>29.11.4</b> 拼接图形</a></li>
</ul></li>
<li class="chapter" data-level="29.12" data-path="ggplot2.html"><a href="ggplot2.html#ggplot2-refine"><i class="fa fa-check"></i><b>29.12</b> 图形定制调整</a><ul>
<li class="chapter" data-level="29.12.1" data-path="ggplot2.html"><a href="ggplot2.html#ggplot2-refine-asasec"><i class="fa fa-check"></i><b>29.12.1</b> 图形逐步调整例子</a></li>
</ul></li>
<li class="chapter" data-level="29.13" data-path="ggplot2.html"><a href="ggplot2.html#ggplot2-theme"><i class="fa fa-check"></i><b>29.13</b> 主题</a></li>
<li class="chapter" data-level="29.14" data-path="ggplot2.html"><a href="ggplot2.html#ggplot2-ref"><i class="fa fa-check"></i><b>29.14</b> 参考文献</a></li>
</ul></li>
<li class="chapter" data-level="30" data-path="ggplotvis.html"><a href="ggplotvis.html"><i class="fa fa-check"></i><b>30</b> ggplot的各种图形</a><ul>
<li class="chapter" data-level="30.1" data-path="ggplotvis.html"><a href="ggplotvis.html#ggplotvis-intro"><i class="fa fa-check"></i><b>30.1</b> 介绍</a></li>
<li class="chapter" data-level="30.2" data-path="ggplotvis.html"><a href="ggplotvis.html#ggplotvis-amount"><i class="fa fa-check"></i><b>30.2</b> 表现数量</a><ul>
<li class="chapter" data-level="30.2.1" data-path="ggplotvis.html"><a href="ggplotvis.html#ggplotvis-amount-bar"><i class="fa fa-check"></i><b>30.2.1</b> 条形图</a></li>
<li class="chapter" data-level="30.2.2" data-path="ggplotvis.html"><a href="ggplotvis.html#ggplotvis-amount-point"><i class="fa fa-check"></i><b>30.2.2</b> 点图</a></li>
<li class="chapter" data-level="30.2.3" data-path="ggplotvis.html"><a href="ggplotvis.html#ggplotvis-amount-heatmap"><i class="fa fa-check"></i><b>30.2.3</b> 热力图</a></li>
</ul></li>
<li class="chapter" data-level="30.3" data-path="ggplotvis.html"><a href="ggplotvis.html#ggplotvis-dist"><i class="fa fa-check"></i><b>30.3</b> 表现分布</a><ul>
<li class="chapter" data-level="30.3.1" data-path="ggplotvis.html"><a href="ggplotvis.html#ggplotvis-dist-suni-hist"><i class="fa fa-check"></i><b>30.3.1</b> 单个一元分布的直方图与密度估计图</a></li>
<li class="chapter" data-level="30.3.2" data-path="ggplotvis.html"><a href="ggplotvis.html#ggplotvis-dist-muni"><i class="fa fa-check"></i><b>30.3.2</b> 多个一元分布的直方图和密度图形</a></li>
<li class="chapter" data-level="30.3.3" data-path="ggplotvis.html"><a href="ggplotvis.html#ggplotvis-dist-cdf"><i class="fa fa-check"></i><b>30.3.3</b> 经验分布函数图</a></li>
<li class="chapter" data-level="30.3.4" data-path="ggplotvis.html"><a href="ggplotvis.html#ggplotvis-dist-qqplot"><i class="fa fa-check"></i><b>30.3.4</b> QQ图</a></li>
<li class="chapter" data-level="30.3.5" data-path="ggplotvis.html"><a href="ggplotvis.html#ggplotvis-dist-boxplot"><i class="fa fa-check"></i><b>30.3.5</b> 盒形图</a></li>
<li class="chapter" data-level="30.3.6" data-path="ggplotvis.html"><a href="ggplotvis.html#ggplotvis-dist-violin"><i class="fa fa-check"></i><b>30.3.6</b> 小提琴图</a></li>
<li class="chapter" data-level="30.3.7" data-path="ggplotvis.html"><a href="ggplotvis.html#ggplotvis-dist-mdens"><i class="fa fa-check"></i><b>30.3.7</b> 多个密度的其它画法</a></li>
<li class="chapter" data-level="30.3.8" data-path="ggplotvis.html"><a href="ggplotvis.html#ggplotvis-dist-2d"><i class="fa fa-check"></i><b>30.3.8</b> 二元分布直方图和等值线图</a></li>
</ul></li>
<li class="chapter" data-level="30.4" data-path="ggplotvis.html"><a href="ggplotvis.html#ggplotvis-prop"><i class="fa fa-check"></i><b>30.4</b> 表现比例</a><ul>
<li class="chapter" data-level="30.4.1" data-path="ggplotvis.html"><a href="ggplotvis.html#ggplotvis-prop-uni"><i class="fa fa-check"></i><b>30.4.1</b> 单个分布</a></li>
<li class="chapter" data-level="30.4.2" data-path="ggplotvis.html"><a href="ggplotvis.html#ggplotvis-prop-mult"><i class="fa fa-check"></i><b>30.4.2</b> 组间的比例分布的比较</a></li>
<li class="chapter" data-level="30.4.3" data-path="ggplotvis.html"><a href="ggplotvis.html#ggplotvis-prop-nest"><i class="fa fa-check"></i><b>30.4.3</b> 嵌套比例分布的比较</a></li>
</ul></li>
<li class="chapter" data-level="30.5" data-path="ggplotvis.html"><a href="ggplotvis.html#ggplotvis-mulvar"><i class="fa fa-check"></i><b>30.5</b> 表现多个变量间的关系</a><ul>
<li class="chapter" data-level="30.5.1" data-path="ggplotvis.html"><a href="ggplotvis.html#ggplotvis-mulvar-scatter"><i class="fa fa-check"></i><b>30.5.1</b> 散点图</a></li>
<li class="chapter" data-level="30.5.2" data-path="ggplotvis.html"><a href="ggplotvis.html#ggplotvis-mulvar-scatmat"><i class="fa fa-check"></i><b>30.5.2</b> 散点图矩阵</a></li>
<li class="chapter" data-level="30.5.3" data-path="ggplotvis.html"><a href="ggplotvis.html#ggplotvis-mulvar-corrgram"><i class="fa fa-check"></i><b>30.5.3</b> 相关系数矩阵图</a></li>
<li class="chapter" data-level="30.5.4" data-path="ggplotvis.html"><a href="ggplotvis.html#ggplotvis-mulvar-dimreduct"><i class="fa fa-check"></i><b>30.5.4</b> 数据降维</a></li>
<li class="chapter" data-level="30.5.5" data-path="ggplotvis.html"><a href="ggplotvis.html#ggplotvis-mulvar-paird"><i class="fa fa-check"></i><b>30.5.5</b> 成对数据</a></li>
</ul></li>
<li class="chapter" data-level="30.6" data-path="ggplotvis.html"><a href="ggplotvis.html#ggplotvis-ts"><i class="fa fa-check"></i><b>30.6</b> 时间序列图</a><ul>
<li class="chapter" data-level="30.6.1" data-path="ggplotvis.html"><a href="ggplotvis.html#ggplotvis-ts-uni"><i class="fa fa-check"></i><b>30.6.1</b> 一元时间序列</a></li>
<li class="chapter" data-level="30.6.2" data-path="ggplotvis.html"><a href="ggplotvis.html#ggplotvis-ts-mul"><i class="fa fa-check"></i><b>30.6.2</b> 多元时间序列</a></li>
<li class="chapter" data-level="30.6.3" data-path="ggplotvis.html"><a href="ggplotvis.html#ggplotvis-ts-het"><i class="fa fa-check"></i><b>30.6.3</b> 多个不同类型指标的时间序列</a></li>
</ul></li>
<li class="chapter" data-level="30.7" data-path="ggplotvis.html"><a href="ggplotvis.html#ggplotvis-fit"><i class="fa fa-check"></i><b>30.7</b> 拟合曲线图</a><ul>
<li class="chapter" data-level="30.7.1" data-path="ggplotvis.html"><a href="ggplotvis.html#ggplotvis-fit-smooth"><i class="fa fa-check"></i><b>30.7.1</b> 平滑方法</a></li>
<li class="chapter" data-level="30.7.2" data-path="ggplotvis.html"><a href="ggplotvis.html#ggplotvis-fit-param"><i class="fa fa-check"></i><b>30.7.2</b> 参数模型方法</a></li>
</ul></li>
<li class="chapter" data-level="30.8" data-path="ggplotvis.html"><a href="ggplotvis.html#ggplotvis-uncert"><i class="fa fa-check"></i><b>30.8</b> 表现不确定性</a><ul>
<li class="chapter" data-level="30.8.1" data-path="ggplotvis.html"><a href="ggplotvis.html#ggplotvis-uncert-prob"><i class="fa fa-check"></i><b>30.8.1</b> 表现概率</a></li>
<li class="chapter" data-level="30.8.2" data-path="ggplotvis.html"><a href="ggplotvis.html#ggplotvis-uncert-se"><i class="fa fa-check"></i><b>30.8.2</b> 表现点估计精度</a></li>
<li class="chapter" data-level="30.8.3" data-path="ggplotvis.html"><a href="ggplotvis.html#ggplotvis-uncert-cband"><i class="fa fa-check"></i><b>30.8.3</b> 拟合曲线的置信带</a></li>
<li class="chapter" data-level="30.8.4" data-path="ggplotvis.html"><a href="ggplotvis.html#ggplotvis-uncert-dyn"><i class="fa fa-check"></i><b>30.8.4</b> 随机结果动态演示</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>VII 统计模型</b></span></li>
<li class="chapter" data-level="31" data-path="stat-basics.html"><a href="stat-basics.html"><i class="fa fa-check"></i><b>31</b> R初等统计分析</a><ul>
<li class="chapter" data-level="31.1" data-path="stat-basics.html"><a href="stat-basics.html#stat-base-distr"><i class="fa fa-check"></i><b>31.1</b> 概率分布</a></li>
<li class="chapter" data-level="31.2" data-path="stat-basics.html"><a href="stat-basics.html#stat-base-mle"><i class="fa fa-check"></i><b>31.2</b> 最大似然估计</a><ul>
<li class="chapter" data-level="31.2.1" data-path="stat-basics.html"><a href="stat-basics.html#stat-base-mle-norm1"><i class="fa fa-check"></i><b>31.2.1</b> 一元正态分布参数最大似然估计</a></li>
</ul></li>
<li class="chapter" data-level="31.3" data-path="stat-basics.html"><a href="stat-basics.html#stat-base-hyptest"><i class="fa fa-check"></i><b>31.3</b> 假设检验和置信区间</a><ul>
<li class="chapter" data-level="31.3.1" data-path="stat-basics.html"><a href="stat-basics.html#stat-base-hyptest-mu"><i class="fa fa-check"></i><b>31.3.1</b> 均值的假设检验和置信区间</a></li>
<li class="chapter" data-level="31.3.2" data-path="stat-basics.html"><a href="stat-basics.html#stat-base-hyptest-prop"><i class="fa fa-check"></i><b>31.3.2</b> 比例的假设检验和置信区间</a></li>
<li class="chapter" data-level="31.3.3" data-path="stat-basics.html"><a href="stat-basics.html#stat-base-hyptest-sigma"><i class="fa fa-check"></i><b>31.3.3</b> 方差的假设检验和置信区间</a></li>
<li class="chapter" data-level="31.3.4" data-path="stat-basics.html"><a href="stat-basics.html#stat-base-hyptest-gof"><i class="fa fa-check"></i><b>31.3.4</b> 拟合优度检验</a></li>
<li class="chapter" data-level="31.3.5" data-path="stat-basics.html"><a href="stat-basics.html#stat-base-hyptest-gof-vcd"><i class="fa fa-check"></i><b>31.3.5</b> 检验分布类型</a></li>
<li class="chapter" data-level="31.3.6" data-path="stat-basics.html"><a href="stat-basics.html#stat-base-hyptest-indepcont"><i class="fa fa-check"></i><b>31.3.6</b> 列联表独立性卡方检验</a></li>
<li class="chapter" data-level="31.3.7" data-path="stat-basics.html"><a href="stat-basics.html#stat-base-hyptest-npar"><i class="fa fa-check"></i><b>31.3.7</b> 非参数检验</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="32" data-path="stat-reg.html"><a href="stat-reg.html"><i class="fa fa-check"></i><b>32</b> R相关与回归</a><ul>
<li class="chapter" data-level="32.1" data-path="stat-reg.html"><a href="stat-reg.html#stat-base-reg-cor"><i class="fa fa-check"></i><b>32.1</b> 相关分析</a><ul>
<li class="chapter" data-level="32.1.1" data-path="stat-reg.html"><a href="stat-reg.html#stat-base-reg-cor-prop"><i class="fa fa-check"></i><b>32.1.1</b> 相关系数的性质</a></li>
<li class="chapter" data-level="32.1.2" data-path="stat-reg.html"><a href="stat-reg.html#stat-base-reg-cor-caus"><i class="fa fa-check"></i><b>32.1.2</b> 相关与因果</a></li>
<li class="chapter" data-level="32.1.3" data-path="stat-reg.html"><a href="stat-reg.html#stat-base-reg-cor-magn"><i class="fa fa-check"></i><b>32.1.3</b> 相关系数大小</a></li>
<li class="chapter" data-level="32.1.4" data-path="stat-reg.html"><a href="stat-reg.html#stat-base-reg-cor-test"><i class="fa fa-check"></i><b>32.1.4</b> 相关系数的检验</a></li>
<li class="chapter" data-level="32.1.5" data-path="stat-reg.html"><a href="stat-reg.html#stat-base-reg-cor-vcorr"><i class="fa fa-check"></i><b>32.1.5</b> 相关阵</a></li>
</ul></li>
<li class="chapter" data-level="32.2" data-path="stat-reg.html"><a href="stat-reg.html#stat-base-reg-regsimp"><i class="fa fa-check"></i><b>32.2</b> 一元回归分析</a><ul>
<li class="chapter" data-level="32.2.1" data-path="stat-reg.html"><a href="stat-reg.html#stat-base-reg-regsimp-model"><i class="fa fa-check"></i><b>32.2.1</b> 模型</a></li>
<li class="chapter" data-level="32.2.2" data-path="stat-reg.html"><a href="stat-reg.html#stat-base-reg-regsimp-ls"><i class="fa fa-check"></i><b>32.2.2</b> 最小二乘法</a></li>
<li class="chapter" data-level="32.2.3" data-path="stat-reg.html"><a href="stat-reg.html#stat-base-reg-regsimp-test"><i class="fa fa-check"></i><b>32.2.3</b> 回归有效性</a></li>
<li class="chapter" data-level="32.2.4" data-path="stat-reg.html"><a href="stat-reg.html#stat-base-reg-regsimp-prog"><i class="fa fa-check"></i><b>32.2.4</b> R程序</a></li>
<li class="chapter" data-level="32.2.5" data-path="stat-reg.html"><a href="stat-reg.html#stat-base-reg-regsimp-diag"><i class="fa fa-check"></i><b>32.2.5</b> 回归诊断</a></li>
<li class="chapter" data-level="32.2.6" data-path="stat-reg.html"><a href="stat-reg.html#stat-base-reg-regsimp-ci"><i class="fa fa-check"></i><b>32.2.6</b> 预测区间</a></li>
<li class="chapter" data-level="32.2.7" data-path="stat-reg.html"><a href="stat-reg.html#stat-base-reg-regsimp-control"><i class="fa fa-check"></i><b>32.2.7</b> 控制</a></li>
</ul></li>
<li class="chapter" data-level="32.3" data-path="stat-reg.html"><a href="stat-reg.html#stat-base-reg-regmu"><i class="fa fa-check"></i><b>32.3</b> 多元线性回归</a><ul>
<li class="chapter" data-level="32.3.1" data-path="stat-reg.html"><a href="stat-reg.html#stat-base-reg-regmu-mod"><i class="fa fa-check"></i><b>32.3.1</b> 模型</a></li>
<li class="chapter" data-level="32.3.2" data-path="stat-reg.html"><a href="stat-reg.html#stat-base-reg-regmu-est"><i class="fa fa-check"></i><b>32.3.2</b> 参数估计</a></li>
<li class="chapter" data-level="32.3.3" data-path="stat-reg.html"><a href="stat-reg.html#stat-base-reg-regmu-rcode"><i class="fa fa-check"></i><b>32.3.3</b> R的多元回归程序</a></li>
<li class="chapter" data-level="32.3.4" data-path="stat-reg.html"><a href="stat-reg.html#stat-base-reg-regmu-test"><i class="fa fa-check"></i><b>32.3.4</b> 模型的检验</a></li>
<li class="chapter" data-level="32.3.5" data-path="stat-reg.html"><a href="stat-reg.html#stat-base-reg-regmu-subset"><i class="fa fa-check"></i><b>32.3.5</b> 回归自变量筛选</a></li>
<li class="chapter" data-level="32.3.6" data-path="stat-reg.html"><a href="stat-reg.html#stat-base-reg-regmu-dum"><i class="fa fa-check"></i><b>32.3.6</b> 哑变量与变截距项的模型</a></li>
<li class="chapter" data-level="32.3.7" data-path="stat-reg.html"><a href="stat-reg.html#stat-base-reg-regmu-resid"><i class="fa fa-check"></i><b>32.3.7</b> 残差诊断</a></li>
<li class="chapter" data-level="32.3.8" data-path="stat-reg.html"><a href="stat-reg.html#stat-base-reg-regmu-colin"><i class="fa fa-check"></i><b>32.3.8</b> 多重共线性</a></li>
<li class="chapter" data-level="32.3.9" data-path="stat-reg.html"><a href="stat-reg.html#stat-base-reg-regmu-lev"><i class="fa fa-check"></i><b>32.3.9</b> 强影响点分析</a></li>
<li class="chapter" data-level="32.3.10" data-path="stat-reg.html"><a href="stat-reg.html#stat-base-reg-regmu-overfit"><i class="fa fa-check"></i><b>32.3.10</b> 过度拟合示例</a></li>
<li class="chapter" data-level="32.3.11" data-path="stat-reg.html"><a href="stat-reg.html#stat-base-reg-regmu-comp-inset"><i class="fa fa-check"></i><b>32.3.11</b> 嵌套模型的比较</a></li>
<li class="chapter" data-level="32.3.12" data-path="stat-reg.html"><a href="stat-reg.html#stat-base-reg-regmu-pred"><i class="fa fa-check"></i><b>32.3.12</b> 拟合与预测</a></li>
<li class="chapter" data-level="32.3.13" data-path="stat-reg.html"><a href="stat-reg.html#stat-base-reg-regmu-curve"><i class="fa fa-check"></i><b>32.3.13</b> 利用线性回归模型做曲线拟合</a></li>
<li class="chapter" data-level="32.3.14" data-path="stat-reg.html"><a href="stat-reg.html#stat-base-reg-regmu-group"><i class="fa fa-check"></i><b>32.3.14</b> 分组建立多个模型</a></li>
</ul></li>
<li class="chapter" data-level="32.4" data-path="stat-reg.html"><a href="stat-reg.html#stat-base-reg-npar"><i class="fa fa-check"></i><b>32.4</b> 非参数回归</a><ul>
<li class="chapter" data-level="32.4.1" data-path="stat-reg.html"><a href="stat-reg.html#stat-base-reg-npar-mod"><i class="fa fa-check"></i><b>32.4.1</b> 模型</a></li>
<li class="chapter" data-level="32.4.2" data-path="stat-reg.html"><a href="stat-reg.html#stat-base-reg-cfit-spl1d"><i class="fa fa-check"></i><b>32.4.2</b> 样条平滑</a></li>
<li class="chapter" data-level="32.4.3" data-path="stat-reg.html"><a href="stat-reg.html#stat-base-reg-cfit-loess"><i class="fa fa-check"></i><b>32.4.3</b> 局部多项式曲线平滑</a></li>
<li class="chapter" data-level="32.4.4" data-path="stat-reg.html"><a href="stat-reg.html#stat-base-reg-cfit-bs"><i class="fa fa-check"></i><b>32.4.4</b> 样条函数变换</a></li>
<li class="chapter" data-level="32.4.5" data-path="stat-reg.html"><a href="stat-reg.html#stat-base-reg-cfit-gam"><i class="fa fa-check"></i><b>32.4.5</b> 线性可加模型</a></li>
</ul></li>
<li class="chapter" data-level="32.5" data-path="stat-reg.html"><a href="stat-reg.html#stat-base-reg-reglog"><i class="fa fa-check"></i><b>32.5</b> Logistic回归</a><ul>
<li class="chapter" data-level="32.5.1" data-path="stat-reg.html"><a href="stat-reg.html#stat-base-reg-reglog-mod"><i class="fa fa-check"></i><b>32.5.1</b> 模型</a></li>
<li class="chapter" data-level="32.5.2" data-path="stat-reg.html"><a href="stat-reg.html#stat-base-reg-reglog-rcode"><i class="fa fa-check"></i><b>32.5.2</b> R程序</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="33" data-path="stat-tsa.html"><a href="stat-tsa.html"><i class="fa fa-check"></i><b>33</b> R时间序列分析</a><ul>
<li class="chapter" data-level="33.1" data-path="stat-tsa.html"><a href="stat-tsa.html#stat-tsa-defs"><i class="fa fa-check"></i><b>33.1</b> 基本概念</a></li>
<li class="chapter" data-level="33.2" data-path="stat-tsa.html"><a href="stat-tsa.html#stat-tsa-dtype"><i class="fa fa-check"></i><b>33.2</b> 时间序列数据类型</a><ul>
<li class="chapter" data-level="33.2.1" data-path="stat-tsa.html"><a href="stat-tsa.html#stat-tsa-dtype-ts"><i class="fa fa-check"></i><b>33.2.1</b> ts类型</a></li>
<li class="chapter" data-level="33.2.2" data-path="stat-tsa.html"><a href="stat-tsa.html#stat-tsa-dtype-xts"><i class="fa fa-check"></i><b>33.2.2</b> xts类型与常用函数</a></li>
</ul></li>
<li class="chapter" data-level="33.3" data-path="stat-tsa.html"><a href="stat-tsa.html#stat-tsa-basicstat"><i class="fa fa-check"></i><b>33.3</b> 基本分析与作图</a></li>
<li class="chapter" data-level="33.4" data-path="stat-tsa.html"><a href="stat-tsa.html#stat-tsa-arima"><i class="fa fa-check"></i><b>33.4</b> ARIMA建模和模拟</a><ul>
<li class="chapter" data-level="33.4.1" data-path="stat-tsa.html"><a href="stat-tsa.html#stat-tsa-arima-def"><i class="fa fa-check"></i><b>33.4.1</b> 模型公式</a></li>
<li class="chapter" data-level="33.4.2" data-path="stat-tsa.html"><a href="stat-tsa.html#stat-tsa-arima-sim"><i class="fa fa-check"></i><b>33.4.2</b> 模拟</a></li>
<li class="chapter" data-level="33.4.3" data-path="stat-tsa.html"><a href="stat-tsa.html#stat-tsa-arima-armod"><i class="fa fa-check"></i><b>33.4.3</b> AR建模</a></li>
<li class="chapter" data-level="33.4.4" data-path="stat-tsa.html"><a href="stat-tsa.html#stat-tsa-arima-armamod"><i class="fa fa-check"></i><b>33.4.4</b> ARMA建模</a></li>
<li class="chapter" data-level="33.4.5" data-path="stat-tsa.html"><a href="stat-tsa.html#stat-tsa-arima-diag"><i class="fa fa-check"></i><b>33.4.5</b> 模型诊断</a></li>
<li class="chapter" data-level="33.4.6" data-path="stat-tsa.html"><a href="stat-tsa.html#stat-tsa-arima-lbtest"><i class="fa fa-check"></i><b>33.4.6</b> 白噪声检验</a></li>
<li class="chapter" data-level="33.4.7" data-path="stat-tsa.html"><a href="stat-tsa.html#stat-tsa-arima-sparse"><i class="fa fa-check"></i><b>33.4.7</b> 稀疏系数估计</a></li>
<li class="chapter" data-level="33.4.8" data-path="stat-tsa.html"><a href="stat-tsa.html#stat-tsa-arima-adftest"><i class="fa fa-check"></i><b>33.4.8</b> 单位根检验</a></li>
<li class="chapter" data-level="33.4.9" data-path="stat-tsa.html"><a href="stat-tsa.html#stat-tsa-arima-cfuncs"><i class="fa fa-check"></i><b>33.4.9</b> ARMA模型的一些自定义函数</a></li>
</ul></li>
<li class="chapter" data-level="33.5" data-path="stat-tsa.html"><a href="stat-tsa.html#stat-tsa-spectra"><i class="fa fa-check"></i><b>33.5</b> 谱密度估计</a></li>
<li class="chapter" data-level="33.6" data-path="stat-tsa.html"><a href="stat-tsa.html#stat-tsa-garch"><i class="fa fa-check"></i><b>33.6</b> GARCH类模型</a></li>
<li class="chapter" data-level="33.7" data-path="stat-tsa.html"><a href="stat-tsa.html#stat-tsa-mtsa"><i class="fa fa-check"></i><b>33.7</b> 多元时间序列基础统计</a></li>
<li class="chapter" data-level="33.8" data-path="stat-tsa.html"><a href="stat-tsa.html#stat-tsa-var"><i class="fa fa-check"></i><b>33.8</b> VAR模型</a></li>
<li class="chapter" data-level="33.9" data-path="stat-tsa.html"><a href="stat-tsa.html#stat-tsa-coint"><i class="fa fa-check"></i><b>33.9</b> 协整分析</a></li>
<li class="chapter" data-level="33.10" data-path="stat-tsa.html"><a href="stat-tsa.html#stat-tsa-causal"><i class="fa fa-check"></i><b>33.10</b> 因果性检验</a></li>
</ul></li>
<li class="chapter" data-level="34" data-path="stat-learning.html"><a href="stat-learning.html"><i class="fa fa-check"></i><b>34</b> 统计学习介绍</a><ul>
<li class="chapter" data-level="34.1" data-path="stat-learning.html"><a href="stat-learning.html#statl-intro"><i class="fa fa-check"></i><b>34.1</b> 统计学习的基本概念和一般步骤</a><ul>
<li class="chapter" data-level="34.1.1" data-path="stat-learning.html"><a href="stat-learning.html#statl-intro-basic"><i class="fa fa-check"></i><b>34.1.1</b> 统计学习的基本概念和方法</a></li>
<li class="chapter" data-level="34.1.2" data-path="stat-learning.html"><a href="stat-learning.html#statl-intro-biasvar"><i class="fa fa-check"></i><b>34.1.2</b> 偏差与方差折衷</a></li>
<li class="chapter" data-level="34.1.3" data-path="stat-learning.html"><a href="stat-learning.html#statl-cv"><i class="fa fa-check"></i><b>34.1.3</b> 交叉验证</a></li>
<li class="chapter" data-level="34.1.4" data-path="stat-learning.html"><a href="stat-learning.html#statl-steps"><i class="fa fa-check"></i><b>34.1.4</b> 一般步骤</a></li>
</ul></li>
<li class="chapter" data-level="34.2" data-path="stat-learning.html"><a href="stat-learning.html#statl-hitters"><i class="fa fa-check"></i><b>34.2</b> Hitters数据分析</a><ul>
<li class="chapter" data-level="34.2.1" data-path="stat-learning.html"><a href="stat-learning.html#statl-hitters-subset"><i class="fa fa-check"></i><b>34.2.1</b> 回归自变量选择</a></li>
<li class="chapter" data-level="34.2.2" data-path="stat-learning.html"><a href="stat-learning.html#statl-hitters-ridge"><i class="fa fa-check"></i><b>34.2.2</b> 岭回归</a></li>
<li class="chapter" data-level="34.2.3" data-path="stat-learning.html"><a href="stat-learning.html#statl-hitters-lasso"><i class="fa fa-check"></i><b>34.2.3</b> Lasso回归</a></li>
<li class="chapter" data-level="34.2.4" data-path="stat-learning.html"><a href="stat-learning.html#statl-hitters-simpt"><i class="fa fa-check"></i><b>34.2.4</b> 树回归的简单演示</a></li>
<li class="chapter" data-level="34.2.5" data-path="stat-learning.html"><a href="stat-learning.html#statl-hitters-tree"><i class="fa fa-check"></i><b>34.2.5</b> 树回归</a></li>
<li class="chapter" data-level="34.2.6" data-path="stat-learning.html"><a href="stat-learning.html#statl-hitters-bag"><i class="fa fa-check"></i><b>34.2.6</b> 装袋法</a></li>
<li class="chapter" data-level="34.2.7" data-path="stat-learning.html"><a href="stat-learning.html#statl-hitters-rf"><i class="fa fa-check"></i><b>34.2.7</b> 随机森林</a></li>
</ul></li>
<li class="chapter" data-level="34.3" data-path="stat-learning.html"><a href="stat-learning.html#statl-heart"><i class="fa fa-check"></i><b>34.3</b> Heart数据分析</a><ul>
<li class="chapter" data-level="34.3.1" data-path="stat-learning.html"><a href="stat-learning.html#statl-heart-tree"><i class="fa fa-check"></i><b>34.3.1</b> 树回归</a></li>
<li class="chapter" data-level="34.3.2" data-path="stat-learning.html"><a href="stat-learning.html#statl-heart-bag"><i class="fa fa-check"></i><b>34.3.2</b> 用装袋法</a></li>
<li class="chapter" data-level="34.3.3" data-path="stat-learning.html"><a href="stat-learning.html#statl-heart-rf"><i class="fa fa-check"></i><b>34.3.3</b> 用随机森林</a></li>
</ul></li>
<li class="chapter" data-level="34.4" data-path="stat-learning.html"><a href="stat-learning.html#statl-car"><i class="fa fa-check"></i><b>34.4</b> 汽车销量数据分析</a><ul>
<li class="chapter" data-level="34.4.1" data-path="stat-learning.html"><a href="stat-learning.html#statl-car-tree"><i class="fa fa-check"></i><b>34.4.1</b> 判别树</a></li>
<li class="chapter" data-level="34.4.2" data-path="stat-learning.html"><a href="stat-learning.html#statl-car-rf"><i class="fa fa-check"></i><b>34.4.2</b> 随机森林</a></li>
</ul></li>
<li class="chapter" data-level="34.5" data-path="stat-learning.html"><a href="stat-learning.html#statl-boston"><i class="fa fa-check"></i><b>34.5</b> 波士顿郊区房价数据</a><ul>
<li class="chapter" data-level="34.5.1" data-path="stat-learning.html"><a href="stat-learning.html#statl-boston-tree"><i class="fa fa-check"></i><b>34.5.1</b> 回归树</a></li>
<li class="chapter" data-level="34.5.2" data-path="stat-learning.html"><a href="stat-learning.html#statl-boston-bag"><i class="fa fa-check"></i><b>34.5.2</b> 装袋法</a></li>
<li class="chapter" data-level="34.5.3" data-path="stat-learning.html"><a href="stat-learning.html#statl-boston-rf"><i class="fa fa-check"></i><b>34.5.3</b> 随机森林</a></li>
<li class="chapter" data-level="34.5.4" data-path="stat-learning.html"><a href="stat-learning.html#statl-boston-boost"><i class="fa fa-check"></i><b>34.5.4</b> 提升法</a></li>
</ul></li>
<li class="chapter" data-level="34.6" data-path="stat-learning.html"><a href="stat-learning.html#statl-svm"><i class="fa fa-check"></i><b>34.6</b> 支持向量机方法</a><ul>
<li class="chapter" data-level="34.6.1" data-path="stat-learning.html"><a href="stat-learning.html#statl-svm-heart"><i class="fa fa-check"></i><b>34.6.1</b> 支持向量机用于Heart数据</a></li>
</ul></li>
<li class="chapter" data-level="34.7" data-path="stat-learning.html"><a href="stat-learning.html#statl-app"><i class="fa fa-check"></i><b>34.7</b> 附录</a><ul>
<li class="chapter" data-level="34.7.1" data-path="stat-learning.html"><a href="stat-learning.html#statl-app-hitters"><i class="fa fa-check"></i><b>34.7.1</b> Hitters数据</a></li>
<li class="chapter" data-level="34.7.2" data-path="stat-learning.html"><a href="stat-learning.html#statl-app-heart"><i class="fa fa-check"></i><b>34.7.2</b> Heart数据</a></li>
<li class="chapter" data-level="34.7.3" data-path="stat-learning.html"><a href="stat-learning.html#statl-app-car"><i class="fa fa-check"></i><b>34.7.3</b> CarSeats数据</a></li>
<li class="chapter" data-level="34.7.4" data-path="stat-learning.html"><a href="stat-learning.html#statl-app-boston"><i class="fa fa-check"></i><b>34.7.4</b> Boston数据</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="35" data-path="simulation.html"><a href="simulation.html"><i class="fa fa-check"></i><b>35</b> 随机模拟</a><ul>
<li class="chapter" data-level="35.1" data-path="simulation.html"><a href="simulation.html#simint"><i class="fa fa-check"></i><b>35.1</b> 随机数</a></li>
<li class="chapter" data-level="35.2" data-path="simulation.html"><a href="simulation.html#simsamp"><i class="fa fa-check"></i><b>35.2</b> <code>sample()</code>函数</a></li>
<li class="chapter" data-level="35.3" data-path="simulation.html"><a href="simulation.html#simexamp"><i class="fa fa-check"></i><b>35.3</b> 随机模拟示例</a><ul>
<li class="chapter" data-level="35.3.1" data-path="simulation.html"><a href="simulation.html#simexamp-expect"><i class="fa fa-check"></i><b>35.3.1</b> 估计期望值</a></li>
<li class="chapter" data-level="35.3.2" data-path="simulation.html"><a href="simulation.html#simexamp-lm"><i class="fa fa-check"></i><b>35.3.2</b> 线性回归模拟</a></li>
<li class="chapter" data-level="35.3.3" data-path="simulation.html"><a href="simulation.html#simexamp-kde"><i class="fa fa-check"></i><b>35.3.3</b> 核密度的bootstrap置信区间</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>VIII 特殊应用</b></span></li>
<li class="chapter" data-level="36" data-path="text.html"><a href="text.html"><i class="fa fa-check"></i><b>36</b> R语言的文本处理</a><ul>
<li class="chapter" data-level="36.1" data-path="text.html"><a href="text.html#text-simple"><i class="fa fa-check"></i><b>36.1</b> 简单的文本处理</a><ul>
<li class="chapter" data-level="36.1.1" data-path="text.html"><a href="text.html#text-simple-const"><i class="fa fa-check"></i><b>36.1.1</b> 字符型常量与字符型向量</a></li>
<li class="chapter" data-level="36.1.2" data-path="text.html"><a href="text.html#text-paste"><i class="fa fa-check"></i><b>36.1.2</b> 字符串连接、重复</a></li>
<li class="chapter" data-level="36.1.3" data-path="text.html"><a href="text.html#text-formatout"><i class="fa fa-check"></i><b>36.1.3</b> 格式化输出</a></li>
<li class="chapter" data-level="36.1.4" data-path="text.html"><a href="text.html#text-length"><i class="fa fa-check"></i><b>36.1.4</b> 字符串长度</a></li>
<li class="chapter" data-level="36.1.5" data-path="text.html"><a href="text.html#text-substring"><i class="fa fa-check"></i><b>36.1.5</b> 取子串</a></li>
<li class="chapter" data-level="36.1.6" data-path="text.html"><a href="text.html#text-convert"><i class="fa fa-check"></i><b>36.1.6</b> 字符串变换</a></li>
<li class="chapter" data-level="36.1.7" data-path="text.html"><a href="text.html#text-simp-find"><i class="fa fa-check"></i><b>36.1.7</b> 简单匹配与查找</a></li>
<li class="chapter" data-level="36.1.8" data-path="text.html"><a href="text.html#text-simple-gsub"><i class="fa fa-check"></i><b>36.1.8</b> 字符串替换</a></li>
<li class="chapter" data-level="36.1.9" data-path="text.html"><a href="text.html#text-simple-strsplit"><i class="fa fa-check"></i><b>36.1.9</b> 字符串拆分</a></li>
</ul></li>
<li class="chapter" data-level="36.2" data-path="text.html"><a href="text.html#text-file"><i class="fa fa-check"></i><b>36.2</b> 文本文件读写</a></li>
<li class="chapter" data-level="36.3" data-path="text.html"><a href="text.html#text-regex"><i class="fa fa-check"></i><b>36.3</b> 正则表达式</a><ul>
<li class="chapter" data-level="36.3.1" data-path="text.html"><a href="text.html#text-regex-strview"><i class="fa fa-check"></i><b>36.3.1</b> 字面匹配与匹配显示</a></li>
<li class="chapter" data-level="36.3.2" data-path="text.html"><a href="text.html#text-regex-ignore"><i class="fa fa-check"></i><b>36.3.2</b> 不区分大小写匹配和<code>regex</code>函数</a></li>
<li class="chapter" data-level="36.3.3" data-path="text.html"><a href="text.html#text-regex-dot"><i class="fa fa-check"></i><b>36.3.3</b> 用句点匹配单个字符</a></li>
<li class="chapter" data-level="36.3.4" data-path="text.html"><a href="text.html#text-regex-set"><i class="fa fa-check"></i><b>36.3.4</b> 匹配一组字符中的某一个</a></li>
<li class="chapter" data-level="36.3.5" data-path="text.html"><a href="text.html#text-regex-metalit"><i class="fa fa-check"></i><b>36.3.5</b> 原样匹配元字符</a></li>
<li class="chapter" data-level="36.3.6" data-path="text.html"><a href="text.html#text-regex-space"><i class="fa fa-check"></i><b>36.3.6</b> 匹配空白</a></li>
<li class="chapter" data-level="36.3.7" data-path="text.html"><a href="text.html#text-regex-digit"><i class="fa fa-check"></i><b>36.3.7</b> 匹配数字</a></li>
<li class="chapter" data-level="36.3.8" data-path="text.html"><a href="text.html#text-regex-alnum"><i class="fa fa-check"></i><b>36.3.8</b> 匹配字母、数字、下划线</a></li>
<li class="chapter" data-level="36.3.9" data-path="text.html"><a href="text.html#text-regex-hex"><i class="fa fa-check"></i><b>36.3.9</b> 十六进制和八进制数</a></li>
<li class="chapter" data-level="36.3.10" data-path="text.html"><a href="text.html#text-regex-posix"><i class="fa fa-check"></i><b>36.3.10</b> POSIX字符类</a></li>
<li class="chapter" data-level="36.3.11" data-path="text.html"><a href="text.html#text-regex-start"><i class="fa fa-check"></i><b>36.3.11</b> 匹配开头和末尾</a></li>
<li class="chapter" data-level="36.3.12" data-path="text.html"><a href="text.html#text-regex-wordb"><i class="fa fa-check"></i><b>36.3.12</b> 单词边界</a></li>
<li class="chapter" data-level="36.3.13" data-path="text.html"><a href="text.html#text-regex-repeat"><i class="fa fa-check"></i><b>36.3.13</b> 重复匹配</a></li>
<li class="chapter" data-level="36.3.14" data-path="text.html"><a href="text.html#text-regex-lazy"><i class="fa fa-check"></i><b>36.3.14</b> 贪婪匹配和懒惰匹配</a></li>
<li class="chapter" data-level="36.3.15" data-path="text.html"><a href="text.html#text-regex-smlines"><i class="fa fa-check"></i><b>36.3.15</b> 句点全匹配与多行模式</a></li>
<li class="chapter" data-level="36.3.16" data-path="text.html"><a href="text.html#text-regex-alt"><i class="fa fa-check"></i><b>36.3.16</b> 备择模式</a></li>
<li class="chapter" data-level="36.3.17" data-path="text.html"><a href="text.html#text-regex-group"><i class="fa fa-check"></i><b>36.3.17</b> 分组与捕获</a></li>
</ul></li>
<li class="chapter" data-level="36.4" data-path="text.html"><a href="text.html#text-stringr-funcs"><i class="fa fa-check"></i><b>36.4</b> stringr包的正则表达式函数</a><ul>
<li class="chapter" data-level="36.4.1" data-path="text.html"><a href="text.html#text-stringr-funcs-strview"><i class="fa fa-check"></i><b>36.4.1</b> <code>str_view()</code>函数</a></li>
<li class="chapter" data-level="36.4.2" data-path="text.html"><a href="text.html#text-stringr-funcs-regex"><i class="fa fa-check"></i><b>36.4.2</b> <code>regex()</code>函数</a></li>
<li class="chapter" data-level="36.4.3" data-path="text.html"><a href="text.html#text-stringr-funcs-detect"><i class="fa fa-check"></i><b>36.4.3</b> 检查那些元素能够匹配</a></li>
<li class="chapter" data-level="36.4.4" data-path="text.html"><a href="text.html#text-stringr-funcs-replace"><i class="fa fa-check"></i><b>36.4.4</b> 替换</a></li>
<li class="chapter" data-level="36.4.5" data-path="text.html"><a href="text.html#text-stringr-funcs-subset"><i class="fa fa-check"></i><b>36.4.5</b> 返回匹配的元素</a></li>
<li class="chapter" data-level="36.4.6" data-path="text.html"><a href="text.html#text-stringr-funcs-extract"><i class="fa fa-check"></i><b>36.4.6</b> 提取匹配内容</a></li>
<li class="chapter" data-level="36.4.7" data-path="text.html"><a href="text.html#text-stringr-funcs-match"><i class="fa fa-check"></i><b>36.4.7</b> 提取分组捕获内容</a></li>
<li class="chapter" data-level="36.4.8" data-path="text.html"><a href="text.html#text-stringr-funcs-locate"><i class="fa fa-check"></i><b>36.4.8</b> 定位匹配位置</a></li>
</ul></li>
<li class="chapter" data-level="36.5" data-path="text.html"><a href="text.html#text-regex-bfuncs"><i class="fa fa-check"></i><b>36.5</b> 利用基本R函数进行正则表达式处理</a><ul>
<li class="chapter" data-level="36.5.1" data-path="text.html"><a href="text.html#text-regex-bfuncs-igcase"><i class="fa fa-check"></i><b>36.5.1</b> 不区分大小写匹配</a></li>
<li class="chapter" data-level="36.5.2" data-path="text.html"><a href="text.html#text-regex-bfuncs-dotp"><i class="fa fa-check"></i><b>36.5.2</b> 匹配单个字符</a></li>
<li class="chapter" data-level="36.5.3" data-path="text.html"><a href="text.html#text-regex-bfuncs-setp"><i class="fa fa-check"></i><b>36.5.3</b> 匹配一组字符中的某一个</a></li>
<li class="chapter" data-level="36.5.4" data-path="text.html"><a href="text.html#text-regex-bfuncs-metalit"><i class="fa fa-check"></i><b>36.5.4</b> 原样匹配元字符</a></li>
<li class="chapter" data-level="36.5.5" data-path="text.html"><a href="text.html#text-regex-bfuncs-digit"><i class="fa fa-check"></i><b>36.5.5</b> 匹配数字</a></li>
<li class="chapter" data-level="36.5.6" data-path="text.html"><a href="text.html#text-regex-bfuncs-start"><i class="fa fa-check"></i><b>36.5.6</b> 匹配开头和末尾</a></li>
<li class="chapter" data-level="36.5.7" data-path="text.html"><a href="text.html#text-regex-bfuncs-alnum"><i class="fa fa-check"></i><b>36.5.7</b> 匹配字母、数字、下划线</a></li>
<li class="chapter" data-level="36.5.8" data-path="text.html"><a href="text.html#text-regex-bfuncs-hex"><i class="fa fa-check"></i><b>36.5.8</b> 十六进制和八进制数</a></li>
<li class="chapter" data-level="36.5.9" data-path="text.html"><a href="text.html#text-regex-bfuncs-posix"><i class="fa fa-check"></i><b>36.5.9</b> POSIX字符类</a></li>
<li class="chapter" data-level="36.5.10" data-path="text.html"><a href="text.html#text-regex-bfuncs-plus"><i class="fa fa-check"></i><b>36.5.10</b> 加号重复匹配</a></li>
<li class="chapter" data-level="36.5.11" data-path="text.html"><a href="text.html#text-regex-bfuncs-ast"><i class="fa fa-check"></i><b>36.5.11</b> 星号和问号重复匹配</a></li>
<li class="chapter" data-level="36.5.12" data-path="text.html"><a href="text.html#text-regex-bfuncs-repnum"><i class="fa fa-check"></i><b>36.5.12</b> 计数重复</a></li>
<li class="chapter" data-level="36.5.13" data-path="text.html"><a href="text.html#text-regex-bfuncs-lazy"><i class="fa fa-check"></i><b>36.5.13</b> 贪婪匹配和懒惰匹配</a></li>
<li class="chapter" data-level="36.5.14" data-path="text.html"><a href="text.html#text-regex-bfuncs-wordb"><i class="fa fa-check"></i><b>36.5.14</b> 单词边界</a></li>
<li class="chapter" data-level="36.5.15" data-path="text.html"><a href="text.html#text-regex-bfuncs-sm"><i class="fa fa-check"></i><b>36.5.15</b> 句点全匹配与多行模式</a></li>
<li class="chapter" data-level="36.5.16" data-path="text.html"><a href="text.html#text-regex-bfuncs-alt"><i class="fa fa-check"></i><b>36.5.16</b> 备择模式</a></li>
<li class="chapter" data-level="36.5.17" data-path="text.html"><a href="text.html#text-regex-bfuncs-group"><i class="fa fa-check"></i><b>36.5.17</b> 分组与捕获</a></li>
</ul></li>
<li class="chapter" data-level="36.6" data-path="text.html"><a href="text.html#text-regexex"><i class="fa fa-check"></i><b>36.6</b> 正则表达式应用例子</a><ul>
<li class="chapter" data-level="36.6.1" data-path="text.html"><a href="text.html#text-regexex-pre"><i class="fa fa-check"></i><b>36.6.1</b> 数据预处理</a></li>
<li class="chapter" data-level="36.6.2" data-path="text.html"><a href="text.html#text-regexex-excelmore"><i class="fa fa-check"></i><b>36.6.2</b> 不规则Excel文件处理</a></li>
<li class="chapter" data-level="36.6.3" data-path="text.html"><a href="text.html#text-regexex-wordfreq"><i class="fa fa-check"></i><b>36.6.3</b> 字频统计</a></li>
<li class="chapter" data-level="36.6.4" data-path="text.html"><a href="text.html#text-regexex-digits"><i class="fa fa-check"></i><b>36.6.4</b> 数字验证</a></li>
<li class="chapter" data-level="36.6.5" data-path="text.html"><a href="text.html#text-regexex-digfn"><i class="fa fa-check"></i><b>36.6.5</b> 文件名中的数字提取</a></li>
</ul></li>
<li class="chapter" data-level="36.7" data-path="text.html"><a href="text.html#text-webscape"><i class="fa fa-check"></i><b>36.7</b> 网站数据获取</a></li>
<li class="chapter" data-level="36.8" data-path="text.html"><a href="text.html#text-jiebaR"><i class="fa fa-check"></i><b>36.8</b> 中文分词与词频</a></li>
</ul></li>
<li class="part"><span><b>IX 用Rcpp访问C++代码</b></span></li>
<li class="chapter" data-level="37" data-path="rcpp.html"><a href="rcpp.html"><i class="fa fa-check"></i><b>37</b> Rcpp介绍</a><ul>
<li class="chapter" data-level="37.1" data-path="rcpp.html"><a href="rcpp.html#rcpp-intro-use"><i class="fa fa-check"></i><b>37.1</b> Rcpp的用途</a></li>
<li class="chapter" data-level="37.2" data-path="rcpp.html"><a href="rcpp.html#rcpp-intro-examp"><i class="fa fa-check"></i><b>37.2</b> Rcpp入门样例</a><ul>
<li class="chapter" data-level="37.2.1" data-path="rcpp.html"><a href="rcpp.html#rcpp-intro-examp-ex1"><i class="fa fa-check"></i><b>37.2.1</b> 用<code>cppFunction()</code>转换简单的C++函数—Fibnacci例子</a></li>
<li class="chapter" data-level="37.2.2" data-path="rcpp.html"><a href="rcpp.html#rcpp-intro-examp-ex2"><i class="fa fa-check"></i><b>37.2.2</b> 用<code>sourceCpp()</code>转换C++程序—正负交替迭代例子</a></li>
<li class="chapter" data-level="37.2.3" data-path="rcpp.html"><a href="rcpp.html#rcpp-intro-examp-ex3"><i class="fa fa-check"></i><b>37.2.3</b> 用<code>sourceCpp()</code>转换C++源文件中的程序—正负交替迭代例子</a></li>
<li class="chapter" data-level="37.2.4" data-path="rcpp.html"><a href="rcpp.html#rcpp-intro-examp-ex4"><i class="fa fa-check"></i><b>37.2.4</b> 用<code>sourceCpp()</code>转换C++源程序文件—卷积例子</a></li>
<li class="chapter" data-level="37.2.5" data-path="rcpp.html"><a href="rcpp.html#rcpp-intro-examp-rmdconv"><i class="fa fa-check"></i><b>37.2.5</b> 在Rmd文件中使用C++源程序文件</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="38" data-path="rcpp-typeconv.html"><a href="rcpp-typeconv.html"><i class="fa fa-check"></i><b>38</b> R与C++的类型转换</a><ul>
<li class="chapter" data-level="38.1" data-path="rcpp-typeconv.html"><a href="rcpp-typeconv.html#rcpp-typeconv-wrap"><i class="fa fa-check"></i><b>38.1</b> 用<code>wrap()</code>把C++变量返回到R中</a></li>
<li class="chapter" data-level="38.2" data-path="rcpp-typeconv.html"><a href="rcpp-typeconv.html#rcpp-typeconv-as"><i class="fa fa-check"></i><b>38.2</b> 用<code>as()</code>函数把R变量转换为C++类型</a></li>
<li class="chapter" data-level="38.3" data-path="rcpp-typeconv.html"><a href="rcpp-typeconv.html#rcpp-typeconv-implicit"><i class="fa fa-check"></i><b>38.3</b> <code>as()</code>和<code>wrap()</code>的隐含调用</a></li>
</ul></li>
<li class="chapter" data-level="39" data-path="rcpp-attr.html"><a href="rcpp-attr.html"><i class="fa fa-check"></i><b>39</b> Rcpp 属性</a><ul>
<li class="chapter" data-level="39.1" data-path="rcpp-attr.html"><a href="rcpp-attr.html#rcpp-attr-intro"><i class="fa fa-check"></i><b>39.1</b> Rcpp属性介绍</a></li>
<li class="chapter" data-level="39.2" data-path="rcpp-attr.html"><a href="rcpp-attr.html#rcpp-attr-export"><i class="fa fa-check"></i><b>39.2</b> 在C++源程序中指定要导出的C++函数</a></li>
<li class="chapter" data-level="39.3" data-path="rcpp-attr.html"><a href="rcpp-attr.html#rcpp-attr-sourcecpp"><i class="fa fa-check"></i><b>39.3</b> 在R中编译链接C++代码</a></li>
<li class="chapter" data-level="39.4" data-path="rcpp-attr.html"><a href="rcpp-attr.html#rcpp-attr-misc"><i class="fa fa-check"></i><b>39.4</b> Rcpp属性的其它功能</a><ul>
<li class="chapter" data-level="39.4.1" data-path="rcpp-attr.html"><a href="rcpp-attr.html#rcpp-attr-misc-default"><i class="fa fa-check"></i><b>39.4.1</b> 自变量有缺省值的函数</a></li>
<li class="chapter" data-level="39.4.2" data-path="rcpp-attr.html"><a href="rcpp-attr.html#rcpp-attr-misc-interrupt"><i class="fa fa-check"></i><b>39.4.2</b> 允许用户中断</a></li>
<li class="chapter" data-level="39.4.3" data-path="rcpp-attr.html"><a href="rcpp-attr.html#rcpp-attr-misc-rinclude"><i class="fa fa-check"></i><b>39.4.3</b> 把R代码写在C++源文件中</a></li>
<li class="chapter" data-level="39.4.4" data-path="rcpp-attr.html"><a href="rcpp-attr.html#rcpp-attr-misc-rand"><i class="fa fa-check"></i><b>39.4.4</b> 在C++中调用R的随机数发生器</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="40" data-path="rcpp-vectype.html"><a href="rcpp-vectype.html"><i class="fa fa-check"></i><b>40</b> Rcpp提供的C++数据类型</a><ul>
<li class="chapter" data-level="40.1" data-path="rcpp-vectype.html"><a href="rcpp-vectype.html#rcpp-vectype-robject"><i class="fa fa-check"></i><b>40.1</b> RObject类</a></li>
<li class="chapter" data-level="40.2" data-path="rcpp-vectype.html"><a href="rcpp-vectype.html#rcpp-vectype-ivec"><i class="fa fa-check"></i><b>40.2</b> IntegerVector类</a><ul>
<li class="chapter" data-level="40.2.1" data-path="rcpp-vectype.html"><a href="rcpp-vectype.html#rcpp-vectype-ivec-ex1"><i class="fa fa-check"></i><b>40.2.1</b> IntegerVector示例1：返回完全数</a></li>
<li class="chapter" data-level="40.2.2" data-path="rcpp-vectype.html"><a href="rcpp-vectype.html#rcpp-vectype-ivec-ex2"><i class="fa fa-check"></i><b>40.2.2</b> IntegerVector示例2：输入整数向量</a></li>
</ul></li>
<li class="chapter" data-level="40.3" data-path="rcpp-vectype.html"><a href="rcpp-vectype.html#rcpp-vectype-num"><i class="fa fa-check"></i><b>40.3</b> NumericVector类</a><ul>
<li class="chapter" data-level="40.3.1" data-path="rcpp-vectype.html"><a href="rcpp-vectype.html#rcpp-vectype-num-ex1"><i class="fa fa-check"></i><b>40.3.1</b> 示例1：计算元素<span class="math inline">\(p\)</span>次方的和</a></li>
<li class="chapter" data-level="40.3.2" data-path="rcpp-vectype.html"><a href="rcpp-vectype.html#rcpp-vectype-num-ex2"><i class="fa fa-check"></i><b>40.3.2</b> 示例2：<code>clone</code>函数</a></li>
<li class="chapter" data-level="40.3.3" data-path="rcpp-vectype.html"><a href="rcpp-vectype.html#rcpp-vectype-num-ex3"><i class="fa fa-check"></i><b>40.3.3</b> 示例3：向量子集</a></li>
</ul></li>
<li class="chapter" data-level="40.4" data-path="rcpp-vectype.html"><a href="rcpp-vectype.html#rcpp-vectype-mat"><i class="fa fa-check"></i><b>40.4</b> NumericMatrix类</a><ul>
<li class="chapter" data-level="40.4.1" data-path="rcpp-vectype.html"><a href="rcpp-vectype.html#rcpp-vectype-mat-ex1"><i class="fa fa-check"></i><b>40.4.1</b> 示例1：计算矩阵各列模的最大值</a></li>
<li class="chapter" data-level="40.4.2" data-path="rcpp-vectype.html"><a href="rcpp-vectype.html#rcpp-vectype-mat-ex2"><i class="fa fa-check"></i><b>40.4.2</b> 示例2：把输入矩阵制作副本计算元素平方根</a></li>
<li class="chapter" data-level="40.4.3" data-path="rcpp-vectype.html"><a href="rcpp-vectype.html#rcpp-vectype-mat-ex3"><i class="fa fa-check"></i><b>40.4.3</b> 示例3：访问列子集</a></li>
</ul></li>
<li class="chapter" data-level="40.5" data-path="rcpp-vectype.html"><a href="rcpp-vectype.html#rcpp-vectype-other"><i class="fa fa-check"></i><b>40.5</b> Rcpp的其它向量类</a><ul>
<li class="chapter" data-level="40.5.1" data-path="rcpp-vectype.html"><a href="rcpp-vectype.html#rcpp-vectype-logic"><i class="fa fa-check"></i><b>40.5.1</b> Rcpp的LogicalVector类</a></li>
<li class="chapter" data-level="40.5.2" data-path="rcpp-vectype.html"><a href="rcpp-vectype.html#rcpp-vectype-char"><i class="fa fa-check"></i><b>40.5.2</b> Rcpp的CharacterVector类型</a></li>
</ul></li>
<li class="chapter" data-level="40.6" data-path="rcpp-vectype.html"><a href="rcpp-vectype.html#rcpp-types"><i class="fa fa-check"></i><b>40.6</b> Rcpp提供的其它数据类型</a><ul>
<li class="chapter" data-level="40.6.1" data-path="rcpp-vectype.html"><a href="rcpp-vectype.html#rcpp-types-named"><i class="fa fa-check"></i><b>40.6.1</b> Named类型</a></li>
<li class="chapter" data-level="40.6.2" data-path="rcpp-vectype.html"><a href="rcpp-vectype.html#rcpp-types-list"><i class="fa fa-check"></i><b>40.6.2</b> List类型</a></li>
<li class="chapter" data-level="40.6.3" data-path="rcpp-vectype.html"><a href="rcpp-vectype.html#rcpp-types-df"><i class="fa fa-check"></i><b>40.6.3</b> Rcpp的DataFrame类</a></li>
<li class="chapter" data-level="40.6.4" data-path="rcpp-vectype.html"><a href="rcpp-vectype.html#rcpp-types-func"><i class="fa fa-check"></i><b>40.6.4</b> Rcpp的Function类</a></li>
<li class="chapter" data-level="40.6.5" data-path="rcpp-vectype.html"><a href="rcpp-vectype.html#rcpp-types-environ"><i class="fa fa-check"></i><b>40.6.5</b> Rcpp的Environment类</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="41" data-path="rcpp-sugar.html"><a href="rcpp-sugar.html"><i class="fa fa-check"></i><b>41</b> Rcpp糖</a><ul>
<li class="chapter" data-level="41.1" data-path="rcpp-sugar.html"><a href="rcpp-sugar.html#rcpp-sugar-examp"><i class="fa fa-check"></i><b>41.1</b> 简单示例</a></li>
<li class="chapter" data-level="41.2" data-path="rcpp-sugar.html"><a href="rcpp-sugar.html#rcpp-sugar-vecop"><i class="fa fa-check"></i><b>41.2</b> 向量化的运算符</a><ul>
<li class="chapter" data-level="41.2.1" data-path="rcpp-sugar.html"><a href="rcpp-sugar.html#rcpp-sugar-vecop-arith"><i class="fa fa-check"></i><b>41.2.1</b> 向量化的四则运算</a></li>
<li class="chapter" data-level="41.2.2" data-path="rcpp-sugar.html"><a href="rcpp-sugar.html#rcpp-sugar-vecop-binop"><i class="fa fa-check"></i><b>41.2.2</b> 向量化的二元逻辑运算</a></li>
<li class="chapter" data-level="41.2.3" data-path="rcpp-sugar.html"><a href="rcpp-sugar.html#rcpp-sugar-vecop-uop"><i class="fa fa-check"></i><b>41.2.3</b> 向量化的一元运算符</a></li>
</ul></li>
<li class="chapter" data-level="41.3" data-path="rcpp-sugar.html"><a href="rcpp-sugar.html#rcpp-sugar-mathfunc"><i class="fa fa-check"></i><b>41.3</b> 用Rcpp访问数学函数</a></li>
<li class="chapter" data-level="41.4" data-path="rcpp-sugar.html"><a href="rcpp-sugar.html#rcpp-sugar-any"><i class="fa fa-check"></i><b>41.4</b> 返回单一逻辑值的函数</a></li>
<li class="chapter" data-level="41.5" data-path="rcpp-sugar.html"><a href="rcpp-sugar.html#rcpp-sugar-expfunc"><i class="fa fa-check"></i><b>41.5</b> 返回糖表达式的函数</a></li>
<li class="chapter" data-level="41.6" data-path="rcpp-sugar.html"><a href="rcpp-sugar.html#rcpp-sugar-diff"><i class="fa fa-check"></i><b>41.6</b> R与Rcpp不同语法示例</a></li>
</ul></li>
<li class="chapter" data-level="42" data-path="rcpp-package.html"><a href="rcpp-package.html"><i class="fa fa-check"></i><b>42</b> 用Rcpp帮助制作R扩展包</a><ul>
<li class="chapter" data-level="42.1" data-path="rcpp-package.html"><a href="rcpp-package.html#rcpp-package-wo"><i class="fa fa-check"></i><b>42.1</b> 不用扩展包共享C++代码的方法</a></li>
<li class="chapter" data-level="42.2" data-path="rcpp-package.html"><a href="rcpp-package.html#rcpp-package-gen"><i class="fa fa-check"></i><b>42.2</b> 生成扩展包</a><ul>
<li class="chapter" data-level="42.2.1" data-path="rcpp-package.html"><a href="rcpp-package.html#rcpp-package-gen-exist"><i class="fa fa-check"></i><b>42.2.1</b> 利用已有基于Rcpp属性的源程序制作扩展包</a></li>
<li class="chapter" data-level="42.2.2" data-path="rcpp-package.html"><a href="rcpp-package.html#rcpp-package-gen-desc"><i class="fa fa-check"></i><b>42.2.2</b> DESCRIPTION文件</a></li>
<li class="chapter" data-level="42.2.3" data-path="rcpp-package.html"><a href="rcpp-package.html#rcpp-package-gen-namespace"><i class="fa fa-check"></i><b>42.2.3</b> NAMESPACE文件</a></li>
</ul></li>
<li class="chapter" data-level="42.3" data-path="rcpp-package.html"><a href="rcpp-package.html#rcpp-package-recomp"><i class="fa fa-check"></i><b>42.3</b> 重新编译</a></li>
<li class="chapter" data-level="42.4" data-path="rcpp-package.html"><a href="rcpp-package.html#rcpp-package-interface"><i class="fa fa-check"></i><b>42.4</b> 建立C++用的接口界面</a></li>
</ul></li>
<li class="part"><span><b>X 编程例子</b></span></li>
<li class="chapter" data-level="43" data-path="examples.html"><a href="examples.html"><i class="fa fa-check"></i><b>43</b> R编程例子</a><ul>
<li class="chapter" data-level="43.1" data-path="examples.html"><a href="examples.html#examples-rlang"><i class="fa fa-check"></i><b>43.1</b> R语言</a><ul>
<li class="chapter" data-level="43.1.1" data-path="examples.html"><a href="examples.html#examples-rlang-inverse"><i class="fa fa-check"></i><b>43.1.1</b> 用向量作逆变换</a></li>
<li class="chapter" data-level="43.1.2" data-path="examples.html"><a href="examples.html#examples-rlang-fibonacci"><i class="fa fa-check"></i><b>43.1.2</b> 斐波那契数列计算</a></li>
<li class="chapter" data-level="43.1.3" data-path="examples.html"><a href="examples.html#examples-rlang-permutation"><i class="fa fa-check"></i><b>43.1.3</b> 穷举所有排列</a></li>
<li class="chapter" data-level="43.1.4" data-path="examples.html"><a href="examples.html#examples-rlang-repgroup"><i class="fa fa-check"></i><b>43.1.4</b> 可重复分组方式穷举</a></li>
<li class="chapter" data-level="43.1.5" data-path="examples.html"><a href="examples.html#examples-rlang-runs"><i class="fa fa-check"></i><b>43.1.5</b> 升降连计数</a></li>
</ul></li>
<li class="chapter" data-level="43.2" data-path="examples.html"><a href="examples.html#examples-prob"><i class="fa fa-check"></i><b>43.2</b> 概率</a><ul>
<li class="chapter" data-level="43.2.1" data-path="examples.html"><a href="examples.html#examples-prob-thsage"><i class="fa fa-check"></i><b>43.2.1</b> 智者千虑必有一失</a></li>
<li class="chapter" data-level="43.2.2" data-path="examples.html"><a href="examples.html#examples-prob-coupleseats"><i class="fa fa-check"></i><b>43.2.2</b> 圆桌夫妇座位问题</a></li>
</ul></li>
<li class="chapter" data-level="43.3" data-path="examples.html"><a href="examples.html#examples-scicomp"><i class="fa fa-check"></i><b>43.3</b> 科学计算</a><ul>
<li class="chapter" data-level="43.3.1" data-path="examples.html"><a href="examples.html#examples-scicomp-citylink"><i class="fa fa-check"></i><b>43.3.1</b> 城市间最短路径</a></li>
<li class="chapter" data-level="43.3.2" data-path="examples.html"><a href="examples.html#examples-scicomp-daub"><i class="fa fa-check"></i><b>43.3.2</b> Daubechies小波函数计算</a></li>
<li class="chapter" data-level="43.3.3" data-path="examples.html"><a href="examples.html#examples-scicomp-heating"><i class="fa fa-check"></i><b>43.3.3</b> 房间加热温度变化</a></li>
</ul></li>
<li class="chapter" data-level="43.4" data-path="examples.html"><a href="examples.html#examples-statcomp"><i class="fa fa-check"></i><b>43.4</b> 统计计算</a><ul>
<li class="chapter" data-level="43.4.1" data-path="examples.html"><a href="examples.html#examples-statcomp-kernden"><i class="fa fa-check"></i><b>43.4.1</b> 核回归与核密度估计</a></li>
<li class="chapter" data-level="43.4.2" data-path="examples.html"><a href="examples.html#examples-statcomp-mcquad2d"><i class="fa fa-check"></i><b>43.4.2</b> 二维随机模拟积分</a></li>
<li class="chapter" data-level="43.4.3" data-path="examples.html"><a href="examples.html#examples-statcomp-hidfreq"><i class="fa fa-check"></i><b>43.4.3</b> 潜周期估计</a></li>
<li class="chapter" data-level="43.4.4" data-path="examples.html"><a href="examples.html#examples-statcomp-armaest"><i class="fa fa-check"></i><b>43.4.4</b> ARMA(1,1)模型估计</a></li>
<li class="chapter" data-level="43.4.5" data-path="examples.html"><a href="examples.html#examples-statcomp-varprop"><i class="fa fa-check"></i><b>43.4.5</b> VAR模型平稳性</a></li>
<li class="chapter" data-level="43.4.6" data-path="examples.html"><a href="examples.html#examples-statcomp-storereliab"><i class="fa fa-check"></i><b>43.4.6</b> 贮存可靠性评估</a></li>
</ul></li>
<li class="chapter" data-level="43.5" data-path="examples.html"><a href="examples.html#examples-datatreat"><i class="fa fa-check"></i><b>43.5</b> 数据处理</a><ul>
<li class="chapter" data-level="43.5.1" data-path="examples.html"><a href="examples.html#examples-datatreat-subscore"><i class="fa fa-check"></i><b>43.5.1</b> 小题分题型分数汇总</a></li>
<li class="chapter" data-level="43.5.2" data-path="examples.html"><a href="examples.html#examples-datatreat-cluslab"><i class="fa fa-check"></i><b>43.5.2</b> 类别编号重排</a></li>
</ul></li>
<li class="chapter" data-level="43.6" data-path="examples.html"><a href="examples.html#examples-texttr"><i class="fa fa-check"></i><b>43.6</b> 文本处理</a><ul>
<li class="chapter" data-level="43.6.1" data-path="examples.html"><a href="examples.html#examples-texttr-hongloument"><i class="fa fa-check"></i><b>43.6.1</b> 用R语言下载处理《红楼梦》htm文件</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li><a href="http://www.math.pku.edu.cn/teachers/lidf/" target="blank">编著：李东风</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">R语言教程</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="prog-io" class="section level1">
<h1><span class="header-section-number">15</span> R输入输出</h1>
<div id="p-io-simple" class="section level2">
<h2><span class="header-section-number">15.1</span> 输入输出的简单方法</h2>
<div id="p-io-simple-out" class="section level3">
<h3><span class="header-section-number">15.1.1</span> 简单的输出</h3>
<p>用<code>print()</code>函数显示某个变量或表达式的值，
如</p>
<div class="sourceCode" id="cb762"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb762-1"><a href="prog-io.html#cb762-1"></a>x &lt;-<span class="st"> </span><span class="fl">1.234</span></span>
<span id="cb762-2"><a href="prog-io.html#cb762-2"></a><span class="kw">print</span>(x)</span></code></pre></div>
<pre><code>## [1] 1.234</code></pre>
<div class="sourceCode" id="cb764"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb764-1"><a href="prog-io.html#cb764-1"></a>y &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">3</span>,<span class="dv">5</span>)</span>
<span id="cb764-2"><a href="prog-io.html#cb764-2"></a><span class="kw">print</span>(y[<span class="dv">2</span><span class="op">:</span><span class="dv">3</span>])</span></code></pre></div>
<pre><code>## [1] 3 5</code></pre>
<p>在命令行使用R时，
直接以变量名或表达式作为命令可以起到用<code>print()</code>函数显示的相同效果。</p>
<p>用<code>cat()</code>函数把字符串、变量、表达式连接起来显示，
其中变量和表达式的类型一般是标量或向量，不能是矩阵、列表等复杂数据。
如</p>
<div class="sourceCode" id="cb766"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb766-1"><a href="prog-io.html#cb766-1"></a><span class="kw">cat</span>(<span class="st">&quot;x =&quot;</span>, x, <span class="st">&quot;</span><span class="ch">\n</span><span class="st">&quot;</span>)</span></code></pre></div>
<pre><code>## x = 1.234</code></pre>
<div class="sourceCode" id="cb768"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb768-1"><a href="prog-io.html#cb768-1"></a><span class="kw">cat</span>(<span class="st">&quot;y =&quot;</span>, y, <span class="st">&quot;</span><span class="ch">\n</span><span class="st">&quot;</span>)</span></code></pre></div>
<pre><code>## y = 1 3 5</code></pre>
<p>注意<code>cat()</code>显示中需要换行需要在自变量中包含字符串<code>"\n"</code>，
即换行符。</p>
<p><code>cat()</code>默认显示在命令行窗口，
为了写入指定文件中，
在<code>cat()</code>调用中用<code>file=</code>选项，
这时如果已有文件会把原有内容覆盖，
为了在已有文件时不覆盖原有内容而是在末尾添加，
在<code>cat()</code>中使用<code>append=TRUE</code>选项。
如:</p>
<div class="sourceCode" id="cb770"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb770-1"><a href="prog-io.html#cb770-1"></a><span class="kw">cat</span>(<span class="st">&quot;=== 结果文件 ===</span><span class="ch">\n</span><span class="st">&quot;</span>, <span class="dt">file=</span><span class="st">&quot;res.txt&quot;</span>)</span>
<span id="cb770-2"><a href="prog-io.html#cb770-2"></a><span class="kw">cat</span>(<span class="st">&quot;x =&quot;</span>, x, <span class="st">&quot;</span><span class="ch">\n</span><span class="st">&quot;</span>, <span class="dt">file=</span><span class="st">&quot;res.txt&quot;</span>, <span class="dt">append=</span><span class="ot">TRUE</span>)</span></code></pre></div>
<p>函数<code>sink()</code>可以用来把命令行窗口显示的运行结果转向保存到指定的文本文件中，
如果希望保存到文件的同时也在命令行窗口显示，
使用<code>split=TRUE</code>选项。如</p>
<div class="sourceCode" id="cb771"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb771-1"><a href="prog-io.html#cb771-1"></a><span class="kw">sink</span>(<span class="st">&quot;allres.txt&quot;</span>, <span class="dt">split=</span><span class="ot">TRUE</span>)</span></code></pre></div>
<p>为了取消这样的输出文件记录，
使用不带自变量的<code>sink()</code>调用，如</p>
<div class="sourceCode" id="cb772"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb772-1"><a href="prog-io.html#cb772-1"></a><span class="kw">sink</span>()</span></code></pre></div>
<p>在R命令行环境中定义的变量、函数会保存在工作空间中，
并在退出R会话时可以保存到硬盘文件中。
用<code>save()</code>命令要求把指定的若干个变量（直接用名字，不需要表示成字符串）
保存到用<code>file=</code>指定的文件中，
随后可以用<code>load()</code>命令恢复到工作空间中。
虽然允许保存多个变量到同一文件中，
但尽可能仅保存一个变量，
而且使用变量名作为文件名。
用<code>save()</code>保存的R特殊格式的文件是通用的，
不依赖于硬件和操作系统。
如</p>
<div class="sourceCode" id="cb773"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb773-1"><a href="prog-io.html#cb773-1"></a><span class="kw">save</span>(scores, <span class="dt">file=</span><span class="st">&quot;scores.RData&quot;</span>)</span>
<span id="cb773-2"><a href="prog-io.html#cb773-2"></a><span class="kw">load</span>(<span class="st">&quot;scores.RData&quot;</span>)</span></code></pre></div>
<p>保存多个变量，如<code>x</code>, <code>zeta</code>，命令如：</p>
<div class="sourceCode" id="cb774"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb774-1"><a href="prog-io.html#cb774-1"></a><span class="kw">save</span>(x, zeta, <span class="dt">file=</span><span class="st">&quot;myvars20200315.RData&quot;</span>)</span></code></pre></div>
<p>或</p>
<div class="sourceCode" id="cb775"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb775-1"><a href="prog-io.html#cb775-1"></a><span class="kw">save</span>(<span class="dt">list =</span> <span class="kw">c</span>(<span class="st">&quot;x&quot;</span>, <span class="st">&quot;zeta&quot;</span>), <span class="dt">file=</span><span class="st">&quot;myvars20200315.RData&quot;</span>)</span></code></pre></div>
<p>对于一个数据框，
可以用<code>write.csv()</code>或<code>readr::write_csv()</code>将其保存为逗号分隔的文本文件，
这样的文件可以很容易地被其它软件识别访问，
如Microsoft Excel软件可以很容易地把这样的文件读成电子表格。
用如</p>
<div class="sourceCode" id="cb776"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb776-1"><a href="prog-io.html#cb776-1"></a>da &lt;-<span class="st"> </span><span class="kw">tibble</span>(<span class="st">&quot;name&quot;</span>=<span class="kw">c</span>(<span class="st">&quot;李明&quot;</span>, <span class="st">&quot;刘颖&quot;</span>, <span class="st">&quot;张浩&quot;</span>),</span>
<span id="cb776-2"><a href="prog-io.html#cb776-2"></a>                 <span class="st">&quot;age&quot;</span>=<span class="kw">c</span>(<span class="dv">15</span>, <span class="dv">17</span>, <span class="dv">16</span>))</span>
<span id="cb776-3"><a href="prog-io.html#cb776-3"></a><span class="kw">write_csv</span>(da, <span class="dt">path=</span><span class="st">&quot;mydata.csv&quot;</span>)</span></code></pre></div>
<p>结果生成的mydata.csv文件内容如下：</p>
<pre><code>name,age
李明,15
刘颖,17
张浩,16</code></pre>
<p>但是，在Microsoft的中文版Windows操作系统中，
默认编码是GB编码，
用<code>write_csv()</code>生成的CSV文件总是使用UTF-8编码，
系统中的MS Office 软件不能自动识别这样编码的CSV文件，
可以改用<code>write_csv_excel()</code>函数；
基本R的<code>write.csv()</code>函数不存在这个问题。</p>
</div>
<div id="p-io-simple-input" class="section level3">
<h3><span class="header-section-number">15.1.2</span> 简单的输入</h3>
<p>用<code>scan()</code>函数可以输入文本文件中的数值向量，
文件名用<code>file=</code>选项给出。
文件中数值之间以空格分开。如</p>
<div class="sourceCode" id="cb778"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb778-1"><a href="prog-io.html#cb778-1"></a><span class="kw">cat</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">12</span>, <span class="st">&quot;</span><span class="ch">\n</span><span class="st">&quot;</span>, <span class="dt">file=</span><span class="st">&quot;d:/work/x.txt&quot;</span>)</span>
<span id="cb778-2"><a href="prog-io.html#cb778-2"></a>x &lt;-<span class="st"> </span><span class="kw">scan</span>(<span class="st">&quot;d:/work/x.txt&quot;</span>)</span></code></pre></div>
<p>程序中用全路径给出了输入文件位置，
注意路径中用了正斜杠<code>/</code>作为分隔符，
如果在MS Windows环境下使用<code>\</code>作为分隔符，
在R的字符串常量中<code>\</code>必须写成<code>\\</code>。</p>
<p>如果<code>scan()</code>中忽略输入文件参数，
此函数将从命令行读入数据。
可以在一行用空格分开多个数值，
可以用多行输入直到空行结束输入。</p>
<p>这样的方法也可以用来读入矩阵。
设文件<code>mat.txt</code>包含如下矩阵内容:</p>
<pre><code>3  4  2
5 12 10
7  8  6
1  9 11</code></pre>
<p>可以先把文件内容读入到一个R向量中，
再利用<code>matrix()</code>函数转换成矩阵，
注意要使用<code>byrow=TRUE</code>选项，
而且只要指定<code>ncol</code>选项，
可以忽略<code>nrow</code>选项。如</p>
<div class="sourceCode" id="cb780"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb780-1"><a href="prog-io.html#cb780-1"></a>M &lt;-<span class="st"> </span><span class="kw">matrix</span>(<span class="kw">scan</span>(<span class="st">&quot;mat.txt&quot;</span>, <span class="dt">quiet=</span><span class="ot">TRUE</span>), <span class="dt">ncol=</span><span class="dv">3</span>, <span class="dt">byrow=</span><span class="ot">TRUE</span>)</span>
<span id="cb780-2"><a href="prog-io.html#cb780-2"></a>M</span></code></pre></div>
<p><code>scan()</code>中的<code>quite=TRUE</code>选项使得读入时不自动显示读入的数值项数。</p>
<p>上面读入数值矩阵的方法在数据量较大的情形也可以使用，
与之不同的是，
<code>read.table()</code>或<code>readr::read_table()</code>函数也可以读入这样的数据，
但是会保存成数据框而不是矩阵，
而且<code>read.table()</code>函数在读入大规模的矩阵时效率很低。</p>
</div>
</div>
<div id="p-io-read-csv" class="section level2">
<h2><span class="header-section-number">15.2</span> 读取CSV文件</h2>
<div id="p-io-read-csv-format" class="section level3">
<h3><span class="header-section-number">15.2.1</span> CSV格式</h3>
<p>对于保存在文本文件中的电子表格数据，
R可以用<code>read.csv()</code>, <code>read.table()</code>,
<code>read.delim()</code>, <code>read.fwf()</code>等函数读入,
但是建议在readr包的支持下用<code>read_csv()</code>,
<code>read_table2()</code>, <code>read_delim()</code>, <code>read_fwf()</code>等函数读入，
这些将读入的数据框保存为tibble类型，
tibble是数据框的一个变种，
改善了数据框的一些不适当的设计。
readr的读入速度比基本R软件的<code>read.csv()</code>等函数的速度快得多，
速度可以相差10倍，
也不自动将字符型列转换成因子，
不自动修改变量名为合法变量名，
不设置行名。</p>
<p>对于中小规模的数据，
CSV格式作为文件交换格式比较合适，
兼容性强，
各种数据管理软件与统计软件都可以很容易地读入和生成这样格式的文件，
但是特别大型的数据读入效率很低。</p>
<p>CSV格式的文件用逗号分隔开同一行的数据项，
一般第一行是各列的列名（变量名）。
对于数值型数据，
只要表示成数值常量形式即可。
对于字符型数据，
可以用双撇号包围起来，
也可以不用撇号包围。
但是，
如果数据项本身包含逗号，
就需要用双撇号包围。
例如，下面是一个名为<code>testcsv.csv</code>的文件内容，
其中演示了内容中有逗号、有双撇号的情况。</p>
<pre><code>id,words
1,&quot;PhD&quot;
2,Master&#39;s degree 
3,&quot;Bond,James&quot;
4,&quot;A &quot;&quot;special&quot;&quot; gift&quot;</code></pre>
<p>为读入上面的内容，只要用如下程序:</p>
<div class="sourceCode" id="cb782"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb782-1"><a href="prog-io.html#cb782-1"></a>d &lt;-<span class="st"> </span><span class="kw">read_csv</span>(<span class="st">&quot;testcsv.csv&quot;</span>)</span></code></pre></div>
<p>读入的数据框显示如下:</p>
<pre><code># A tibble: 4 × 2
     id            words
  &lt;int&gt;            &lt;chr&gt;
1     1              PhD
2     2  Master&#39;s degree
3     3       Bond,James
4     4 A &quot;special&quot; gift</code></pre>
</div>
<div id="p-io-read-csv-fromstr" class="section level3">
<h3><span class="header-section-number">15.2.2</span> 从字符串读入</h3>
<p><code>read_csv()</code>还可以从字符串读入一个数据框，如</p>
<div class="sourceCode" id="cb784"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb784-1"><a href="prog-io.html#cb784-1"></a>d.small &lt;-<span class="st"> </span><span class="kw">read_csv</span>(<span class="st">&quot;name,x,y</span></span>
<span id="cb784-2"><a href="prog-io.html#cb784-2"></a><span class="st">John, 33, 95</span></span>
<span id="cb784-3"><a href="prog-io.html#cb784-3"></a><span class="st">Kim, 21, 64</span></span>
<span id="cb784-4"><a href="prog-io.html#cb784-4"></a><span class="st">Sandy, 49, 100</span></span>
<span id="cb784-5"><a href="prog-io.html#cb784-5"></a><span class="st">&quot;</span>)</span>
<span id="cb784-6"><a href="prog-io.html#cb784-6"></a>d.small</span></code></pre></div>
<pre><code>## # A tibble: 3 x 3
##   name      x     y
##   &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt;
## 1 John     33    95
## 2 Kim      21    64
## 3 Sandy    49   100</code></pre>
</div>
<div id="p-io-read-csv-opt" class="section level3">
<h3><span class="header-section-number">15.2.3</span> <code>read_csv</code>选项</h3>
<p><code>read_csv()</code>的<code>skip=</code>选项跳过开头的若干行。
当数据不包含列名时，
只要指定<code>col_names=FALSE</code>，
变量将自动命名为<code>X1, X2, ...</code>，
也可以用<code>col_names=</code>指定各列的名字，如</p>
<div class="sourceCode" id="cb786"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb786-1"><a href="prog-io.html#cb786-1"></a>d.small &lt;-<span class="st"> </span><span class="kw">read_csv</span>(<span class="st">&quot;John, 33, 95</span></span>
<span id="cb786-2"><a href="prog-io.html#cb786-2"></a><span class="st">Kim, 21, 64</span></span>
<span id="cb786-3"><a href="prog-io.html#cb786-3"></a><span class="st">Sandy, 49, 100</span></span>
<span id="cb786-4"><a href="prog-io.html#cb786-4"></a><span class="st">&quot;</span>, <span class="dt">col_names=</span><span class="kw">c</span>(<span class="st">&quot;name&quot;</span>, <span class="st">&quot;x&quot;</span>, <span class="st">&quot;y&quot;</span>) )</span>
<span id="cb786-5"><a href="prog-io.html#cb786-5"></a>d.small</span></code></pre></div>
<pre><code>## # A tibble: 3 x 3
##   name      x     y
##   &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt;
## 1 John     33    95
## 2 Kim      21    64
## 3 Sandy    49   100</code></pre>
</div>
<div id="p-io-read-csv-enc" class="section level3">
<h3><span class="header-section-number">15.2.4</span> 编码设置</h3>
<p>CSV文件是文本文件，是有编码问题的，
尤其是中文内容的文件。
readr包的默认编码是UTF-8编码。
例如，文件<a href="bp.csv"><code>bp.csv</code></a>以GBK编码（有时称为GB18030编码，
这是中文Windows所用的中文编码）保存了如下内容：</p>
<pre><code>序号,收缩压
1,145
5,110
6, 未测
9,150
10, 拒绝
15,115</code></pre>
<p>如果直接用<code>read_csv()</code>：</p>
<div class="sourceCode" id="cb789"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb789-1"><a href="prog-io.html#cb789-1"></a>d &lt;-<span class="st"> </span><span class="kw">read_csv</span>(<span class="st">&quot;bp.csv&quot;</span>)</span></code></pre></div>
<p>可能在读入时出错，或者访问时出错。
为了读入用GBK编码的中文CSV文件，
需要利用<code>locale</code>参数和<code>locale()</code>函数：</p>
<div class="sourceCode" id="cb790"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb790-1"><a href="prog-io.html#cb790-1"></a>d &lt;-<span class="st"> </span><span class="kw">read_csv</span>(<span class="st">&quot;bp.csv&quot;</span>, </span>
<span id="cb790-2"><a href="prog-io.html#cb790-2"></a>  <span class="dt">locale=</span><span class="kw">locale</span>(<span class="dt">encoding=</span><span class="st">&quot;GBK&quot;</span>))</span></code></pre></div>
<pre><code>## Parsed with column specification:
## cols(
##   序号 = col_double(),
##   收缩压 = col_character()
## )</code></pre>
<div class="sourceCode" id="cb792"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb792-1"><a href="prog-io.html#cb792-1"></a>d</span></code></pre></div>
<pre><code>## # A tibble: 6 x 2
##    序号 收缩压
##   &lt;dbl&gt; &lt;chr&gt; 
## 1     1 145   
## 2     5 110   
## 3     6 未测  
## 4     9 150   
## 5    10 拒绝  
## 6    15 115</code></pre>
</div>
<div id="p-io-read-csv-na" class="section level3">
<h3><span class="header-section-number">15.2.5</span> 缺失值设置</h3>
<p><code>read_csv()</code>将空缺的值读入为缺失值，
将“NA”也读入为缺失值。
可以用<code>na=</code>选项改变这样的设置。
也可以将带有缺失值的列先按字符型原样读入，
然后再进行转换。</p>
<p>比如，上面的bp.csv文件中，
先将血压列按字符型读入，
再增加一列转换为数值型的列，
非数值转换为<code>NA</code>:</p>
<div class="sourceCode" id="cb794"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb794-1"><a href="prog-io.html#cb794-1"></a>d &lt;-<span class="st"> </span><span class="kw">read_csv</span>(<span class="st">&quot;bp.csv&quot;</span>, </span>
<span id="cb794-2"><a href="prog-io.html#cb794-2"></a>  <span class="dt">locale=</span><span class="kw">locale</span>(<span class="dt">encoding=</span><span class="st">&quot;GBK&quot;</span>))</span></code></pre></div>
<pre><code>## Parsed with column specification:
## cols(
##   序号 = col_double(),
##   收缩压 = col_character()
## )</code></pre>
<div class="sourceCode" id="cb796"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb796-1"><a href="prog-io.html#cb796-1"></a>d[[<span class="st">&quot;收缩压数值&quot;</span>]] &lt;-<span class="st"> </span><span class="kw">as.numeric</span>(d[[<span class="st">&quot;收缩压&quot;</span>]])</span></code></pre></div>
<pre><code>## Warning: 强制改变过程中产生了NA</code></pre>
<div class="sourceCode" id="cb798"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb798-1"><a href="prog-io.html#cb798-1"></a>d</span></code></pre></div>
<pre><code>## # A tibble: 6 x 3
##    序号 收缩压 收缩压数值
##   &lt;dbl&gt; &lt;chr&gt;       &lt;dbl&gt;
## 1     1 145           145
## 2     5 110           110
## 3     6 未测           NA
## 4     9 150           150
## 5    10 拒绝           NA
## 6    15 115           115</code></pre>
</div>
<div id="p-io-read-csv-colt" class="section level3">
<h3><span class="header-section-number">15.2.6</span> 各列类型设置</h3>
<p>对每列的类型，
readr用前1000行猜测合理的类型，
并在读取后显示猜测的每列类型。</p>
<p>但是有可能类型改变发生在1000行之后。
<code>col_types</code>选项可以指定每一列的类型，
如<code>"col_double()"</code>, <code>"col_integer()"</code>,
<code>"col_character()"</code>, <code>"col_factor()"</code>, <code>"col_date()"</code>, <code>"col_datetime"</code>等。
<code>cols()</code>函数可以用来规定各列类型，
并且有一个<code>.default</code>参数指定缺省类型。
对因子，需要在<code>col_factor()</code>中用<code>lelvels=</code>指定因子水平。</p>
<p>可以复制readr猜测的类型作为<code>col_types</code>的输入，
这样当数据变化时不会因为偶尔猜测错误而使得程序出错。如</p>
<div class="sourceCode" id="cb800"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb800-1"><a href="prog-io.html#cb800-1"></a>d &lt;-<span class="st"> </span><span class="kw">read_csv</span>(<span class="st">&quot;bp.csv&quot;</span>, <span class="dt">locale=</span><span class="kw">locale</span>(<span class="dt">encoding=</span><span class="st">&quot;GBK&quot;</span>),</span>
<span id="cb800-2"><a href="prog-io.html#cb800-2"></a>              <span class="dt">col_types=</span><span class="kw">cols</span>(</span>
<span id="cb800-3"><a href="prog-io.html#cb800-3"></a>                <span class="st">`</span><span class="dt">序号</span><span class="st">`</span> =<span class="st"> </span><span class="kw">col_integer</span>(),</span>
<span id="cb800-4"><a href="prog-io.html#cb800-4"></a>                <span class="st">`</span><span class="dt">收缩压</span><span class="st">`</span> =<span class="st"> </span><span class="kw">col_character</span>()</span>
<span id="cb800-5"><a href="prog-io.html#cb800-5"></a>              ))</span>
<span id="cb800-6"><a href="prog-io.html#cb800-6"></a>d</span></code></pre></div>
<pre><code>## # A tibble: 6 x 2
##    序号 收缩压
##   &lt;int&gt; &lt;chr&gt; 
## 1     1 145   
## 2     5 110   
## 3     6 未测  
## 4     9 150   
## 5    10 拒绝  
## 6    15 115</code></pre>
<p>当猜测的文件类型有问题的时候，
可以先将所有列都读成字符型，
然后用<code>type_convert()</code>函数转换，
如：</p>
<div class="sourceCode" id="cb802"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb802-1"><a href="prog-io.html#cb802-1"></a>d &lt;-<span class="st"> </span><span class="kw">read_csv</span>(<span class="st">&quot;filename.csv&quot;</span>,</span>
<span id="cb802-2"><a href="prog-io.html#cb802-2"></a>              <span class="dt">col_types=</span><span class="kw">cols</span>(<span class="dt">.default =</span> <span class="kw">col_character</span>()))</span>
<span id="cb802-3"><a href="prog-io.html#cb802-3"></a>d &lt;-<span class="st"> </span><span class="kw">type_convert</span>(d)</span></code></pre></div>
<p>读入有错时，对特大文件可以先少读入一些行，
用<code>nmax=</code>可以指定最多读入多少行。
调试成功后再读入整个文件。</p>
</div>
<div id="p-io-read-csv-fact" class="section level3">
<h3><span class="header-section-number">15.2.7</span> 因子类型设置</h3>
<p>设文件<a href="class.csv"><code>class.csv</code></a>内容如下：</p>
<pre><code>name,sex,age,height,weight
Alice,F,13,56.5,84
Becka,F,13,65.3,98
Gail,F,14,64.3,90
Karen,F,12,56.3,77
Kathy,F,12,59.8,84.5
Mary,F,15,66.5,112
Sandy,F,11,51.3,50.5
Sharon,F,15,62.5,112.5
Tammy,F,14,62.8,102.5
Alfred,M,14,69,112.5
Duke,M,14,63.5,102.5
Guido,M,15,67,133
James,M,12,57.3,83
Jeffrey,M,13,62.5,84
John,M,12,59,99.5
Philip,M,16,72,150
Robert,M,12,64.8,128
Thomas,M,11,57.5,85
William,M,15,66.5,112</code></pre>
<p>最简单地用<code>read_csv()</code>读入上述CSV文件，程序如:</p>
<div class="sourceCode" id="cb804"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb804-1"><a href="prog-io.html#cb804-1"></a>d.class &lt;-<span class="st"> </span><span class="kw">read_csv</span>(<span class="st">&quot;class.csv&quot;</span>)</span></code></pre></div>
<pre><code>## Parsed with column specification:
## cols(
##   name = col_character(),
##   sex = col_character(),
##   age = col_double(),
##   height = col_double(),
##   weight = col_double()
## )</code></pre>
<p>从显示看出，
读入后显示了每列的类型。
对性别变量，没有自动转换成因子，
而是保存为字符型。
为了按自己的要求转换各列类型，
用了<code>read_csv()</code>的<code>coltypes=</code>选项和<code>cols()</code>函数如下：</p>
<div class="sourceCode" id="cb806"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb806-1"><a href="prog-io.html#cb806-1"></a>d.class &lt;-<span class="st"> </span><span class="kw">read_csv</span>(</span>
<span id="cb806-2"><a href="prog-io.html#cb806-2"></a>  <span class="st">&quot;class.csv&quot;</span>, <span class="dt">col_types=</span><span class="kw">cols</span>(</span>
<span id="cb806-3"><a href="prog-io.html#cb806-3"></a>  <span class="dt">.default =</span> <span class="kw">col_double</span>(),</span>
<span id="cb806-4"><a href="prog-io.html#cb806-4"></a>  <span class="dt">name=</span><span class="kw">col_character</span>(),</span>
<span id="cb806-5"><a href="prog-io.html#cb806-5"></a>  <span class="dt">sex=</span><span class="kw">col_factor</span>(<span class="dt">levels=</span><span class="kw">c</span>(<span class="st">&quot;M&quot;</span>, <span class="st">&quot;F&quot;</span>)) ))</span>
<span id="cb806-6"><a href="prog-io.html#cb806-6"></a><span class="kw">str</span>(d.class)</span></code></pre></div>
<pre><code>## Classes &#39;spec_tbl_df&#39;, &#39;tbl_df&#39;, &#39;tbl&#39; and &#39;data.frame&#39;: 19 obs. of  5 variables:
##  $ name  : chr  &quot;Alice&quot; &quot;Becka&quot; &quot;Gail&quot; &quot;Karen&quot; ...
##  $ sex   : Factor w/ 2 levels &quot;M&quot;,&quot;F&quot;: 2 2 2 2 2 2 2 2 2 1 ...
##  $ age   : num  13 13 14 12 12 15 11 15 14 14 ...
##  $ height: num  56.5 65.3 64.3 56.3 59.8 66.5 51.3 62.5 62.8 69 ...
##  $ weight: num  84 98 90 77 84.5 ...
##  - attr(*, &quot;spec&quot;)=
##   .. cols(
##   ..   .default = col_double(),
##   ..   name = col_character(),
##   ..   sex = col_factor(levels = c(&quot;M&quot;, &quot;F&quot;), ordered = FALSE, include_na = FALSE),
##   ..   age = col_double(),
##   ..   height = col_double(),
##   ..   weight = col_double()
##   .. )</code></pre>
<p>其中<code>str()</code>函数可以显示数据框的行数(obs.)和变量数(variables)，
以及每个变量（列）的类属等信息。</p>
</div>
<div id="p-io-read-csv-date" class="section level3">
<h3><span class="header-section-number">15.2.8</span> 读入日期</h3>
<p>设文件<a href="dates.csv"><code>dates.csv</code></a>中包含如下内容，并设其文件编码为GBK:</p>
<pre><code>序号,出生日期,发病日期
1,1941/3/8,2007/1/1
2,1972/1/24,2007/1/1
3,1932/6/1,2007/1/1
4,1947/5/17,2007/1/1
5,1943/3/10,2007/1/1
6,1940/1/8,2007/1/1
7,1947/8/5,2007/1/1
8,2005/4/14,2007/1/1
9,1961/6/23,2007/1/2
10,1949/1/10,2007/1/2</code></pre>
<p>可以先把日期当作字符串读入:</p>
<div class="sourceCode" id="cb809"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb809-1"><a href="prog-io.html#cb809-1"></a>d.dates &lt;-<span class="st"> </span><span class="kw">read_csv</span>(<span class="st">&#39;dates.csv&#39;</span>, </span>
<span id="cb809-2"><a href="prog-io.html#cb809-2"></a>  <span class="dt">locale=</span><span class="kw">locale</span>(<span class="dt">encoding=</span><span class="st">&quot;GBK&quot;</span>))</span></code></pre></div>
<pre><code>## Parsed with column specification:
## cols(
##   序号 = col_double(),
##   出生日期 = col_character(),
##   发病日期 = col_character()
## )</code></pre>
<p>然后用<code>lubridate::ymd()</code>函数转换为R日期类型：</p>
<div class="sourceCode" id="cb811"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb811-1"><a href="prog-io.html#cb811-1"></a>d.dates[[<span class="st">&quot;出生日期ct&quot;</span>]] &lt;-<span class="st"> </span>lubridate<span class="op">::</span><span class="kw">ymd</span>(</span>
<span id="cb811-2"><a href="prog-io.html#cb811-2"></a>  d.dates[[<span class="st">&quot;出生日期&quot;</span>]], <span class="dt">tz=</span><span class="st">&#39;Etc/GMT+8&#39;</span>)</span>
<span id="cb811-3"><a href="prog-io.html#cb811-3"></a>d.dates[[<span class="st">&quot;发病日期ct&quot;</span>]] &lt;-<span class="st"> </span>lubridate<span class="op">::</span><span class="kw">ymd</span>(</span>
<span id="cb811-4"><a href="prog-io.html#cb811-4"></a>  d.dates[[<span class="st">&quot;发病日期&quot;</span>]], <span class="dt">tz=</span><span class="st">&#39;Etc/GMT+8&#39;</span>)</span></code></pre></div>
<p>也可以用R本身的<code>as.POSIXct</code>函数转换：</p>
<div class="sourceCode" id="cb812"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb812-1"><a href="prog-io.html#cb812-1"></a>d.dates[[<span class="st">&quot;出生日期ct&quot;</span>]] &lt;-<span class="st"> </span><span class="kw">as.POSIXct</span>(</span>
<span id="cb812-2"><a href="prog-io.html#cb812-2"></a>  d.dates[[<span class="st">&quot;出生日期&quot;</span>]], <span class="dt">format=</span><span class="st">&#39;%Y/%m/%d&#39;</span>, <span class="dt">tz=</span><span class="st">&#39;Etc/GMT+8&#39;</span>)</span>
<span id="cb812-3"><a href="prog-io.html#cb812-3"></a>d.dates[[<span class="st">&quot;发病日期ct&quot;</span>]] &lt;-<span class="st"> </span><span class="kw">as.POSIXct</span>(</span>
<span id="cb812-4"><a href="prog-io.html#cb812-4"></a>  d.dates[[<span class="st">&quot;发病日期&quot;</span>]], <span class="dt">format=</span><span class="st">&#39;%Y/%m/%d&#39;</span>, <span class="dt">tz=</span><span class="st">&#39;Etc/GMT+8&#39;</span>)</span></code></pre></div>
<p>这时保存的是POSIXct类型。
经过转换后的数据为:</p>
<div class="sourceCode" id="cb813"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb813-1"><a href="prog-io.html#cb813-1"></a>knitr<span class="op">::</span><span class="kw">kable</span>(d.dates)</span></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="center">序号</th>
<th align="left">出生日期</th>
<th align="left">发病日期</th>
<th align="left">出生日期ct</th>
<th align="left">发病日期ct</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">1</td>
<td align="left">1941/3/8</td>
<td align="left">2007/1/1</td>
<td align="left">1941-03-08</td>
<td align="left">2007-01-01</td>
</tr>
<tr class="even">
<td align="center">2</td>
<td align="left">1972/1/24</td>
<td align="left">2007/1/1</td>
<td align="left">1972-01-24</td>
<td align="left">2007-01-01</td>
</tr>
<tr class="odd">
<td align="center">3</td>
<td align="left">1932/6/1</td>
<td align="left">2007/1/1</td>
<td align="left">1932-06-01</td>
<td align="left">2007-01-01</td>
</tr>
<tr class="even">
<td align="center">4</td>
<td align="left">1947/5/17</td>
<td align="left">2007/1/1</td>
<td align="left">1947-05-17</td>
<td align="left">2007-01-01</td>
</tr>
<tr class="odd">
<td align="center">5</td>
<td align="left">1943/3/10</td>
<td align="left">2007/1/1</td>
<td align="left">1943-03-10</td>
<td align="left">2007-01-01</td>
</tr>
<tr class="even">
<td align="center">6</td>
<td align="left">1940/1/8</td>
<td align="left">2007/1/1</td>
<td align="left">1940-01-08</td>
<td align="left">2007-01-01</td>
</tr>
<tr class="odd">
<td align="center">7</td>
<td align="left">1947/8/5</td>
<td align="left">2007/1/1</td>
<td align="left">1947-08-05</td>
<td align="left">2007-01-01</td>
</tr>
<tr class="even">
<td align="center">8</td>
<td align="left">2005/4/14</td>
<td align="left">2007/1/1</td>
<td align="left">2005-04-14</td>
<td align="left">2007-01-01</td>
</tr>
<tr class="odd">
<td align="center">9</td>
<td align="left">1961/6/23</td>
<td align="left">2007/1/2</td>
<td align="left">1961-06-23</td>
<td align="left">2007-01-02</td>
</tr>
<tr class="even">
<td align="center">10</td>
<td align="left">1949/1/10</td>
<td align="left">2007/1/2</td>
<td align="left">1949-01-10</td>
<td align="left">2007-01-02</td>
</tr>
</tbody>
</table>
<p>也可以用R本身的<code>as.Date</code>函数转换：</p>
<div class="sourceCode" id="cb814"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb814-1"><a href="prog-io.html#cb814-1"></a>d.dates[[<span class="st">&quot;出生日期ct&quot;</span>]] &lt;-<span class="st"> </span><span class="kw">as.Date</span>(</span>
<span id="cb814-2"><a href="prog-io.html#cb814-2"></a>  d.dates[[<span class="st">&quot;出生日期&quot;</span>]], <span class="dt">format=</span><span class="st">&#39;%Y/%m/%d&#39;</span>)</span>
<span id="cb814-3"><a href="prog-io.html#cb814-3"></a>d.dates[[<span class="st">&quot;发病日期ct&quot;</span>]] &lt;-<span class="st"> </span><span class="kw">as.Date</span>(</span>
<span id="cb814-4"><a href="prog-io.html#cb814-4"></a>  d.dates[[<span class="st">&quot;发病日期&quot;</span>]], <span class="dt">format=</span><span class="st">&#39;%Y/%m/%d&#39;</span>)</span></code></pre></div>
<p>这时保存的是Date类型。</p>
<p>上面将日期先读入为字符型再转换是比较保险的做法。
还可以直接在<code>read_csv()</code>函数中指定某列为<code>col_date()</code>：</p>
<div class="sourceCode" id="cb815"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb815-1"><a href="prog-io.html#cb815-1"></a>d.dates &lt;-<span class="st"> </span><span class="kw">read_csv</span>(</span>
<span id="cb815-2"><a href="prog-io.html#cb815-2"></a>  <span class="st">&#39;dates.csv&#39;</span>, <span class="dt">locale=</span><span class="kw">locale</span>(<span class="dt">encoding=</span><span class="st">&quot;GBK&quot;</span>),</span>
<span id="cb815-3"><a href="prog-io.html#cb815-3"></a>  <span class="dt">col_types=</span><span class="kw">cols</span>(</span>
<span id="cb815-4"><a href="prog-io.html#cb815-4"></a>    <span class="st">`</span><span class="dt">序号</span><span class="st">`</span>=<span class="kw">col_integer</span>(),</span>
<span id="cb815-5"><a href="prog-io.html#cb815-5"></a>    <span class="st">`</span><span class="dt">出生日期</span><span class="st">`</span>=<span class="kw">col_date</span>(<span class="dt">format=</span><span class="st">&quot;%Y/%m/%d&quot;</span>),</span>
<span id="cb815-6"><a href="prog-io.html#cb815-6"></a>    <span class="st">`</span><span class="dt">发病日期</span><span class="st">`</span>=<span class="kw">col_date</span>(<span class="dt">format=</span><span class="st">&quot;%Y/%m/%d&quot;</span>)</span>
<span id="cb815-7"><a href="prog-io.html#cb815-7"></a>  ))</span>
<span id="cb815-8"><a href="prog-io.html#cb815-8"></a><span class="kw">print</span>(d.dates)</span></code></pre></div>
<pre><code>## # A tibble: 10 x 3
##     序号 出生日期   发病日期  
##    &lt;int&gt; &lt;date&gt;     &lt;date&gt;    
##  1     1 1941-03-08 2007-01-01
##  2     2 1972-01-24 2007-01-01
##  3     3 1932-06-01 2007-01-01
##  4     4 1947-05-17 2007-01-01
##  5     5 1943-03-10 2007-01-01
##  6     6 1940-01-08 2007-01-01
##  7     7 1947-08-05 2007-01-01
##  8     8 2005-04-14 2007-01-01
##  9     9 1961-06-23 2007-01-02
## 10    10 1949-01-10 2007-01-02</code></pre>
</div>
<div id="p-io-read-csv-funcs" class="section level3">
<h3><span class="header-section-number">15.2.9</span> 其它函数</h3>
<p>除了<code>read_csv()</code>函数以外，
R扩展包readr还提供了其它的从文本数据读入数据框的函数，
如<code>read_table2()</code>, <code>read_tsv()</code>, <code>read_fwf()</code>等。
这些函数读入的结果保存为tibble。
<code>read_table2()</code>读入用空格作为间隔的文本文件，
同一行的两个数据项之间可以用一个或多个空格分隔，
不需要空格个数相同，
也不需要上下对齐。
<code>read_tsv()</code>读入用制表符分隔的文件。
<code>read_fwf()</code>读入上下对齐的文本文件。</p>
<p>另外，
<code>read_lines()</code>函数将文本文件各行读入为一个字符型向量。
<code>read_file()</code>将文件内容读入成一整个字符串，
<code>read_file_raw()</code>可以不管文件编码将文件读入为一个二进制字符串。</p>
<p>对特别大的文本格式数据，
data.table扩展包的<code>fread()</code>读入速度更快。</p>
<p>readr包的<code>write_excel_csv()</code>函数将tibble保存为csv文件，
总是使用UTF-8编码，结果可以被MS Office读取。</p>
<p>文本格式的文件都不适用于大型数据的读取与保存。
大型数据可以通过数据库接口访问，
可以用R的<code>save()</code>和<code>load()</code>函数按照R的格式访问，
还有一些特殊的针对大数据集的R扩展包。</p>
</div>
</div>
<div id="p-io-excel" class="section level2">
<h2><span class="header-section-number">15.3</span> Excel表访问</h2>
<div id="p-io-excel-csv" class="section level3">
<h3><span class="header-section-number">15.3.1</span> 借助于文本格式</h3>
<p>为了把Microsoft Excel格式的数据读入到R中，
最容易的办法是在Excel软件中把数据表转存为CSV格式，
然后用<code>read.csv()</code>读取。</p>
<p>为了把R的数据框保存为Excel格式，
只要用<code>write.csv()</code>把数据框保存成CSV格式，然后在Excel中打开即可。
例如，下面的程序演示了<code>write.csv()</code>的使用:</p>
<div class="sourceCode" id="cb817"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb817-1"><a href="prog-io.html#cb817-1"></a>d1 &lt;-<span class="st"> </span><span class="kw">tibble</span>(<span class="st">&quot;学号&quot;</span>=<span class="kw">c</span>(<span class="st">&quot;101&quot;</span>, <span class="st">&quot;103&quot;</span>, <span class="st">&quot;104&quot;</span>),</span>
<span id="cb817-2"><a href="prog-io.html#cb817-2"></a>             <span class="st">&quot;数学&quot;</span>=<span class="kw">c</span>(<span class="dv">85</span>, <span class="dv">60</span>, <span class="dv">73</span>), </span>
<span id="cb817-3"><a href="prog-io.html#cb817-3"></a>             <span class="st">&quot;语文&quot;</span>=<span class="kw">c</span>(<span class="dv">90</span>, <span class="dv">78</span>, <span class="dv">80</span>))</span>
<span id="cb817-4"><a href="prog-io.html#cb817-4"></a><span class="kw">write.csv</span>(d1, <span class="dt">file=</span><span class="st">&quot;tmp1.csv&quot;</span>, <span class="dt">row.names=</span><span class="ot">FALSE</span>)</span></code></pre></div>
<p>保存在文件中的结果显示如下：</p>
<pre><code>学号,数学,语文
101,85,90
103,60,78
104,73,80</code></pre>
</div>
<div id="p-io-excel-clip" class="section level3">
<h3><span class="header-section-number">15.3.2</span> 使用剪贴板</h3>
<p>为了把Excel软件中数据表的选中区域读入到R中，
可以借助于剪贴板。
在Excel中复制选中的区域，然后在R中用如</p>
<div class="sourceCode" id="cb819"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb819-1"><a href="prog-io.html#cb819-1"></a>myDF &lt;-<span class="st"> </span><span class="kw">read.delim</span>(<span class="st">&quot;clipboard&quot;</span>)</span></code></pre></div>
<p>就可以把选中部分转换成一个R的数据框。
如果复制的区域不含列名，
应加上<code>header=FALSE</code>选项。</p>
<p>这种方法也可以从R中复制数据到在Excel中打开的电子表格中，
例如</p>
<div class="sourceCode" id="cb820"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb820-1"><a href="prog-io.html#cb820-1"></a><span class="kw">write.table</span>(iris, <span class="dt">file=</span><span class="st">&quot;clipboard&quot;</span>, <span class="dt">sep =</span> <span class="st">&quot;</span><span class="ch">\t</span><span class="st">&quot;</span>, <span class="dt">col.names =</span> <span class="ot">NA</span>)</span></code></pre></div>
<p>首先把指定的数据框（这里是iris）写入到了剪贴板，
然后在用Excel软件打开的工作簿中只要粘贴就可以。
上述程序中<code>write.table()</code>函数把指定的数据框写入到指定的文件中,
其中的<code>col.names=NA</code>选项是一个特殊的约定，
这时保存的文件中第一行是列名，
如果有行名的话，行名所在的列对应的列名是空白的（但是存在此项）。</p>
<p>如果从R中复制数据框到打开的Excel文件中时不带行名，
但是带有列名，可以写这样一个通用函数</p>
<div class="sourceCode" id="cb821"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb821-1"><a href="prog-io.html#cb821-1"></a>write.clipboard &lt;-<span class="st"> </span><span class="cf">function</span>(df){ </span>
<span id="cb821-2"><a href="prog-io.html#cb821-2"></a>  <span class="kw">write.table</span>(df, <span class="dt">file=</span><span class="st">&quot;clipboard&quot;</span>, <span class="dt">sep=</span><span class="st">&quot;</span><span class="ch">\t</span><span class="st">&quot;</span>, </span>
<span id="cb821-3"><a href="prog-io.html#cb821-3"></a>              <span class="dt">row.names=</span><span class="ot">FALSE</span>)</span>
<span id="cb821-4"><a href="prog-io.html#cb821-4"></a>}</span></code></pre></div>
</div>
<div id="p-io-excel-readxl" class="section level3">
<h3><span class="header-section-number">15.3.3</span> 利用readxl扩展包</h3>
<p>readxl扩展包的<code>readxl()</code>函数利用独立的C和C++库函数读入.xls和.xlsx格式的Excel文件。一般格式为</p>
<div class="sourceCode" id="cb822"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb822-1"><a href="prog-io.html#cb822-1"></a><span class="kw">read_excel</span>(path, <span class="dt">sheet =</span> <span class="dv">1</span>, <span class="dt">col_names =</span> <span class="ot">TRUE</span>, </span>
<span id="cb822-2"><a href="prog-io.html#cb822-2"></a>           <span class="dt">col_types =</span> <span class="ot">NULL</span>, <span class="dt">na =</span> <span class="st">&quot;&quot;</span>,  <span class="dt">skip =</span> <span class="dv">0</span>)</span></code></pre></div>
<p>结果返回读入的表格为一个数据框。
各个自变量为：</p>
<ul>
<li><p><code>path</code>: 要读入的Excel文件名，可以是全路径，路径格式要符合所用操作系统要求。</p></li>
<li><p><code>sheet</code>: 要读入哪一个工作簿(sheet)，可以是整数序号，也可以是工作簿名称的字符串。</p></li>
<li><p><code>col_names</code>: 是否用第一行内容作为列名，缺省为是。</p></li>
<li><p><code>col_types</code>: 可以在读入时人为指定各列的数据类型，缺省时从各列内容自动判断，有可能会不够准确。人为指定时，指定一个对应于各列的字符型向量，元素可取值为:</p>
<ul>
<li><code>blank</code>: 自动判断该列；</li>
<li><code>numeric</code>: 数值型；</li>
<li><code>date</code>: 日期；</li>
<li><code>text</code>: 字符型。</li>
</ul></li>
</ul>
<p>writexl扩展包可以用来将数据框保存为Excel格式。
除了readxl和writexl扩展包，
XLConnect, xlsx, tidyxl也可以进行与Excel文件或者Excel软件的交互。</p>
</div>
</div>
<div id="p-io-file" class="section level2">
<h2><span class="header-section-number">15.4</span> 文件访问</h2>
<div id="p-io-file-conn" class="section level3">
<h3><span class="header-section-number">15.4.1</span> 连接</h3>
<p>输入输出可以针对命令行，针对文件，R支持扩展的文件类型，
称为“连接(connection)”。</p>
<p>函数<code>file()</code>生成到一个普通文件的连接，
函数<code>url()</code>生成一个到指定的URL的连接，
函数<code>gzfile</code>, <code>bzfile</code>, <code>xzfile</code>,
<code>unz</code>支持对 压缩过的文件的访问（不是压缩包，只对一个文件压缩）。这些函数大概的用法如下：</p>
<div class="sourceCode" id="cb823"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb823-1"><a href="prog-io.html#cb823-1"></a><span class="kw">file</span>(<span class="st">&quot;path&quot;</span>, <span class="dt">open=</span><span class="st">&quot;&quot;</span>, <span class="dt">blocking=</span>T,</span>
<span id="cb823-2"><a href="prog-io.html#cb823-2"></a>     <span class="dt">encoding =</span> <span class="kw">getOption</span>(<span class="st">&quot;encoding&quot;</span>), </span>
<span id="cb823-3"><a href="prog-io.html#cb823-3"></a>     <span class="dt">raw =</span> <span class="ot">FALSE</span>)</span>
<span id="cb823-4"><a href="prog-io.html#cb823-4"></a></span>
<span id="cb823-5"><a href="prog-io.html#cb823-5"></a><span class="kw">url</span>(description, <span class="dt">open =</span> <span class="st">&quot;&quot;</span>, <span class="dt">blocking =</span> <span class="ot">TRUE</span>,</span>
<span id="cb823-6"><a href="prog-io.html#cb823-6"></a>    <span class="dt">encoding =</span> <span class="kw">getOption</span>(<span class="st">&quot;encoding&quot;</span>))</span>
<span id="cb823-7"><a href="prog-io.html#cb823-7"></a></span>
<span id="cb823-8"><a href="prog-io.html#cb823-8"></a><span class="kw">textConnection</span>(description, <span class="dt">open=</span><span class="st">&quot;r&quot;</span>, </span>
<span id="cb823-9"><a href="prog-io.html#cb823-9"></a>    <span class="dt">local =</span> <span class="ot">FALSE</span>,</span>
<span id="cb823-10"><a href="prog-io.html#cb823-10"></a>    <span class="dt">encoding =</span> <span class="kw">c</span>(<span class="st">&quot;&quot;</span>, <span class="st">&quot;bytes&quot;</span>, <span class="st">&quot;UTF-8&quot;</span>))</span>
<span id="cb823-11"><a href="prog-io.html#cb823-11"></a></span>
<span id="cb823-12"><a href="prog-io.html#cb823-12"></a><span class="kw">gzfile</span>(description, <span class="dt">open =</span> <span class="st">&quot;&quot;</span>, </span>
<span id="cb823-13"><a href="prog-io.html#cb823-13"></a>       <span class="dt">encoding =</span> <span class="kw">getOption</span>(<span class="st">&quot;encoding&quot;</span>),</span>
<span id="cb823-14"><a href="prog-io.html#cb823-14"></a>       <span class="dt">compression =</span> <span class="dv">6</span>)</span>
<span id="cb823-15"><a href="prog-io.html#cb823-15"></a></span>
<span id="cb823-16"><a href="prog-io.html#cb823-16"></a><span class="kw">bzfile</span>(description, <span class="dt">open =</span> <span class="st">&quot;&quot;</span>, </span>
<span id="cb823-17"><a href="prog-io.html#cb823-17"></a>       <span class="dt">encoding =</span> <span class="kw">getOption</span>(<span class="st">&quot;encoding&quot;</span>),</span>
<span id="cb823-18"><a href="prog-io.html#cb823-18"></a>       <span class="dt">compression =</span> <span class="dv">9</span>)</span>
<span id="cb823-19"><a href="prog-io.html#cb823-19"></a></span>
<span id="cb823-20"><a href="prog-io.html#cb823-20"></a><span class="kw">xzfile</span>(description, <span class="dt">open =</span> <span class="st">&quot;&quot;</span>, </span>
<span id="cb823-21"><a href="prog-io.html#cb823-21"></a>       <span class="dt">encoding =</span> <span class="kw">getOption</span>(<span class="st">&quot;encoding&quot;</span>),</span>
<span id="cb823-22"><a href="prog-io.html#cb823-22"></a>       <span class="dt">compression =</span> <span class="dv">6</span>)</span>
<span id="cb823-23"><a href="prog-io.html#cb823-23"></a></span>
<span id="cb823-24"><a href="prog-io.html#cb823-24"></a><span class="kw">unz</span>(description, filename, <span class="dt">open =</span> <span class="st">&quot;&quot;</span>,</span>
<span id="cb823-25"><a href="prog-io.html#cb823-25"></a>    <span class="dt">encoding =</span> <span class="kw">getOption</span>(<span class="st">&quot;encoding&quot;</span>))</span></code></pre></div>
<p>生成连接的函数不自动打开连接。
给定一个未打开的连接， 读取函数从中读取时会自动打开连接，
函数结束时自动关闭连接。
用<code>open()</code>函数打开连接，返回一个句柄；
生成连接时可以用<code>open</code>参数要求打开连接。
要多次从一个连接读取时就应该先打开连接，
读取完毕用<code>close</code>函数关闭。</p>
<p>函数<code>textConnection()</code>打开一个字符串用于读写。</p>
<p>在生成连接与打开连接的函数中用<code>open</code>参数指定打开方式，
取值为：</p>
<ul>
<li><code>r</code>—文本型只读;</li>
<li><code>w</code>—文本型只写;</li>
<li><code>a</code>—文本型末尾添加;</li>
<li><code>rb</code>—二进制只读;</li>
<li><code>wb</code>—二进制只写;</li>
<li><code>ab</code>—二进制末尾添加;</li>
<li><code>r+</code>或<code>r+b</code>—允许读和写;</li>
<li><code>w+</code>或<code>w+b</code>—允许读和写，但刚打开时清空文件;</li>
<li><code>a+</code>或<code>a+b</code>—末尾添加并允许读。</li>
</ul>
</div>
<div id="p-io-file-text" class="section level3">
<h3><span class="header-section-number">15.4.2</span> 文本文件访问</h3>
<p>函数<code>readLines()</code>、<code>readr::read_lines()</code>、<code>scan()</code>可以从一个文本型连接读取。</p>
<p>给定一个打开的连接<code>con</code>或文件名，
用<code>readLines</code>函数可以把文件各行读入为字符型向量的各个元素，
不包含文件中用来分开各行的换行标志。
可以指定要读的行数。 如</p>
<div class="sourceCode" id="cb824"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb824-1"><a href="prog-io.html#cb824-1"></a>ll &lt;-<span class="st"> </span><span class="kw">readLines</span>(<span class="st">&quot;class.csv&quot;</span>)</span>
<span id="cb824-2"><a href="prog-io.html#cb824-2"></a><span class="kw">print</span>(<span class="kw">head</span>(ll, <span class="dv">3</span>))</span></code></pre></div>
<pre><code>## [1] &quot;name,sex,age,height,weight&quot; &quot;Alice,F,13,56.5,84&quot;        
## [3] &quot;Becka,F,13,65.3,98&quot;</code></pre>
<p>用<code>readr</code>包的<code>read_lines()</code>如：</p>
<div class="sourceCode" id="cb826"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb826-1"><a href="prog-io.html#cb826-1"></a>ll &lt;-<span class="st"> </span>readr<span class="op">::</span><span class="kw">read_lines</span>(<span class="st">&quot;class.csv&quot;</span>)</span>
<span id="cb826-2"><a href="prog-io.html#cb826-2"></a><span class="kw">print</span>(<span class="kw">head</span>(ll, <span class="dv">3</span>))</span></code></pre></div>
<pre><code>## [1] &quot;name,sex,age,height,weight&quot; &quot;Alice,F,13,56.5,84&quot;        
## [3] &quot;Becka,F,13,65.3,98&quot;</code></pre>
<p>用<code>writeLines</code>函数可以把一个字符型向量各元素作为不同行写入一个文本型连接。如</p>
<div class="sourceCode" id="cb828"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb828-1"><a href="prog-io.html#cb828-1"></a>vnames &lt;-<span class="st"> </span><span class="kw">strsplit</span>(ll, <span class="st">&quot;,&quot;</span>)[[<span class="dv">1</span>]]</span>
<span id="cb828-2"><a href="prog-io.html#cb828-2"></a><span class="kw">writeLines</span>(vnames, <span class="st">&quot;class-names.txt&quot;</span>)</span></code></pre></div>
<p>其中的第二参数应该是一个打开的文本型写入连接，
但是可以直接给出一个要写入的文件名。
用readr包的<code>write_lines()</code>:</p>
<div class="sourceCode" id="cb829"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb829-1"><a href="prog-io.html#cb829-1"></a>readr<span class="op">::</span><span class="kw">write_lines</span>(vnames, <span class="st">&quot;class-names.txt&quot;</span>)</span></code></pre></div>
<p>用scan函数读入用空格和空行分隔的字符串向量：</p>
<div class="sourceCode" id="cb830"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb830-1"><a href="prog-io.html#cb830-1"></a>vnames &lt;-<span class="st"> </span><span class="kw">scan</span>(</span>
<span id="cb830-2"><a href="prog-io.html#cb830-2"></a>  <span class="st">&quot;class-names.txt&quot;</span>, <span class="dt">what=</span><span class="kw">character</span>(),</span>
<span id="cb830-3"><a href="prog-io.html#cb830-3"></a>  <span class="dt">quiet=</span><span class="ot">TRUE</span>)</span>
<span id="cb830-4"><a href="prog-io.html#cb830-4"></a>vnames</span>
<span id="cb830-5"><a href="prog-io.html#cb830-5"></a><span class="co">## [1] &quot;name&quot;   &quot;sex&quot;    &quot;age&quot;    &quot;height&quot; &quot;weight&quot;</span></span></code></pre></div>
</div>
<div id="p-io-enc-batch" class="section level3">
<h3><span class="header-section-number">15.4.3</span> 文本文件分批读写</h3>
<p><code>readLines()</code>、<code>readr::read_lines()</code>、
<code>writeLines()</code>、<code>readr::write_lines()</code>支持分批读写。
这需要预先打开要读取和写入的文件，
所有内容都处理一遍以后关闭读取和写入的文件。</p>
<p>使用<code>file()</code>函数打开文件用于读写，
使用<code>close()</code>函数关闭打开的文件。
打开文件时可以用<code>encoding=</code>指定编码，
但是<code>readr::read_lines()</code>不支持分批读入。</p>
<p>下面的程序每次从<code>class.csv</code>读入至多10行，
不加处理地写入<code>tmp.csv</code>中，
使用<code>readLines()</code>和<code>writeLines()</code>:</p>
<div class="sourceCode" id="cb831"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb831-1"><a href="prog-io.html#cb831-1"></a>fin &lt;-<span class="st"> </span><span class="kw">file</span>(<span class="st">&quot;class.csv&quot;</span>, <span class="st">&quot;rt&quot;</span>)</span>
<span id="cb831-2"><a href="prog-io.html#cb831-2"></a>fout &lt;-<span class="st"> </span><span class="kw">file</span>(<span class="st">&quot;tmp.csv&quot;</span>, <span class="st">&quot;wt&quot;</span>)</span>
<span id="cb831-3"><a href="prog-io.html#cb831-3"></a><span class="cf">repeat</span>{</span>
<span id="cb831-4"><a href="prog-io.html#cb831-4"></a>  lines &lt;-<span class="st"> </span><span class="kw">readLines</span>(fin, <span class="dt">n=</span><span class="dv">10</span>)</span>
<span id="cb831-5"><a href="prog-io.html#cb831-5"></a>  <span class="kw">cat</span>(<span class="st">&quot;Read&quot;</span>, <span class="kw">length</span>(lines), <span class="st">&quot;lines.&quot;</span>, <span class="st">&quot;</span><span class="ch">\n</span><span class="st">&quot;</span>)</span>
<span id="cb831-6"><a href="prog-io.html#cb831-6"></a>  <span class="cf">if</span>(<span class="kw">length</span>(lines)<span class="op">==</span><span class="dv">0</span>) <span class="cf">break</span></span>
<span id="cb831-7"><a href="prog-io.html#cb831-7"></a>  <span class="kw">writeLines</span>(lines, fout)</span>
<span id="cb831-8"><a href="prog-io.html#cb831-8"></a>}</span>
<span id="cb831-9"><a href="prog-io.html#cb831-9"></a><span class="kw">close</span>(fout)</span>
<span id="cb831-10"><a href="prog-io.html#cb831-10"></a><span class="kw">close</span>(fin)</span></code></pre></div>
<p><code>readr::read_lines()</code>尽管文档中可以从一个文件连接读入，
但经测试发现不支持。
<code>readr::write_lines()</code>可以用<code>append=TRUE</code>选项向一个文件分批写出。</p>
</div>
<div id="p-io-file-bin" class="section level3">
<h3><span class="header-section-number">15.4.4</span> 二进制文件访问</h3>
<p>函数<code>save</code>用来保存R变量到文件，
函数<code>load</code>用来从文件中读取保存的R变量。</p>
<p>函数<code>readBin</code>和<code>writeBin</code>对R变量进行二进制文件存取。</p>
<p>如果要访问其它软件系统的二进制文件，
请参考R手册中的“R Data Import/Export Manual”。</p>
</div>
<div id="p-io-file-textcon" class="section level3">
<h3><span class="header-section-number">15.4.5</span> 字符型连接</h3>
<p>函数<code>textConnection</code>打开一个字符串用于读取或写入，
是很好用的一个R功能。
可以把一个小文件存放在一个长字符串中，
然后用<code>textConnection</code>读取，如</p>
<div class="sourceCode" id="cb832"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb832-1"><a href="prog-io.html#cb832-1"></a>fstr &lt;-</span>
<span id="cb832-2"><a href="prog-io.html#cb832-2"></a><span class="st">&quot;name,score</span></span>
<span id="cb832-3"><a href="prog-io.html#cb832-3"></a><span class="st">王芳,78</span></span>
<span id="cb832-4"><a href="prog-io.html#cb832-4"></a><span class="st">孙莉,85</span></span>
<span id="cb832-5"><a href="prog-io.html#cb832-5"></a><span class="st">张聪,80</span></span>
<span id="cb832-6"><a href="prog-io.html#cb832-6"></a><span class="st">&quot;</span></span>
<span id="cb832-7"><a href="prog-io.html#cb832-7"></a>d &lt;-<span class="st"> </span><span class="kw">read.csv</span>(<span class="kw">textConnection</span>(fstr), <span class="dt">header=</span>T)</span>
<span id="cb832-8"><a href="prog-io.html#cb832-8"></a><span class="kw">print</span>(d)</span></code></pre></div>
<p>读取用的<code>textConnection</code>的参数是一个字符型变量。</p>
<p>在整理输出结果时，经常可以向一个字符型变量连接写入，
最后再输出整个字符串值。
例如：</p>
<div class="sourceCode" id="cb833"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb833-1"><a href="prog-io.html#cb833-1"></a>tc &lt;-<span class="st"> </span><span class="kw">textConnection</span>(<span class="st">&quot;sres&quot;</span>, <span class="dt">open=</span><span class="st">&quot;w&quot;</span>)</span>
<span id="cb833-2"><a href="prog-io.html#cb833-2"></a><span class="kw">cat</span>(<span class="st">&quot;Trial of text connection.</span><span class="ch">\n</span><span class="st">&quot;</span>, <span class="dt">file=</span>tc)</span>
<span id="cb833-3"><a href="prog-io.html#cb833-3"></a><span class="kw">cat</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">10</span>, <span class="st">&quot;</span><span class="ch">\n</span><span class="st">&quot;</span>, <span class="dt">file=</span>tc, <span class="dt">append=</span>T)</span>
<span id="cb833-4"><a href="prog-io.html#cb833-4"></a><span class="kw">close</span>(tc)</span>
<span id="cb833-5"><a href="prog-io.html#cb833-5"></a><span class="kw">print</span>(sres)</span></code></pre></div>
<p>注意写入用的<code>textConnection</code>
的第一个参数是保存了将要写入的字符型变量名的字符串，
而不是变量名本身，
第二个参数表明是写入操作，
使用完毕需要用<code>close</code>关闭。</p>
</div>
</div>
<div id="p-io-enc" class="section level2">
<h2><span class="header-section-number">15.5</span> 中文编码问题</h2>
<p>读写文本格式的数据，
或者用<code>readLines()</code>、<code>readr::read_lines()</code>读写文本文件，
可能会遇到中文编码不匹配的问题。
这里总结一些常用解决方法，
所用的操作系统为中文Windows10,
在RStudio中运行，R版本为3.4.3。
常见的中文编码有GBK(或GB18030, GB)，
UTF-8，
UTF-8有BOM标志等。</p>
<p>可以用<code>iconvlist()</code>查看R支持的编码名称。</p>
<p>假设有如下的含有中文的文件：</p>
<pre><code>序号,收缩压
1,145
5,110
6, 未测
9,150
10, 拒绝
15,115</code></pre>
<p>这个文件是在中文版MS Office的Excel软件中输入后，
用Office的“文件——另存为——.csv格式”生成的，
结果的编码是GBK编码，
或GB18030编码。
文件下载：
<a href="bp.csv">bp.csv</a></p>
<p>我们用工具软件将其转换成UTF-8无BOM格式，下载链接：
<a href="bp-utf8nobom.csv">bp-utf8nobom.csv</a></p>
<p>转为UTF-8有BOM格式，下载链接：
<a href="bp-utf8bom.csv">bp-utf8bom.csv</a></p>
<div id="p-io-enc-base" class="section level3">
<h3><span class="header-section-number">15.5.1</span> 用基本R的读取函数读取</h3>
<p>与所用操作系统默认编码相同的文本文件，
R基本软件的<code>read.csv()</code>、<code>read.table()</code>、<code>readLines()</code>函数都可以正常读取，
所以<code>bp.csv</code>文件可以正常读取，如</p>
<div class="sourceCode" id="cb835"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb835-1"><a href="prog-io.html#cb835-1"></a><span class="kw">read.csv</span>(<span class="st">&quot;bp.csv&quot;</span>)</span></code></pre></div>
<pre><code>##   序号 收缩压
## 1    1    145
## 2    5    110
## 3    6   未测
## 4    9    150
## 5   10   拒绝
## 6   15    115</code></pre>
<div class="sourceCode" id="cb837"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb837-1"><a href="prog-io.html#cb837-1"></a><span class="kw">readLines</span>(<span class="st">&quot;bp.csv&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;序号,收缩压&quot; &quot;1,145&quot;       &quot;5,110&quot;       &quot;6, 未测&quot;     &quot;9,150&quot;      
## [6] &quot;10, 拒绝&quot;    &quot;15,115&quot;</code></pre>
<p>但是另外两个以UTF-8编码的文件则不能正确读入：</p>
<div class="sourceCode" id="cb839"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb839-1"><a href="prog-io.html#cb839-1"></a><span class="kw">read.csv</span>(<span class="st">&quot;bp-utf8nobom.csv&quot;</span>)</span>
<span id="cb839-2"><a href="prog-io.html#cb839-2"></a><span class="co">## Error in make.names(col.names, unique = TRUE) : invalid multibyte string 2</span></span></code></pre></div>
<div class="sourceCode" id="cb840"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb840-1"><a href="prog-io.html#cb840-1"></a><span class="kw">readLines</span>(<span class="st">&quot;bp-utf8bom.csv&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;锘垮簭鍙\xb7,鏀剁缉鍘\x8b&quot; &quot;1,145&quot;                    
## [3] &quot;5,110&quot;                     &quot;6, 鏈祴&quot;                 
## [5] &quot;9,150&quot;                     &quot;10, 鎷掔粷&quot;               
## [7] &quot;15,115&quot;</code></pre>
<p>读取UTF-8编码无BOM的文件时，
在<code>read.csv()</code>和<code>read.table()</code>等函数中加<code>fileEncoding="UTF-8"</code>选项可以纠正编码问题：</p>
<div class="sourceCode" id="cb842"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb842-1"><a href="prog-io.html#cb842-1"></a><span class="kw">read.csv</span>(<span class="st">&quot;bp-utf8nobom.csv&quot;</span>, <span class="dt">fileEncoding=</span><span class="st">&quot;UTF-8&quot;</span>)</span></code></pre></div>
<pre><code>##   序号 收缩压
## 1    1    145
## 2    5    110
## 3    6   未测
## 4    9    150
## 5   10   拒绝
## 6   15    115</code></pre>
<p>读取UTF-8编码无BOM或者有BOM的文件时，
在<code>readLines()</code>函数中加<code>encoding="UTF-8"</code>选项可以纠正编码问题：</p>
<div class="sourceCode" id="cb844"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb844-1"><a href="prog-io.html#cb844-1"></a><span class="kw">readLines</span>(<span class="st">&quot;bp-utf8nobom.csv&quot;</span>, <span class="dt">encoding=</span><span class="st">&quot;UTF-8&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;序号,收缩压&quot; &quot;1,145&quot;       &quot;5,110&quot;       &quot;6, 未测&quot;     &quot;9,150&quot;      
## [6] &quot;10, 拒绝&quot;    &quot;15,115&quot;</code></pre>
<div class="sourceCode" id="cb846"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb846-1"><a href="prog-io.html#cb846-1"></a><span class="kw">readLines</span>(<span class="st">&quot;bp-utf8bom.csv&quot;</span>, <span class="dt">encoding=</span><span class="st">&quot;UTF-8&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;&lt;U+FEFF&gt;序号,收缩压&quot; &quot;1,145&quot;       &quot;5,110&quot;       &quot;6, 未测&quot;     &quot;9,150&quot;      
## [6] &quot;10, 拒绝&quot;    &quot;15,115&quot;</code></pre>
<p>但是，UTF-8有BOM标志的文本文件不能被<code>read.csv()</code>识别：</p>
<div class="sourceCode" id="cb848"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb848-1"><a href="prog-io.html#cb848-1"></a><span class="kw">read.csv</span>(<span class="st">&quot;bp-utf8bom.csv&quot;</span>, <span class="dt">fileEncoding=</span><span class="st">&quot;UTF-8&quot;</span>)</span>
<span id="cb848-2"><a href="prog-io.html#cb848-2"></a><span class="co">## invalid input found on input connection &quot;bp-utf8bom.csv&quot;</span></span>
<span id="cb848-3"><a href="prog-io.html#cb848-3"></a><span class="co">##   incomplete final line found by readTableHeader on &quot;bp-utf8bom.csv&quot;</span></span></code></pre></div>
</div>
<div id="p-io-enc-readr" class="section level3">
<h3><span class="header-section-number">15.5.2</span> 用readr包读取</h3>
<p>readr包的<code>read_csv()</code>、<code>read_table2()</code>、<code>read_lines()</code>函数默认从UTF-8编码的文件中读取，
无BOM或者有BOM都可以。
如：</p>
<div class="sourceCode" id="cb849"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb849-1"><a href="prog-io.html#cb849-1"></a><span class="kw">read_csv</span>(<span class="st">&quot;bp-utf8nobom.csv&quot;</span>)</span></code></pre></div>
<pre><code>## Parsed with column specification:
## cols(
##   序号 = col_double(),
##   收缩压 = col_character()
## )</code></pre>
<pre><code>## # A tibble: 6 x 2
##    序号 收缩压
##   &lt;dbl&gt; &lt;chr&gt; 
## 1     1 145   
## 2     5 110   
## 3     6 未测  
## 4     9 150   
## 5    10 拒绝  
## 6    15 115</code></pre>
<div class="sourceCode" id="cb852"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb852-1"><a href="prog-io.html#cb852-1"></a><span class="kw">read_csv</span>(<span class="st">&quot;bp-utf8bom.csv&quot;</span>)</span></code></pre></div>
<pre><code>## Parsed with column specification:
## cols(
##   序号 = col_double(),
##   收缩压 = col_character()
## )</code></pre>
<pre><code>## # A tibble: 6 x 2
##    序号 收缩压
##   &lt;dbl&gt; &lt;chr&gt; 
## 1     1 145   
## 2     5 110   
## 3     6 未测  
## 4     9 150   
## 5    10 拒绝  
## 6    15 115</code></pre>
<div class="sourceCode" id="cb855"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb855-1"><a href="prog-io.html#cb855-1"></a><span class="kw">read_lines</span>(<span class="st">&quot;bp-utf8nobom.csv&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;序号,收缩压&quot; &quot;1,145&quot;       &quot;5,110&quot;       &quot;6, 未测&quot;     &quot;9,150&quot;      
## [6] &quot;10, 拒绝&quot;    &quot;15,115&quot;</code></pre>
<div class="sourceCode" id="cb857"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb857-1"><a href="prog-io.html#cb857-1"></a><span class="kw">read_lines</span>(<span class="st">&quot;bp-utf8bom.csv&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;序号,收缩压&quot; &quot;1,145&quot;       &quot;5,110&quot;       &quot;6, 未测&quot;     &quot;9,150&quot;      
## [6] &quot;10, 拒绝&quot;    &quot;15,115&quot;</code></pre>
<p>但是，对GBK编码的文件，不能直接读取：</p>
<div class="sourceCode" id="cb859"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb859-1"><a href="prog-io.html#cb859-1"></a><span class="kw">read_csv</span>(<span class="st">&quot;bp.csv&quot;</span>)</span>
<span id="cb859-2"><a href="prog-io.html#cb859-2"></a><span class="co">## Parsed with column specification:</span></span>
<span id="cb859-3"><a href="prog-io.html#cb859-3"></a><span class="co">## cols(</span></span>
<span id="cb859-4"><a href="prog-io.html#cb859-4"></a><span class="co">##   `&lt;d0&gt;&lt;f2&gt;&lt;U+00BA&gt;&lt;c5&gt;` = col_double(),</span></span>
<span id="cb859-5"><a href="prog-io.html#cb859-5"></a><span class="co">##   `&lt;ca&gt;&lt;d5&gt;&lt;cb&gt;&lt;f5&gt;&lt;U+0479&gt;` = col_character()</span></span>
<span id="cb859-6"><a href="prog-io.html#cb859-6"></a><span class="co">## )</span></span>
<span id="cb859-7"><a href="prog-io.html#cb859-7"></a><span class="co">## Error in nchar(x[is_na], type = &quot;width&quot;) : </span></span>
<span id="cb859-8"><a href="prog-io.html#cb859-8"></a><span class="co">##   invalid multibyte string, element 1</span></span></code></pre></div>
<div class="sourceCode" id="cb860"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb860-1"><a href="prog-io.html#cb860-1"></a><span class="kw">read_lines</span>(<span class="st">&quot;bp.csv&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;&lt;d0&gt;&lt;f2&gt;&lt;U+00BA&gt;&lt;c5&gt;,&lt;ca&gt;&lt;d5&gt;&lt;cb&gt;&lt;f5&gt;&lt;U+0479&gt;&quot; &quot;1,145&quot;                          
## [3] &quot;5,110&quot;                           &quot;6, δ&lt;U+00B2&gt;&lt;e2&gt;&quot;               
## [5] &quot;9,150&quot;                           &quot;10, &lt;U+00BE&gt;&lt;U+073E&gt;&lt;f8&gt;&quot;       
## [7] &quot;15,115&quot;</code></pre>
<div class="sourceCode" id="cb862"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb862-1"><a href="prog-io.html#cb862-1"></a><span class="co">## [1] &quot;\xd0\xf2�\xc5,\xca\xd5\xcb\xf5ѹ&quot; &quot;1,145&quot;                          </span></span>
<span id="cb862-2"><a href="prog-io.html#cb862-2"></a><span class="co">## [3] &quot;5,110&quot;                           &quot;6, δ�\xe2&quot;                      </span></span>
<span id="cb862-3"><a href="prog-io.html#cb862-3"></a><span class="co">## [5] &quot;9,150&quot;                           &quot;10, �ܾ\xf8&quot;                      </span></span>
<span id="cb862-4"><a href="prog-io.html#cb862-4"></a><span class="co">## [7] &quot;15,115&quot;          </span></span></code></pre></div>
<p>为了读取GBK(或GB18030)编码的文件，
在<code>read_csv()</code>和<code>read_lines()</code>函数中加入
<code>locale=locale(encoding="GBK")</code>选项：</p>
<div class="sourceCode" id="cb863"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb863-1"><a href="prog-io.html#cb863-1"></a><span class="kw">read_csv</span>(<span class="st">&quot;bp.csv&quot;</span>, <span class="dt">locale=</span><span class="kw">locale</span>(<span class="dt">encoding=</span><span class="st">&quot;GBK&quot;</span>))</span></code></pre></div>
<pre><code>## Parsed with column specification:
## cols(
##   序号 = col_double(),
##   收缩压 = col_character()
## )</code></pre>
<pre><code>## # A tibble: 6 x 2
##    序号 收缩压
##   &lt;dbl&gt; &lt;chr&gt; 
## 1     1 145   
## 2     5 110   
## 3     6 未测  
## 4     9 150   
## 5    10 拒绝  
## 6    15 115</code></pre>
<div class="sourceCode" id="cb866"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb866-1"><a href="prog-io.html#cb866-1"></a><span class="kw">read_lines</span>(<span class="st">&quot;bp.csv&quot;</span>, <span class="dt">locale=</span><span class="kw">locale</span>(<span class="dt">encoding=</span><span class="st">&quot;GBK&quot;</span>))</span></code></pre></div>
<pre><code>## [1] &quot;序号,收缩压&quot; &quot;1,145&quot;       &quot;5,110&quot;       &quot;6, 未测&quot;     &quot;9,150&quot;      
## [6] &quot;10, 拒绝&quot;    &quot;15,115&quot;</code></pre>
</div>
<div id="p-io-enc-write" class="section level3">
<h3><span class="header-section-number">15.5.3</span> 输出文件的编码</h3>
<p><code>write.csv()</code>、<code>writeLines()</code>生成的含有中文的文件的编码默认为操作系统的默认中文编码，
这里是GB18030。</p>
<p>readr的<code>write_csv()</code>、<code>write_lines()</code>函数生成的含有中文的文件的编码默认UTF-8无BOM。
如</p>
<div class="sourceCode" id="cb868"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb868-1"><a href="prog-io.html#cb868-1"></a><span class="kw">write_csv</span>(<span class="kw">tibble</span>(<span class="st">&quot;姓名&quot;</span>=<span class="kw">c</span>(<span class="st">&quot;张三&quot;</span>, <span class="st">&quot;李四&quot;</span>)), <span class="st">&quot;tmp.csv&quot;</span>)</span></code></pre></div>
<p>结果生成的文件编码为UTF-8无BOM，
这样的文件可以被R的<code>readr::read_csv()</code>正确读取，
但是不能被MS Excel软件正确读取。</p>
<p><code>write_lines()</code>输出的文件也是编码为UTF-8无BOM。</p>
<p><code>write_excel_csv()</code>可以生成带有UTF-8有BOM的CSV文件，
这样的文件可以被MS Office正确识别：</p>
<div class="sourceCode" id="cb869"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb869-1"><a href="prog-io.html#cb869-1"></a><span class="kw">write_excel_csv</span>(<span class="kw">tibble</span>(<span class="st">&quot;姓名&quot;</span>=<span class="kw">c</span>(<span class="st">&quot;张三&quot;</span>, <span class="st">&quot;李四&quot;</span>)), <span class="st">&quot;tmp2.csv&quot;</span>)</span></code></pre></div>
</div>
</div>
<div id="p-io-dir" class="section level2">
<h2><span class="header-section-number">15.6</span> 目录和文件管理</h2>
<p>目录和文件管理函数:</p>
<ul>
<li><code>getwd()</code>—返回当前工作目录。</li>
<li><code>setwd(path)</code>—设置当前工作目录。</li>
<li><code>list.files()</code>或<code>dir()</code>—查看目录中内容。
<code>list.files(pattern=’.*[.]r$’)</code>可以列出所有以“.r”结尾的文件。</li>
<li><code>file.path()</code>—把目录和文件名组合得到文件路径。</li>
<li><code>file.info(filenames)</code>—显示文件的详细信息。</li>
<li><code>file.exists()</code>—查看文件是否存在。</li>
<li><code>file.access()</code>—考察文件的访问权限。</li>
<li><code>create.dir()</code>—新建目录。</li>
<li><code>file.create()</code>—生成文件。</li>
<li><code>file.remove()</code>或<code>unlink()</code>—删除文件。<code>unlink()</code>可以删除目录。</li>
<li><code>file.rename()</code>—为文件改名。</li>
<li><code>file.append()</code>—把两个文件相连。</li>
<li><code>file.copy()</code>—复制文件。</li>
<li><code>basename()</code>和<code>dirname()</code>— 从一个全路径文件名获取文件名和目录。</li>
</ul>
</div>
<div id="p-io-db" class="section level2">
<h2><span class="header-section-number">15.7</span> SQL数据库访问</h2>
<div id="p-io-db-intro" class="section level3">
<h3><span class="header-section-number">15.7.1</span> 介绍</h3>
<p>对于大型的数据，
或者保存在多个表中的复杂数据，
经常会保存在一个数据库中。
数据库可以存在于专用的数据库服务器硬件上，
也可以是本机中的一个系统程序，
或者R直接管理的一个文件。</p>
<p>比较通用的数据库是关系数据库，
这样的数据库已经有很标准的设计理念和管理方法，
从用户使用的角度来看，
都可以使用一种专用的SQL语言来访问和管理。</p>
<p>R通过扩展包可以访问许多种常用的关系数据库系统，
这些扩展包大多按照DBI扩展包规定的接口规范为用户提供了方便的访问功能。</p>
</div>
<div id="p-io-db-sqlite" class="section level3">
<h3><span class="header-section-number">15.7.2</span> SQLite数据库访问</h3>
<p>SQLite是一个开源的、轻量级的数据库软件，
其数据库可以保存在本机的一个文件中，
R的RSQLite扩展包直接提供了SQLite数据库功能。
如果自己的研究数据规模很大，比如有几个GB，
不利于整体读入到计算机内存当中，
而每次使用时只需要其中的一个子集，
就可以采用保存数据到SQLite数据库文件的方法。</p>
<p>学会了在R中使用SQLite数据库，
其它的数据库也可以类似地使用。</p>
<div id="p-io-db-sqlite-nhanes" class="section level4">
<h4><span class="header-section-number">15.7.2.1</span> NHANES数据</h4>
<p>我们以NHANES扩展包的NHANES数据框为例演示在R中访问关系数据库的方法。
在数据库中一个数据框叫做一个表（table）。
NHANES表来自美国国家健康统计中心的调查数据，
该调查项目从1960年代开始对美国非住院非军人住户进行健康与营养方面的抽样调查，
从1999年开始大约5000各个年龄的受调查者每年在自己家接受调查员面访，
完成调查中的健康检查部分，
健康检查是在流动检查中心进行的。
抽样调查有复杂的抽样设计，
并不是简单随机抽样。
R扩展包中NHANES数据框经过了重抽样使其尽可能与目标总体的各种比例一致，
但数据应仅用作教学演示目的。
NHANES中有10000个观测，
是在2009-2010和2011-2012两次得到的，
有75个测试变量。
部分变量为：</p>
<ul>
<li>SurveyYr：用来区分两次考察。</li>
<li>ID：受试者编码。</li>
<li>Gender: 性别，male 或 female。</li>
<li>Age: 年龄，80岁以上录入为80。</li>
<li>Race1: 种族，可取Mexican, Hispanic, White, Black, 或 Other。</li>
<li>Education：20岁及以上受试者的受教育级别，可取8thGrade, 9-11thGrade, HighSchool, SomeCollege, 或 CollegeGrad。</li>
<li>MaritalStatus：婚姻状态，可取Married, Widowed, Divorced, Separated, NeverMarried, 或 LivePartner（与伴侣生活）。</li>
<li>Weight: 体重（千克）。</li>
<li>Height: 身高（厘米），对2岁以上。</li>
</ul>
</div>
<div id="p-io-db-sqlite-create" class="section level4">
<h4><span class="header-section-number">15.7.2.2</span> 初始化新SQLite数据库</h4>
<p>用使用RSQLite，先载入RSQLite扩展包，
然后指定一个SQLite数据库文件（不需要是已经存在的），
用<code>dbConnect()</code>打开该数据库建立连接（如果没有就新建）：</p>
<div class="sourceCode" id="cb870"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb870-1"><a href="prog-io.html#cb870-1"></a><span class="kw">library</span>(RSQLite)</span>
<span id="cb870-2"><a href="prog-io.html#cb870-2"></a>f_sqlite &lt;-<span class="st"> &quot;_tmp/db2020.SQLITE&quot;</span></span>
<span id="cb870-3"><a href="prog-io.html#cb870-3"></a>con &lt;-<span class="st"> </span><span class="kw">dbConnect</span>(<span class="dt">drv=</span><span class="kw">SQLite</span>(), <span class="dt">dbname=</span>f_sqlite)</span></code></pre></div>
<p>可以用<code>dbWriteTable()</code>函数将NHANES数据框写入到打开的数据库中：</p>
<div class="sourceCode" id="cb871"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb871-1"><a href="prog-io.html#cb871-1"></a><span class="kw">data</span>(NHANES, <span class="dt">package=</span><span class="st">&quot;NHANES&quot;</span>)</span>
<span id="cb871-2"><a href="prog-io.html#cb871-2"></a><span class="kw">dbWriteTable</span>(<span class="dt">conn=</span>con, <span class="dt">name=</span><span class="st">&quot;nh&quot;</span>, <span class="dt">value=</span>NHANES)</span></code></pre></div>
<p>写入后，数据库中的表名为nh。</p>
</div>
<div id="p-io-db-sqlite-list" class="section level4">
<h4><span class="header-section-number">15.7.2.3</span> 查看数据库中的表</h4>
<p>假设连接<code>con</code>还保持打开状态，
可以用<code>dbListTables()</code>查看数据库中有哪些表：</p>
<div class="sourceCode" id="cb872"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb872-1"><a href="prog-io.html#cb872-1"></a><span class="kw">dbListTables</span>(con)</span>
<span id="cb872-2"><a href="prog-io.html#cb872-2"></a><span class="co">## [1] &quot;nh&quot;</span></span></code></pre></div>
<p>可以用<code>dbListFields()</code>查看某个表有哪些列，
数据库中称为域（fields）：</p>
<div class="sourceCode" id="cb873"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb873-1"><a href="prog-io.html#cb873-1"></a><span class="kw">dbListFields</span>(con, <span class="st">&quot;nh&quot;</span>)</span>
<span id="cb873-2"><a href="prog-io.html#cb873-2"></a><span class="co">##  [1] &quot;ID&quot;               &quot;SurveyYr&quot;         &quot;Gender&quot;          </span></span>
<span id="cb873-3"><a href="prog-io.html#cb873-3"></a><span class="co">##  [4] &quot;Age&quot;              &quot;AgeDecade&quot;        &quot;AgeMonths&quot; </span></span>
<span id="cb873-4"><a href="prog-io.html#cb873-4"></a><span class="co">##  ………………</span></span></code></pre></div>
</div>
<div id="p-io-db-sqlite-read" class="section level4">
<h4><span class="header-section-number">15.7.2.4</span> 读入数据库中的表</h4>
<p>为了从数据库读取整个数据表（数据框），
建立连接后用<code>dbReadTable()</code>函数读取，如：</p>
<div class="sourceCode" id="cb874"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb874-1"><a href="prog-io.html#cb874-1"></a>d1 &lt;-<span class="st"> </span><span class="kw">dbReadTable</span>(</span>
<span id="cb874-2"><a href="prog-io.html#cb874-2"></a>  <span class="dt">conn=</span>con, <span class="dt">name=</span><span class="st">&quot;nh&quot;</span>)</span>
<span id="cb874-3"><a href="prog-io.html#cb874-3"></a>d1 <span class="op">%&gt;%</span></span>
<span id="cb874-4"><a href="prog-io.html#cb874-4"></a><span class="st">  </span><span class="kw">count</span>(SurveyYr)</span>
<span id="cb874-5"><a href="prog-io.html#cb874-5"></a><span class="co">## # A tibble: 2 x 2</span></span>
<span id="cb874-6"><a href="prog-io.html#cb874-6"></a><span class="co">##   SurveyYr     n</span></span>
<span id="cb874-7"><a href="prog-io.html#cb874-7"></a><span class="co">##   &lt;chr&gt;    &lt;int&gt;</span></span>
<span id="cb874-8"><a href="prog-io.html#cb874-8"></a><span class="co">## 1 2009_10   5000</span></span>
<span id="cb874-9"><a href="prog-io.html#cb874-9"></a><span class="co">## 2 2011_12   5000</span></span></code></pre></div>
<p>两次调查各有5000个观测。</p>
</div>
<div id="p-io-db-sqlite-sql" class="section level4">
<h4><span class="header-section-number">15.7.2.5</span> 用SQL命令访问数据</h4>
<p>还可以用<code>dbGetQuery()</code>执行SQL查询并以数据框格式返回查询结果。
比如，
仅返回SurveyYr和ID两列，
且仅选择男性：</p>
<div class="sourceCode" id="cb875"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb875-1"><a href="prog-io.html#cb875-1"></a>d2 &lt;-<span class="st"> </span><span class="kw">dbGetQuery</span>(</span>
<span id="cb875-2"><a href="prog-io.html#cb875-2"></a>  <span class="dt">conn=</span>con, </span>
<span id="cb875-3"><a href="prog-io.html#cb875-3"></a>  <span class="dt">statement=</span><span class="kw">paste</span>(</span>
<span id="cb875-4"><a href="prog-io.html#cb875-4"></a>    <span class="st">&quot;SELECT SurveyYr, ID&quot;</span>,</span>
<span id="cb875-5"><a href="prog-io.html#cb875-5"></a>    <span class="st">&quot;  FROM nh&quot;</span>,</span>
<span id="cb875-6"><a href="prog-io.html#cb875-6"></a>    <span class="st">&quot;  WHERE Gender=&#39;male&#39;&quot;</span>))</span>
<span id="cb875-7"><a href="prog-io.html#cb875-7"></a>d2 <span class="op">%&gt;%</span></span>
<span id="cb875-8"><a href="prog-io.html#cb875-8"></a><span class="st">  </span><span class="kw">count</span>(SurveyYr)</span>
<span id="cb875-9"><a href="prog-io.html#cb875-9"></a><span class="co">## # A tibble: 2 x 2</span></span>
<span id="cb875-10"><a href="prog-io.html#cb875-10"></a><span class="co">##   SurveyYr     n</span></span>
<span id="cb875-11"><a href="prog-io.html#cb875-11"></a><span class="co">##   &lt;chr&gt;    &lt;int&gt;</span></span>
<span id="cb875-12"><a href="prog-io.html#cb875-12"></a><span class="co">## 1 2009_10   2475 </span></span>
<span id="cb875-13"><a href="prog-io.html#cb875-13"></a><span class="co">## 2 2011_12   2505</span></span></code></pre></div>
</div>
<div id="p-io-db-sqlite-readbatch" class="section level4">
<h4><span class="header-section-number">15.7.2.6</span> 分批读入数据库中的表</h4>
<p>对于特别大的表，
可能超出了计算机的内存，
无法整体读入到R当中。
如果只需要一个子集，
可以用上面的<code>dbGetQuery()</code>执行SQL命令在数据库中提取子集并仅将需要的子集读入到R中。
如果需要读入的部分还是超过了内存，
或者全部读入会使得处理速度很慢，
可以分批读入，分批处理。</p>
<p>先用<code>dbSendQuery()</code>发送SQL查询命令：</p>
<div class="sourceCode" id="cb876"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb876-1"><a href="prog-io.html#cb876-1"></a>qry &lt;-<span class="st"> </span><span class="kw">dbSendQuery</span>(</span>
<span id="cb876-2"><a href="prog-io.html#cb876-2"></a>  <span class="dt">conn=</span>con, </span>
<span id="cb876-3"><a href="prog-io.html#cb876-3"></a>  <span class="dt">statement=</span><span class="kw">paste</span>(</span>
<span id="cb876-4"><a href="prog-io.html#cb876-4"></a>    <span class="st">&quot;SELECT Weight &quot;</span>,</span>
<span id="cb876-5"><a href="prog-io.html#cb876-5"></a>    <span class="st">&quot;  FROM nh&quot;</span>,</span>
<span id="cb876-6"><a href="prog-io.html#cb876-6"></a>    <span class="st">&quot;  WHERE Gender=&#39;male&#39;&quot;</span>))</span></code></pre></div>
<p>然后，
用<code>dbHasCompleted()</code>检查是否已经将结果取完，
如果没有取完就用<code>dbFetch()</code>取出一定行数，
分段处理：</p>
<div class="sourceCode" id="cb877"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb877-1"><a href="prog-io.html#cb877-1"></a>s &lt;-<span class="st"> </span><span class="dv">0</span></span>
<span id="cb877-2"><a href="prog-io.html#cb877-2"></a>n &lt;-<span class="st"> </span><span class="dv">0</span></span>
<span id="cb877-3"><a href="prog-io.html#cb877-3"></a><span class="cf">while</span>(<span class="op">!</span><span class="kw">dbHasCompleted</span>(qry)){</span>
<span id="cb877-4"><a href="prog-io.html#cb877-4"></a>  chunk =<span class="st"> </span><span class="kw">dbFetch</span>(qry, <span class="dt">n=</span><span class="dv">1000</span>)</span>
<span id="cb877-5"><a href="prog-io.html#cb877-5"></a>  n &lt;-<span class="st"> </span>n <span class="op">+</span><span class="st"> </span><span class="kw">sum</span>(<span class="op">!</span><span class="kw">is.na</span>(chunk[[<span class="st">&quot;Weight&quot;</span>]]))</span>
<span id="cb877-6"><a href="prog-io.html#cb877-6"></a>  s &lt;-<span class="st"> </span>s <span class="op">+</span><span class="st"> </span><span class="kw">sum</span>(chunk[[<span class="st">&quot;Weight&quot;</span>]], <span class="dt">na.rm=</span><span class="ot">TRUE</span>)</span>
<span id="cb877-7"><a href="prog-io.html#cb877-7"></a>}</span>
<span id="cb877-8"><a href="prog-io.html#cb877-8"></a><span class="kw">cat</span>(<span class="st">&quot;Average Weight = &quot;</span>, s<span class="op">/</span>n, <span class="st">&quot;</span><span class="ch">\n</span><span class="st">&quot;</span>)</span></code></pre></div>
<p>需要释放查询对应的资源：</p>
<div class="sourceCode" id="cb878"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb878-1"><a href="prog-io.html#cb878-1"></a><span class="kw">dbClearResult</span>(qry)</span></code></pre></div>
<p>这段程序只是举例说明如何分段读入、分段处理，
如果只是要计算nh表中男性的Weight变量平均值，
可以读入整个nh表或者nh表中男性的Weight变量的所有值然后计算，
或者用SQL命令计算。</p>
</div>
<div id="p-io-db-sqlite-close" class="section level4">
<h4><span class="header-section-number">15.7.2.7</span> 关闭数据库连接</h4>
<p>在数据库使用完毕以后，
要记得关闭数据库：</p>
<div class="sourceCode" id="cb879"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb879-1"><a href="prog-io.html#cb879-1"></a><span class="kw">dbDisconnect</span>(con)</span></code></pre></div>
</div>
<div id="p-io-db-sqlite-misc" class="section level4">
<h4><span class="header-section-number">15.7.2.8</span> 其它数据库操作</h4>
<ul>
<li>删除表：<code>dbRemoveTable(conn, name)</code></li>
<li>检查某个表是否存在：<code>dbExistsTable(conn, name)</code></li>
<li>向一个表中插入保存在数据框中的一些行：<code>dbAppendTable(conn, name, value)</code></li>
<li>执行SQL命令并返回受到影响的行数：<code>dbExecute(con, statement)</code></li>
</ul>
</div>
</div>
<div id="p-io-db-sql" class="section level3">
<h3><span class="header-section-number">15.7.3</span> SQL命令简介</h3>
<p>SQL是关系数据库查询和管理的专用语言，
关系数据库都支持SQL语言，
但彼此之间可能有一些技术性的差别。</p>
<p>用d.class数据框演示，有19个学生的姓名、性别、年龄、身高、体重。</p>
<div class="sourceCode" id="cb880"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb880-1"><a href="prog-io.html#cb880-1"></a><span class="kw">str</span>(d.class)</span></code></pre></div>
<pre><code>## Classes &#39;spec_tbl_df&#39;, &#39;tbl_df&#39;, &#39;tbl&#39; and &#39;data.frame&#39;: 19 obs. of  5 variables:
##  $ name  : chr  &quot;Alice&quot; &quot;Becka&quot; &quot;Gail&quot; &quot;Karen&quot; ...
##  $ sex   : Factor w/ 2 levels &quot;M&quot;,&quot;F&quot;: 2 2 2 2 2 2 2 2 2 1 ...
##  $ age   : num  13 13 14 12 12 15 11 15 14 14 ...
##  $ height: num  56.5 65.3 64.3 56.3 59.8 66.5 51.3 62.5 62.8 69 ...
##  $ weight: num  84 98 90 77 84.5 ...
##  - attr(*, &quot;spec&quot;)=
##   .. cols(
##   ..   .default = col_double(),
##   ..   name = col_character(),
##   ..   sex = col_factor(levels = c(&quot;M&quot;, &quot;F&quot;), ordered = FALSE, include_na = FALSE),
##   ..   age = col_double(),
##   ..   height = col_double(),
##   ..   weight = col_double()
##   .. )</code></pre>
<p>下面建立一个内存中的SQLite数据库，
将d.class保存在数据库中:</p>
<div class="sourceCode" id="cb882"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb882-1"><a href="prog-io.html#cb882-1"></a><span class="kw">library</span>(RSQLite)</span>
<span id="cb882-2"><a href="prog-io.html#cb882-2"></a>con &lt;-<span class="st"> </span><span class="kw">dbConnect</span>(<span class="dt">drv=</span><span class="kw">SQLite</span>(), <span class="dt">dbname=</span><span class="st">&quot;:memory:&quot;</span>)</span>
<span id="cb882-3"><a href="prog-io.html#cb882-3"></a><span class="kw">dbWriteTable</span>(con, <span class="dt">name=</span><span class="st">&quot;class&quot;</span>, <span class="dt">value=</span>d.class)</span></code></pre></div>
<div id="p-io-db-sql-rows" class="section level4">
<h4><span class="header-section-number">15.7.3.1</span> 取行子集</h4>
<p>取出所有行的命令：</p>
<div class="sourceCode" id="cb883"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb883-1"><a href="prog-io.html#cb883-1"></a>dtmp &lt;-<span class="st"> </span><span class="kw">dbGetQuery</span>(</span>
<span id="cb883-2"><a href="prog-io.html#cb883-2"></a>  <span class="dt">conn=</span>con,</span>
<span id="cb883-3"><a href="prog-io.html#cb883-3"></a>  <span class="dt">statement=</span><span class="kw">paste</span>(</span>
<span id="cb883-4"><a href="prog-io.html#cb883-4"></a>    <span class="st">&quot;SELECT *&quot;</span>,</span>
<span id="cb883-5"><a href="prog-io.html#cb883-5"></a>    <span class="st">&quot;  FROM class&quot;</span></span>
<span id="cb883-6"><a href="prog-io.html#cb883-6"></a>  ))</span>
<span id="cb883-7"><a href="prog-io.html#cb883-7"></a><span class="kw">dim</span>(dtmp)</span>
<span id="cb883-8"><a href="prog-io.html#cb883-8"></a><span class="co">## [1] 19  5</span></span></code></pre></div>
<p>为了取出满足条件的某些行，
在SQL命令中加上<code>WHERE</code>子句：</p>
<div class="sourceCode" id="cb884"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb884-1"><a href="prog-io.html#cb884-1"></a>dtmp &lt;-<span class="st"> </span><span class="kw">dbGetQuery</span>(</span>
<span id="cb884-2"><a href="prog-io.html#cb884-2"></a>  <span class="dt">conn=</span>con,</span>
<span id="cb884-3"><a href="prog-io.html#cb884-3"></a>  <span class="dt">statement=</span><span class="kw">paste</span>(</span>
<span id="cb884-4"><a href="prog-io.html#cb884-4"></a>    <span class="st">&quot;SELECT *&quot;</span>,</span>
<span id="cb884-5"><a href="prog-io.html#cb884-5"></a>    <span class="st">&quot;  FROM class&quot;</span>,</span>
<span id="cb884-6"><a href="prog-io.html#cb884-6"></a>    <span class="st">&quot;  WHERE sex=&#39;F&#39; AND age &lt;= 12&quot;</span>  ))</span>
<span id="cb884-7"><a href="prog-io.html#cb884-7"></a>dtmp</span>
<span id="cb884-8"><a href="prog-io.html#cb884-8"></a><span class="co">##    name sex age height weight</span></span>
<span id="cb884-9"><a href="prog-io.html#cb884-9"></a><span class="co">## 1 Karen   F  12   56.3   77.0</span></span>
<span id="cb884-10"><a href="prog-io.html#cb884-10"></a><span class="co">## 2 Kathy   F  12   59.8   84.5</span></span>
<span id="cb884-11"><a href="prog-io.html#cb884-11"></a><span class="co">## 3 Sandy   F  11   51.3   50.5</span></span></code></pre></div>
</div>
<div id="p-io-db-sql-rowcols" class="section level4">
<h4><span class="header-section-number">15.7.3.2</span> 取行列子集</h4>
<p>可以在<code>SELECT</code>子句中指定要取出的列，列名之间用逗号分隔，
如：</p>
<div class="sourceCode" id="cb885"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb885-1"><a href="prog-io.html#cb885-1"></a>dtmp &lt;-<span class="st"> </span><span class="kw">dbGetQuery</span>(</span>
<span id="cb885-2"><a href="prog-io.html#cb885-2"></a>  <span class="dt">conn=</span>con,</span>
<span id="cb885-3"><a href="prog-io.html#cb885-3"></a>  <span class="dt">statement=</span><span class="kw">paste</span>(</span>
<span id="cb885-4"><a href="prog-io.html#cb885-4"></a>    <span class="st">&quot;SELECT name, age, height, weight&quot;</span>,</span>
<span id="cb885-5"><a href="prog-io.html#cb885-5"></a>    <span class="st">&quot;  FROM class&quot;</span>,</span>
<span id="cb885-6"><a href="prog-io.html#cb885-6"></a>    <span class="st">&quot;  WHERE sex=&#39;F&#39; AND age &lt;= 12&quot;</span>))</span>
<span id="cb885-7"><a href="prog-io.html#cb885-7"></a>dtmp</span>
<span id="cb885-8"><a href="prog-io.html#cb885-8"></a><span class="co">##    name age height weight</span></span>
<span id="cb885-9"><a href="prog-io.html#cb885-9"></a><span class="co">## 1 Karen  12   56.3   77.0</span></span>
<span id="cb885-10"><a href="prog-io.html#cb885-10"></a><span class="co">## 2 Kathy  12   59.8   84.5</span></span>
<span id="cb885-11"><a href="prog-io.html#cb885-11"></a><span class="co">## 3 Sandy  11   51.3   50.5</span></span></code></pre></div>
<p>在WHERE子句中可以使用如下的比较和逻辑运算：</p>
<ul>
<li><code>=   ^=   &gt;   &lt;   &gt;=   &lt;=  IN</code></li>
<li>或<code>EQ   NE   GT   LT   GE   LE   IN</code></li>
<li><code>IS NULL</code>表示“是空值”，与缺失值类似</li>
<li><code>BETWEEN a AND b</code>, 表示属于闭区间<span class="math inline">\([a,b]\)</span></li>
<li><code>AND</code>逻辑与，<code>OR</code>逻辑或，<code>NOT</code>逻辑非。</li>
</ul>
</div>
<div id="p-io-db-sql-distinct" class="section level4">
<h4><span class="header-section-number">15.7.3.3</span> 取某列的所有不同取值</h4>
<p>在列名前加DISTINCT修饰，可以取出该列的所有不重复的值：</p>
<div class="sourceCode" id="cb886"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb886-1"><a href="prog-io.html#cb886-1"></a>dtmp &lt;-<span class="st"> </span><span class="kw">dbGetQuery</span>(</span>
<span id="cb886-2"><a href="prog-io.html#cb886-2"></a>  <span class="dt">conn=</span>con,</span>
<span id="cb886-3"><a href="prog-io.html#cb886-3"></a>  <span class="dt">statement=</span><span class="kw">paste</span>(</span>
<span id="cb886-4"><a href="prog-io.html#cb886-4"></a>    <span class="st">&quot;SELECT DISTINCT sex&quot;</span>,</span>
<span id="cb886-5"><a href="prog-io.html#cb886-5"></a>    <span class="st">&quot;  FROM class&quot;</span>))</span>
<span id="cb886-6"><a href="prog-io.html#cb886-6"></a>dtmp</span>
<span id="cb886-7"><a href="prog-io.html#cb886-7"></a><span class="co">##   sex</span></span>
<span id="cb886-8"><a href="prog-io.html#cb886-8"></a><span class="co">## 1   F</span></span>
<span id="cb886-9"><a href="prog-io.html#cb886-9"></a><span class="co">## 2   M</span></span></code></pre></div>
<p>多个变量的不重复的组合：</p>
<div class="sourceCode" id="cb887"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb887-1"><a href="prog-io.html#cb887-1"></a>dtmp &lt;-<span class="st"> </span><span class="kw">dbGetQuery</span>(</span>
<span id="cb887-2"><a href="prog-io.html#cb887-2"></a>  <span class="dt">conn=</span>con,</span>
<span id="cb887-3"><a href="prog-io.html#cb887-3"></a>  <span class="dt">statement=</span><span class="kw">paste</span>(</span>
<span id="cb887-4"><a href="prog-io.html#cb887-4"></a>    <span class="st">&quot;SELECT DISTINCT sex, age&quot;</span>,</span>
<span id="cb887-5"><a href="prog-io.html#cb887-5"></a>    <span class="st">&quot;  FROM class&quot;</span>,</span>
<span id="cb887-6"><a href="prog-io.html#cb887-6"></a>    <span class="st">&quot;  WHERE age &gt;= 15&quot;</span>))</span>
<span id="cb887-7"><a href="prog-io.html#cb887-7"></a>dtmp</span>
<span id="cb887-8"><a href="prog-io.html#cb887-8"></a><span class="co">##   sex age</span></span>
<span id="cb887-9"><a href="prog-io.html#cb887-9"></a><span class="co">## 1   F  15</span></span>
<span id="cb887-10"><a href="prog-io.html#cb887-10"></a><span class="co">## 2   M  15</span></span>
<span id="cb887-11"><a href="prog-io.html#cb887-11"></a><span class="co">## 3   M  16</span></span></code></pre></div>
</div>
<div id="p-io-db-sql-orderby" class="section level4">
<h4><span class="header-section-number">15.7.3.4</span> 查询结果排序</h4>
<p>用<code>ORDER BY</code>子句排序：</p>
<div class="sourceCode" id="cb888"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb888-1"><a href="prog-io.html#cb888-1"></a>dtmp &lt;-<span class="st"> </span><span class="kw">dbGetQuery</span>(</span>
<span id="cb888-2"><a href="prog-io.html#cb888-2"></a>  <span class="dt">conn=</span>con,</span>
<span id="cb888-3"><a href="prog-io.html#cb888-3"></a>  <span class="dt">statement=</span><span class="kw">paste</span>(</span>
<span id="cb888-4"><a href="prog-io.html#cb888-4"></a>    <span class="st">&quot;SELECT name, height&quot;</span>,</span>
<span id="cb888-5"><a href="prog-io.html#cb888-5"></a>    <span class="st">&quot;  FROM class&quot;</span>,</span>
<span id="cb888-6"><a href="prog-io.html#cb888-6"></a>    <span class="st">&quot;  WHERE name IN (&#39;Alice&#39;, &#39;Becka&#39;, &#39;Gail&#39;)&quot;</span>,</span>
<span id="cb888-7"><a href="prog-io.html#cb888-7"></a>    <span class="st">&quot;  ORDER BY height DESC&quot;</span>))</span>
<span id="cb888-8"><a href="prog-io.html#cb888-8"></a>dtmp</span>
<span id="cb888-9"><a href="prog-io.html#cb888-9"></a><span class="co">##    name height</span></span>
<span id="cb888-10"><a href="prog-io.html#cb888-10"></a><span class="co">## 1 Becka   65.3</span></span>
<span id="cb888-11"><a href="prog-io.html#cb888-11"></a><span class="co">## 2  Gail   64.3</span></span>
<span id="cb888-12"><a href="prog-io.html#cb888-12"></a><span class="co">## 3 Alice   56.5</span></span></code></pre></div>
<p>在变量名后面加后缀<code>DESC</code>表示降序。</p>
</div>
<div id="p-io-db-sql-newvar" class="section level4">
<h4><span class="header-section-number">15.7.3.5</span> 查询时计算新变量</h4>
<p>在<code>SELECT</code>中用“表达式 AS 变量名”的格式计算新变量。
例如，class表中的身高以英寸为单位，
体重以磅为单位，分别转换为厘米和千克单位：</p>
<div class="sourceCode" id="cb889"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb889-1"><a href="prog-io.html#cb889-1"></a>dtmp &lt;-<span class="st"> </span><span class="kw">dbGetQuery</span>(</span>
<span id="cb889-2"><a href="prog-io.html#cb889-2"></a>  <span class="dt">conn=</span>con,</span>
<span id="cb889-3"><a href="prog-io.html#cb889-3"></a>  <span class="dt">statement=</span><span class="kw">paste</span>(</span>
<span id="cb889-4"><a href="prog-io.html#cb889-4"></a>    <span class="st">&quot;SELECT name, round(height*2.54) AS hcm,&quot;</span>,</span>
<span id="cb889-5"><a href="prog-io.html#cb889-5"></a>    <span class="st">&quot;    round(weight*0.4535924) as wkg&quot;</span>,</span>
<span id="cb889-6"><a href="prog-io.html#cb889-6"></a>    <span class="st">&quot;  FROM class&quot;</span>))</span>
<span id="cb889-7"><a href="prog-io.html#cb889-7"></a><span class="kw">head</span>(dtmp, <span class="dv">3</span>)</span>
<span id="cb889-8"><a href="prog-io.html#cb889-8"></a><span class="co">##    name hcm wkg</span></span>
<span id="cb889-9"><a href="prog-io.html#cb889-9"></a><span class="co">## 1 Alice 144  38</span></span>
<span id="cb889-10"><a href="prog-io.html#cb889-10"></a><span class="co">## 2 Becka 166  44</span></span>
<span id="cb889-11"><a href="prog-io.html#cb889-11"></a><span class="co">## 3  Gail 163  41</span></span></code></pre></div>
</div>
<div id="p-io-db-sql-groupby" class="section level4">
<h4><span class="header-section-number">15.7.3.6</span> 分组汇总</h4>
<p>用<code>GROUP BY</code>子句对观测分组，
用<code>SUM</code>, <code>AVG</code>等统计函数计算汇总统计量。</p>
<p>统计函数有：</p>
<ul>
<li><code>COUNT(*)</code>表示行数；</li>
<li><code>SUM(x)</code>求和；</li>
<li><code>AVG(x)</code>求平均；</li>
<li><code>MAX(x)</code>, <code>MIN(x)</code>求最大值和最小值。</li>
</ul>
<p>例如：</p>
<div class="sourceCode" id="cb890"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb890-1"><a href="prog-io.html#cb890-1"></a>dtmp &lt;-<span class="st"> </span><span class="kw">dbGetQuery</span>(</span>
<span id="cb890-2"><a href="prog-io.html#cb890-2"></a>  <span class="dt">conn=</span>con,</span>
<span id="cb890-3"><a href="prog-io.html#cb890-3"></a>  <span class="dt">statement=</span><span class="kw">paste</span>(</span>
<span id="cb890-4"><a href="prog-io.html#cb890-4"></a>    <span class="st">&quot;SELECT COUNT(*) AS n, AVG(height) AS avgh&quot;</span>,</span>
<span id="cb890-5"><a href="prog-io.html#cb890-5"></a>    <span class="st">&quot;  FROM class&quot;</span>))</span>
<span id="cb890-6"><a href="prog-io.html#cb890-6"></a>dtmp</span>
<span id="cb890-7"><a href="prog-io.html#cb890-7"></a><span class="co">##    n     avgh</span></span>
<span id="cb890-8"><a href="prog-io.html#cb890-8"></a><span class="co">## 1 19 62.33684</span></span></code></pre></div>
<p>分组计算如：</p>
<div class="sourceCode" id="cb891"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb891-1"><a href="prog-io.html#cb891-1"></a>dtmp &lt;-<span class="st"> </span><span class="kw">dbGetQuery</span>(</span>
<span id="cb891-2"><a href="prog-io.html#cb891-2"></a>  <span class="dt">conn=</span>con,</span>
<span id="cb891-3"><a href="prog-io.html#cb891-3"></a>  <span class="dt">statement=</span><span class="kw">paste</span>(</span>
<span id="cb891-4"><a href="prog-io.html#cb891-4"></a>    <span class="st">&quot;SELECT sex, COUNT(*) AS n, AVG(height) AS avgh&quot;</span>,</span>
<span id="cb891-5"><a href="prog-io.html#cb891-5"></a>    <span class="st">&quot;  FROM class&quot;</span>,</span>
<span id="cb891-6"><a href="prog-io.html#cb891-6"></a>    <span class="st">&quot;  GROUP BY sex&quot;</span>))</span>
<span id="cb891-7"><a href="prog-io.html#cb891-7"></a>dtmp</span>
<span id="cb891-8"><a href="prog-io.html#cb891-8"></a><span class="co">##   sex  n     avgh</span></span>
<span id="cb891-9"><a href="prog-io.html#cb891-9"></a><span class="co">## 1   F  9 60.58889</span></span>
<span id="cb891-10"><a href="prog-io.html#cb891-10"></a><span class="co">## 2   M 10 63.91000</span></span></code></pre></div>
<p>在用了GROUP BY以后，
对统计结果的筛选条件要写在<code>HAVING</code>子句中而不是用<code>WHERE</code>子句，如：</p>
<div class="sourceCode" id="cb892"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb892-1"><a href="prog-io.html#cb892-1"></a>dtmp &lt;-<span class="st"> </span><span class="kw">dbGetQuery</span>(</span>
<span id="cb892-2"><a href="prog-io.html#cb892-2"></a>  <span class="dt">conn=</span>con,</span>
<span id="cb892-3"><a href="prog-io.html#cb892-3"></a>  <span class="dt">statement=</span><span class="kw">paste</span>(</span>
<span id="cb892-4"><a href="prog-io.html#cb892-4"></a>    <span class="st">&quot;SELECT age, COUNT(*) AS n&quot;</span>,</span>
<span id="cb892-5"><a href="prog-io.html#cb892-5"></a>    <span class="st">&quot;  FROM class&quot;</span>,</span>
<span id="cb892-6"><a href="prog-io.html#cb892-6"></a>    <span class="st">&quot;  GROUP BY age&quot;</span>,</span>
<span id="cb892-7"><a href="prog-io.html#cb892-7"></a>    <span class="st">&quot;  HAVING COUNT(*)=1&quot;</span>))</span>
<span id="cb892-8"><a href="prog-io.html#cb892-8"></a>dtmp</span>
<span id="cb892-9"><a href="prog-io.html#cb892-9"></a><span class="co">##   age n</span></span>
<span id="cb892-10"><a href="prog-io.html#cb892-10"></a><span class="co">## 1  16 1</span></span></code></pre></div>
</div>
<div id="p-io-db-sql-ctable" class="section level4">
<h4><span class="header-section-number">15.7.3.7</span> 将查询结果保存为新表</h4>
<p>可以将查询结果保存在数据库中，而不是返回到R中。
这时，
需要用<code>dbExecute()</code>函数，
返回值是受到影响的行数：</p>
<div class="sourceCode" id="cb893"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb893-1"><a href="prog-io.html#cb893-1"></a><span class="cf">for</span>(tab <span class="cf">in</span> <span class="kw">c</span>(<span class="st">&quot;class1&quot;</span>, <span class="st">&quot;class2&quot;</span>)){</span>
<span id="cb893-2"><a href="prog-io.html#cb893-2"></a>  <span class="cf">if</span>(<span class="kw">dbExistsTable</span>(con, tab)){</span>
<span id="cb893-3"><a href="prog-io.html#cb893-3"></a>    <span class="kw">dbRemoveTable</span>(con, tab)</span>
<span id="cb893-4"><a href="prog-io.html#cb893-4"></a>  }</span>
<span id="cb893-5"><a href="prog-io.html#cb893-5"></a>}</span>
<span id="cb893-6"><a href="prog-io.html#cb893-6"></a></span>
<span id="cb893-7"><a href="prog-io.html#cb893-7"></a><span class="kw">dbExecute</span>(</span>
<span id="cb893-8"><a href="prog-io.html#cb893-8"></a>  <span class="dt">conn=</span>con,</span>
<span id="cb893-9"><a href="prog-io.html#cb893-9"></a>  <span class="dt">statement=</span><span class="kw">paste</span>(</span>
<span id="cb893-10"><a href="prog-io.html#cb893-10"></a>    <span class="st">&quot;CREATE TABLE class1 AS&quot;</span>,</span>
<span id="cb893-11"><a href="prog-io.html#cb893-11"></a>    <span class="st">&quot;  SELECT name, sex&quot;</span>,</span>
<span id="cb893-12"><a href="prog-io.html#cb893-12"></a>    <span class="st">&quot;    FROM class&quot;</span></span>
<span id="cb893-13"><a href="prog-io.html#cb893-13"></a>  ))</span>
<span id="cb893-14"><a href="prog-io.html#cb893-14"></a><span class="co">## [1] 0</span></span>
<span id="cb893-15"><a href="prog-io.html#cb893-15"></a></span>
<span id="cb893-16"><a href="prog-io.html#cb893-16"></a><span class="kw">dbExecute</span>(</span>
<span id="cb893-17"><a href="prog-io.html#cb893-17"></a>  <span class="dt">conn=</span>con,</span>
<span id="cb893-18"><a href="prog-io.html#cb893-18"></a>  <span class="dt">statement=</span><span class="kw">paste</span>(</span>
<span id="cb893-19"><a href="prog-io.html#cb893-19"></a>    <span class="st">&quot;CREATE TABLE class2 AS&quot;</span>,</span>
<span id="cb893-20"><a href="prog-io.html#cb893-20"></a>    <span class="st">&quot;  SELECT name, age&quot;</span>,</span>
<span id="cb893-21"><a href="prog-io.html#cb893-21"></a>    <span class="st">&quot;    FROM class&quot;</span></span>
<span id="cb893-22"><a href="prog-io.html#cb893-22"></a>  ))</span>
<span id="cb893-23"><a href="prog-io.html#cb893-23"></a><span class="co">## [1] 0</span></span>
<span id="cb893-24"><a href="prog-io.html#cb893-24"></a></span>
<span id="cb893-25"><a href="prog-io.html#cb893-25"></a><span class="kw">dbListTables</span>(con)</span>
<span id="cb893-26"><a href="prog-io.html#cb893-26"></a><span class="co">## [1] &quot;class&quot;  &quot;class1&quot; &quot;class2&quot;</span></span></code></pre></div>
<p>在执行比较复杂的查询时，
可以用这种方法生成一些中间结果，
最后要删除这些作为中间结果的表。</p>
</div>
<div id="p-io-db-sql-join" class="section level4">
<h4><span class="header-section-number">15.7.3.8</span> 从多个表查询</h4>
<p>使用数据库的好处除了可以管理大型数据，
还有许多其它好处，
比如可以保证数据被修改时不会因断电、网络故障等出错，
可以并发读取或修改，
可以备份、恢复，
等等。</p>
<p>关系数据库经常需要将有关的信息保存在多张表中，
而不是使用一张大表，
这与数据库的设计理念有关，
可以减少数据冗余，
增强数据的一致性。
但是，
在使用这些信息时，
就需要从多张表进行查询，
称为表的连接查询。</p>
<p>最常见的连接查询是所谓内连接（INNER JOIN），
按照某一个或者某几个关键列将数据行对齐进行查询。
最容易理解的一对一的查询，
比如，
设学生的姓名、性别保存在class1表中，
姓名、年龄保存在class2表中，
没有重名，
则姓名可以作为关键列。
如果要查询女生年龄大于大于15的人，
就需要使用两张表：</p>
<div class="sourceCode" id="cb894"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb894-1"><a href="prog-io.html#cb894-1"></a>dtmp &lt;-<span class="st"> </span><span class="kw">dbGetQuery</span>(</span>
<span id="cb894-2"><a href="prog-io.html#cb894-2"></a>  <span class="dt">conn=</span>con,</span>
<span id="cb894-3"><a href="prog-io.html#cb894-3"></a>  <span class="dt">statement=</span><span class="kw">paste</span>(</span>
<span id="cb894-4"><a href="prog-io.html#cb894-4"></a>    <span class="st">&quot;SELECT a.name, sex, age&quot;</span>,</span>
<span id="cb894-5"><a href="prog-io.html#cb894-5"></a>    <span class="st">&quot;  FROM class1 AS a, class2 AS b&quot;</span>,</span>
<span id="cb894-6"><a href="prog-io.html#cb894-6"></a>    <span class="st">&quot;  WHERE a.name = b.name AND sex=&#39;F&#39; AND age &gt;= 15&quot;</span>))</span>
<span id="cb894-7"><a href="prog-io.html#cb894-7"></a>dtmp</span>
<span id="cb894-8"><a href="prog-io.html#cb894-8"></a><span class="co">##     name sex age</span></span>
<span id="cb894-9"><a href="prog-io.html#cb894-9"></a><span class="co">## 1   Mary   F  15</span></span>
<span id="cb894-10"><a href="prog-io.html#cb894-10"></a><span class="co">## 2 Sharon   F  15</span></span></code></pre></div>
<p>上面的程序中WHERE子句中的<code>a.name = b.name</code>就是内连接。
在使用多张表时，
在<code>FROM</code>子句的多张表之间用逗号分隔，
一般在表名后用<code>AS</code>关键字引入一个临时的别名，
对两张表中共同的变量名如<code>name</code>需要用<code>a.name</code>和<code>b.name</code>区分。</p>
<p>内连接也支持一对多的连接。
比如，
下面的表将<code>F</code>映射到<code>女</code>, <code>M</code>映射到<code>男</code>，
可以按<code>sex</code>连接：</p>
<div class="sourceCode" id="cb895"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb895-1"><a href="prog-io.html#cb895-1"></a>dclass.sexm &lt;-<span class="st"> </span><span class="kw">data.frame</span>(</span>
<span id="cb895-2"><a href="prog-io.html#cb895-2"></a>  <span class="dt">sex =</span> <span class="kw">c</span>(<span class="st">&quot;F&quot;</span>, <span class="st">&quot;F&quot;</span>), </span>
<span id="cb895-3"><a href="prog-io.html#cb895-3"></a>  <span class="dt">sexc =</span> <span class="kw">c</span>(<span class="st">&quot;女&quot;</span>, <span class="st">&quot;男&quot;</span>))</span>
<span id="cb895-4"><a href="prog-io.html#cb895-4"></a><span class="cf">if</span>(<span class="kw">dbExistsTable</span>(con, <span class="st">&quot;sexm&quot;</span>)){</span>
<span id="cb895-5"><a href="prog-io.html#cb895-5"></a>  <span class="kw">dbRemoveTable</span>(con, <span class="st">&quot;sexm&quot;</span>)</span>
<span id="cb895-6"><a href="prog-io.html#cb895-6"></a>}</span>
<span id="cb895-7"><a href="prog-io.html#cb895-7"></a><span class="kw">dbWriteTable</span>(con, <span class="dt">name=</span><span class="st">&quot;sexm&quot;</span>, <span class="dt">value=</span>dclass.sexm)</span>
<span id="cb895-8"><a href="prog-io.html#cb895-8"></a></span>
<span id="cb895-9"><a href="prog-io.html#cb895-9"></a>dtmp &lt;-<span class="st"> </span><span class="kw">dbGetQuery</span>(</span>
<span id="cb895-10"><a href="prog-io.html#cb895-10"></a>  <span class="dt">conn=</span>con,</span>
<span id="cb895-11"><a href="prog-io.html#cb895-11"></a>  <span class="dt">statement=</span><span class="kw">paste</span>(</span>
<span id="cb895-12"><a href="prog-io.html#cb895-12"></a>    <span class="st">&quot;SELECT a.name, a.sex, sexc&quot;</span>,</span>
<span id="cb895-13"><a href="prog-io.html#cb895-13"></a>    <span class="st">&quot;  FROM class1 AS a, sexm AS b&quot;</span>,</span>
<span id="cb895-14"><a href="prog-io.html#cb895-14"></a>    <span class="st">&quot;  WHERE a.sex = b.sex AND name IN (&#39;Alice&#39;, &#39;Alfred&#39;)&quot;</span>))</span>
<span id="cb895-15"><a href="prog-io.html#cb895-15"></a>dtmp</span>
<span id="cb895-16"><a href="prog-io.html#cb895-16"></a><span class="co">##    name sex sexc</span></span>
<span id="cb895-17"><a href="prog-io.html#cb895-17"></a><span class="co">## 1 Alice   F   女</span></span>
<span id="cb895-18"><a href="prog-io.html#cb895-18"></a><span class="co">## 2 Alice   F   男</span></span></code></pre></div>
<p>在内连接时如果关键列的值匹配后形成多对多的连接，
将会做两两搭配组合。</p>
<p>内连接仅保留关键列能匹配的行。
如果希望保留不能匹配的行，
就要使用外连接，
分为：</p>
<ul>
<li>左外连接，保留左表的所有行，右表仅保留匹配的行；</li>
<li>右外连接，保留右表的所有行，左表仅保留匹配的行；</li>
<li>全外连接，保留所有匹配和不匹配的行。</li>
</ul>
<p>左外连接的程序示例：</p>
<div class="sourceCode" id="cb896"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb896-1"><a href="prog-io.html#cb896-1"></a>d1 &lt;-<span class="st"> </span><span class="kw">data.frame</span>(</span>
<span id="cb896-2"><a href="prog-io.html#cb896-2"></a>  <span class="dt">id =</span> <span class="kw">c</span>(<span class="st">&quot;a&quot;</span>, <span class="st">&quot;b&quot;</span>),</span>
<span id="cb896-3"><a href="prog-io.html#cb896-3"></a>  <span class="dt">x =</span> <span class="kw">c</span>(<span class="dv">11</span>, <span class="dv">12</span>))</span>
<span id="cb896-4"><a href="prog-io.html#cb896-4"></a>d2 &lt;-<span class="st"> </span><span class="kw">data.frame</span>(</span>
<span id="cb896-5"><a href="prog-io.html#cb896-5"></a>  <span class="dt">id =</span> <span class="kw">c</span>(<span class="st">&quot;a&quot;</span>, <span class="st">&quot;c&quot;</span>),</span>
<span id="cb896-6"><a href="prog-io.html#cb896-6"></a>  <span class="dt">y =</span> <span class="kw">c</span>(<span class="dv">21</span>, <span class="dv">22</span>))</span></code></pre></div>
<div class="sourceCode" id="cb897"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb897-1"><a href="prog-io.html#cb897-1"></a>knitr<span class="op">::</span><span class="kw">kable</span>(d1)</span></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="left">id</th>
<th align="right">x</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">a</td>
<td align="right">11</td>
</tr>
<tr class="even">
<td align="left">b</td>
<td align="right">12</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb898"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb898-1"><a href="prog-io.html#cb898-1"></a>knitr<span class="op">::</span><span class="kw">kable</span>(d2)</span></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="left">id</th>
<th align="right">y</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">a</td>
<td align="right">21</td>
</tr>
<tr class="even">
<td align="left">c</td>
<td align="right">22</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb899"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb899-1"><a href="prog-io.html#cb899-1"></a><span class="kw">dbWriteTable</span>(con, <span class="dt">name=</span><span class="st">&quot;table1&quot;</span>, <span class="dt">value=</span>d1)</span>
<span id="cb899-2"><a href="prog-io.html#cb899-2"></a><span class="kw">dbWriteTable</span>(con, <span class="dt">name=</span><span class="st">&quot;table2&quot;</span>, <span class="dt">value=</span>d2)</span>
<span id="cb899-3"><a href="prog-io.html#cb899-3"></a></span>
<span id="cb899-4"><a href="prog-io.html#cb899-4"></a>dtmp &lt;-<span class="st"> </span><span class="kw">dbGetQuery</span>(</span>
<span id="cb899-5"><a href="prog-io.html#cb899-5"></a>  <span class="dt">conn=</span>con,</span>
<span id="cb899-6"><a href="prog-io.html#cb899-6"></a>  <span class="dt">statement=</span><span class="kw">paste</span>(</span>
<span id="cb899-7"><a href="prog-io.html#cb899-7"></a>    <span class="st">&quot;SELECT a.id, x, y&quot;</span>,</span>
<span id="cb899-8"><a href="prog-io.html#cb899-8"></a>    <span class="st">&quot;  FROM table1 AS a LEFT JOIN table2 AS b&quot;</span>,</span>
<span id="cb899-9"><a href="prog-io.html#cb899-9"></a>    <span class="st">&quot;  ON A.id=b.id&quot;</span>))</span>
<span id="cb899-10"><a href="prog-io.html#cb899-10"></a>dtmp</span>
<span id="cb899-11"><a href="prog-io.html#cb899-11"></a><span class="co">## id  x  y</span></span>
<span id="cb899-12"><a href="prog-io.html#cb899-12"></a><span class="co">## 1  a 11 21</span></span>
<span id="cb899-13"><a href="prog-io.html#cb899-13"></a><span class="co">## 2  b 12 NA</span></span></code></pre></div>
<p>右外连接用<code>RIGHT JOIN</code>关键字，
全外连接用<code>FULL OUTER JOIN</code>关键字。
但SQLite目前不支持右外连接和全外连接，
其它的数据库一般是可以支持的。</p>
</div>
</div>
<div id="p-io-db-oracle" class="section level3">
<h3><span class="header-section-number">15.7.4</span> 访问Oracle数据库</h3>
<p>Oracle是最著名的数据库服务器软件。
要访问的数据库，
可以是安装在本机上的，
也可以是安装在网络上某个服务器中的。
如果是远程访问，
需要在本机安装Oracle的客户端软件。</p>
<p>假设已经在本机安装了Oracle服务器软件，
并设置orcl为本机安装的Oracle数据库软件或客户端软件定义的本地或远程Oracle数据库的标识，
test和oracle是此数据库的用户名和密码，
testtab是此数据库中的一个表。</p>
<p>为了在R中访问Oracle数据库服务器中的数据库，
在R中需要安装ROracle包。
这是一个源代码扩展包，
需要用户自己编译安装。
在MS Windows环境下，
需要安装R软件和RTools软件包（在CRAN网站的Windows版本软件下载栏目中）。
在MS Windows命令行窗口，用如下命令编译R的ROracle扩展包：</p>
<pre><code>set OCI_LIB32=D:\oracle\product\10.2.0\db_1\bin
set OCI_INC=D:\oracle\product\10.2.0\db_1\oci\include
set PATH=D:\oracle\product\10.2.0\db_1\bin;C:\Rtools\bin;C:\Rtools\gcc-4.6.3\bin;&quot;%PATH%&quot;
C:\R\R-3.2.0\bin\i386\rcmd INSTALL ROracle_1.2-1.tar.gz</code></pre>
<p>其中的前三个set命令设置了Oracle数据库程序或客户端程序链接库、头文件和可执行程序的位置，
第三个set命令还设置了RTools编译器的路径。
这些路径需要根据实际情况修改。
这里的设置是在本机运行的Oracle 10g服务器软件的情况。
最后一个命令编译ROracle扩展包，相应的rcmd程序路径需要改成自己的安装路径。</p>
<p>如果服务器在远程服务器上，
设远程服务器的数据库标识名为ORCL，
本机需要安装客户端Oracle instant client软件，
此客户端软件需要与服务器同版本号，
如<code>instantclient-basic-win32-10.2.0.5.zip</code>,
这个软件不需要安装，
只需要解压到一个目录如 <code>C:\instantclient_10_2</code>中。
在本机（以MS Windows操作系统为例）中，
双击系统，选择高级–环境变量，
增加如下三个环境变量：</p>
<pre><code>NLS_LANG = SIMPLIFIED CHINESE_CHINA.ZHS16GBK
ORACLE_HOME = C:\instantclient_10_2
TNS_ADMIN = C:\instantclient_10_2</code></pre>
<p>并在环境变量PATH的值的末尾增加Oracle客户端软件所在的目录 <code>verb|C:\instantclient_10_2</code>,
并与前面内容用分号分开。</p>
<p>然后，在client所在的目录 <code>C:\instantclient_10_2</code> 中增加如下内容的tnsnames.ora`文件</p>
<pre><code>  orcl = 
  (DESCRIPTION =
    (ADDRESS = (PROTOCOL = TCP)(HOST = 192.168.1.102 )
     (PORT = 1521))
    (CONNECT_DATA =
      (SERVER = DEDICATED)
      (SERVICE_NAME = orcl)
    )
  )</code></pre>
<p>其中HOST的值是安装Oracle服务器的服务器的IP地址，
orcl是一个服务器实例名,
能够在服务器端的tnsnames.ora文件中查到，
等号前面的orcl是对数据库给出的客户端别名，
这里就干脆用了和服务器端的数据库标识名相同的名字orcl。</p>
<p>不论是在本机的数据框服务器还是在本机安装设置好客户端后，
在R中用如下的程序可以读入数据库中的表：</p>
<div class="sourceCode" id="cb903"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb903-1"><a href="prog-io.html#cb903-1"></a>libraryROracle<span class="er">)</span></span>
<span id="cb903-2"><a href="prog-io.html#cb903-2"></a>drv &lt;-<span class="st"> </span><span class="kw">dbDriver</span>(<span class="st">&quot;Oracle&quot;</span>)</span>
<span id="cb903-3"><a href="prog-io.html#cb903-3"></a></span>
<span id="cb903-4"><a href="prog-io.html#cb903-4"></a>conn &lt;-<span class="st"> </span><span class="kw">dbConnect</span>(drv, <span class="dt">username=</span><span class="st">&quot;test&quot;</span>, </span>
<span id="cb903-5"><a href="prog-io.html#cb903-5"></a>                  <span class="dt">password=</span><span class="st">&quot;oracle&quot;</span>,  <span class="dt">dbname=</span><span class="st">&quot;orcl&quot;</span>)</span>
<span id="cb903-6"><a href="prog-io.html#cb903-6"></a></span>
<span id="cb903-7"><a href="prog-io.html#cb903-7"></a>rs &lt;-<span class="st"> </span><span class="kw">dbSendQuery</span>(conn, <span class="st">&quot;select * from testtab&quot;</span>)</span>
<span id="cb903-8"><a href="prog-io.html#cb903-8"></a>d &lt;-<span class="st"> </span><span class="kw">fetch</span>(rs)</span></code></pre></div>
<p>可以用<code>dbGetTable()</code>取出一个表并存入R数据框中。
用<code>dbSendQuery()</code>发出一个SQL命令，
用<code>fetch()</code>可以一次性取回或者分批取回，
在表行数很多时这种方法更适用。</p>
</div>
<div id="p-io-db-mysql" class="section level3">
<h3><span class="header-section-number">15.7.5</span> MySQL数据库访问</h3>
<p>MySQL是高效、免费的数据库服务器软件，
在很多行业尤其是互联网行业占有很大的市场。
为了在R中访问MySQL数据库，
只要安装RMySQL扩展包（有二进制版本）。
现在性能更好的一个连接MySQL的扩展包是RMariaDB。</p>
<p>假设服务器地址在 192.168.1.111,
可访问的数据库名为 world,
用户为 test,
密码为 mysql。
设world库中有表country。</p>
<p>在R中要访问MySQL数据框，首先要建立与数据库服务器的连接:</p>
<div class="sourceCode" id="cb904"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb904-1"><a href="prog-io.html#cb904-1"></a><span class="kw">library</span>(RMySQL)</span>
<span id="cb904-2"><a href="prog-io.html#cb904-2"></a>con &lt;-<span class="st"> </span><span class="kw">dbConnect</span>(RMySQL<span class="op">::</span><span class="kw">MySQL</span>(), </span>
<span id="cb904-3"><a href="prog-io.html#cb904-3"></a>    <span class="dt">dbname=</span><span class="st">&quot;world&quot;</span>,</span>
<span id="cb904-4"><a href="prog-io.html#cb904-4"></a>    <span class="dt">username=</span><span class="st">&quot;test&quot;</span>, <span class="dt">password=</span><span class="st">&quot;mysql&quot;</span>,</span>
<span id="cb904-5"><a href="prog-io.html#cb904-5"></a>    <span class="dt">host=</span><span class="st">&quot;192.168.1.111&quot;</span>)</span></code></pre></div>
<p>下列代码列出world库中的所有表，
然后列出其中的country表的所有变量:</p>
<div class="sourceCode" id="cb905"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb905-1"><a href="prog-io.html#cb905-1"></a><span class="kw">dbListTables</span>(con)</span>
<span id="cb905-2"><a href="prog-io.html#cb905-2"></a><span class="kw">dbListFields</span>(con, <span class="st">&quot;country&quot;</span>)</span></code></pre></div>
<p>下列代码取出country表并存入R数据框d.country中:</p>
<div class="sourceCode" id="cb906"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb906-1"><a href="prog-io.html#cb906-1"></a>d.country &lt;-<span class="st"> </span><span class="kw">dbReadTable</span>(con, <span class="st">&quot;country&quot;</span>)</span></code></pre></div>
<p>下列代码把R中的示例数据框USArrests写入MySQL库world的表arrests中:</p>
<div class="sourceCode" id="cb907"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb907-1"><a href="prog-io.html#cb907-1"></a><span class="kw">data</span>(USArrests)</span>
<span id="cb907-2"><a href="prog-io.html#cb907-2"></a><span class="kw">dbWriteTable</span>(con, <span class="st">&quot;arrests&quot;</span>, USArrests, </span>
<span id="cb907-3"><a href="prog-io.html#cb907-3"></a>    <span class="dt">overwrite=</span><span class="ot">TRUE</span>)</span></code></pre></div>
<p>当然，这需要用户对该库有写权限。</p>
<p>可以用<code>dbGetQuery()</code>执行一个SQL查询并返回结果，如</p>
<div class="sourceCode" id="cb908"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb908-1"><a href="prog-io.html#cb908-1"></a><span class="kw">dbGetQuery</span>(con, <span class="st">&quot;select count(*) from arrests&quot;</span>)</span></code></pre></div>
<p>当表很大时，可以用<code>dbSendQuery()</code>发送一个SQL命令，
返回一个查询结果指针对象，
用<code>dbFetch()</code>从指针对象位置读取指定行数，
用<code>dbHasCompleted()</code>判断是否已读取结束。如</p>
<div class="sourceCode" id="cb909"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb909-1"><a href="prog-io.html#cb909-1"></a>res &lt;-<span class="st"> </span><span class="kw">dbSendQuery</span>(con, <span class="st">&quot;SELECT * FROM country&quot;</span>)</span>
<span id="cb909-2"><a href="prog-io.html#cb909-2"></a><span class="cf">while</span>(<span class="op">!</span><span class="kw">dbHasCompleted</span>(res)){</span>
<span id="cb909-3"><a href="prog-io.html#cb909-3"></a>  chunk &lt;-<span class="st"> </span><span class="kw">dbFetch</span>(res, <span class="dt">n =</span> <span class="dv">5</span>)</span>
<span id="cb909-4"><a href="prog-io.html#cb909-4"></a>  <span class="kw">print</span>(chunk[,<span class="dv">1</span><span class="op">:</span><span class="dv">2</span>])</span>
<span id="cb909-5"><a href="prog-io.html#cb909-5"></a>}</span>
<span id="cb909-6"><a href="prog-io.html#cb909-6"></a><span class="kw">dbClearResult</span>(res)</span></code></pre></div>
<p>数据库使用完毕时，
需要关闭用<code>dbConnect()</code>打开的连接：</p>
<div class="sourceCode" id="cb910"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb910-1"><a href="prog-io.html#cb910-1"></a><span class="kw">dbDisconnect</span>(con)</span></code></pre></div>
</div>
<div id="p-io-excel-rodbc" class="section level3">
<h3><span class="header-section-number">15.7.6</span> 利用RODBC访问Access数据库</h3>
<p>扩展包RODBC在MS Windows操作系统中可以访问Excel、Access、dBase、FoxPro等微机数据库软件的数据库，
也可以在安装了需要的ODBC客户端后访问Oracle等数据库。
用odbc包访问远程数据库速度更快，
而且遵从DBI的接口规范，
RODBC不使用DBI接口规范。</p>
<p>假设有Access数据库在文件<code>c:/Friends/birthdays.mdb</code>中，
内有两个表Men和Women，
每个表包含域Year, Month, Day, First Name, Last Name, Death。
域名应尽量避免用空格。</p>
<p>下面的程序把女性记录的表读入为R数据框:</p>
<div class="sourceCode" id="cb911"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb911-1"><a href="prog-io.html#cb911-1"></a><span class="kw">library</span>(RODBC)</span>
<span id="cb911-2"><a href="prog-io.html#cb911-2"></a>con &lt;-<span class="st"> </span><span class="kw">odbcConnectAccess</span>(<span class="st">&quot;c:/Friends/birthdays.mdb&quot;</span>)</span>
<span id="cb911-3"><a href="prog-io.html#cb911-3"></a>women &lt;-<span class="st"> </span><span class="kw">sqlFetch</span>(con, <span class="dt">sqtable=</span><span class="st">&quot;Women&quot;</span>)</span>
<span id="cb911-4"><a href="prog-io.html#cb911-4"></a><span class="kw">close</span>(con)</span></code></pre></div>
<p>RODBC还有许多与数据库访问有关的函数，
比如，<code>sqlQuery()</code>函数可以向打开的数据库提交任意符合标准的SQL查询，
<code>sqlSave()</code>可以将R数据框保存到数据库中。</p>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="prog-type-ws.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="prog-control.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="static/js/app.min.js"></script>
<script src="static/js/lunr.js"></script>
<script src="static/js/clipboard.min.js"></script>
<script src="static/js/plugin-search.js"></script>
<script src="static/js/plugin-sharing.js"></script>
<script src="static/js/plugin-fontsettings.js"></script>
<script src="static/js/plugin-bookdown.js"></script>
<script src="static/js/jquery.highlight.js"></script>
<script src="static/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["Rbook.pdf"],
"toc": {
"collapse": "section",
"scroll_highlight": true
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
